{
	"id": 132273961,
	"body": "Here's all the possible usages of SetFinalizer in the program:\r\n\r\n```\r\nsrc/github.com/jtolds/oom-watcher/eventfd/eventfd.go\r\n32:\truntime.SetFinalizer(efd, func(efd *EventFD) {\r\n33-\t\tefd.Close()\r\n34-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/cert.go\r\n79:\truntime.SetFinalizer(name, func(n *Name) {\r\n80-\t\tC.X509_NAME_free(n.name)\r\n81-\t})\r\n\r\n126:\truntime.SetFinalizer(c, func(c *Certificate) {\r\n127-\t\tC.X509_free(c.x)\r\n128-\t})\r\n\r\n339:\truntime.SetFinalizer(x, func(x *Certificate) {\r\n340-\t\tC.X509_free(x.x)\r\n341-\t})\r\n\r\n365:\truntime.SetFinalizer(key, func(key *pKey) {\r\n366-\t\tC.EVP_PKEY_free(key.key)\r\n367-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/ciphers.go\r\n133:\truntime.SetFinalizer(ctx, func(ctx *cipherCtx) {\r\n134-\t\tC.EVP_CIPHER_CTX_free(ctx.ctx)\r\n135-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/conn.go\r\n159:\truntime.SetFinalizer(c, func(c *Conn) {\r\n160-\t\tc.into_ssl.Disconnect(into_ssl_cbio)\r\n161-\t\tc.from_ssl.Disconnect(from_ssl_cbio)\r\n162-\t\tC.SSL_free(c.ssl)\r\n163-\t})\r\n\r\n335:\truntime.SetFinalizer(cert, func(cert *Certificate) {\r\n336-\t\tC.X509_free(cert.x)\r\n337-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/ctx.go\r\n141:\truntime.SetFinalizer(c, func(c *Ctx) {\r\n142-\t\tC.SSL_CTX_free(c.ctx)\r\n143-\t})\r\n\r\n328:\truntime.SetFinalizer(store, func(s *CertificateStore) {\r\n329-\t\tC.X509_STORE_free(s.store)\r\n330-\t})\r\n\r\n402:\truntime.SetFinalizer(cert, func(cert *Certificate) {\r\n403-\t\tC.X509_free(cert.x)\r\n404-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/dhparam.go\r\n49:\truntime.SetFinalizer(dhparams, func(dhparams *DH) {\r\n50-\t\tC.DH_free(dhparams.dh)\r\n51-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/engine.go\r\n47:\truntime.SetFinalizer(e, func(e *Engine) {\r\n48-\t\tC.ENGINE_finish(e.e)\r\n49-\t\tC.ENGINE_free(e.e)\r\n50-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/key.go\r\n241:\truntime.SetFinalizer(p, func(p *pKey) {\r\n242-\t\tC.EVP_PKEY_free(p.key)\r\n243-\t})\r\n\r\n276:\truntime.SetFinalizer(p, func(p *pKey) {\r\n277-\t\tC.EVP_PKEY_free(p.key)\r\n278-\t})\r\n\r\n311:\truntime.SetFinalizer(p, func(p *pKey) {\r\n312-\t\tC.EVP_PKEY_free(p.key)\r\n313-\t})\r\n\r\n333:\truntime.SetFinalizer(p, func(p *pKey) {\r\n334-\t\tC.EVP_PKEY_free(p.key)\r\n335-\t})\r\n\r\nsrc/github.com/spacemonkeygo/openssl/sha1.go\r\n45:\truntime.SetFinalizer(hash, func(hash *SHA1Hash) { hash.Close() })\r\n\r\nsrc/github.com/spacemonkeygo/openssl/sha256.go\r\n45:\truntime.SetFinalizer(hash, func(hash *SHA256Hash) { hash.Close() })\r\n\r\nsrc/sm/flud/diskq/wrappers.go\r\n// note: finalizerClose is a top level function. this is the body:\r\n// func finalizerClose(f *FileWrapper) {\r\n// \tdefer f.close_cb()\r\n// \tlogger.Critf(\"leaked filehandle: %s\", f.fh.Name())\r\n// \tmon.Event(\"leaked_filehandle\")\r\n// \tlogger.Errore(f.fh.Close())\r\n// }\r\n47:\truntime.SetFinalizer(f, finalizerClose)\r\n\r\n116:\truntime.SetFinalizer(f, nil)\r\n\r\nsrc/sm/flud/utils/crypto/sha_linux.go\r\n86:\truntime.SetFinalizer(a, func(a *afALG) {\r\n87-\t\ta.Close()\r\n88-\t})\r\n\r\n145:\truntime.SetFinalizer(a, nil)\r\n\r\nsrc/sm/leveldb-cgo/leveldb/leveldb.go\r\n116:\truntime.SetFinalizer(batch, func(batch *WriteBatch) {\r\n117-\t\tbatch.Close()\r\n118-\t})\r\n\r\n126:\t\truntime.SetFinalizer(self, nil)\r\n\r\n194:\truntime.SetFinalizer(db, func(db *DB) {\r\n195-\t\tdb.Close(ctx)\r\n196-\t})\r\n\r\n257:\truntime.SetFinalizer(self, nil)\r\n\r\n437:\truntime.SetFinalizer(iterator, func(iterator *Iterator) {\r\n438-\t\titerator.Close(ctx)\r\n439-\t})\r\n\r\n504:\truntime.SetFinalizer(self, nil)\r\n\r\nsrc/sm/space/crypto/aes_linux.go\r\n227:\truntime.SetFinalizer(a, func(a *afALG) {\r\n228-\t\ta.Close()\r\n229-\t})\r\n\r\n261:\truntime.SetFinalizer(a, nil)\r\n\r\nsrc/sm/space/network/chunk.go\r\n102:\truntime.SetFinalizer(c, func(c *chunkDownloader) { c.fec.Destroy() })\r\n```\r\n\r\nAll of them seem innocuous from the body and almost all of them are performing CGO calls to free resources. Nothing stood out to me as weird. Let me know if you want to see the bodies of any of the dependent methods, and I'll try to get them.\r\n\r\nA significant portion are open source, though. Only the sm/... packages are not.",
	"user": {
		"login": "zeebo",
		"id": 96925,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-08-18T16:51:40Z",
	"updated_at": "2015-08-18T16:52:16Z"
}
