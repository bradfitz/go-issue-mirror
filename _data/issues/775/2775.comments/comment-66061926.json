{
	"id": 66061926,
	"body": "\u003ca id=\"c3\"\u003e\u003c/a\u003eComment 3:\n\n\u003cpre\u003eAfter building from the tip @ commit a461bcce05f6 which fixed this issue, I have a new\nissue while trying to go install libraries from or into my GOPATH. I think I've managed\nto isolate the circumstances under which this happens.\n\nMy GOPATH package dir is:\n\n    /home/ganderson/go/pkg/linux_amd64\n\nFirst, here's what actually works.\n\nAs long as there are no binary packages installed to ~/go/pkg then I can go build any\npackage whose source is located in ~/go/src:\n\n    ☿ ganderson@excession [17:48:09] ~/src/go/golang  on default at tip?\n    : go build -v github.com/ha/doozer\n    code.google.com/p/goprotobuf/proto\n    github.com/kr/pretty.go\n    github.com/ha/doozer\n\nI can successfully go install a single package which has no dependancies:\n\n    ☿ ganderson@excession [17:48:12] ~/src/go/golang  on default at tip?\n    : go install -v github.com/kr/pretty.go/\n    github.com/kr/pretty.go\n\nNo here is where things start to break. Once I try to build or install a package which\nhas a dependency already installed as a package, the command fails... Here is the\nstructure of ~/go/pkg after the previous install command:\n\n    ☿ ganderson@excession [17:52:27] ~/src/go/golang  on default at tip?\n    : tree ~/go/pkg/linux_amd64/\n    /home/ganderson/go/pkg/linux_amd64/                                                                                                                                                                                                          \n    └── github.com                                                                                                                                                                                                                               \n        └── kr                                                                                                                                                                                                                                   \n            └── pretty.go.a                                                                                                                                                                                                                      \n                                                                                                                                                                                                                                             \n    2 directories, 1 file\n\nNow if I try to either go build or go install a package which has\ngithub.com/kr/pretty.go as a dependency the command fails, e.g.\n\n    ☿ ganderson@excession [17:54:01] ~/src/go/golang  on default at tip?                                                                                                                                                                         \n    : go build -v github.com/ha/doozer                                                                                                                                                                                                           \n    code.google.com/p/goprotobuf/proto                                                                                                                                                                                                           \n    github.com/ha/doozer                                                                                                                                                                                                                         \n    # github.com/ha/doozer                                                                                                                                                                                                                       \n    ../../../go/src/github.com/ha/doozer/conn.go:7: can't find import: \"github.com/kr/pretty.go\"\n\nIf I clean my ~/go/pkg dir and try to go install github.com/ha/doozer directly:\n\n    ☿ ganderson@excession [17:55:55] ~/src/go/golang  on default at tip?                                                                                                                                                                         \n    : go install -v github.com/ha/doozer\n    code.google.com/p/goprotobuf/proto                                                                                                                                                                                                           \n    github.com/kr/pretty.go                                                                                                                                                                                                                      \n    github.com/ha/doozer                                                                                                                                                                                                                         \n    # github.com/ha/doozer                                                                                                                                                                                                                       \n    ../../../go/src/github.com/ha/doozer/conn.go:4: can't find import: \"code.google.com/p/goprotobuf/proto\"\n\nNote that both pretty.go and protobuf are both compiled and installed to ~/go/pkg during\nthe command but trying to build doozer against these fails.\n\n    ganderson@excession [17:58:26] ~/src/go/golang  on default at tip?                                                                                                                                                                         \n    : tree ~/go/pkg/linux_amd64/                                                                                                                                                                                                         \n    /home/ganderson/go/pkg/linux_amd64/                                                                                                                                                                                                          \n    ├── code.google.com                                                                                                                                                                                                                          \n    │   └── p                                                                                                                                                                                                                                    \n    │       └── goprotobuf                                                                                                                                                                                                                       \n    │           └── proto.a                                                                                                                                                                                                                      \n    └── github.com                                                                                                                                                                                                                               \n        └── kr                                                                                                                                                                                                                                   \n            └── pretty.go.a                                                                                                                                                                                                                      \n                                                                                                                                                                                                                                             \n    5 directories, 2 files\n\n\nTo summarise the issue - I can go build or go install packages in GOPATH, as long as a\ndependency is not already installed to $GOPATH/pkg. This issue does *not* appear to\naffect GOROOT.\u003c/pre\u003e",
	"user": {
		"login": "gnanderson",
		"id": 38514,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2012-03-02T17:06:03Z",
	"updated_at": "2014-12-08T10:14:44Z"
}
