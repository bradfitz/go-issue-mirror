{
	"id": 146576172,
	"body": "But I hit another issue with dlclose.\r\n\r\nSo when I use code linke this: https://github.com/pavel-odintsov/gobgp_api_cpp_client/blob/master/gobgp_api_client.cc#L265 and call dlclose before toolkit exit I got segmentation fault.\r\n\r\n```bash\r\nLD_LIBRARY_PATH=\"/opt/grpc_0_11_1_7a94236d698477636dd06282f12f706cad527029/lib;/opt/protobuf_3.0.0_alpha4/lib;/opt//libgobgp_1_0_0/lib/\" gdb ./gobgp_api_client \r\nGNU gdb (Debian 7.7.1+dfsg-5) 7.7.1\r\nCopyright (C) 2014 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later \u003chttp://gnu.org/licenses/gpl.html\u003e\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-linux-gnu\".\r\nType \"show configuration\" for configuration details.\r\nFor bug reporting instructions, please see:\r\n\u003chttp://www.gnu.org/software/gdb/bugs/\u003e.\r\nFind the GDB manual and other documentation resources online at:\r\n\u003chttp://www.gnu.org/software/gdb/documentation/\u003e.\r\nFor help, type \"help\".\r\nType \"apropos word\" to search for commands related to \"word\"...\r\nReading symbols from ./gobgp_api_client...done.\r\n(gdb) run\r\nStarting program: /usr/src/gobgp_api_cpp_client/gobgp_api_client \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\nwarning: File \"/usr/local/go/src/runtime/runtime-gdb.py\" auto-loading has been declined by your `auto-load safe-path' set to \"$debugdir:$datadir/auto-load\".\r\nTo enable execution of this file add\r\n\tadd-auto-load-safe-path /usr/local/go/src/runtime/runtime-gdb.py\r\nline to your configuration file \"/root/.gdbinit\".\r\nTo completely disable this security protection add\r\n\tset auto-load safe-path /\r\nline to your configuration file \"/root/.gdbinit\".\r\nFor more information about this security protection see the\r\n\"Auto-loading safe path\" section in the GDB manual.  E.g., run from the shell:\r\n\tinfo \"(gdb)Auto-loading safe path\"\r\n[New Thread 0x7ffff4c71700 (LWP 22000)]\r\n[New Thread 0x7fffeffff700 (LWP 22001)]\r\n[New Thread 0x7fffef7fe700 (LWP 22002)]\r\n[New Thread 0x7fffeeffd700 (LWP 22003)]\r\n[New Thread 0x7fffee7fc700 (LWP 22004)]\r\n[New Thread 0x7fffedffb700 (LWP 22005)]\r\n[Thread 0x7fffedffb700 (LWP 22005) exited]\r\nList of announced prefixes for route family: 65537\r\n\r\nPrefix: 10.10.20.33/32\r\nNLRI: {\"nlri\":{\"prefix\":\"10.10.20.33/32\"},\"attrs\":[{\"type\":1,\"value\":2},{\"type\":3,\"nexthop\":\"10.10.1.99\"}]}\r\n\r\n\r\nList of announced prefixes for route family: 65669\r\n\r\nPrefix: [destination:10.0.0.0/24][protocol: tcp][source:20.0.0.0/24]\r\nNLRI: {\"nlri\":{\"value\":[{\"type\":1,\"value\":{\"prefix\":\"10.0.0.0/24\"}},{\"type\":3,\"value\":[{\"op\":129,\"value\":6}]},{\"type\":2,\"value\":{\"prefix\":\"20.0.0.0/24\"}}]},\"attrs\":[{\"type\":1,\"value\":2},{\"type\":14,\"nexthop\":\"0.0.0.0\",\"afi\":1,\"safi\":133,\"value\":[{\"value\":[{\"type\":1,\"value\":{\"prefix\":\"10.0.0.0/24\"}},{\"type\":3,\"value\":[{\"op\":129,\"value\":6}]},{\"type\":2,\"value\":{\"prefix\":\"20.0.0.0/24\"}}]}]},{\"type\":16,\"value\":[{\"type\":128,\"subtype\":8,\"value\":\"10:10\"}]}]}\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffee7fc700 (LWP 22004)]\r\n0x00007ffff50c91a1 in ?? ()\r\n(gdb) bt\r\n#0  0x00007ffff50c91a1 in ?? ()\r\n#1  0x00007ffff50932b3 in ?? ()\r\n#2  0x000000c820066110 in ?? ()\r\n#3  0x0000000000000000 in ?? ()\r\n(gdb) quit\r\nA debugging session is active.\r\n\r\n\tInferior 1 [process 21996] will be killed.\r\n\r\nQuit anyway? (y or n) y\r\n```\r\n\r\nDo you have any options to shutdown Golang's runtime correctly? ",
	"user": {
		"login": "pavel-odintsov",
		"id": 2744166,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-10-08T15:16:22Z",
	"updated_at": "2015-10-08T15:16:22Z"
}
