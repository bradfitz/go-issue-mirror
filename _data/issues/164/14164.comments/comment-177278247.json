{
	"id": 177278247,
	"body": "Definitively an error with the rewritten parser. Given a 3rd file, main.go:\r\n```\r\npackage main\r\nimport \"./a\"\r\nfunc main() {}\r\n```\r\nThe error is due to a bug in the parser:\r\n```\r\n$ go tool compile a.go a_test.go\r\n$ go tool compile -h main.go \r\nmain.go:2: syntax error: unexpected @\r\npanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal 0xb code=0x1 addr=0x0 pc=0x1fded0]\r\n\r\ngoroutine 1 [running]:\r\ncmd/compile/internal/gc.hcrash()\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/subr.go:96 +0x50\r\ncmd/compile/internal/gc.yyerrorl(0x2, 0x442ee0, 0x2, 0xc8200aee98, 0x1, 0x1)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/subr.go:103 +0x76\r\ncmd/compile/internal/gc.Yyerror(0x484780, 0x1b, 0xc8200af008, 0x1, 0x1)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/subr.go:137 +0x464\r\ncmd/compile/internal/gc.(*parser).syntax_error(0x974b80, 0x0, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:158 +0x1af\r\ncmd/compile/internal/gc.(*parser).interfacedcl(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2513 +0x25f\r\ncmd/compile/internal/gc.(*parser).interfacetype(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2008 +0x71\r\ncmd/compile/internal/gc.(*parser).try_ntype(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1914 +0x3b7\r\ncmd/compile/internal/gc.(*parser).ntype(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1831 +0x2e\r\ncmd/compile/internal/gc.(*parser).operand(0x974b80, 0x0, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1496 +0x1a7\r\ncmd/compile/internal/gc.(*parser).pexpr(0x974b80, 0x0, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1537 +0x48\r\ncmd/compile/internal/gc.(*parser).uexpr(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1399 +0x19f\r\ncmd/compile/internal/gc.(*parser).bexpr(0x974b80, 0x1, 0x974b88)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1278 +0x25\r\ncmd/compile/internal/gc.(*parser).expr(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1297 +0x33\r\ncmd/compile/internal/gc.(*parser).pexpr(0x974b80, 0xc800000000, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1554 +0x66d\r\ncmd/compile/internal/gc.(*parser).uexpr(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1399 +0x19f\r\ncmd/compile/internal/gc.(*parser).bexpr(0x974b80, 0x1, 0x117a8)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1278 +0x25\r\ncmd/compile/internal/gc.(*parser).expr(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:1297 +0x33\r\ncmd/compile/internal/gc.(*parser).expr_list(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2769 +0x2e\r\ncmd/compile/internal/gc.(*parser).simple_stmt(0x974b80, 0x1, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:712 +0x4c2\r\ncmd/compile/internal/gc.(*parser).stmt(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2631 +0x6f\r\ncmd/compile/internal/gc.(*parser).stmt_list(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2714 +0x59\r\ncmd/compile/internal/gc.(*parser).fnbody(0x974b80, 0x0)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:2215 +0x5d\r\ncmd/compile/internal/gc.(*parser).hidden_import(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:3000 +0x178\r\ncmd/compile/internal/gc.(*parser).hidden_import_list(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:3444 +0x28\r\ncmd/compile/internal/gc.(*parser).import_there(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:503 +0x26\r\ncmd/compile/internal/gc.(*parser).import_stmt(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:369 +0x6b\r\ncmd/compile/internal/gc.(*parser).import_(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:357 +0xb5\r\ncmd/compile/internal/gc.(*parser).file(0x974b80)\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:316 +0x53\r\ncmd/compile/internal/gc.parse_file()\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/parser.go:56 +0x5a\r\ncmd/compile/internal/gc.Main()\r\n\t/Users/gri/go/src/cmd/compile/internal/gc/lex.go:345 +0x1d44\r\ncmd/compile/internal/amd64.Main()\r\n\t/Users/gri/go/src/cmd/compile/internal/amd64/galign.go:127 +0x58d\r\nmain.main()\r\n\t/Users/gri/go/src/cmd/compile/main.go:32 +0x395\r\n```\r\n\r\nparser.interfacedcl needs to accept also '@', not just LNAME.\r\n\r\nWill fix.\r\n",
	"user": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-01-30T19:07:38Z",
	"updated_at": "2016-01-30T19:07:38Z"
}
