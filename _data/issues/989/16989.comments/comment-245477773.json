{
	"id": 245477773,
	"body": "I have gomobile working on FreeBSD with the following small patch.  The Linux version of NDK works under FreeBSD's Linux emulation layer.\r\n \r\n```\r\n--- init.go.orig        2016-09-07 22:25:25.972598863 -0400\r\n+++ init.go     2016-09-07 22:26:26.739591760 -0400\r\n@@ -402,6 +402,8 @@\r\n                \"android-%s/toolchains/llvm/prebuilt\", ndkVersion))\r\n        if goos == \"windows\" \u0026\u0026 ndkarch == \"x86\" {\r\n                llvmsrc = filepath.Join(llvmsrc, \"windows\")\r\n+    } else if goos == \"freebsd\" {\r\n+               llvmsrc = filepath.Join(llvmsrc, \"linux-\"+ndkarch)\r\n        } else {\r\n                llvmsrc = filepath.Join(llvmsrc, goos+\"-\"+ndkarch)\r\n        }\r\n@@ -431,6 +433,8 @@\r\n                        \"android-%s/toolchains/%s/prebuilt\", ndkVersion, toolchain.gcc))\r\n                if goos == \"windows\" \u0026\u0026 ndkarch == \"x86\" {\r\n                        ndkpath = filepath.Join(ndkpath, \"windows\")\r\n+        } else if goos == \"freebsd\" {\r\n+                       ndkpath = filepath.Join(ndkpath, \"linux-\"+ndkarch)\r\n                } else {\r\n                        ndkpath = filepath.Join(ndkpath, goos+\"-\"+ndkarch)\r\n                }\r\n@@ -467,7 +471,13 @@\r\n }\r\n\r\n func fetchStrippedNDK() error {\r\n-       url := \"https://dl.google.com/go/mobile/gomobile-\" + ndkVersion + \"-\" + goos + \"-\" + ndkarch + \".tar.gz\"\r\n+    var url string;\r\n+    // To support FreeBSD, use the Linux version under 64-bit linux emulation.\r\n+    if goos == \"freebsd\" {\r\n+           url = \"https://dl.google.com/go/mobile/gomobile-\" + ndkVersion + \"-linux-\" + ndkarch + \".tar.gz\"\r\n+    } else {\r\n+           url = \"https://dl.google.com/go/mobile/gomobile-\" + ndkVersion + \"-\" + goos + \"-\" + ndkarch + \".tar.gz\"\r\n+    }\r\n        archive, err := fetch(url)\r\n        if err != nil {\r\n                return err\r\n@@ -476,7 +486,13 @@\r\n }\r\n\r\n func fetchFullNDK() error {\r\n-       url := \"https://dl.google.com/android/repository/android-\" + ndkVersion + \"-\" + goos + \"-\" + ndkarch + \".zip\"\r\n+    // To support FreeBSD, use the Linux version under 64-bit linux emulation.\r\n+    var url string;\r\n+    if goos == \"freebsd\" {\r\n+           url = \"https://dl.google.com/android/repository/android-\" + ndkVersion + \"-linux-\" + ndkarch + \".zip\"\r\n+    } else {\r\n+           url = \"https://dl.google.com/android/repository/android-\" + ndkVersion + \"-\" + goos + \"-\" + ndkarch + \".zip\"\r\n+    }\r\n        archive, err := fetch(url)\r\n        if err != nil {\r\n                return err\r\n```\r\n\r\nTo run on FreeBSD with this patch:\r\n- Set `DEFAULT_VERSIONS+=linux=c7_64` in `/etc/make.conf`\r\n- Install `/usr/ports/emulation/linux_base-c7`\r\n- Copy a `libc++.so` from a recent Linux repo into `/compat/linux/lib64`\r\n\r\nThe gomobile tool will now work as normal.\r\n\r\nI've created a PR upstream for proper NDK support on FreeBSD. If that ever happens, this patch will not be necessary.\r\nhttps://code.google.com/p/android/issues/detail?id=221683",
	"user": {
		"login": "rwestlund",
		"id": 7526789,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-09-08T02:37:38Z",
	"updated_at": "2016-09-08T02:37:38Z"
}
