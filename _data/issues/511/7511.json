{
	"id": 51286804,
	"number": 7511,
	"state": "closed",
	"title": "runtime: concurrent GC sweep broke runtime tests on Solaris",
	"body": "\u003cpre\u003eRuntime tests will deadlock in various places, usually in\nTestLockedDeadlock2:\n    \n    : oos:src; GOMAXPROCS=2 go test -v -short -timeout=60s -cpu=1,2,4 runtime\n    === RUN TestSideEffectOrder\n    --- PASS: TestSideEffectOrder (0.00 seconds)\n    === RUN TestAppendOverlap\n    --- PASS: TestAppendOverlap (0.00 seconds)\n    === RUN TestChan\n    --- PASS: TestChan (0.99 seconds)\n    === RUN TestSelfSelect\n    --- PASS: TestSelfSelect (0.01 seconds)\n    === RUN TestSelectStress\n    --- PASS: TestSelectStress (0.49 seconds)\n    === RUN TestChanSendInterface\n    --- PASS: TestChanSendInterface (0.00 seconds)\n    === RUN TestPseudoRandomSend\n    --- PASS: TestPseudoRandomSend (0.00 seconds)\n    === RUN TestMultiConsumer\n    --- PASS: TestMultiConsumer (0.17 seconds)\n    === RUN TestCrashHandler\n    --- PASS: TestCrashHandler (0.57 seconds)\n    === RUN TestSimpleDeadlock\n    --- PASS: TestSimpleDeadlock (0.25 seconds)\n    === RUN TestInitDeadlock\n    --- PASS: TestInitDeadlock (0.23 seconds)\n    === RUN TestLockedDeadlock\n    --- PASS: TestLockedDeadlock (0.24 seconds)\n    === RUN TestLockedDeadlock2\n    --- PASS: TestLockedDeadlock2 (0.34 seconds)\n    === RUN TestGoexitDeadlock\n    --- PASS: TestGoexitDeadlock (0.20 seconds)\n    === RUN TestStackOverflow\n    --- PASS: TestStackOverflow (0.66 seconds)\n    === RUN TestThreadExhaustion\n    --- PASS: TestThreadExhaustion (0.64 seconds)\n    === RUN TestGcSys\n    --- PASS: TestGcSys (0.58 seconds)\n    === RUN TestGcDeepNesting\n    --- PASS: TestGcDeepNesting (0.00 seconds)\n    \tgc_test.go:77: 0xc20818a000\n    === RUN TestGcHashmapIndirection\n    --- PASS: TestGcHashmapIndirection (0.18 seconds)\n    === RUN TestGcArraySlice\n    --- PASS: TestGcArraySlice (0.01 seconds)\n    === RUN TestGcRescan\n    --- PASS: TestGcRescan (0.01 seconds)\n    === RUN TestSmhasherSanity\n    --- PASS: TestSmhasherSanity (0.23 seconds)\n    === RUN TestSmhasherAppendedZeros\n    --- PASS: TestSmhasherAppendedZeros (0.00 seconds)\n    === RUN TestSmhasherSmallKeys\n    --- PASS: TestSmhasherSmallKeys (0.03 seconds)\n    === RUN TestSmhasherZeros\n    --- PASS: TestSmhasherZeros (0.00 seconds)\n    === RUN TestSmhasherTwoNonzero\n    --- SKIP: TestSmhasherTwoNonzero (0.00 seconds)\n    \thash_test.go:130: Skipping in short mode\n    === RUN TestSmhasherCyclic\n    --- SKIP: TestSmhasherCyclic (0.00 seconds)\n    \thash_test.go:172: Skipping in short mode\n    === RUN TestSmhasherSparse\n    --- SKIP: TestSmhasherSparse (0.00 seconds)\n    \thash_test.go:201: Skipping in short mode\n    === RUN TestSmhasherPermutation\n    --- SKIP: TestSmhasherPermutation (0.00 seconds)\n    \thash_test.go:236: Skipping in short mode\n    === RUN TestSmhasherAvalanche\n    --- SKIP: TestSmhasherAvalanche (0.00 seconds)\n    \thash_test.go:350: fallback hash not good enough for this test\n    === RUN TestSmhasherWindowed\n    --- SKIP: TestSmhasherWindowed (0.00 seconds)\n    \thash_test.go:426: Skipping in short mode\n    === RUN TestSmhasherText\n    --- SKIP: TestSmhasherText (0.00 seconds)\n    \thash_test.go:448: Skipping in short mode\n    === RUN TestSmhasherSeed\n    --- PASS: TestSmhasherSeed (0.04 seconds)\n    === RUN TestLFStack\n    --- PASS: TestLFStack (0.00 seconds)\n    === RUN TestLFStackStress\n    --- PASS: TestLFStackStress (0.01 seconds)\n    === RUN TestMemStats\n    --- PASS: TestMemStats (0.00 seconds)\n    === RUN TestNegativeZero\n    --- PASS: TestNegativeZero (0.00 seconds)\n    === RUN TestNan\n    --- PASS: TestNan (0.00 seconds)\n    === RUN TestAlias\n    --- PASS: TestAlias (0.00 seconds)\n    === RUN TestGrowWithNaN\n    --- PASS: TestGrowWithNaN (0.00 seconds)\n    === RUN TestGrowWithNegativeZero\n    --- PASS: TestGrowWithNegativeZero (0.00 seconds)\n    === RUN TestIterGrowAndDelete\n    --- PASS: TestIterGrowAndDelete (0.00 seconds)\n    === RUN TestIterGrowWithGC\n    --- PASS: TestIterGrowWithGC (0.00 seconds)\n    === RUN TestConcurrentReadsAfterGrowth\n    --- PASS: TestConcurrentReadsAfterGrowth (0.44 seconds)\n    === RUN TestConcurrentReadsAfterGrowthReflect\n    --- PASS: TestConcurrentReadsAfterGrowthReflect (2.66 seconds)\n    === RUN TestBigItems\n    --- PASS: TestBigItems (0.01 seconds)\n    === RUN TestEmptyKeyAndValue\n    --- PASS: TestEmptyKeyAndValue (0.00 seconds)\n    === RUN TestSingleBucketMapStringKeys_DupLen\n    --- PASS: TestSingleBucketMapStringKeys_DupLen (0.00 seconds)\n    === RUN TestSingleBucketMapStringKeys_NoDupLen\n    --- PASS: TestSingleBucketMapStringKeys_NoDupLen (0.00 seconds)\n    === RUN TestMapNanGrowIterator\n    --- PASS: TestMapNanGrowIterator (0.00 seconds)\n    === RUN TestMapIterOrder\n    --- PASS: TestMapIterOrder (0.00 seconds)\n    === RUN TestMemmove\n    --- PASS: TestMemmove (0.60 seconds)\n    === RUN TestMemmoveAlias\n    --- PASS: TestMemmoveAlias (0.45 seconds)\n    === RUN TestMemclr\n    --- PASS: TestMemclr (0.01 seconds)\n    === RUN TestFinalizerType\n    --- PASS: TestFinalizerType (0.01 seconds)\n    === RUN TestFinalizerInterfaceBig\n    --- PASS: TestFinalizerInterfaceBig (0.00 seconds)\n    === RUN TestFinalizerZeroSizedStruct\n    --- PASS: TestFinalizerZeroSizedStruct (0.00 seconds)\n    === RUN TestParFor\n    --- PASS: TestParFor (0.00 seconds)\n    === RUN TestParFor2\n    --- PASS: TestParFor2 (0.00 seconds)\n    === RUN TestParForSetup\n    --- PASS: TestParForSetup (0.00 seconds)\n    === RUN TestParForParallel\n    --- PASS: TestParForParallel (0.03 seconds)\n    === RUN TestStopTheWorldDeadlock\n    --- SKIP: TestStopTheWorldDeadlock (0.00 seconds)\n    \tproc_test.go:28: skipping during short test\n    === RUN TestYieldProgress\n    --- PASS: TestYieldProgress (0.01 seconds)\n    === RUN TestYieldLockedProgress\n    --- PASS: TestYieldLockedProgress (0.01 seconds)\n    === RUN TestYieldLocked\n    --- PASS: TestYieldLocked (0.10 seconds)\n    === RUN TestGoroutineParallelism\n    --- PASS: TestGoroutineParallelism (2.08 seconds)\n    === RUN TestBlockLocked\n    --- PASS: TestBlockLocked (0.00 seconds)\n    === RUN TestTimerFairness\n    --- PASS: TestTimerFairness (0.03 seconds)\n    === RUN TestTimerFairness2\n    --- PASS: TestTimerFairness2 (0.02 seconds)\n    === RUN TestPreemption\n    --- PASS: TestPreemption (0.04 seconds)\n    === RUN TestPreemptionGC\n    --- PASS: TestPreemptionGC (0.22 seconds)\n    === RUN TestGCFairness\n    --- PASS: TestGCFairness (0.74 seconds)\n    === RUN TestPreemptSplitBig\n    --- SKIP: TestPreemptSplitBig (0.00 seconds)\n    \tproc_test.go:299: skipping in -short mode\n    === RUN TestSchedLocalQueue\n    --- PASS: TestSchedLocalQueue (0.00 seconds)\n    === RUN TestSchedLocalQueueSteal\n    --- PASS: TestSchedLocalQueueSteal (0.00 seconds)\n    === RUN TestRuntimeGogoBytes\n    --- PASS: TestRuntimeGogoBytes (0.23 seconds)\n    === RUN TestStopCPUProfilingWithProfilerOff\n    --- PASS: TestStopCPUProfilingWithProfilerOff (0.00 seconds)\n    === RUN TestFloat64\n    --- PASS: TestFloat64 (0.12 seconds)\n    === RUN TestStackSplit\n    --- PASS: TestStackSplit (0.02 seconds)\n    === RUN TestStackMem\n    --- PASS: TestStackMem (0.00 seconds)\n    === RUN TestCaller\n    --- PASS: TestCaller (0.01 seconds)\n    === RUN TestSideEffectOrder-2\n    --- PASS: TestSideEffectOrder-2 (0.00 seconds)\n    === RUN TestAppendOverlap-2\n    --- PASS: TestAppendOverlap-2 (0.00 seconds)\n    === RUN TestChan-2\n    --- PASS: TestChan-2 (0.76 seconds)\n    === RUN TestSelfSelect-2\n    --- PASS: TestSelfSelect-2 (0.01 seconds)\n    === RUN TestSelectStress-2\n    --- PASS: TestSelectStress-2 (0.77 seconds)\n    === RUN TestChanSendInterface-2\n    --- PASS: TestChanSendInterface-2 (0.00 seconds)\n    === RUN TestPseudoRandomSend-2\n    --- PASS: TestPseudoRandomSend-2 (0.00 seconds)\n    === RUN TestMultiConsumer-2\n    --- PASS: TestMultiConsumer-2 (0.47 seconds)\n    === RUN TestCrashHandler-2\n    --- PASS: TestCrashHandler-2 (0.56 seconds)\n    === RUN TestSimpleDeadlock-2\n    --- PASS: TestSimpleDeadlock-2 (0.26 seconds)\n    === RUN TestInitDeadlock-2\n    --- PASS: TestInitDeadlock-2 (0.21 seconds)\n    === RUN TestLockedDeadlock-2\n    --- PASS: TestLockedDeadlock-2 (0.23 seconds)\n    === RUN TestLockedDeadlock2-2\n    --- PASS: TestLockedDeadlock2-2 (0.33 seconds)\n    === RUN TestGoexitDeadlock-2\n    --- PASS: TestGoexitDeadlock-2 (0.26 seconds)\n    === RUN TestStackOverflow-2\n    --- PASS: TestStackOverflow-2 (0.67 seconds)\n    === RUN TestThreadExhaustion-2\n    --- PASS: TestThreadExhaustion-2 (0.61 seconds)\n    === RUN TestGcSys-2\n    --- PASS: TestGcSys-2 (0.60 seconds)\n    === RUN TestGcDeepNesting-2\n    --- PASS: TestGcDeepNesting-2 (0.00 seconds)\n    \tgc_test.go:77: 0xc208efa000\n    === RUN TestGcHashmapIndirection-2\n    --- PASS: TestGcHashmapIndirection-2 (0.43 seconds)\n    === RUN TestGcArraySlice-2\n    --- PASS: TestGcArraySlice-2 (0.03 seconds)\n    === RUN TestGcRescan-2\n    --- PASS: TestGcRescan-2 (0.02 seconds)\n    === RUN TestSmhasherSanity-2\n    --- PASS: TestSmhasherSanity-2 (0.23 seconds)\n    === RUN TestSmhasherAppendedZeros-2\n    --- PASS: TestSmhasherAppendedZeros-2 (0.00 seconds)\n    === RUN TestSmhasherSmallKeys-2\n    --- PASS: TestSmhasherSmallKeys-2 (0.04 seconds)\n    === RUN TestSmhasherZeros-2\n    --- PASS: TestSmhasherZeros-2 (0.00 seconds)\n    === RUN TestSmhasherTwoNonzero-2\n    --- SKIP: TestSmhasherTwoNonzero-2 (0.00 seconds)\n    \thash_test.go:130: Skipping in short mode\n    === RUN TestSmhasherCyclic-2\n    --- SKIP: TestSmhasherCyclic-2 (0.00 seconds)\n    \thash_test.go:172: Skipping in short mode\n    === RUN TestSmhasherSparse-2\n    --- SKIP: TestSmhasherSparse-2 (0.00 seconds)\n    \thash_test.go:201: Skipping in short mode\n    === RUN TestSmhasherPermutation-2\n    --- SKIP: TestSmhasherPermutation-2 (0.00 seconds)\n    \thash_test.go:236: Skipping in short mode\n    === RUN TestSmhasherAvalanche-2\n    --- SKIP: TestSmhasherAvalanche-2 (0.00 seconds)\n    \thash_test.go:350: fallback hash not good enough for this test\n    === RUN TestSmhasherWindowed-2\n    --- SKIP: TestSmhasherWindowed-2 (0.00 seconds)\n    \thash_test.go:426: Skipping in short mode\n    === RUN TestSmhasherText-2\n    --- SKIP: TestSmhasherText-2 (0.00 seconds)\n    \thash_test.go:448: Skipping in short mode\n    === RUN TestSmhasherSeed-2\n    --- PASS: TestSmhasherSeed-2 (0.04 seconds)\n    === RUN TestLFStack-2\n    --- PASS: TestLFStack-2 (0.00 seconds)\n    === RUN TestLFStackStress-2\n    --- PASS: TestLFStackStress-2 (0.03 seconds)\n    === RUN TestMemStats-2\n    --- PASS: TestMemStats-2 (0.00 seconds)\n    === RUN TestNegativeZero-2\n    --- PASS: TestNegativeZero-2 (0.00 seconds)\n    === RUN TestNan-2\n    --- PASS: TestNan-2 (0.00 seconds)\n    === RUN TestAlias-2\n    --- PASS: TestAlias-2 (0.00 seconds)\n    === RUN TestGrowWithNaN-2\n    --- PASS: TestGrowWithNaN-2 (0.00 seconds)\n    === RUN TestGrowWithNegativeZero-2\n    --- PASS: TestGrowWithNegativeZero-2 (0.00 seconds)\n    === RUN TestIterGrowAndDelete-2\n    --- PASS: TestIterGrowAndDelete-2 (0.00 seconds)\n    === RUN TestIterGrowWithGC-2\n    --- PASS: TestIterGrowWithGC-2 (0.01 seconds)\n    === RUN TestConcurrentReadsAfterGrowth-2\n    --- PASS: TestConcurrentReadsAfterGrowth-2 (0.31 seconds)\n    === RUN TestConcurrentReadsAfterGrowthReflect-2\n    --- PASS: TestConcurrentReadsAfterGrowthReflect-2 (1.61 seconds)\n    === RUN TestBigItems-2\n    --- PASS: TestBigItems-2 (0.01 seconds)\n    === RUN TestEmptyKeyAndValue-2\n    --- PASS: TestEmptyKeyAndValue-2 (0.00 seconds)\n    === RUN TestSingleBucketMapStringKeys_DupLen-2\n    --- PASS: TestSingleBucketMapStringKeys_DupLen-2 (0.00 seconds)\n    === RUN TestSingleBucketMapStringKeys_NoDupLen-2\n    --- PASS: TestSingleBucketMapStringKeys_NoDupLen-2 (0.00 seconds)\n    === RUN TestMapNanGrowIterator-2\n    --- PASS: TestMapNanGrowIterator-2 (0.00 seconds)\n    === RUN TestMapIterOrder-2\n    --- PASS: TestMapIterOrder-2 (0.00 seconds)\n    === RUN TestMemmove-2\n    --- PASS: TestMemmove-2 (0.60 seconds)\n    === RUN TestMemmoveAlias-2\n    --- PASS: TestMemmoveAlias-2 (0.46 seconds)\n    === RUN TestMemclr-2\n    --- PASS: TestMemclr-2 (0.01 seconds)\n    === RUN TestFinalizerType-2\n    --- PASS: TestFinalizerType-2 (0.04 seconds)\n    === RUN TestFinalizerInterfaceBig-2\n    --- PASS: TestFinalizerInterfaceBig-2 (0.01 seconds)\n    === RUN TestFinalizerZeroSizedStruct-2\n    --- PASS: TestFinalizerZeroSizedStruct-2 (0.00 seconds)\n    === RUN TestParFor-2\n    --- PASS: TestParFor-2 (0.00 seconds)\n    === RUN TestParFor2-2\n    --- PASS: TestParFor2-2 (0.00 seconds)\n    === RUN TestParForSetup-2\n    --- PASS: TestParForSetup-2 (0.00 seconds)\n    === RUN TestParForParallel-2\n    --- PASS: TestParForParallel-2 (0.04 seconds)\n    === RUN TestStopTheWorldDeadlock-2\n    --- SKIP: TestStopTheWorldDeadlock-2 (0.00 seconds)\n    \tproc_test.go:28: skipping during short test\n    === RUN TestYieldProgress-2\n    --- PASS: TestYieldProgress-2 (0.01 seconds)\n    === RUN TestYieldLockedProgress-2\n    --- PASS: TestYieldLockedProgress-2 (0.01 seconds)\n    === RUN TestYieldLocked-2\n    --- PASS: TestYieldLocked-2 (0.10 seconds)\n    === RUN TestGoroutineParallelism-2\n    --- PASS: TestGoroutineParallelism-2 (0.89 seconds)\n    === RUN TestBlockLocked-2\n    --- PASS: TestBlockLocked-2 (0.00 seconds)\n    === RUN TestTimerFairness-2\n    --- PASS: TestTimerFairness-2 (0.02 seconds)\n    === RUN TestTimerFairness2-2\n    --- PASS: TestTimerFairness2-2 (0.02 seconds)\n    === RUN TestPreemption-2\n    --- PASS: TestPreemption-2 (0.00 seconds)\n    === RUN TestPreemptionGC-2\n    --- PASS: TestPreemptionGC-2 (0.44 seconds)\n    === RUN TestGCFairness-2\n    --- PASS: TestGCFairness-2 (1.04 seconds)\n    === RUN TestPreemptSplitBig-2\n    --- SKIP: TestPreemptSplitBig-2 (0.00 seconds)\n    \tproc_test.go:299: skipping in -short mode\n    === RUN TestSchedLocalQueue-2\n    --- PASS: TestSchedLocalQueue-2 (0.00 seconds)\n    === RUN TestSchedLocalQueueSteal-2\n    --- PASS: TestSchedLocalQueueSteal-2 (0.00 seconds)\n    === RUN TestRuntimeGogoBytes-2\n    --- PASS: TestRuntimeGogoBytes-2 (0.27 seconds)\n    === RUN TestStopCPUProfilingWithProfilerOff-2\n    --- PASS: TestStopCPUProfilingWithProfilerOff-2 (0.00 seconds)\n    === RUN TestFloat64-2\n    --- PASS: TestFloat64-2 (0.12 seconds)\n    === RUN TestStackSplit-2\n    --- PASS: TestStackSplit-2 (0.02 seconds)\n    === RUN TestStackMem-2\n    --- PASS: TestStackMem-2 (0.00 seconds)\n    === RUN TestCaller-2\n    --- PASS: TestCaller-2 (0.01 seconds)\n    === RUN TestSideEffectOrder-4\n    --- PASS: TestSideEffectOrder-4 (0.00 seconds)\n    === RUN TestAppendOverlap-4\n    --- PASS: TestAppendOverlap-4 (0.00 seconds)\n    === RUN TestChan-4\n    --- PASS: TestChan-4 (0.78 seconds)\n    === RUN TestSelfSelect-4\n    --- PASS: TestSelfSelect-4 (0.01 seconds)\n    === RUN TestSelectStress-4\n    --- PASS: TestSelectStress-4 (0.59 seconds)\n    === RUN TestChanSendInterface-4\n    --- PASS: TestChanSendInterface-4 (0.00 seconds)\n    === RUN TestPseudoRandomSend-4\n    --- PASS: TestPseudoRandomSend-4 (0.00 seconds)\n    === RUN TestMultiConsumer-4\n    --- PASS: TestMultiConsumer-4 (0.28 seconds)\n    === RUN TestCrashHandler-4\n    --- PASS: TestCrashHandler-4 (0.54 seconds)\n    === RUN TestSimpleDeadlock-4\n    --- PASS: TestSimpleDeadlock-4 (0.23 seconds)\n    === RUN TestInitDeadlock-4\n    --- PASS: TestInitDeadlock-4 (0.23 seconds)\n    === RUN TestLockedDeadlock-4\n    --- PASS: TestLockedDeadlock-4 (0.22 seconds)\n    === RUN TestLockedDeadlock2-4\n    panic: test timed out after 1m0s\n    \n    goroutine 161404 [running]:\n    runtime.panic(0x5f21c0, 0xc2080000c0)\n    \t/home/aram/go/src/pkg/runtime/panic.c:250 +0xb4\n    testing.func·007()\n    \t/home/aram/go/src/pkg/testing/testing.go:604 +0x10a\n    created by time.goFunc\n    \t/home/aram/go/src/pkg/time/sleep.go:123 +0x47\n    \n    goroutine 16 [chan receive]:\n    testing.RunTests(0x6e27c0, 0x971f00, 0x51, 0x51, 0x1)\n    \t/home/aram/go/src/pkg/testing/testing.go:480 +0x9a8\n    testing.Main(0x6e27c0, 0x971f00, 0x51, 0x51, 0x974320, ...)\n    \t/home/aram/go/src/pkg/testing/testing.go:411 +0x8c\n    main.main()\n    \t/tmp/go-build049321118/runtime/_test/_testmain.go:537 +0x9c\n    \n    goroutine 422 [finalizer wait]:\n    runtime.park(0x41caa0, 0x975368, 0x971d9d)\n    \t/home/aram/go/src/pkg/runtime/proc.c:1364 +0x66\n    runtime.parkunlock(0x975368, 0x971d9d)\n    \t/home/aram/go/src/pkg/runtime/proc.c:1380 +0x3b\n    runfinq()\n    \t/home/aram/go/src/pkg/runtime/mgc0.c:2494 +0x7a\n    runtime.goexit()\n    \t/home/aram/go/src/pkg/runtime/proc.c:1438\n    \n    goroutine 161417 [syscall]:\n    syscall.wait4(0x3862, 0xc20804870c, 0x0, 0xc208b91b00, 0x4262d2, ...)\n    \t/home/aram/go/src/pkg/runtime/syscall_solaris.goc:243 +0x51\n    syscall.Wait4(0x3862, 0xc20804870c, 0x0, 0xc208b91b00, 0x0, ...)\n    \t/home/aram/go/src/pkg/syscall/syscall_solaris.go:275 +0x5c\n    os.(*Process).wait(0xc208d409e0, 0x0, 0x0, 0x0)\n    \t/home/aram/go/src/pkg/os/exec_unix.go:22 +0x123\n    os.(*Process).Wait(0xc208d409e0, 0x413f4a, 0xc207fef758, 0x4)\n    \t/home/aram/go/src/pkg/os/doc.go:43 +0x27\n    os/exec.(*Cmd).Wait(0xc208bef680, 0x0, 0x0)\n    \t/home/aram/go/src/pkg/os/exec/exec.go:315 +0x225\n    os/exec.(*Cmd).Run(0xc208bef680, 0xc208108a10, 0xfffffd7fffdfffa7)\n    \t/home/aram/go/src/pkg/os/exec/exec.go:237 +0x54\n    os/exec.(*Cmd).CombinedOutput(0xc208bef680, 0xc208bef680, 0xfffffd7ffe687e38, 0x2, 0x2, ...)\n    \t/home/aram/go/src/pkg/os/exec/exec.go:359 +0x2e3\n    runtime_test.executeTest(0xc208b91b90, 0x732bf0, 0x9c, 0x0, 0x0, ...)\n    \t/home/aram/go/src/pkg/runtime/crash_test.go:58 +0x76a\n    runtime_test.testDeadlock(0xc208b91b90, 0x732bf0, 0x9c)\n    \t/home/aram/go/src/pkg/runtime/crash_test.go:89 +0x58\n    runtime_test.TestLockedDeadlock2(0xc208b91b90)\n    \t/home/aram/go/src/pkg/runtime/crash_test.go:109 +0x3b\n    testing.tRunner(0xc208b91b90, 0x972020)\n    \t/home/aram/go/src/pkg/testing/testing.go:398 +0x8b\n    created by testing.RunTests\n    \t/home/aram/go/src/pkg/testing/testing.go:479 +0x978\n    \n    goroutine 161419 [syscall]:\n    syscall.Sysvicall6(0xfffffd7fff2c2d00, 0x3, 0x4, 0xc20808d600, 0x200, ...)\n    \t/home/aram/go/src/pkg/runtime/syscall_solaris.goc:65 +0x54\n    syscall.read(0x4, 0xc20808d600, 0x200, 0x200, 0x5f2541, ...)\n    \t/home/aram/go/src/pkg/syscall/zsyscall_solaris_amd64.go:500 +0xc5\n    syscall.Read(0x4, 0xc20808d600, 0x200, 0x200, 0x4183d5, ...)\n    \t/home/aram/go/src/pkg/syscall/syscall_unix.go:135 +0x5c\n    os.(*File).read(0xc2081f9dd8, 0xc20808d600, 0x200, 0x200, 0x5cac40, ...)\n    \t/home/aram/go/src/pkg/os/file_unix.go:183 +0x62\n    os.(*File).Read(0xc2081f9dd8, 0xc20808d600, 0x200, 0x200, 0xfffffd7fff163ae8, ...)\n    \t/home/aram/go/src/pkg/os/file.go:95 +0x98\n    bytes.(*Buffer).ReadFrom(0xc208108a10, 0xfffffd7fff163a98, 0xc2081f9dd8, 0x0, 0x0, ...)\n    \t/home/aram/go/src/pkg/bytes/buffer.go:169 +0x274\n    io.Copy(0xfffffd7fff163a48, 0xc208108a10, 0xfffffd7fff163a98, 0xc2081f9dd8, 0x0, ...)\n    \t/home/aram/go/src/pkg/io/io.go:348 +0x124\n    os/exec.func·003(0x5cbba0, 0xc2081089a0)\n    \t/home/aram/go/src/pkg/os/exec/exec.go:212 +0x76\n    os/exec.func·004(0xc208d40780)\n    \t/home/aram/go/src/pkg/os/exec/exec.go:281 +0x2c\n    created by os/exec.(*Cmd).Start\n    \t/home/aram/go/src/pkg/os/exec/exec.go:282 +0xa26\n    exit status 2\n    FAIL\truntime\t60.108s\n    : oos:src; \n\nDisabling the GC fixes the problem:\n\n    : oos:src; GOGC=off GOMAXPROCS=2 go test -short -timeout=120s -cpu=1,2,4 runtime\n    --- FAIL: TestFinalizerType (20.05 seconds)\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tintptr) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*runtime_test.Tint) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tinter) didn't run\n    --- FAIL: TestFinalizerInterfaceBig (4.01 seconds)\n    \tmfinal_test.go:100: finalizer for type *bigValue didn't run\n    --- FAIL: TestFinalizerType-2 (20.05 seconds)\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tintptr) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*runtime_test.Tint) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tinter) didn't run\n    --- FAIL: TestFinalizerInterfaceBig-2 (4.01 seconds)\n    \tmfinal_test.go:100: finalizer for type *bigValue didn't run\n    --- FAIL: TestFinalizerType-4 (20.05 seconds)\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tintptr) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*int) didn't run\n    \tmfinal_test.go:62: finalizer for type func(*runtime_test.Tint) didn't run\n    \tmfinal_test.go:62: finalizer for type func(runtime_test.Tinter) didn't run\n    --- FAIL: TestFinalizerInterfaceBig-4 (4.01 seconds)\n    \tmfinal_test.go:100: finalizer for type *bigValue didn't run\n    FAIL\n    FAIL\truntime\t105.348s\n    : oos:src; \n\nThis problem appeared in this commit:\n    e1d8f23 (runtime: concurrent GC sweep)\n    \u003ca href=\"https://golang.org/cl/46430043\"\u003ehttps://golang.org/cl/46430043\u003c/a\u003e.\n    \nThis commit made tests pass again:\n    bb13b99 (runtime: temporary disable concurrent GC sweep)\n    \u003ca href=\"https://golang.org/cl/62360043\"\u003ehttps://golang.org/cl/62360043\u003c/a\u003e\n\nThis commit broke them again:\n    a8b97f2 (runtime: fix concurrent GC sweep)\n    \u003ca href=\"https://golang.org/cl/62990043\"\u003ehttps://golang.org/cl/62990043\u003c/a\u003e\n\nBroken tests leave deadlocked processes behind:\n\n    : oos:src; ps ax | grep go\n       280 ?        S  0:00 go run /tmp/go-build293965775/main.go\n       283 ?        S  0:00 go run /tmp/go-build293965775/main.go\n      4859 ?        S  0:00 go run /tmp/go-build693490909/main.go\n      4861 ?        S  0:00 go run /tmp/go-build693490909/main.go\n      8595 ?        S  0:00 go run /tmp/go-build108964010/main.go\n      8598 ?        S  0:00 go run /tmp/go-build108964010/main.go\n      9437 ?        S  0:00 go run /tmp/go-build683078853/main.go\n      9440 ?        S  0:00 go run /tmp/go-build683078853/main.go\n      9529 ?        S  0:00 go run /tmp/go-build438915788/main.go\n      9532 ?        S  0:00 go run /tmp/go-build438915788/main.go\n     10881 ?        S  0:00 go run /tmp/go-build761453762/main.go\n     10883 ?        S  0:00 go run /tmp/go-build761453762/main.go\n     14011 ?        S  0:00 go run /tmp/go-build419394699/main.go\n     14014 ?        S  0:00 go run /tmp/go-build419394699/main.go\n     14434 ?        S  0:00 go run /tmp/go-build455132132/main.go\n     14436 ?        S  0:00 go run /tmp/go-build455132132/main.go\n     20864 ?        S  0:00 go run /tmp/go-build014179166/main.go\n     20867 ?        S  0:00 go run /tmp/go-build014179166/main.go\n     24230 ?        S  0:00 go run /tmp/go-build345783399/main.go\n     24232 ?        S  0:00 go run /tmp/go-build345783399/main.go\n     25435 ?        S  0:00 go run /tmp/go-build616491765/main.go\n     25438 ?        S  0:00 go run /tmp/go-build616491765/main.go\n     19922 pts/4    S  0:00 go run /tmp/go-build597897994/main.go\n     19925 pts/4    S  0:00 go run /tmp/go-build597897994/main.go\n     21272 pts/4    S  0:00 grep go\n    : oos:src; \n\nThe files are:\n\n    package main\n    import (\n    \t\u0026quot;runtime\u0026quot;\n    \t\u0026quot;time\u0026quot;\n    )\n    func main() {\n    \tgo func() {\n    \t\truntime.LockOSThread()\n    \t\tselect {}\n    \t}()\n    \ttime.Sleep(time.Millisecond)\n    \tselect {}\n    }\n\nIt looks like there's a problem with the deadlock detector.\u003c/pre\u003e",
	"user": {
		"login": "4ad",
		"id": 1331747,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 43,
	"closed_at": "2014-12-08T10:41:40Z",
	"created_at": "2014-03-11T16:58:44Z",
	"updated_at": "2016-06-25T01:29:31Z"
}
