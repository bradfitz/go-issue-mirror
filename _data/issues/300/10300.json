{
	"id": 65516640,
	"number": 10300,
	"state": "closed",
	"title": "runtime: signal arrived during cgo execution in syscall.AcceptEx",
	"body": "Reporting on behalf of our user.\r\n\r\nRunning on go1.4.2 windows-386 but cross-compiled on Linux.\r\nI believe no CGO is involved (otherwise we wouldn't be able to cross-compile that easily?)\r\n\r\n```\r\nException 0xc0000005 0x0 0x0 0x0\r\nPC=0x0\r\nsignal arrived during cgo execution\r\n\r\nsyscall.AcceptEx(0x6b8, 0x680, 0x113b27e0, 0x0, 0x70, 0x70, 0x1153a058, 0x1153a038, 0x0, 0x0)\r\n    /usr/local/go/src/syscall/zsyscall_windows.go:1499 +0x96\r\nnet.funcВ·028(0x1153a038, 0x0, 0x0)\r\n    /usr/local/go/src/net/fd_windows.go:557 +0x85\r\nnet.(*ioSrv).ProcessRemoteIO(0x113ac758)\r\n    /usr/local/go/src/net/fd_windows.go:146 +0x9d\r\ncreated by net.startServer\r\n    /usr/local/go/src/net/fd_windows.go:244 +0xba\r\n\r\ngoroutine 1 [running, locked to thread]:\r\n    goroutine running on other thread; stack unavailable\r\n\r\ngoroutine 5 [syscall]:\r\nos/signal.loop()\r\n    /usr/local/go/src/os/signal/signal_unix.go:21 +0x21\r\ncreated by os/signal.initВ·1\r\n    /usr/local/go/src/os/signal/signal_unix.go:27 +0x34\r\n\r\ngoroutine 7 [select]:\r\ngithub.com/syncthing/syncthing/internal/events.(*Subscription).Poll(0x113e6a60, 0xf8475800, 0xd, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\r\n    /go/src/github.com/syncthing/syncthing/internal/events/events.go:173 +0x33f\r\ngithub.com/syncthing/syncthing/internal/events.(*BufferedSubscription).pollingLoop(0x11394750)\r\n    /go/src/github.com/syncthing/syncthing/internal/events/events.go:209 +0x44\r\ncreated by github.com/syncthing/syncthing/internal/events.NewBufferedSubscription\r\n    /go/src/github.com/syncthing/syncthing/internal/events/events.go:203 +0x175\r\n\r\ngoroutine 8 [chan receive]:\r\nmain.trackCPUUsage()\r\n    /go/src/github.com/syncthing/syncthing/cmd/syncthing/gui_windows.go:37 +0x460\r\ncreated by main.initВ·3\r\n    /go/src/github.com/syncthing/syncthing/cmd/syncthing/gui_windows.go:17 +0x25\r\n\r\ngoroutine 10 [chan receive]:\r\ngithub.com/syncthing/syncthing/internal/config.(*Wrapper).Serve(0x113caea0)\r\n    /go/src/github.com/syncthing/syncthing/internal/config/wrapper.go:79 +0x6a\r\ncreated by github.com/syncthing/syncthing/internal/config.Wrap\r\n    /go/src/github.com/syncthing/syncthing/internal/config/wrapper.go:54 +0x10b\r\n\r\ngoroutine 11 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0x113d24d0)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:205 +0x1c5\r\ncreated by github.com/syndtr/goleveldb/leveldb/util.NewBufferPool\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:236 +0x1bb\r\n\r\ngoroutine 12 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0x113b2540)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_compaction.go:120 +0x414\r\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:126 +0x731\r\n\r\ngoroutine 13 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0x113b2540)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_state.go:73 +0x11d\r\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:127 +0x746\r\n\r\ngoroutine 14 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb.(*DB).tCompaction(0x113b2540)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_compaction.go:812 +0x68a\r\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:130 +0x780\r\n\r\ngoroutine 15 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0x113b2540)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_compaction.go:759 +0x221\r\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:131 +0x795\r\n\r\ngoroutine 16 [select]:\r\ngithub.com/syndtr/goleveldb/leveldb.(*DB).jWriter(0x113b2540)\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_write.go:37 +0x153\r\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\r\n    /go/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:132 +0x7aa\r\n\r\ngoroutine 17 [select]:\r\ngithub.com/syncthing/syncthing/internal/model.(*ProgressEmitter).Serve(0x114342a0)\r\n    /go/src/github.com/syncthing/syncthing/internal/model/progressemitter.go:48 +0x6d8\r\ncreated by github.com/syncthing/syncthing/internal/model.NewModel\r\n    /go/src/github.com/syncthing/syncthing/internal/model/model.go:117 +0x570\r\n\r\ngoroutine 18 [sleep]:\r\ngithub.com/syncthing/syncthing/internal/model.funcВ·029()\r\n    /go/src/github.com/syncthing/syncthing/internal/model/util.go:17 +0x57\r\ncreated by github.com/syncthing/syncthing/internal/model.deadlockDetect\r\n    /go/src/github.com/syncthing/syncthing/internal/model/util.go:35 +0xb8\r\n\r\ngoroutine 19 [sleep]:\r\ngithub.com/syncthing/syncthing/internal/model.funcВ·029()\r\n    /go/src/github.com/syncthing/syncthing/internal/model/util.go:17 +0x57\r\ncreated by github.com/syncthing/syncthing/internal/model.deadlockDetect\r\n    /go/src/github.com/syncthing/syncthing/internal/model/util.go:35 +0xb8\r\n\r\ngoroutine 20 [select]:\r\ngithub.com/syncthing/syncthing/internal/ignore.(*Matcher).clean(0x1142e180, 0x61714000, 0x68c)\r\n    /go/src/github.com/syncthing/syncthing/internal/ignore/ignore.go:153 +0x192\r\ncreated by github.com/syncthing/syncthing/internal/ignore.New\r\n    /go/src/github.com/syncthing/syncthing/internal/ignore/ignore.go:53 +0xb4\r\n\r\ngoroutine 22 [chan receive, locked to thread]:\r\nnet.(*ioSrv).ProcessRemoteIO(0x113ac760)\r\n    /usr/local/go/src/net/fd_windows.go:144 +0x6d\r\ncreated by net.startServer\r\n    /usr/local/go/src/net/fd_windows.go:246 +0x109\r\n\r\ngoroutine 23 [chan receive]:\r\nnet.(*ioSrv).ExecIO(0x113ac758, 0x1153a038, 0x8aa078, 0x8, 0x11604000, 0x113b28c0, 0x0, 0x0)\r\n    /usr/local/go/src/net/fd_windows.go:171 +0xb2b\r\nnet.(*netFD).acceptOne(0x1153a000, 0x113b27e0, 0x2, 0x2, 0x1153a038, 0x0, 0x0, 0x0)\r\n    /usr/local/go/src/net/fd_windows.go:558 +0x3ee\r\nnet.(*netFD).accept(0x1153a000, 0x0, 0x0, 0x0)\r\n    /usr/local/go/src/net/fd_windows.go:585 +0x119\r\nnet.(*TCPListener).AcceptTCP(0x113ac768, 0x0, 0x0, 0x0)\r\n    /usr/local/go/src/net/tcpsock_posix.go:234 +0x48\r\nnet.(*TCPListener).Accept(0x113ac768, 0x0, 0x0, 0x0, 0x0)\r\n    /usr/local/go/src/net/tcpsock_posix.go:244 +0x48\r\nmain.(*DowngradingListener).Accept(0x11399330, 0x0, 0x0, 0x0, 0x0)\r\n    /go/src/github.com/syncthing/syncthing/cmd/syncthing/tls.go:104 +0x61\r\nnet/http.(*Server).Serve(0x11452580, 0x313bde50, 0x11399330, 0x0, 0x0)\r\n    /usr/local/go/src/net/http/server.go:1728 +0x7b\r\nmain.funcВ·001()\r\n    /go/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:183 +0x58\r\ncreated by main.startGUI\r\n    /go/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:187 +0x10a8\r\neax     0x6b8\r\nebx     0x11c7cf28\r\necx     0x0\r\nedx     0x11c7cefc\r\nedi     0x3152ff6c\r\nesi     0x11c7cf74\r\nebp     0x3152ff44\r\nesp     0x3152ff1c\r\neip     0x0\r\neflags  0x10246\r\ncs      0x1b\r\nfs      0x3b\r\ngs      0x0\r\n```\r\n\r\nAnother crash, but slightly different stacktrace:\r\n```\r\nException 0xc0000005 0x0 0x0 0x0\r\nPC=0x0\r\nsignal arrived during cgo execution\r\n\r\nsyscall.AcceptEx(0x6a0, 0x680, 0x113b27e0, 0x0, 0x70, 0x70, 0x11510058, 0x11510038, 0x0, 0x0)\r\n    /usr/local/go/src/syscall/zsyscall_windows.go:1499 +0x96\r\nnet.funcВ·028(0x11510038, 0x0, 0x0)\r\n    /usr/local/go/src/net/fd_windows.go:557 +0x85\r\nnet.(*ioSrv).ProcessRemoteIO(0x114341d8)\r\n    /usr/local/go/src/net/fd_windows.go:146 +0x9d\r\ncreated by net.startServer\r\n    /usr/local/go/src/net/fd_windows.go:244 +0xba\r\n\r\ngoroutine 1 [syscall, locked to thread]:\r\nsyscall.Setsockopt(0x678, 0x0, 0x11450ae4, 0x11438000, 0x113a2000, 0x115100e0, 0x0)\r\n    /usr/local/go/src/syscall/zsyscall_windows.go:1391 +0x7e\r\nsyscall.SetsockoptIPMreq(0x7a4820, 0x11432840, 0x11450b3c, 0x0, 0x10, 0x11436d20)\r\n    /usr/local/go/src/syscall/syscall_windows.go:891 +0x58\r\nnet.(*ioSrv).ExecIO(0x114341e0, 0x11510164, 0x8b0a58, 0x9, 0x9ae21c, 0x2, 0x4ee013, 0x115100e0)\r\n    /usr/local/go/src/net/fd_windows.go:171 +0xb2b\r\nnet.(*netFD).writeTo(0x313a6b98, 0x113b46c0, 0x89, 0x90, 0x11438000, 0x11436d20, 0x89, 0x0, 0x313a0000)\r\n    /usr/local/go/src/net/fd_windows.go:532 +0x172\r\n...\r\n[snip]\r\n...\r\neax     0x6a0\r\nebx     0x11c7cf28\r\necx     0x0\r\nedx     0x11c7cefc\r\nedi     0x314eff6c\r\nesi     0x11c7cf74\r\nebp     0x314eff44\r\nesp     0x314eff1c\r\neip     0x0\r\neflags  0x10246\r\ncs      0x1b\r\nfs      0x3b\r\ngs      0x0\r\n```\r\nYou can find more stacktraces at: https://github.com/syncthing/syncthing/issues/1519",
	"user": {
		"login": "AudriusButkevicius",
		"id": 1144861,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 3,
	"closed_at": "2015-07-21T01:03:41Z",
	"created_at": "2015-03-31T18:31:30Z",
	"updated_at": "2016-07-20T14:27:20Z",
	"milestone": {
		"id": 905114,
		"number": 2,
		"title": "Go1.5Maybe"
	}
}
