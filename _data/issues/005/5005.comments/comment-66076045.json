{
	"id": 66076045,
	"body": "\u003ca id=\"c10\"\u003e\u003c/a\u003eComment 10:\n\n\u003cpre\u003ejust saw this on amd64, so it's not 386 flakiness only:\n\nstill need to try the checkLeakedTransports stuff. will report back soon.\n\n--- FAIL: TestGoroutinesRunning-67 (0.00 seconds)\n\tz_last_test.go:19: num goroutines = 23\n\tz_last_test.go:26: Too many goroutines:\n\t\tgoroutine 2295 [running]:\n\t\tnet/http_test.TestGoroutinesRunning(0xc2002f7ea0)\n\t\t\t/build/go.tip/go/src/pkg/net/http/z_last_test.go:25 +0x10f\n\t\ttesting.tRunner(0xc2002f7ea0, 0x8eb438)\n\t\t\t/build/go.tip/go/src/pkg/testing/testing.go:346 +0x8a\n\t\tcreated by testing.RunTests\n\t\t\t/build/go.tip/go/src/pkg/testing/testing.go:426 +0x86b\n\t\t\n\t\tgoroutine 1 [chan receive]:\n\t\ttesting.RunTests(0x787b88, 0x8ea640, 0x96, 0x96, 0xc20010e301, ...)\n\t\t\t/build/go.tip/go/src/pkg/testing/testing.go:427 +0x88e\n\t\ttesting.Main(0x787b88, 0x8ea640, 0x96, 0x96, 0x8e30e0, ...)\n\t\t\t/build/go.tip/go/src/pkg/testing/testing.go:358 +0x8a\n\t\tmain.main()\n\t\t\tnet/http/_test/_testmain.go:363 +0x9a\n\t\t\n\t\tgoroutine 2 [syscall]:\n\t\t\n\t\tgoroutine 37 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x7, 0xc20010d170, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc20010d160, 0xc200695180, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc200695180)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 40 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0xb, 0xc20010d220, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc20010d210, 0xc200695330, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc200695330)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 810 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x30, 0xc2002b3220, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc2002b3210, 0xc20023a210, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc20023a210)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 415 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x19, 0xc200194010, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc200194000, 0xc2002fa360, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc2002fa360)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 100 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0xf, 0xc20010d2d0, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc20010d2c0, 0xc2008872d0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc2008872d0)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 984 [sleep]:\n\t\ttime.Sleep(0x1dcd6500)\n\t\t\t/build/go.tip/go/src/pkg/runtime/ztime_linux_amd64.c:19 +0x2f\n\t\tnet/http.(*conn).closeWriteAndWait(0xc200273180)\n\t\t\t/build/go.tip/go/src/pkg/net/http/server.go:778 +0x6d\n\t\tnet/http.(*conn).serve(0xc200273180)\n\t\t\t/build/go.tip/go/src/pkg/net/http/server.go:880 +0x7bb\n\t\tcreated by net/http.(*Server).Serve\n\t\t\t/build/go.tip/go/src/pkg/net/http/server.go:1338 +0x266\n\t\t\n\t\tgoroutine 333 [finalizer wait]:\n\t\t\n\t\tgoroutine 236 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x14, 0xc2006a3010, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc2006a3000, 0xc20085f570, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc20085f570)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 489 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x1d, 0xc2002b3170, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc2002b3160, 0xc2003548a0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc2003548a0)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 2106 [chan receive]:\n\t\tnet/http.func·015()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:418 +0x39\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:421 +0x217\n\t\t\n\t\tgoroutine 2109 [chan receive]:\n\t\tnet.(*pollServer).WaitWrite(0xc200695180, 0xc2006ad410, 0xc20009b420, 0x73)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:260 +0x63\n\t\tnet.(*netFD).connect(0xc2006ad410, 0xc200695120, 0xc2003e33a0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_unix.go:99 +0x15f\n\t\tnet.socket(0x712400, 0x3, 0x2, 0x1, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/sock_posix.go:55 +0x301\n\t\tnet.internetSocket(0x712400, 0x3, 0x0, 0x0, 0xc20017c3c0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/ipsock_posix.go:146 +0x423\n\t\tnet.dialTCP(0x712400, 0x3, 0x0, 0xc2006d2ae0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/tcpsock_posix.go:153 +0x111\n\t\tnet.dial(0x712400, 0x3, 0xc2006d2a27, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:214 +0x3cc\n\t\tnet.DialOpt(0xc2006d2a27, 0xf, 0x7fa69ea7ada8, 0x1, 0x1, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:204 +0x1ff\n\t\tnet.Dial(0x712400, 0x3, 0xc2006d2a27, 0xf, 0xc2000a0820, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:189 +0xd4\n\t\tnet/http.(*Transport).dial(0xc2008c4080, 0x712400, 0x3, 0xc2006d2a27, 0xf, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:384 +0xd2\n\t\tnet/http.(*Transport).dialConn(0xc2008c4080, 0xc2006d2ab0, 0xc2003e0e88, 0xc200b20280, 0xc2008c1840, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:427 +0x6c\n\t\tnet/http.func·014()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:402 +0x3c\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:404 +0x11b\n\t\t\n\t\tgoroutine 807 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.tip/go/src/pkg/syscall/asm_linux_amd64.s:41 +0x5\n\t\tsyscall.EpollWait(0x24, 0xc200194430, 0xa, 0xa, 0xffffffffffffffff, ...)\n\t\t\t/build/go.tip/go/src/pkg/syscall/zerrors_linux_amd64.go:1872 +0x95\n\t\tnet.(*pollster).WaitFD(0xc200194420, 0xc200277c60, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_linux.go:151 +0x127\n\t\tnet.(*pollServer).Run(0xc200277c60)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:206 +0x10a\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:55 +0x2d5\n\t\t\n\t\tgoroutine 2112 [chan receive]:\n\t\tnet/http.func·015()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:418 +0x39\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:421 +0x217\n\t\t\n\t\tgoroutine 2099 [chan receive]:\n\t\tnet.(*pollServer).WaitWrite(0xc2003548a0, 0xc200876820, 0xc20009b420, 0x73)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:260 +0x63\n\t\tnet.(*netFD).connect(0xc200876820, 0xc200695120, 0xc200837380, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_unix.go:99 +0x15f\n\t\tnet.socket(0x712400, 0x3, 0x2, 0x1, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/sock_posix.go:55 +0x301\n\t\tnet.internetSocket(0x712400, 0x3, 0x0, 0x0, 0xc20017c3c0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/ipsock_posix.go:146 +0x423\n\t\tnet.dialTCP(0x712400, 0x3, 0x0, 0xc2006ef4e0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/tcpsock_posix.go:153 +0x111\n\t\tnet.dial(0x712400, 0x3, 0xc2006ef337, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:214 +0x3cc\n\t\tnet.DialOpt(0xc2006ef337, 0xf, 0x7fa688035da8, 0x1, 0x1, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:204 +0x1ff\n\t\tnet.Dial(0x712400, 0x3, 0xc2006ef337, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:189 +0xd4\n\t\tnet/http.(*Transport).dial(0xc2008c4080, 0x712400, 0x3, 0xc2006ef337, 0xf, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:384 +0xd2\n\t\tnet/http.(*Transport).dialConn(0xc2008c4080, 0xc2006ef390, 0x421f10, 0x749b89, 0x4, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:427 +0x6c\n\t\tnet/http.func·014()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:402 +0x3c\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:404 +0x11b\n\t\t\n\t\tgoroutine 2101 [chan receive]:\n\t\tnet.(*pollServer).WaitWrite(0xc2008872d0, 0xc2008768f0, 0xc20009b420, 0x73)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:260 +0x63\n\t\tnet.(*netFD).connect(0xc2008768f0, 0xc200695120, 0xc2008373a0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_unix.go:99 +0x15f\n\t\tnet.socket(0x712400, 0x3, 0x2, 0x1, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/sock_posix.go:55 +0x301\n\t\tnet.internetSocket(0x712400, 0x3, 0x0, 0x0, 0xc20017c3c0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/ipsock_posix.go:146 +0x423\n\t\tnet.dialTCP(0x712400, 0x3, 0x0, 0xc2006ef510, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/tcpsock_posix.go:153 +0x111\n\t\tnet.dial(0x712400, 0x3, 0xc2006ef3c7, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:214 +0x3cc\n\t\tnet.DialOpt(0xc2006ef3c7, 0xf, 0x7fa688034da8, 0x1, 0x1, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:204 +0x1ff\n\t\tnet.Dial(0x712400, 0x3, 0xc2006ef3c7, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:189 +0xd4\n\t\tnet/http.(*Transport).dial(0xc2008c4080, 0x712400, 0x3, 0xc2006ef3c7, 0xf, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:384 +0xd2\n\t\tnet/http.(*Transport).dialConn(0xc2008c4080, 0xc2006ef420, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:427 +0x6c\n\t\tnet/http.func·014()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:402 +0x3c\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:404 +0x11b\n\t\t\n\t\tgoroutine 2107 [chan receive]:\n\t\tnet.(*pollServer).WaitWrite(0xc20023a210, 0xc200a539c0, 0xc20009b420, 0x73)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_poll_unix.go:260 +0x63\n\t\tnet.(*netFD).connect(0xc200a539c0, 0xc200695120, 0xc200211a40, 0x0, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/fd_unix.go:99 +0x15f\n\t\tnet.socket(0x712400, 0x3, 0x2, 0x1, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/sock_posix.go:55 +0x301\n\t\tnet.internetSocket(0x712400, 0x3, 0x0, 0x0, 0xc20017c3c0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/ipsock_posix.go:146 +0x423\n\t\tnet.dialTCP(0x712400, 0x3, 0x0, 0xc2006d2150, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/tcpsock_posix.go:153 +0x111\n\t\tnet.dial(0x712400, 0x3, 0xc2006d20c7, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:214 +0x3cc\n\t\tnet.DialOpt(0xc2006d20c7, 0xf, 0x7fa68808bda8, 0x1, 0x1, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:204 +0x1ff\n\t\tnet.Dial(0x712400, 0x3, 0xc2006d20c7, 0xf, 0x0, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/dial.go:189 +0xd4\n\t\tnet/http.(*Transport).dial(0xc2008c4080, 0x712400, 0x3, 0xc2006d20c7, 0xf, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:384 +0xd2\n\t\tnet/http.(*Transport).dialConn(0xc2008c4080, 0xc2006d2120, 0x421f10, 0x749b89, 0x4, ...)\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:427 +0x6c\n\t\tnet/http.func·014()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:402 +0x3c\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:404 +0x11b\n\t\t\n\t\tgoroutine 2111 [chan receive]:\n\t\tnet/http.func·015()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:418 +0x39\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:421 +0x217\n\t\t\n\t\tgoroutine 2113 [chan receive]:\n\t\tnet/http.func·015()\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:418 +0x39\n\t\tcreated by net/http.(*Transport).getConn\n\t\t\t/build/go.tip/go/src/pkg/net/http/transport.go:421 +0x217\nFAIL\u003c/pre\u003e",
	"user": {
		"login": "alberts",
		"id": 409689,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-03-12T19:17:39Z",
	"updated_at": "2014-12-08T10:26:44Z"
}
