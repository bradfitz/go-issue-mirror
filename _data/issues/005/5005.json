{
	"id": 51282975,
	"number": 5005,
	"state": "closed",
	"title": "net/http: test failures on linux/386",
	"body": "\u003cpre\u003eWhat steps will reproduce the problem?\n\ngo test -v -cpu 1,2,4 -timeout=30m std\n\nWhat do you see instead?\n\n--- FAIL: TestStressSurpriseServerCloses-4 (38.60 seconds)\ntransport_test.go:447: presumed deadlock; no HTTP client activity seen in awhile\n\n--- FAIL: TestGoroutinesRunning-4 (0.00 seconds)\n\tz_last_test.go:19: num goroutines = 40\n\tz_last_test.go:26: Too many goroutines:\n\t\tgoroutine 132795 [running]:\n\t\tnet/http_test.TestGoroutinesRunning(0x197f9180)\n\t\t\t/build/go.386/go/src/pkg/net/http/z_last_test.go:25 +0xed\n\t\ttesting.tRunner(0x197f9180, 0x8435c10)\n\t\t\t/build/go.386/go/src/pkg/testing/testing.go:346 +0x87\n\t\tcreated by testing.RunTests\n\t\t\t/build/go.386/go/src/pkg/testing/testing.go:426 +0x684\n\t\t\n\t\tgoroutine 1 [chan receive]:\n\t\ttesting.RunTests(0x82ec398, 0x8435520, 0x95, 0x95, 0x185b3700, ...)\n\t\t\t/build/go.386/go/src/pkg/testing/testing.go:427 +0x69f\n\t\ttesting.Main(0x82ec398, 0x8435520, 0x95, 0x95, 0x84309a0, ...)\n\t\t\t/build/go.386/go/src/pkg/testing/testing.go:358 +0x69\n\t\tmain.main()\n\t\t\tnet/http/_test/_testmain.go:361 +0x81\n\t\t\n\t\tgoroutine 2 [syscall]:\n\t\t\n\t\tgoroutine 37 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x7, 0x185a20a8, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x185a20a0, 0x18626040, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x18626040)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 255 [finalizer wait]:\n\t\t\n\t\tgoroutine 105289 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51089 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0xf, 0x18ee1788, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x18ee1780, 0x19dcd0a0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19dcd0a0)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105267 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105233 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51099 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x18, 0x197a20a8, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x197a20a0, 0x19dcdf80, 0x0, 0x0, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19dcdf80)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105238 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51097 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x17, 0x19d52008, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x19d52000, 0x19d72840, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19d72840)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105236 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105263 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105243 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51106 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x20, 0x197a21e8, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x197a21e0, 0x19d72b40, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19d72b40)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105285 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105281 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105247 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51043 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0xa, 0x18ee1648, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x18ee1640, 0x19e1ede0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19e1ede0)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105252 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105260 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105234 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 51116 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x29, 0x18ee1828, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x18ee1820, 0x19d105c0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19d105c0)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 51123 [syscall]:\n\t\tsyscall.Syscall6()\n\t\t\t/build/go.386/go/src/pkg/syscall/asm_linux_386.s:39 +0x5\n\t\tsyscall.EpollWait(0x33, 0x18fa5008, 0xa, 0xa, 0xffffffff, ...)\n\t\t\t/build/go.386/go/src/pkg/syscall/zerrors_linux_386.go:1871 +0x7b\n\t\tnet.(*pollster).WaitFD(0x18fa5000, 0x19c9e0e0, 0x0, 0x0, 0x0, ...)\n\t\t\t/build/go.386/go/src/pkg/net/fd_linux.go:151 +0x118\n\t\tnet.(*pollServer).Run(0x19c9e0e0)\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:206 +0x138\n\t\tcreated by net.newPollServer\n\t\t\t/build/go.386/go/src/pkg/net/fd_poll_unix.go:55 +0x269\n\t\t\n\t\tgoroutine 105241 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105240 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105258 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105266 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105269 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105288 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105237 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105268 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105261 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105286 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105283 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105271 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\n\t\t\n\t\tgoroutine 105257 [chan send]:\n\t\tnet/http_test.func·097()\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:437 +0x93\n\t\tcreated by net/http_test.TestStressSurpriseServerCloses\n\t\t\t/build/go.386/go/src/pkg/net/http/transport_test.go:439 +0x209\nFAIL\nFAIL\tnet/http\t109.792s\n\nWhich compiler are you using (5g, 6g, 8g, gccgo)?\n\n8g\n\nWhich operating system are you using?\n\nlinux\n\nWhich version are you using?  (run 'go version')\n\ngo version devel +ed48ace1855b Thu Mar 07 20:11:37 2013 -0800 linux/386\n\nPlease provide any additional information below.\n\nHaven't seen these on linux/amd64 before.\u003c/pre\u003e",
	"user": {
		"login": "alberts",
		"id": 409689,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"comments": 32,
	"closed_at": "2014-12-08T10:26:44Z",
	"created_at": "2013-03-08T08:05:39Z",
	"updated_at": "2016-06-24T22:35:11Z",
	"milestone": {
		"id": 1067199,
		"number": 11,
		"title": "Go1.1"
	}
}
