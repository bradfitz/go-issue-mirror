{
	"id": 66052684,
	"body": "\u003ca id=\"c6\"\u003e\u003c/a\u003eComment 6:\n\n\u003cpre\u003eI did:\n\ncd src\n./clean.bash\nedited the file (10 replacements; looked like all of them were strings)\n./all.bash\n\nThat seemed to get me past the netchan test:\n\ncd netchan \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/netchan'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/netchan'\nrm -f _test/netchan.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/netchan'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/netchan'\n6g -o _gotest_.6 common.go export.go import.go  netchan_test.go\nrm -f _test/netchan.a\ngopack grc _test/netchan.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/netchan'\n2010/09/22 08:36:53 export: EOF\n2010/09/22 08:36:53 importer response error: EOF\n2010/09/22 08:36:53 error decoding client header: EOF\n2010/09/22 08:36:53 export: EOF\n2010/09/22 08:36:53 importer response error: EOF\n2010/09/22 08:36:53 export: EOF\n2010/09/22 08:36:53 importer response error: EOF\nPASS\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/netchan'\n\nHowever, the build still didn't complete, finishing with:\n\ncd rpc \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\nrm -f _test/rpc.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\n6g -o _gotest_.6 client.go debug.go server.go  server_test.go\nrm -f _test/rpc.a\ngopack grc _test/rpc.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\n2010/09/22 08:36:58 net.Listen tcp :0: listen tcp 127.0.0.1:0: invalid argument\nmake[1]: *** [test] Error 1\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\nmake: *** [rpc.test] Error 2\n\nSo I edited src/pkg/rpc/server_test.go to replace tcp with tcp4 and tried again.\n\nThat got me past the rpc test:\n\ncd rpc \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\nrm -f _test/rpc.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/rpc'\n6g -o _gotest_.6 client.go debug.go server.go  server_test.go\nrm -f _test/rpc.a\ngopack grc _test/rpc.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\n2010/09/22 08:42:21 Test RPC server listening on  127.0.0.1:46658\n2010/09/22 08:42:21 Test HTTP RPC server listening on  127.0.0.1:41739\n2010/09/22 08:42:21 rpc: client protocol error: gob: type mismatch: no fields matched\ncompiling decoder for Reply\n2010/09/22 08:42:21 rpc: client protocol error: gob: type mismatch: no fields matched\ncompiling decoder for Reply\n2010/09/22 08:42:21 rpc: tearing down Arith connection: gob: type mismatch: no fields\nmatched compiling decoder for Args\n2010/09/22 08:42:21 rpc: client protocol error: unexpected EOF\n2010/09/22 08:42:21 ArgNotPointer arg type not a pointer: rpc.Args\n2010/09/22 08:42:21 rpc Register: type ArgNotPointer has no public methods of suitable\ntype\n2010/09/22 08:42:21 ReplyNotPointer reply type not a pointer: rpc.Reply\n2010/09/22 08:42:21 rpc Register: type ReplyNotPointer has no public methods of suitable\ntype\n2010/09/22 08:42:21 ArgNotPublic argument type not public: *rpc.local\n2010/09/22 08:42:21 rpc Register: type ArgNotPublic has no public methods of suitable\ntype\n2010/09/22 08:42:21 ReplyNotPublic reply type not public: *rpc.local\n2010/09/22 08:42:21 rpc Register: type ReplyNotPublic has no public methods of suitable\ntype\nPASS\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/rpc'\n\nBut then I hit a problem with the syslog test:\n\ncd syslog \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/syslog'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/syslog'\nrm -f _test/syslog.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/syslog'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/syslog'\n6g -o _gotest_.6 syslog.go  syslog_test.go\nrm -f _test/syslog.a\ngopack grc _test/syslog.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/syslog'\n2010/09/22 08:42:29 net.ListenPacket failed udp :0 dial udp: invalid argument\nmake[1]: *** [test] Error 1\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/syslog'\nmake: *** [syslog.test] Error 2\n\nSo this time I edited src/pkg/syslog/syslog_test.go changing udp to udp4. That got me\npast the syslog tests. But then I hit a problem with the websocket test. So I edited\nsrc/pkg/websocket/websocket_test.go changing tcp to tcp4. Unfortunately, this change was\nnot sufficient. So I tried changing tcp to tcp4 in src/pkg/websocket/client.go and got\nthis:\n\ncd websocket \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\nrm -f _test/websocket.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\n6g -o _gotest_.6 client.go server.go websocket.go  websocket_test.go\nrm -f _test/websocket.a\ngopack grc _test/websocket.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\n2010/09/22 08:51:39 Test WebSocket server listening on  127.0.0.1:45541\n--- FAIL: websocket.TestHTTP\n\tGet: error \u0026http.URLError{Op:\"Get\", URL:\"\u003ca href=\"http://127.0.0.1:45541/echo\"\u003ehttp://127.0.0.1:45541/echo\u003c/a\u003e\", Error:(*net.OpError)(0x2ac033028940)}\n--- FAIL: websocket.TestHTTPDraft75\n\tGet: error \u0026http.URLError{Op:\"Get\", URL:\"\u003ca href=\"http://127.0.0.1:45541/echoDraft75\"\u003ehttp://127.0.0.1:45541/echoDraft75\u003c/a\u003e\", Error:(*net.OpError)(0x2ac0330289c0)}\nFAIL\nmake[1]: *** [test] Error 1\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\nmake: *** [websocket.test] Error 2\n\nWithout the change to client.go I get much more error information:\n\ncd websocket \u0026\u0026 gomake test\nmake[1]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\ngotest\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\nrm -f _test/websocket.a _gotest_.6\nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\nmake[2]: Entering directory `/home/mark/opt/go/src/pkg/websocket'\n6g -o _gotest_.6 client.go server.go websocket.go  websocket_test.go\nrm -f _test/websocket.a\ngopack grc _test/websocket.a _gotest_.6 \nmake[2]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\n2010/09/22 08:54:04 Test WebSocket server listening on  127.0.0.1:42510\n--- FAIL: websocket.TestHTTP\n\tGet: error \u0026http.URLError{Op:\"Get\", URL:\"\u003ca href=\"http://127.0.0.1:42510/echo\"\u003ehttp://127.0.0.1:42510/echo\u003c/a\u003e\", Error:(*net.OpError)(0x2acfeec92100)}\n--- FAIL: websocket.TestHTTPDraft75\n\tGet: error \u0026http.URLError{Op:\"Get\", URL:\"\u003ca href=\"http://127.0.0.1:42510/echoDraft75\"\u003ehttp://127.0.0.1:42510/echoDraft75\u003c/a\u003e\", Error:(*net.OpError)(0x2acfeec92180)}\npanic: Dial failed: websocket.Dial ws://127.0.0.1:42510/echo: dial tcp 127.0.0.1:42510:\nnetwork is unreachable\n\npanic PC=0x2acfee6a03d8\nruntime.panic+0xb2 /home/mark/opt/go/src/pkg/runtime/proc.c:1019\n\truntime.panic(0x2acf00000000, 0x2acfee6a0438)\nwebsocket.TestTrailingSpaces+0x1a6\n/home/mark/opt/go/src/pkg/websocket/websocket_test.go:194\n\twebsocket.TestTrailingSpaces()\ntesting.tRunner+0x2b /home/mark/opt/go/src/pkg/testing/testing.go:132\n\ttesting.tRunner(0x2acfeec9c9c0, 0x2acfeec9c820, 0x401758, 0x2acfeec9c9c0)\ngoexit /home/mark/opt/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 5 [4]:\ngosched+0x77 /home/mark/opt/go/src/pkg/runtime/proc.c:546\n\tgosched()\nchanrecv+0x18b /home/mark/opt/go/src/pkg/runtime/chan.c:364\n\tchanrecv(0x2acfee6bcef0, 0x2acfee6b98e0, 0x1, 0x2acfee69e0c8, 0x597ed0, ...)\nruntime.chanrecv1+0x41 /home/mark/opt/go/src/pkg/runtime/chan.c:438\n\truntime.chanrecv1(0x2acfee6bcea0, 0x2acfee69e0f0)\nnet.*pollServer·WaitRead+0x52 /home/mark/opt/go/src/pkg/net/fd.go:247\n\tnet.*pollServer·WaitRead(0x2acfee6bcea0, 0x2acfee69a140, 0x45af89, 0x2acfee6bb680)\nnet.*netFD·accept+0x34d /home/mark/opt/go/src/pkg/net/fd.go:504\n\tnet.*netFD·accept(0x2acfee6bb680, 0x2acfee69a140, 0x0, 0x0, 0x2acf0000000b, ...)\nnet.*TCPListener·AcceptTCP+0x71 /home/mark/opt/go/src/pkg/net/tcpsock.go:256\n\tnet.*TCPListener·AcceptTCP(0x2acfee69a140, 0x45389b, 0x0, 0x0, 0x0, ...)\nnet.*TCPListener·Accept+0x49 /home/mark/opt/go/src/pkg/net/tcpsock.go:266\n\tnet.*TCPListener·Accept(0x2acfee697100, 0x40282c, 0x0, 0x0, 0x8, ...)\nhttp.Serve+0x7a /home/mark/opt/go/src/pkg/http/server.go:609\n\thttp.Serve(0x2acfee697100, 0x0, 0x0, 0x0, 0x0, ...)\ngoexit /home/mark/opt/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 4 [3]:\nruntime.entersyscall+0x28 /home/mark/opt/go/src/pkg/runtime/proc.c:565\n\truntime.entersyscall()\nsyscall.Syscall6+0x5 /home/mark/opt/go/src/pkg/syscall/asm_linux_amd64.s:41\n\tsyscall.Syscall6()\nsyscall.EpollWait+0x8d /home/mark/opt/go/src/pkg/syscall/zsyscall_linux_amd64.go:146\n\tsyscall.EpollWait(0xe8, 0x6, 0x2acfeec86520, 0x1, 0xffffffffffffffff, ...)\nnet.*pollster·WaitFD+0xfe /home/mark/opt/go/src/pkg/net/fd_linux.go:116\n\tnet.*pollster·WaitFD(0x2acf00000006, 0x2acfeec86520, 0x100000001, 0xffffffff, 0x10, ...)\nnet.*pollServer·Run+0xa3 /home/mark/opt/go/src/pkg/net/fd.go:207\n\tnet.*pollServer·Run(0x2acfee6be380, 0x0)\ngoexit /home/mark/opt/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 1 [4]:\ngosched+0x77 /home/mark/opt/go/src/pkg/runtime/proc.c:546\n\tgosched()\nchanrecv+0x41e /home/mark/opt/go/src/pkg/runtime/chan.c:336\n\tchanrecv(0x2acfeeca9170, 0x2acfeec9ca00, 0x2acf00000010, 0xa0000000a, 0x8, ...)\nruntime.chanrecv1+0x41 /home/mark/opt/go/src/pkg/runtime/chan.c:438\n\truntime.chanrecv1(0x2acfeeca9120, 0x2acfee69c048)\ntesting.Main+0x253 /home/mark/opt/go/src/pkg/testing/testing.go:159\n\ttesting.Main(0x2acfeeca9120, 0x595090)\nmain.main+0x3f /home/mark/opt/go/src/pkg/websocket/_testmain.go:21\n\tmain.main()\nmainstart+0xf /home/mark/opt/go/src/pkg/runtime/amd64/asm.s:78\n\tmainstart()\ngoexit /home/mark/opt/go/src/pkg/runtime/proc.c:145\n\tgoexit()\nmake[1]: *** [test] Error 2\nmake[1]: Leaving directory `/home/mark/opt/go/src/pkg/websocket'\nmake: *** [websocket.test] Error 2\n\nSo that's as far as I've managed to get.\u003c/pre\u003e",
	"user": {
		"login": "mark-summerfield",
		"id": 1773348,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2010-09-22T07:54:53Z",
	"updated_at": "2014-12-08T10:07:04Z"
}
