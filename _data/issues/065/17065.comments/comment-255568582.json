{
	"id": 255568582,
	"body": "I can no longer reproduce using the standalone snippet at the top of this issue. I'm not sure why. However, in misc/cgo/test, after removing the t.Skip in issue17065.go:\r\n\r\n```bash\r\n$ GOTRACEBACK=system go test -run=17065 -race\r\nunexpected fault address 0x2000133cd180\r\nfatal error: fault\r\n[signal SIGSEGV: segmentation violation code=0x1 addr=0x2000133cd180 pc=0x41774bc]\r\n\r\ngoroutine 18 [running]:\r\nruntime.throw(0x7fff5fbff440, 0x0)\r\n\t/Users/josh/go/tip/src/runtime/panic.go:596 +0x95 fp=0x7fff5fbff460 sp=0x7fff5fbff440\r\nruntime.throw(0x1f, 0x0)\r\n\t/Users/josh/go/tip/src/runtime/panic.go:596 +0x95 fp=0x7fff5fbff480 sp=0x7fff5fbff460\r\ncreated by testing.(*T).Run\r\n\t/Users/josh/go/tip/src/testing/testing.go:674 +0x535\r\n\r\ngoroutine 1 [chan receive]:\r\nruntime.gopark(0x42254d8, 0xc4200a2298, 0x421ac2f, 0xc, 0xc42001f317, 0x3)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:261 +0xfd fp=0xc420051a60 sp=0xc420051a30\r\nruntime.goparkunlock(0xc4200a2298, 0x421ac2f, 0xc, 0x17, 0x3)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:267 +0x5e fp=0xc420051aa0 sp=0xc420051a60\r\nruntime.chanrecv(0x41ce7c0, 0xc4200a2240, 0x0, 0xc420051b01, 0x41248b5)\r\n\t/Users/josh/go/tip/src/runtime/chan.go:496 +0x1ed fp=0xc420051b20 sp=0xc420051aa0\r\nruntime.chanrecv1(0x41ce7c0, 0xc4200a2240, 0x0)\r\n\t/Users/josh/go/tip/src/runtime/chan.go:378 +0x35 fp=0xc420051b58 sp=0xc420051b20\r\ntesting.(*T).Run(0xc4200c0000, 0x421a283, 0x9, 0x4222540, 0x4314301)\r\n\t/Users/josh/go/tip/src/testing/testing.go:675 +0x573 fp=0xc420051c48 sp=0xc420051b58\r\ntesting.runTests.func1(0xc4200c0000)\r\n\t/Users/josh/go/tip/src/testing/testing.go:830 +0xab fp=0xc420051ca0 sp=0xc420051c48\r\ntesting.tRunner(0xc4200c0000, 0xc420051d88)\r\n\t/Users/josh/go/tip/src/testing/testing.go:637 +0xca fp=0xc420051ce0 sp=0xc420051ca0\r\ntesting.runTests(0x42250d0, 0x4319c20, 0x43, 0x43, 0x40355ac)\r\n\t/Users/josh/go/tip/src/testing/testing.go:836 +0x4a5 fp=0xc420051db8 sp=0xc420051ce0\r\ntesting.(*M).Run(0xc420051ef0, 0x403b2ba)\r\n\t/Users/josh/go/tip/src/testing/testing.go:771 +0x130 fp=0xc420051e98 sp=0xc420051db8\r\nmain.main()\r\n\t_/Users/josh/go/tip/misc/cgo/test/_test/_testmain.go:188 +0x1b9 fp=0xc420051f50 sp=0xc420051e98\r\nruntime.main()\r\n\t/Users/josh/go/tip/src/runtime/proc.go:185 +0x1a3 fp=0xc420051fa0 sp=0xc420051f50\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc420051fa8 sp=0xc420051fa0\r\n\r\ngoroutine 17 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc420040fb8 sp=0xc420040fb0\r\n\r\ngoroutine 2 [force gc (idle)]:\r\nruntime.gopark(0x42254d8, 0x431f7d0, 0x421b4a2, 0xf, 0x402ec14, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:261 +0xfd fp=0xc42002c748 sp=0xc42002c718\r\nruntime.goparkunlock(0x431f7d0, 0x421b4a2, 0xf, 0x14, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:267 +0x5e fp=0xc42002c788 sp=0xc42002c748\r\nruntime.forcegchelper()\r\n\t/Users/josh/go/tip/src/runtime/proc.go:226 +0x9e fp=0xc42002c7c0 sp=0xc42002c788\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc42002c7c8 sp=0xc42002c7c0\r\ncreated by runtime.init.4\r\n\t/Users/josh/go/tip/src/runtime/proc.go:215 +0x35\r\n\r\ngoroutine 3 [GC sweep wait]:\r\nruntime.gopark(0x42254d8, 0x431f9a0, 0x421ae7a, 0xd, 0x4021614, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:261 +0xfd fp=0xc42002cf38 sp=0xc42002cf08\r\nruntime.goparkunlock(0x431f9a0, 0x421ae7a, 0xd, 0x14, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:267 +0x5e fp=0xc42002cf78 sp=0xc42002cf38\r\nruntime.bgsweep(0xc42005c000)\r\n\t/Users/josh/go/tip/src/runtime/mgcsweep.go:63 +0xb6 fp=0xc42002cfb8 sp=0xc42002cf78\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc42002cfc0 sp=0xc42002cfb8\r\ncreated by runtime.gcenable\r\n\t/Users/josh/go/tip/src/runtime/mgc.go:213 +0x61\r\n\r\ngoroutine 4 [finalizer wait]:\r\nruntime.gopark(0x42254d8, 0x4cecf68, 0x421b198, 0xe, 0x14, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:261 +0xfd fp=0xc42002d708 sp=0xc42002d6d8\r\nruntime.goparkunlock(0x4cecf68, 0x421b198, 0xe, 0x14, 0x1)\r\n\t/Users/josh/go/tip/src/runtime/proc.go:267 +0x5e fp=0xc42002d748 sp=0xc42002d708\r\nruntime.runfinq()\r\n\t/Users/josh/go/tip/src/runtime/mfinal.go:161 +0xaf fp=0xc42002d7c0 sp=0xc42002d748\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc42002d7c8 sp=0xc42002d7c0\r\ncreated by runtime.createfing\r\n\t/Users/josh/go/tip/src/runtime/mfinal.go:142 +0x62\r\n\r\ngoroutine 5 [syscall]:\r\nruntime.notetsleepg(0x4ced1a0, 0xffffffffffffffff, 0x0)\r\n\t/Users/josh/go/tip/src/runtime/lock_sema.go:257 +0x4b fp=0xc42002df60 sp=0xc42002df20\r\nos/signal.signal_recv(0x405ba71)\r\n\t/Users/josh/go/tip/src/runtime/sigqueue.go:116 +0x104 fp=0xc42002df88 sp=0xc42002df60\r\nos/signal.loop()\r\n\t/Users/josh/go/tip/src/os/signal/signal_unix.go:22 +0x30 fp=0xc42002dfc0 sp=0xc42002df88\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc42002dfc8 sp=0xc42002dfc0\r\ncreated by os/signal.init.1\r\n\t/Users/josh/go/tip/src/os/signal/signal_unix.go:28 +0x4f\r\n\r\ngoroutine 6 [syscall, locked to thread]:\r\nruntime.cgocall(0x41a3d60, 0xc42002e7b0, 0x0)\r\n\t/Users/josh/go/tip/src/runtime/cgocall.go:130 +0x8b fp=0xc42002e770 sp=0xc42002e738\r\n_/Users/josh/go/tip/misc/cgo/test._Cfunc_usleep(0xc400002710, 0x0)\r\n\t_/Users/josh/go/tip/misc/cgo/test/_test/_obj_test/_cgo_gotypes.go:1746 +0x6b fp=0xc42002e7b0 sp=0xc42002e770\r\nruntime.goexit()\r\n\t/Users/josh/go/tip/src/runtime/asm_amd64.s:2160 +0x1 fp=0xc42002e7b8 sp=0xc42002e7b0\r\ncreated by _/Users/josh/go/tip/misc/cgo/test.lockOSThreadCallback\r\n\t/Users/josh/go/tip/misc/cgo/test/issue3775.go:37 +0x55\r\nFAIL\t_/Users/josh/go/tip/misc/cgo/test\t0.099s\r\n```\r\n\r\nI remember from previous debugging that the crash is from within tsan_read, called as part of reading the contents of the C array.\r\n",
	"user": {
		"login": "josharian",
		"id": 67496,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-10-23T04:09:46Z",
	"updated_at": "2016-10-23T04:09:46Z"
}
