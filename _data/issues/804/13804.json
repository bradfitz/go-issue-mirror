{
	"id": 124647446,
	"number": 13804,
	"state": "closed",
	"title": "net/http: t.Parallel causes tests to crash with \"Test appears to have a leaked Transport\"",
	"body": "This is probably a regression from commit https://github.com/golang/go/commit/04d732b4c2ec346dd0977ec2933d4863271fd4c3\r\nas commenting out t.Parallel lets the tests run with the adequate time.\r\n\u003cimg width=\"570\" alt=\"screen shot 2016-01-03 at 5 48 47 am\" src=\"https://cloud.githubusercontent.com/assets/4898263/12078812/b173b37e-b1dd-11e5-925d-3f5ac72182d8.png\"\u003e\r\n\r\nThis consistently happens on \r\n```shell\r\n$ uname -a\r\nDarwin Emmanuels-MacBook-Pro.local 15.2.0 Darwin Kernel Version 15.2.0: Fri Nov 13 19:56:56 PST 2015; root:xnu-3248.20.55~2/RELEASE_X86_64 x86_64\r\n```\r\n\r\nThe crash dump for three runs is below\r\n```shell\r\n$ go test -coverprofile=master-coverage.out\r\n--- FAIL: TestTLSHandshakeTimeout (1.27s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0x20075e8, 0x72, 0xe40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc8200540d0, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc8200540d0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc820054070, 0x0, 0xe4f938, 0xc8205a83e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc82039c008, 0xc82003aea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc82039c008, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc8202ca080, 0xe4e870, 0xc82039c008, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc820950180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8200160c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8200160c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestTransportCancelRequest.func1(0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1461 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8205de040, 0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc8202ca080, 0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007c600)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f560, 0x7e7b20, 0x13a, 0x13a, 0x7d6901)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc820034f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc820034f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportCancelRequest.func2(0xc8202342c0, 0xc8201142a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1476 +0x20\r\n\t\tcreated by net/http_test.TestTransportCancelRequest\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1478 +0x54d\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82010c050, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc820166090, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007c680, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8202ca500)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n--- FAIL: TestServerTimeouts (1.91s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0x2005a28, 0x72, 0xe40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc8202bc140, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc8202bc140, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc8202bc0e0, 0x0, 0xe4f938, 0xc8205e0340)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc820362010, 0xc820037ea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc820362010, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc8202ca000, 0xe4e870, 0xc820362010, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc82025d620)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet.runtime_pollWait(0x20075e8, 0x72, 0xe40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc8200540d0, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc8200540d0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc820054070, 0x0, 0xe4f938, 0xc8205a83e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc82039c008, 0xc82003aea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc82039c008, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc8202ca080, 0xe4e870, 0xc82039c008, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc820950180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8200160c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc820016240)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8200160c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc820016240)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func1(0x2042078, 0xc8205f6180, 0xc8200c70a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1571 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8205de0d0, 0x2042078, 0xc8205f6180, 0xc8200c70a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc8202ca000, 0x2042078, 0xc8205f6180, 0xc8200c70a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8202caa00)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\tnet/http_test.TestTransportCancelRequest.func1(0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1461 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8205de040, 0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc8202ca080, 0x2042078, 0xc8205f6000, 0xc8205fc0e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007c600)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f560, 0x7e7b20, 0x13a, 0x13a, 0x7d6900)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc820039f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc820039f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func2(0xc82025c240)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1589 +0x20\r\n\t\tcreated by net/http_test.TestCancelRequestWithChannel\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1591 +0x594\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportCancelRequest.func2(0xc8202342c0, 0xc8201142a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1476 +0x20\r\n\t\tcreated by net/http_test.TestTransportCancelRequest\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1478 +0x54d\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82010c050, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc820166090, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007c680, 0x2042078, 0xc820016180, 0xc8200c7260)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8202ca500)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\nFAIL\r\ncoverage: 79.4% of statements\r\nexit status 1\r\nFAIL\tnet/http\t20.030s\r\nEmmanuels-MacBook-Pro:http emmanuelodeke$ \r\nEmmanuels-MacBook-Pro:http emmanuelodeke$ go test -coverprofile=master-coverage.out\r\n--- FAIL: TestTLSHandshakeTimeout (1.27s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0xdc55d8, 0x72, 0xd40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc82011a0d0, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc82011a0d0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc82011a070, 0x0, 0xdc2350, 0xc820398620)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc82088e010, 0xc82028fea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc82088e010, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc820324180, 0xd82720, 0xc82088e010, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc8208e6180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8201d60c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8201d60c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestTransportCancelRequest.func1(0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1461 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82038c060, 0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc820324180, 0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc820324280)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f560, 0x7e7b20, 0x13a, 0x13a, 0x7d6901)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc82028df08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc82028df08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportCancelRequest.func2(0xc8200c0370, 0xc820492460)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1476 +0x20\r\n\t\tcreated by net/http_test.TestTransportCancelRequest\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1478 +0x54d\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8203d2040, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc8203620c0, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82008c080, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8200fe100)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n--- FAIL: TestServerTimeouts (1.92s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0xdc55d8, 0x72, 0xd40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc82011a0d0, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc82011a0d0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc82011a070, 0x0, 0xdc2350, 0xc820398620)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc82088e010, 0xc82028fea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc82088e010, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc820324180, 0xd82720, 0xc82088e010, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc8208e6180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet.runtime_pollWait(0xdc5c98, 0x72, 0xd40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc82011a290, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc82011a290, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc82011a230, 0x0, 0xdc2350, 0xc8203a4360)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc82088e008, 0xc82003aea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc82088e008, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc82007c700, 0xd82720, 0xc82088e008, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc8208e6240)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8201d60c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8201d6180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8201d60c0)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8201d6180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func1(0x1961078, 0xc820016180, 0xc8202fa7e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1571 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82038c0c0, 0x1961078, 0xc820016180, 0xc8202fa7e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007c700, 0x1961078, 0xc820016180, 0xc8202fa7e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007c680)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\tnet/http_test.TestTransportCancelRequest.func1(0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1461 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82038c060, 0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc820324180, 0x1961078, 0xc8200160c0, 0xc820493340)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc820324280)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f560, 0x7e7b20, 0x13a, 0x13a, 0x7d6900)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc820035f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc820035f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func2(0xc8208e6540)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1589 +0x20\r\n\t\tcreated by net/http_test.TestCancelRequestWithChannel\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1591 +0x594\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportCancelRequest.func2(0xc8200c0370, 0xc820492460)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1476 +0x20\r\n\t\tcreated by net/http_test.TestTransportCancelRequest\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1478 +0x54d\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8203d2040, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc8203620c0, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82008c080, 0x1961078, 0xc8201d6000, 0xc8204920e0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8200fe100)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\nFAIL\r\ncoverage: 79.4% of statements\r\nexit status 1\r\nFAIL\tnet/http\t21.421s\r\n```\r\n\r\n### After commenting out the \r\n```go\r\n// t.Parallel()\r\n```\r\nline in server_test.go that test no longer crashes as you'll see below.\r\n\r\n```shell\r\n$ go test -cover\r\n--- FAIL: TestTransportPersistConnLeakShortBody (1.46s)\r\n\ttransport_test.go:1071: goroutine growth: 29 -\u003e 35 -\u003e 37 (delta: 8)\r\n\ttransport_test.go:1073: too many new goroutines\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0xf61a28, 0x72, 0xc40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc820468530, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc820468530, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc8204684d0, 0x0, 0xc4e898, 0xc8205d3d20)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc8208ea020, 0xc82012aea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc8208ea020, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc8201e4480, 0xf61740, 0xc8208ea020, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc82012e6c0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8207bc300)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8207bc300)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestTransportCancelRequest.func1(0xc82078, 0xc8206fa000, 0xc82069c000)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1461 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82059e1d0, 0xc82078, 0xc8206fa000, 0xc82069c000)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc8201e4480, 0xc82078, 0xc8206fa000, 0xc82069c000)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007a880)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f540, 0x7e7b20, 0x13a, 0x13a, 0x7d6901)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc8206c5f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc8206c5f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportCancelRequest.func2(0xc82073a0b0, 0xc8200c57a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1476 +0x20\r\n\t\tcreated by net/http_test.TestTransportCancelRequest\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1478 +0x54d\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82000a390, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc820182090, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007a780, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8201e4000)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n--- FAIL: TestServerTimeouts (1.92s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0xc88278, 0x72, 0xc40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc82005c530, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc82005c530, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc82005c4d0, 0x0, 0xc4e898, 0xc8205d3c20)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc820028038, 0xc820128ea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc820028038, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc82007a800, 0xf61740, 0xc820028038, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc820506120)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8206fa180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8206fa180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func1(0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1571 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8205e21b0, 0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007a800, 0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007ad80)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f540, 0x7e7b20, 0x13a, 0x13a, 0x7d6900)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc8206c5f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc8206c5f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func2(0xc820506180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1589 +0x20\r\n\t\tcreated by net/http_test.TestCancelRequestWithChannel\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1591 +0x594\r\n\t\t\r\n\t\ttime.Sleep(0x77359400)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestTransportResponseHeaderTimeout.func2(0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1392 +0x48\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc82000a390, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.(*ServeMux).ServeHTTP(0xc820182090, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2155 +0x1c3\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007a780, 0xc82078, 0xc8206fa0c0, 0xc82069c1c0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc8201e4000)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n--- FAIL: TestTransportCancelRequest (2.02s)\r\n\tmain_test.go:112: Test appears to have leaked a Transport:\r\n\t\tnet.runtime_pollWait(0xc88278, 0x72, 0xc40050)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/netpoll.go:160 +0x60\r\n\t\tnet.(*pollDesc).Wait(0xc82005c530, 0x72, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:73 +0x3a\r\n\t\tnet.(*pollDesc).WaitRead(0xc82005c530, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_poll_runtime.go:78 +0x36\r\n\t\tnet.(*netFD).accept(0xc82005c4d0, 0x0, 0xc4e898, 0xc8205d3c20)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/fd_unix.go:426 +0x27c\r\n\t\tnet.(*TCPListener).AcceptTCP(0xc820028038, 0xc820128ea0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:254 +0x4d\r\n\t\tnet.(*TCPListener).Accept(0xc820028038, 0x0, 0x0, 0x0, 0x0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/tcpsock_posix.go:264 +0x3d\r\n\t\tnet/http.(*Server).Serve(0xc82007a800, 0xf61740, 0xc820028038, 0x0, 0x0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2387 +0x165\r\n\t\tnet/http/httptest.(*Server).goServe.func1(0xc820506120)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:216 +0x75\r\n\t\tcreated by net/http/httptest.(*Server).goServe\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/httptest/server.go:217 +0x58\r\n\t\t\r\n\t\tnet/http.(*persistConn).readLoop(0xc8206fa180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1272 +0xc73\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:922 +0xf60\r\n\t\t\r\n\t\tnet/http.(*persistConn).writeLoop(0xc8206fa180)\r\n\t\t\tnet/http/_test/_obj_test/transport.go:1393 +0x4d6\r\n\t\tcreated by net/http.(*Transport).dialConn\r\n\t\t\tnet/http/_test/_obj_test/transport.go:923 +0xf85\r\n\t\t\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func1(0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1571 +0xf5\r\n\t\tnet/http.HandlerFunc.ServeHTTP(0xc8205e21b0, 0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1824 +0x44\r\n\t\tnet/http.serverHandler.ServeHTTP(0xc82007a800, 0xc82078, 0xc8207bc000, 0xc8205482a0)\r\n\t\t\tnet/http/_test/_obj_test/server.go:2340 +0x1d4\r\n\t\tnet/http.(*conn).serve(0xc82007ad80)\r\n\t\t\tnet/http/_test/_obj_test/server.go:1719 +0x10b4\r\n\t\tcreated by net/http.(*Server).Serve\r\n\t\t\tnet/http/_test/_obj_test/server.go:2416 +0x4e4\r\n\t\t\r\n\t\ttesting.RunTests(0x63f540, 0x7e7b20, 0x13a, 0x13a, 0x7d6900)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:597 +0x564\r\n\t\ttesting.(*M).Run(0xc8206c9f08, 0xc820049e18)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/testing/testing.go:509 +0x81\r\n\t\tnet/http_test.TestMain(0xc8206c9f08)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/main_test.go:19 +0x21\r\n\t\tmain.main()\r\n\t\t\tnet/http/_test/_testmain.go:802 +0x253\r\n\t\t\r\n\t\ttime.Sleep(0x3b9aca00)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/runtime/time.go:59 +0xf9\r\n\t\tnet/http_test.TestCancelRequestWithChannel.func2(0xc820506180)\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1589 +0x20\r\n\t\tcreated by net/http_test.TestCancelRequestWithChannel\r\n\t\t\t/Users/emmanuelodeke/go/src/go.googlesource.com/go/src/net/http/transport_test.go:1591 +0x594\r\nFAIL\r\ncoverage: 79.4% of statements\r\nexit status 1\r\nFAIL\tnet/http\t21.163s\r\n```",
	"user": {
		"login": "odeke-em",
		"id": 4898263,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2016-01-04T19:23:35Z",
	"created_at": "2016-01-03T12:52:42Z",
	"updated_at": "2016-01-04T19:23:35Z",
	"milestone": {
		"id": 1096159,
		"number": 24,
		"title": "Go1.6"
	}
}
