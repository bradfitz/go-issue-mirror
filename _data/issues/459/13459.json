{
	"id": 120052503,
	"number": 13459,
	"state": "closed",
	"title": "x/tools/cmd/oracle: panic: runtime error: index out of range",
	"body": "I don't have a reduced case for this, but it is reproducible on https://github.com/cockroachdb/cockroach/commit/02c6eae14bff51cda9a5cc8dea1552b71c1451a8 with the invocation `oracle -pos=sql/parser/type_check.go:#8409 -format=plain referrers`, and produces the following output:\r\n```\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:282:6: 68 references to type QualifiedName struct{Base Name; Indirect Indirection; normalized nameType}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/alter_table.go:28.12-28.24: \tTable    *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/create.go:50.15-50.27: \tTable       *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/create.go:265.15-265.27: \tTable       *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/eval.go:1038.10-1038.22: func (t *QualifiedName) Eval(_ EvalContext) (Datum, error) {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:279.23-279.35: var _ VariableExpr = \u0026QualifiedName{}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:289.8-289.20: func (*QualifiedName) Variable() {}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:292.18-292.30: func StarExpr() *QualifiedName {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:293.10-293.22: \treturn \u0026QualifiedName{Indirect: Indirection{unqualifiedStar}}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:309.10-309.22: func (n *QualifiedName) NormalizeTableName(database string) error {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:373.10-373.22: func (n *QualifiedName) NormalizeColumnName() error {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:421.10-421.22: func (n *QualifiedName) Database() string {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:431.10-431.22: func (n *QualifiedName) Table() string {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:443.10-443.22: func (n *QualifiedName) Index() string {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:455.10-455.22: func (n *QualifiedName) Column() string {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:463.10-463.22: func (n *QualifiedName) IsStar() bool {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:476.10-476.22: func (n *QualifiedName) String() string {\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:486.24-486.36: type QualifiedNames []*QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr.go:633.12-633.24: \tName     *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr_test.go:49.9-49.21: \t\tq := \u0026QualifiedName{Base: Name(tc.in)}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr_test.go:81.43-81.55: \t\tq := stmts[0].(*Select).Exprs[0].Expr.(*QualifiedName)\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/expr_test.go:124.43-124.55: \t\tq := stmts[0].(*Select).Exprs[0].Expr.(*QualifiedName)\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/insert.go:33.11-33.23: \tTable   *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/normalize.go:92.38-92.50: \t\t\t\tcase *BinaryExpr, VariableExpr, *QualifiedName, ValArg:\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/rename.go:43.12-43.24: \tName     *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/rename.go:44.12-44.24: \tNewName  *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/rename.go:60.12-60.24: \tName     *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/rename.go:77.11-77.23: \tTable   *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/select.go:162.7-162.19: func (QualifiedName) simpleTableExpr() {}\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/set.go:30.10-30.22: \tName   *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/show.go:42.9-42.21: \tTable *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/show.go:62.9-62.21: \tTable *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/show.go:71.8-71.20: \tName *QualifiedName\r\n/Users/tamird/src/go/src/github.com/cockroachdb/cockroach/sql/parser/sql.y:39.18-39.30:   qnames         QualifiedNames\r\npanic: runtime error: index out of range\r\n\r\ngoroutine 1 [running]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display(0xc8411f6e80, 0xc8411d3540)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:206 +0x98f\r\ngolang.org/x/tools/oracle.(*Query).WriteTo(0xc8200f08c0, 0x8ce1a0, 0xc820098008)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/oracle.go:105 +0x9a\r\nmain.main()\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/cmd/oracle/main.go:202 +0xe34\r\n\r\ngoroutine 17029 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc823f036d0, 0x45, 0x160f, 0xcc, 0x21, 0xc8411f73c0)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17027 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc8215e9aa0, 0x52, 0x20d8, 0x151, 0xd, 0xc8411f7340)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17026 [runnable]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc826b29cc0, 0x4c, 0x2212e, 0x24d, 0x14, 0xc8411f7280)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17030 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc823edf630, 0x45, 0x1c17, 0x104, 0x3d, 0xc8411f7400)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17031 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc823d9c5a0, 0x45, 0x1a1c, 0xdf, 0x14, 0xc8411f74c0)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17028 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc82437b9a0, 0x4c, 0xd53, 0x79, 0x8, 0xc8411f7380)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17033 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc823d9c9b0, 0x46, 0x1254, 0xae, 0x2e, 0xc8411f7540)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n\r\ngoroutine 17032 [chan send]:\r\ngolang.org/x/tools/oracle.(*referrersResult).display.func1(0xc823d9c640, 0x45, 0x688, 0x34, 0x21, 0xc8411f7500)\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:193 +0x1d8\r\ncreated by golang.org/x/tools/oracle.(*referrersResult).display\r\n\t/Users/tamird/src/go/src/golang.org/x/tools/oracle/referrers.go:194 +0x53f\r\n```",
	"user": {
		"login": "tamird",
		"id": 1535036,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "alandonovan",
		"id": 8433140,
		"type": "User",
		"site_admin": false
	},
	"comments": 2,
	"closed_at": "2016-02-10T17:56:33Z",
	"created_at": "2015-12-02T22:42:19Z",
	"updated_at": "2016-02-10T17:56:33Z",
	"milestone": {
		"id": 1067491,
		"number": 22,
		"title": "Unreleased"
	}
}
