{
	"id": 141597715,
	"body": "\u003e If building from source, it would be easy to print out the counters from these loops at the end of a GC and see what they look like in these benchmarks.\r\n\r\nSee my output:\r\n```\r\nc:\\Users\\Alex\\go\\go\\src\\runtime\u003egit diff\r\ndiff --git a/src/runtime/mgc.go b/src/runtime/mgc.go\r\nindex 848e8f6..eef12dd 100644\r\n--- a/src/runtime/mgc.go\r\n+++ b/src/runtime/mgc.go\r\n@@ -1210,6 +1210,10 @@ func gc(mode int) {\r\n \t\t// give the queued finalizers, if any, a chance to run\r\n \t\tGosched()\r\n \t}\r\n+\r\n+\tfor mp := allm; mp != nil; mp = mp.alllink {\r\n+\t\tprintln(mp.gcstats.nprocyield, mp.gcstats.nosyield, mp.gcstats.nsleep)\r\n+\t}\r\n }\r\n \r\n // gcBgMarkStartWorkers prepares background mark worker goroutines.\r\ndiff --git a/src/runtime/os1_windows.go b/src/runtime/os1_windows.go\r\nindex f608b4a..be5a4b2 100644\r\n--- a/src/runtime/os1_windows.go\r\n+++ b/src/runtime/os1_windows.go\r\n@@ -154,7 +154,7 @@ func osinit() {\r\n \r\n \tstdcall2(_SetConsoleCtrlHandler, funcPC(ctrlhandler), 1)\r\n \r\n-\tstdcall1(_timeBeginPeriod, 1)\r\n+\t//stdcall1(_timeBeginPeriod, 1)\r\n \r\n \tncpu = getproccount()\r\n \r\nc:\\Users\\Alex\\go\\go\\src\\runtime\u003ego test -run=none -bench=AppendGrowByte\r\nPASS\r\nBenchmarkAppendGrowByte-2\t0 0 0\r\n8 0 0\r\n0 0 0\r\n0 0 0\r\n10 1 0\r\n0 0 0\r\n8 0 0\r\n0 0 0\r\n0 0 0\r\n20 2 0\r\n0 0 0\r\n30 1 0\r\n0 0 0\r\n0 0 0\r\n20 2 0\r\n10 1 0\r\n30 1 0\r\n0 0 0\r\n0 0 0\r\n20 2 0\r\n20 2 0\r\n30 1 0\r\n0 0 0\r\n0 0 0\r\n20 2 0\r\n20 2 0\r\n40 2 0\r\n0 0 0\r\n0 0 0\r\n20 2 0\r\n20 2 0\r\n40 2 0\r\n0 0 0\r\n0 0 0\r\n30 3 0\r\n20 2 0\r\n50 3 0\r\n0 0 0\r\n0 0 0\r\n30 3 0\r\n20 2 0\r\n50 3 0\r\n0 0 0\r\n0 0 0\r\n40 4 0\r\n20 2 0\r\n60 4 0\r\n0 0 0\r\n0 0 0\r\n40 4 0\r\n30 3 0\r\n60 4 0\r\n0 0 0\r\n0 0 0\r\n40 4 0\r\n30 3 0\r\n60 4 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n30 3 0\r\n70 5 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n30 3 0\r\n80 6 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n30 3 0\r\n90 7 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n30 3 0\r\n100 8 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n40 4 0\r\n100 8 0\r\n0 0 0\r\n0 0 0\r\n50 5 0\r\n40 4 0\r\n100 8 0\r\n0 0 0\r\n0 0 0\r\n60 6 0\r\n40 4 0\r\n100 8 0\r\n0 0 0\r\n0 0 0\r\n70 7 0\r\n40 4 0\r\n110 9 0\r\n0 0 0\r\n0 0 0\r\n70 7 0\r\n50 5 0\r\n110 9 0\r\n0 0 0\r\n0 0 0\r\n70 7 0\r\n50 5 0\r\n110 9 0\r\n0 0 0\r\n0 0 0\r\n80 8 0\r\n50 5 0\r\n120 10 0\r\n0 0 0\r\n0 0 0\r\n80 8 0\r\n50 5 0\r\n120 10 0\r\n0 0 0\r\n0 0 0\r\n90 9 0\r\n50 5 0\r\n130 11 0\r\n0 0 0\r\n0 0 0\r\n90 9 0\r\n60 6 0\r\n130 11 0\r\n0 0 0\r\n0 0 0\r\n90 9 0\r\n60 6 0\r\n140 12 0\r\n0 0 0\r\n0 0 0\r\n90 9 0\r\n60 6 0\r\n140 12 0\r\n0 0 0\r\n0 0 0\r\n100 10 0\r\n70 7 0\r\n140 12 0\r\n0 0 0\r\n0 0 0\r\n100 10 0\r\n70 7 0\r\n150 14 0\r\n0 0 0\r\n0 0 0\r\n100 10 0\r\n70 7 0\r\n150 14 0\r\n0 0 0\r\n0 0 0\r\n110 11 0\r\n70 7 0\r\n160 15 0\r\n0 0 0\r\n0 0 0\r\n110 11 0\r\n80 8 0\r\n160 15 0\r\n0 0 0\r\n0 0 0\r\n110 11 0\r\n80 8 0\r\n160 15 0\r\n0 0 0\r\n0 0 0\r\n120 12 0\r\n80 8 0\r\n170 16 0\r\n0 0 0\r\n0 0 0\r\n120 12 0\r\n80 8 0\r\n180 17 0\r\n0 0 0\r\n0 0 0\r\n120 12 0\r\n80 8 0\r\n180 17 0\r\n0 0 0\r\n0 0 0\r\n130 13 0\r\n80 8 0\r\n190 18 0\r\n0 0 0\r\n0 0 0\r\n130 13 0\r\n80 8 0\r\n200 19 0\r\n0 0 0\r\n0 0 0\r\n130 13 0\r\n80 8 0\r\n200 19 0\r\n0 0 0\r\n0 0 0\r\n140 14 0\r\n90 9 0\r\n200 19 0\r\n0 0 0\r\n0 0 0\r\n140 14 0\r\n90 9 0\r\n210 20 0\r\n0 0 0\r\n0 0 0\r\n140 14 0\r\n90 9 0\r\n220 21 0\r\n0 0 0\r\n0 0 0\r\n140 14 0\r\n90 9 0\r\n220 21 0\r\n0 0 0\r\n0 0 0\r\n150 15 0\r\n100 10 0\r\n220 21 0\r\n0 0 0\r\n0 0 0\r\n150 15 0\r\n100 10 0\r\n230 22 0\r\n0 0 0\r\n0 0 0\r\n150 15 0\r\n100 10 0\r\n230 22 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n100 10 0\r\n240 23 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n110 11 0\r\n240 23 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n110 11 0\r\n250 24 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n110 11 0\r\n260 25 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n120 12 0\r\n260 25 0\r\n0 0 0\r\n0 0 0\r\n160 16 0\r\n120 12 0\r\n260 25 0\r\n0 0 0\r\n0 0 0\r\n170 17 0\r\n130 13 0\r\n260 25 0\r\n0 0 0\r\n0 0 0\r\n170 17 0\r\n130 13 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n170 17 0\r\n130 13 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n180 18 0\r\n130 13 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n190 19 0\r\n140 14 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n190 19 0\r\n150 15 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n190 19 0\r\n150 15 0\r\n270 26 0\r\n0 0 0\r\n0 0 0\r\n200 20 0\r\n150 15 0\r\n280 27 0\r\n0 0 0\r\n0 0 0\r\n200 20 0\r\n160 16 0\r\n280 27 0\r\n0 0 0\r\n0 0 0\r\n200 20 0\r\n160 16 0\r\n290 28 0\r\n0 0 0\r\n0 0 0\r\n200 20 0\r\n160 16 0\r\n290 28 0\r\n0 0 0\r\n0 0 0\r\n210 21 0\r\n160 16 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n210 21 0\r\n170 17 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n210 21 0\r\n170 17 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n220 22 0\r\n180 18 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n220 22 0\r\n180 18 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n230 24 0\r\n190 19 0\r\n300 29 0\r\n0 0 0\r\n0 0 0\r\n230 24 0\r\n190 19 0\r\n310 30 0\r\n0 0 0\r\n0 0 0\r\n230 24 0\r\n200 20 0\r\n310 30 0\r\n0 0 0\r\n0 0 0\r\n230 24 0\r\n200 20 0\r\n310 30 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n200 20 0\r\n320 31 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n210 21 0\r\n320 31 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n210 21 0\r\n330 32 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n220 22 0\r\n330 32 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n220 22 0\r\n340 33 0\r\n0 0 0\r\n0 0 0\r\n240 25 0\r\n220 22 0\r\n340 33 0\r\n0 0 0\r\n0 0 0\r\n250 26 0\r\n220 22 0\r\n350 34 0\r\n0 0 0\r\n0 0 0\r\n250 26 0\r\n230 23 0\r\n350 34 0\r\n0 0 0\r\n0 0 0\r\n250 26 0\r\n230 23 0\r\n360 35 0\r\n0 0 0\r\n0 0 0\r\n250 26 0\r\n230 23 0\r\n360 35 0\r\n0 0 0\r\n0 0 0\r\n260 27 0\r\n230 23 0\r\n360 35 0\r\n0 0 0\r\n0 0 0\r\n270 28 0\r\n230 23 0\r\n370 36 0\r\n0 0 0\r\n0 0 0\r\n270 28 0\r\n230 23 0\r\n370 36 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n240 24 0\r\n370 36 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n240 24 0\r\n380 37 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n240 24 0\r\n390 38 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n250 25 0\r\n390 38 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n260 26 0\r\n390 38 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n270 27 0\r\n390 38 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n270 27 0\r\n400 39 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n280 28 0\r\n400 39 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n280 28 0\r\n410 40 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n290 29 0\r\n410 40 0\r\n0 0 0\r\n0 0 0\r\n280 29 0\r\n290 29 0\r\n410 40 0\r\n0 0 0\r\n0 0 0\r\n290 30 0\r\n290 29 0\r\n420 41 0\r\n0 0 0\r\n0 0 0\r\n290 30 0\r\n300 30 0\r\n420 41 0\r\n0 0 0\r\n0 0 0\r\n290 30 0\r\n300 30 0\r\n430 42 0\r\n0 0 0\r\n0 0 0\r\n290 30 0\r\n300 30 0\r\n430 42 0\r\n0 0 0\r\n0 0 0\r\n300 31 0\r\n300 30 0\r\n440 43 0\r\n0 0 0\r\n0 0 0\r\n300 31 0\r\n310 31 0\r\n440 43 0\r\n0 0 0\r\n0 0 0\r\n300 31 0\r\n310 31 0\r\n440 43 0\r\n0 0 0\r\n0 0 0\r\n310 32 0\r\n310 31 0\r\n440 43 0\r\n0 0 0\r\n0 0 0\r\n320 33 0\r\n310 31 0\r\n450 44 0\r\n0 0 0\r\n0 0 0\r\n320 33 0\r\n320 32 0\r\n450 44 0\r\n0 0 0\r\n0 0 0\r\n320 33 0\r\n320 32 0\r\n460 45 0\r\n0 0 0\r\n0 0 0\r\n320 33 0\r\n330 33 0\r\n460 45 0\r\n0 0 0\r\n0 0 0\r\n320 33 0\r\n330 33 0\r\n460 45 0\r\n0 0 0\r\n0 0 0\r\n330 34 0\r\n330 33 0\r\n460 45 0\r\n0 0 0\r\n0 0 0\r\n340 35 0\r\n330 33 0\r\n470 46 0\r\n0 0 0\r\n0 0 0\r\n340 35 0\r\n340 34 0\r\n470 46 0\r\n0 0 0\r\n0 0 0\r\n340 35 0\r\n340 34 0\r\n470 46 0\r\n0 0 0\r\n0 0 0\r\n350 36 0\r\n340 34 0\r\n480 47 0\r\n0 0 0\r\n0 0 0\r\n350 36 0\r\n350 35 0\r\n480 47 0\r\n0 0 0\r\n0 0 0\r\n350 36 0\r\n350 35 0\r\n480 47 0\r\n0 0 0\r\n0 0 0\r\n360 37 0\r\n350 35 0\r\n490 48 0\r\n0 0 0\r\n0 0 0\r\n360 37 0\r\n360 36 0\r\n490 48 0\r\n0 0 0\r\n0 0 0\r\n360 37 0\r\n360 36 0\r\n490 48 0\r\n0 0 0\r\n0 0 0\r\n370 38 0\r\n360 36 0\r\n500 49 0\r\n0 0 0\r\n0 0 0\r\n370 38 0\r\n360 36 0\r\n500 49 0\r\n0 0 0\r\n0 0 0\r\n380 39 0\r\n360 36 0\r\n500 49 0\r\n0 0 0\r\n0 0 0\r\n390 40 0\r\n360 36 0\r\n500 49 0\r\n0 0 0\r\n0 0 0\r\n400 41 0\r\n370 37 0\r\n500 49 0\r\n0 0 0\r\n0 0 0\r\n400 41 0\r\n370 37 0\r\n510 50 0\r\n0 0 0\r\n0 0 0\r\n400 41 0\r\n370 37 0\r\n510 50 0\r\n0 0 0\r\n0 0 0\r\n410 42 0\r\n370 37 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n410 42 0\r\n370 37 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n420 43 0\r\n380 38 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n420 43 0\r\n380 38 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n430 44 0\r\n390 39 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n430 44 0\r\n390 39 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n440 45 0\r\n390 39 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n450 46 0\r\n400 40 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n450 46 0\r\n400 40 0\r\n520 51 0\r\n0 0 0\r\n0 0 0\r\n460 48 0\r\n400 40 0\r\n530 52 0\r\n0 0 0\r\n0 0 0\r\n460 48 0\r\n400 40 0\r\n540 53 0\r\n0 0 0\r\n0 0 0\r\n460 48 0\r\n410 41 0\r\n540 53 0\r\n0 0 0\r\n0 0 0\r\n460 48 0\r\n410 41 0\r\n550 54 0\r\n0 0 0\r\n0 0 0\r\n460 48 0\r\n410 41 0\r\n550 54 0\r\n0 0 0\r\n0 0 0\r\n470 49 0\r\n420 42 0\r\n550 54 0\r\n0 0 0\r\n0 0 0\r\n470 49 0\r\n430 43 0\r\n550 54 0\r\n0 0 0\r\n0 0 0\r\n470 49 0\r\n440 44 0\r\n550 54 0\r\n0 0 0\r\n0 0 0\r\n470 49 0\r\n440 44 0\r\n560 55 0\r\n0 0 0\r\n0 0 0\r\n470 49 0\r\n440 44 0\r\n560 55 0\r\n0 0 0\r\n0 0 0\r\n480 50 0\r\n450 45 0\r\n560 55 0\r\n0 0 0\r\n0 0 0\r\n480 50 0\r\n460 46 0\r\n560 55 0\r\n0 0 0\r\n0 0 0\r\n480 50 0\r\n460 46 0\r\n570 56 0\r\n0 0 0\r\n0 0 0\r\n480 50 0\r\n460 46 0\r\n570 56 0\r\n0 0 0\r\n0 0 0\r\n490 51 0\r\n460 46 0\r\n570 56 0\r\n0 0 0\r\n0 0 0\r\n500 52 0\r\n460 46 0\r\n580 57 0\r\n0 0 0\r\n0 0 0\r\n500 52 0\r\n470 47 0\r\n580 57 0\r\n0 0 0\r\n0 0 0\r\n500 52 0\r\n480 48 0\r\n580 57 0\r\n0 0 0\r\n0 0 0\r\n500 52 0\r\n480 48 0\r\n580 57 0\r\n0 0 0\r\n0 0 0\r\n510 53 0\r\n480 48 0\r\n590 58 0\r\n0 0 0\r\n0 0 0\r\n510 53 0\r\n490 49 0\r\n590 58 0\r\n0 0 0\r\n0 0 0\r\n510 53 0\r\n490 49 0\r\n590 58 0\r\n0 0 0\r\n0 0 0\r\n520 54 0\r\n500 50 0\r\n590 58 0\r\n0 0 0\r\n0 0 0\r\n520 54 0\r\n500 50 0\r\n600 59 0\r\n0 0 0\r\n0 0 0\r\n520 54 0\r\n500 50 0\r\n600 59 0\r\n0 0 0\r\n0 0 0\r\n530 55 0\r\n510 51 0\r\n600 59 0\r\n0 0 0\r\n0 0 0\r\n530 55 0\r\n510 51 0\r\n600 59 0\r\n0 0 0\r\n0 0 0\r\n540 56 0\r\n510 51 0\r\n610 60 0\r\n0 0 0\r\n0 0 0\r\n540 56 0\r\n510 51 0\r\n610 60 0\r\n0 0 0\r\n0 0 0\r\n550 57 0\r\n510 51 0\r\n620 61 0\r\n0 0 0\r\n0 0 0\r\n550 57 0\r\n520 52 0\r\n620 61 0\r\n0 0 0\r\n0 0 0\r\n550 57 0\r\n520 52 0\r\n620 61 0\r\n0 0 0\r\n0 0 0\r\n560 58 0\r\n520 52 0\r\n630 62 0\r\n0 0 0\r\n0 0 0\r\n560 58 0\r\n520 52 0\r\n630 62 0\r\n0 0 0\r\n0 0 0\r\n570 59 0\r\n530 53 0\r\n630 62 0\r\n0 0 0\r\n0 0 0\r\n570 59 0\r\n540 54 0\r\n630 62 0\r\n0 0 0\r\n0 0 0\r\n570 59 0\r\n540 54 0\r\n630 62 0\r\n0 0 0\r\n0 0 0\r\n580 60 0\r\n540 54 0\r\n640 63 0\r\n0 0 0\r\n0 0 0\r\n580 60 0\r\n550 55 0\r\n640 63 0\r\n0 0 0\r\n0 0 0\r\n580 60 0\r\n550 55 0\r\n650 64 0\r\n0 0 0\r\n0 0 0\r\n580 60 0\r\n550 55 0\r\n650 64 0\r\n0 0 0\r\n0 0 0\r\n590 61 0\r\n550 55 0\r\n660 65 0\r\n0 0 0\r\n0 0 0\r\n590 61 0\r\n550 55 0\r\n660 65 0\r\n0 0 0\r\n0 0 0\r\n600 62 0\r\n560 56 0\r\n660 65 0\r\n0 0 0\r\n0 0 0\r\n600 62 0\r\n560 56 0\r\n670 66 0\r\n0 0 0\r\n0 0 0\r\n600 62 0\r\n560 56 0\r\n670 66 0\r\n0 0 0\r\n0 0 0\r\n610 63 0\r\n560 56 0\r\n680 67 0\r\n0 0 0\r\n0 0 0\r\n610 63 0\r\n570 57 0\r\n680 67 0\r\n0 0 0\r\n0 0 0\r\n610 63 0\r\n580 58 0\r\n680 67 0\r\n0 0 0\r\n0 0 0\r\n610 63 0\r\n580 58 0\r\n690 68 0\r\n0 0 0\r\n0 0 0\r\n610 63 0\r\n580 58 0\r\n690 68 0\r\n0 0 0\r\n0 0 0\r\n620 64 0\r\n590 59 0\r\n690 68 0\r\n0 0 0\r\n0 0 0\r\n620 64 0\r\n590 59 0\r\n700 69 0\r\n0 0 0\r\n0 0 0\r\n620 64 0\r\n590 59 0\r\n700 69 0\r\n0 0 0\r\n0 0 0\r\n630 65 0\r\n590 59 0\r\n710 70 0\r\n0 0 0\r\n0 0 0\r\n630 65 0\r\n590 59 0\r\n710 70 0\r\n0 0 0\r\n0 0 0\r\n640 66 0\r\n600 60 0\r\n710 70 0\r\n0 0 0\r\n0 0 0\r\n640 66 0\r\n600 60 0\r\n710 70 0\r\n0 0 0\r\n0 0 0\r\n650 67 0\r\n600 60 0\r\n720 71 0\r\n0 0 0\r\n0 0 0\r\n650 67 0\r\n600 60 0\r\n730 72 0\r\n0 0 0\r\n0 0 0\r\n650 67 0\r\n600 60 0\r\n730 72 0\r\n0 0 0\r\n0 0 0\r\n660 68 0\r\n600 60 0\r\n730 72 0\r\n0 0 0\r\n0 0 0\r\n670 69 0\r\n600 60 0\r\n740 73 0\r\n0 0 0\r\n0 0 0\r\n670 69 0\r\n610 61 0\r\n740 73 0\r\n0 0 0\r\n0 0 0\r\n670 69 0\r\n610 61 0\r\n740 73 0\r\n0 0 0\r\n0 0 0\r\n680 70 0\r\n610 61 0\r\n750 74 0\r\n0 0 0\r\n0 0 0\r\n680 70 0\r\n620 62 0\r\n750 74 0\r\n0 0 0\r\n0 0 0\r\n680 70 0\r\n620 62 0\r\n750 74 0\r\n0 0 0\r\n0 0 0\r\n690 71 0\r\n620 62 0\r\n760 75 0\r\n0 0 0\r\n0 0 0\r\n690 71 0\r\n620 62 0\r\n760 75 0\r\n0 0 0\r\n0 0 0\r\n700 72 0\r\n620 62 0\r\n760 75 0\r\n0 0 0\r\n0 0 0\r\n710 73 0\r\n620 62 0\r\n760 75 0\r\n0 0 0\r\n0 0 0\r\n720 74 0\r\n630 63 0\r\n760 75 0\r\n0 0 0\r\n0 0 0\r\n720 74 0\r\n630 63 0\r\n770 76 0\r\n0 0 0\r\n0 0 0\r\n720 74 0\r\n630 63 0\r\n770 76 0\r\n0 0 0\r\n0 0 0\r\n730 75 0\r\n630 63 0\r\n770 76 0\r\n0 0 0\r\n0 0 0\r\n740 76 0\r\n640 64 0\r\n770 76 0\r\n0 0 0\r\n0 0 0\r\n740 76 0\r\n640 64 0\r\n780 77 0\r\n0 0 0\r\n0 0 0\r\n740 76 0\r\n     100\t  20334220 ns/op\r\nok  \truntime\t3.765s\r\n\r\nc:\\Users\\Alex\\go\\go\\src\\runtime\u003e\r\n```\r\n\r\n\u003e I think it would still be worth checking the nsleep counter to lend hard evidence to this hypothesis (@alexbrainman, would that be convenient for you to do?)\r\n\r\nI am not sure what you want.\r\n\r\n\u003e It looks like we use NtWaitForSingleObject. Remarkably, as far as I can tell, the Windows documentation doesn't specify the units for the timeout argument, but the runtime code claims it takes multiples of 100ns.\r\n\r\nI don't believe there is a way to wait for 100ns. I can try NtWaitForSingleObject, but I think we've tried that. I think you have a choice of 15ms (default) or 1ms (supported on most modern Windows versions, but you would have to call timeBeginPeriod WinAPI to indicate that you want 1ms precision). Go runtime calls timeBeginPeriod to have 1ms waits, but that drains people's laptop batteries faster. And timeBeginPeriod is a global resource - one single program calls it and whole computer gets it. And you need to be admin (or similar) for timeBeginPeriod to succeed - so it is a hit and miss affair - some Go programs runs with timeBeginPeriod on and some with off. So it would be nice to stop using this facility altogether. If we can make Go runtime perform adequately regardless of this setting.\r\n\r\n\u003e Alternatively, could you collect an ETW trace of that benchmark and dump it here?\r\n\r\nI am not sure what to download and run there. And I don't like running things I download from Internet on my computer if I can avoid it. I hope my output above gives you what you need.\r\n\r\n\u003e @alexbrainman if you record an ETW trace (see UIforETW link above) I'll analyze it.\r\n\r\nWill do if @aclements wants me to do that.\r\n\r\nThank you both for your input.\r\n\r\nAlex",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-09-18T23:54:40Z",
	"updated_at": "2015-09-18T23:54:40Z"
}
