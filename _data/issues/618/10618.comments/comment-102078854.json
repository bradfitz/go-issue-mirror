{
	"id": 102078854,
	"body": "At this point, we've seen this failure on the following commits and builders:\r\n\r\n2015-04-29T04:48:55-73e791a/dragonfly-amd64\r\n2015-04-29T18:07:43-c26fc88/dragonfly-amd64\r\n2015-05-07T23:54:28-a3dfcf5/linux-amd64-clang\r\n2015-05-12T16:26:47-18d98bc/linux-386-sid\r\n2015-05-12T19:34:46-9b379d7/linux-amd64\r\n2015-05-12T23:39:00-c06b856/linux-amd64-nocgo\r\n\r\nOn all of these, the stack has been essentially the same. It's always in the runtime test, and it's always executing both TestFutexsleep.func1 and TestGoroutineProfile. TestFutexsleep itself is not running: it created two goroutines and woke them up through a futex, but they haven't been scheduled to let them exit yet.\r\n\r\nHere's the exact stack from the most recent failure:\r\n\r\n```\r\nfatal error: forEachP: P did not run fn\r\n\r\nruntime stack:\r\nruntime.throw(0x6a50f0, 0x1a)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/panic.go:527 +0x96\r\nruntime.forEachP(0x6e3ab8)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/proc1.go:822 +0x3cf\r\nruntime.gc.func1()\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/mgc.go:832 +0x98\r\nruntime.systemstack(0xc20801a000)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/asm_amd64.s:262 +0x79\r\nruntime.mstart()\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/proc1.go:682\r\n\r\ngoroutine 160 [running]:\r\nruntime.systemstack_switch()\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/asm_amd64.s:216 fp=0xc2083ce5a8 sp=0xc2083ce5a0\r\nruntime.gc(0x0)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/mgc.go:833 +0x1dc fp=0xc2083ce7b0 sp=0xc2083ce5a8\r\nruntime.backgroundgc()\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/mgc.go:753 +0x40 fp=0xc2083ce7e0 sp=0xc2083ce7b0\r\nruntime.goexit()\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/asm_amd64.s:1670 +0x1 fp=0xc2083ce7e8 sp=0xc2083ce7e0\r\ncreated by runtime.startGC\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/mgc.go:726 +0x139\r\n\r\ngoroutine 1 [chan receive, locked to thread]:\r\ntesting.RunTests(0x6e37f0, 0x7b5da0, 0x91, 0x91, 0x7f1bd0bd8301)\r\n        /tmp/buildlet-scatch235740004/go/src/testing/testing.go:563 +0xa6a\r\ntesting.(*M).Run(0xc20821ff38, 0x4b3fed)\r\n        /tmp/buildlet-scatch235740004/go/src/testing/testing.go:492 +0x73\r\nmain.main()\r\n        runtime/_test/_testmain.go:822 +0x119\r\n\r\ngoroutine 2592 [syscall]:\r\nruntime_test.TestFutexsleep.func1(0x0, 0x4e94914f0000, 0x693930, 0x14, 0xc208018120)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/futex_test.go:47 +0x2d\r\ncreated by runtime_test.TestFutexsleep\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/futex_test.go:51 +0x26d\r\n\r\ngoroutine 2593 [syscall]:\r\nruntime_test.TestFutexsleep.func1(0x0, 0x1dcd65174876e800, 0x6932f0, 0x13, 0xc208018180)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/futex_test.go:47 +0x2d\r\ncreated by runtime_test.TestFutexsleep\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/futex_test.go:51 +0x26d\r\n\r\ngoroutine 82776 [runnable]:\r\nsyscall.Syscall(0x3, 0xffffffffffffffff, 0x0, 0x0, 0xffffffffffffffff, 0x0, 0x9)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/asm_linux_amd64.s:18 +0x5\r\nsyscall.Close(0xffffffffffffffff, 0x0, 0x0)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/zsyscall_linux_amd64.go:294 +0x51\r\nruntime_test.TestGoroutineProfile.func1(0xc2080110e0, 0xc20800e9a0)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:35 +0x3e\r\ncreated by runtime_test.TestGoroutineProfile\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:38 +0x130\r\n\r\ngoroutine 82778 [runnable]:\r\nsyscall.Syscall(0x3, 0xffffffffffffffff, 0x0, 0x0, 0xffffffffffffffff, 0x0, 0x9)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/asm_linux_amd64.s:18 +0x5\r\nsyscall.Close(0xffffffffffffffff, 0x0, 0x0)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/zsyscall_linux_amd64.go:294 +0x51\r\nruntime_test.TestGoroutineProfile.func1(0xc2080110e0, 0xc20800e9a0)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:35 +0x3e\r\ncreated by runtime_test.TestGoroutineProfile\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:38 +0x130\r\n\r\ngoroutine 82775 [semacquire]:\r\nruntime.GoroutineProfile(0xc208141f68, 0x80, 0x80, 0x10, 0x0)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/mprof.go:524 +0x80\r\nruntime_test.TestGoroutineProfile(0xc208536d80)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:47 +0x1eb\r\ntesting.tRunner(0xc208536d80, 0x7b6910)\r\n        /tmp/buildlet-scatch235740004/go/src/testing/testing.go:454 +0x9b\r\ncreated by testing.RunTests\r\n        /tmp/buildlet-scatch235740004/go/src/testing/testing.go:562 +0xa2a\r\n\r\ngoroutine 82777 [running]:\r\n        goroutine running on other thread; stack unavailable\r\ncreated by runtime_test.TestGoroutineProfile\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:38 +0x130\r\n\r\ngoroutine 82779 [runnable]:\r\nsyscall.Syscall(0x3, 0xffffffffffffffff, 0x0, 0x0, 0xffffffffffffffff, 0x0, 0x9)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/asm_linux_amd64.s:18 +0x5\r\nsyscall.Close(0xffffffffffffffff, 0x0, 0x0)\r\n        /tmp/buildlet-scatch235740004/go/src/syscall/zsyscall_linux_amd64.go:294 +0x51\r\nruntime_test.TestGoroutineProfile.func1(0xc2080110e0, 0xc20800e9a0)\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:35 +0x3e\r\ncreated by runtime_test.TestGoroutineProfile\r\n        /tmp/buildlet-scatch235740004/go/src/runtime/runtime_unix_test.go:38 +0x130\r\nFAIL    runtime 17.371s\r\n```",
	"user": {
		"login": "aclements",
		"id": 2688315,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-05-14T15:45:09Z",
	"updated_at": "2015-05-14T15:45:09Z"
}
