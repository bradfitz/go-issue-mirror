{
	"id": 51276652,
	"number": 565,
	"state": "closed",
	"title": "Segfault in net pkg",
	"body": "by **heavyhenning**:\n\n\u003cpre\u003ePlatform is is linux 386\nRevision:\n1d043d40c5b8 tip\n\nAttached is very simple code, that dies with this segfault:\n\n\nSIGSEGV: segmentation violation\nFaulting address: 0xc\nPC=0x8048869\n\nmain.request+0x69 /home/kris/omegle-watcher/penis.go:12\n\tmain.request()\ngoexit /home/kris/go/src/pkg/runtime/proc.c:140\n\tgoexit()\n\ngoroutine 7 [1]:\ngosched+0x66 /home/kris/go/src/pkg/runtime/proc.c:530\n\tgosched()\nruntime.exitsyscall+0x93 /home/kris/go/src/pkg/runtime/proc.c:593\n\truntime.exitsyscall()\nsyscall.Syscall6+0x57 /home/kris/go/src/pkg/syscall/asm_linux_386.s:61\n\tsyscall.Syscall6()\nsyscall.EpollWait+0x71 /home/kris/go/src/pkg/syscall/zsyscall_linux_386.go:132\n\tsyscall.EpollWait(0xa, 0xd229d0, 0x1, 0x1, 0x1, ...)\nnet.*pollster·WaitFD+0x111 /home/kris/go/src/pkg/net/fd_linux.go:116\n\tnet.*pollster·WaitFD(0xca8610, 0xa8368, 0x0, 0xffffffff, 0x0, ...)\nnet.*pollServer·Run+0xc9 /home/kris/go/src/pkg/net/fd.go:236\n\tnet.*pollServer·Run(0xcaaa80, 0x80b8d08)\ngoexit /home/kris/go/src/pkg/runtime/proc.c:140\n\tgoexit()\n0xcaaa80 unknown pc\n\ngoroutine 6 [4]:\ngosched+0x66 /home/kris/go/src/pkg/runtime/proc.c:530\n\tgosched()\nchanrecv+0x15c /home/kris/go/src/pkg/runtime/chan.c:353\n\tchanrecv(0xcadb40, 0xcd119c, 0x0, 0x1)\nruntime.chanrecv1+0x4e /home/kris/go/src/pkg/runtime/chan.c:423\n\truntime.chanrecv1(0xcadb40, 0xd0c180)\nnet.*pollServer·WaitRead+0x4d /home/kris/go/src/pkg/net/fd.go:276\n\tnet.*pollServer·WaitRead(0xcaaa80, 0xd0c180, 0x701)\nnet.*netFD·Read+0x184 /home/kris/go/src/pkg/net/fd.go:384\n\tnet.*netFD·Read(0xd0c180, 0xd4d800, 0x7d0, 0x7d0, 0x0, ...)\nnet.*UDPConn·Read+0x70 /home/kris/go/src/pkg/net/udpsock.go:90\n\tnet.*UDPConn·Read(0xd47170, 0xd4d800, 0x7d0, 0x7d0, 0x0, ...)\nnet._Exchange+0x2fb /home/kris/go/src/pkg/net/dnsclient.go:66\n\tnet._Exchange(0xcaf600, 0xcad240, 0xd47170, 0xd22a30, 0xf, ...)\nnet.tryOneName+0x1da /home/kris/go/src/pkg/net/dnsclient.go:158\n\tnet.tryOneName(0xcaf600, 0xd22a30, 0xf, 0x0, 0x0, ...)\nnet.LookupHost+0x3bd /home/kris/go/src/pkg/net/dnsclient.go:282\n\tnet.LookupHost(0xcaa860, 0xe, 0x0, 0x0, 0x0, ...)\nnet.hostPortToIP+0x12f /home/kris/go/src/pkg/net/ipsock.go:198\n\tnet.hostPortToIP(0x80921a8, 0x3, 0xcaa860, 0x13, 0x0, ...)\nnet.ResolveTCPAddr+0x36 /home/kris/go/src/pkg/net/tcpsock.go:61\n\tnet.ResolveTCPAddr(0xcaa860, 0x13, 0x80924c4, 0x0)\nnet.Dial+0x25f /home/kris/go/src/pkg/net/net.go:133\n\tnet.Dial(0x80921a8, 0x3, 0x80924c4, 0x0, 0xcaa860, ...)\nhttplib.*Client·Request+0x82d /home/kris/THEBOX/httplib.go/httplib.go:329\n\thttplib.*Client·Request(0xcab290, 0x80972f0, 0x15, 0x8092538, 0x3, ...)\nmain.request+0x5e /home/kris/omegle-watcher/penis.go:11\n\tmain.request()\ngoexit /home/kris/go/src/pkg/runtime/proc.c:140\n\tgoexit()\n\ngoroutine 3 [4]:\ngosched+0x66 /home/kris/go/src/pkg/runtime/proc.c:530\n\tgosched()\nchanrecv+0x15c /home/kris/go/src/pkg/runtime/chan.c:353\n\tchanrecv(0xcad600, 0xcb439c, 0x0, 0x1)\nruntime.chanrecv1+0x4e /home/kris/go/src/pkg/runtime/chan.c:423\n\truntime.chanrecv1(0xcad600, 0xcce200)\nnet.*pollServer·WaitRead+0x4d /home/kris/go/src/pkg/net/fd.go:276\n\tnet.*pollServer·WaitRead(0xcaaa80, 0xcce200, 0x701)\nnet.*netFD·Read+0x184 /home/kris/go/src/pkg/net/fd.go:384\n\tnet.*netFD·Read(0xcce200, 0xd4d000, 0x7d0, 0x7d0, 0x0, ...)\nnet.*UDPConn·Read+0x70 /home/kris/go/src/pkg/net/udpsock.go:90\n\tnet.*UDPConn·Read(0xd47020, 0xd4d000, 0x7d0, 0x7d0, 0x0, ...)\nnet._Exchange+0x2fb /home/kris/go/src/pkg/net/dnsclient.go:66\n\tnet._Exchange(0xcaf600, 0xcad240, 0xd47020, 0xd0f190, 0xf, ...)\nnet.tryOneName+0x1da /home/kris/go/src/pkg/net/dnsclient.go:158\n\tnet.tryOneName(0xcaf600, 0xd0f190, 0xf, 0x0, 0x0, ...)\nnet.LookupHost+0x3bd /home/kris/go/src/pkg/net/dnsclient.go:282\n\tnet.LookupHost(0xcaa800, 0xe, 0x0, 0x0, 0x0, ...)\nnet.hostPortToIP+0x12f /home/kris/go/src/pkg/net/ipsock.go:198\n\tnet.hostPortToIP(0x80921a8, 0x3, 0xcaa800, 0x13, 0x0, ...)\nnet.ResolveTCPAddr+0x36 /home/kris/go/src/pkg/net/tcpsock.go:61\n\tnet.ResolveTCPAddr(0xcaa800, 0x13, 0x80924c4, 0x0)\nnet.Dial+0x25f /home/kris/go/src/pkg/net/net.go:133\n\tnet.Dial(0x80921a8, 0x3, 0x80924c4, 0x0, 0xcaa800, ...)\nhttplib.*Client·Request+0x82d /home/kris/THEBOX/httplib.go/httplib.go:329\n\thttplib.*Client·Request(0xcab200, 0x80972f0, 0x15, 0x8092538, 0x3, ...)\nmain.request+0x5e /home/kris/omegle-watcher/penis.go:11\n\tmain.request()\ngoexit /home/kris/go/src/pkg/runtime/proc.c:140\n\tgoexit()\n\ngoroutine 1 [4]:\ngosched+0x66 /home/kris/go/src/pkg/runtime/proc.c:530\n\tgosched()\nchanrecv+0x335 /home/kris/go/src/pkg/runtime/chan.c:326\n\tchanrecv(0xcad1c0, 0xcb2fc4, 0x0, 0xcd1fe0)\nruntime.chanrecv1+0x4e /home/kris/go/src/pkg/runtime/chan.c:423\n\truntime.chanrecv1(0xcad1c0, 0x0)\nmain.main+0x6a /home/kris/omegle-watcher/penis.go:20\n\tmain.main()\nmainstart+0xf /home/kris/go/src/pkg/runtime/386/asm.s:83\n\tmainstart()\ngoexit /home/kris/go/src/pkg/runtime/proc.c:140\n\tgoexit()\neax     0x0\nebx     0xcb62ac\necx     0xcb05a0\nedx     0x4\nedi     0xcb6288\nesi     0xc\nebp     0xcb5c40\nesp     0xcb6288\neip     0x8048869\neflags  0x210206\ncs      0x73\nfs      0x0\ngs      0x47\nTrace/breakpoint trap\u003c/pre\u003e\n\n\n\n\n\nAttachments:\n\n1. \u003ca href=\"https://storage.googleapis.com/go-attachment/565/0/die.go\"\u003edie.go\u003c/a\u003e (384 bytes)",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "rsc",
		"id": 104030,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2014-12-08T10:05:03Z",
	"created_at": "2010-01-25T21:30:53Z",
	"updated_at": "2016-06-24T19:13:17Z"
}
