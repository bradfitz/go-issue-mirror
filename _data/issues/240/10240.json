{
	"id": 64128542,
	"number": 10240,
	"state": "closed",
	"title": "runtime: fatal error: acquirep: invalid p state (AMD Opteron 6172 with 48 cores)",
	"body": "Hi everyone,\r\n\r\nwhile experimenting with the language and trying to port a LU factorization benchmark from the Barcelona OpenMP Tasks Suite written in C, I got **fatal error: acquirep: invalid p state** on an AMD 48-core machine (Opteron 6172).\r\n\r\nI've tried to strip the code to the bare minimum that triggers the error. That's a bit difficult, because the problem is highly undeterministic, and removing code that I presume to be irrelevant for a race condition just never triggers it. This version seems to trigger it quite reliably, in 50%-80% of the runs.\r\nI've compiled it with **go build** (go 1.4.2) and ran the executable in a for loop in bash:\r\n\r\n```go\r\npackage main\r\n\r\nimport (\r\n        \"flag\"\r\n        \"fmt\"\r\n        \"runtime\"\r\n        \"sync\"\r\n)\r\n\r\nvar matrixSize, submatrixSize int\r\n\r\n/***********************************************************************\r\n * genmat:\r\n **********************************************************************/\r\nfunc genmat(M []*[][]float32) {\r\n        var null_entry bool\r\n\r\n        for ii := 0; ii \u003c matrixSize; ii++ {\r\n                for jj := 0; jj \u003c matrixSize; jj++ {\r\n                        null_entry = false\r\n\r\n                        if (ii \u003c jj) \u0026\u0026 (ii%3 != 0) {\r\n                                null_entry = true\r\n                        }\r\n                        if (ii \u003e jj) \u0026\u0026 (jj%3 != 0) {\r\n                                null_entry = true\r\n                        }\r\n                        if ii%2 == 1 {\r\n                                null_entry = true\r\n                        }\r\n                        if jj%2 == 1 {\r\n                                null_entry = true\r\n                        }\r\n                        if ii == jj {\r\n                                null_entry = false\r\n                        }\r\n                        if ii == jj-1 {\r\n                                null_entry = false\r\n                        }\r\n                        if ii-1 == jj {\r\n                                null_entry = false\r\n                        }\r\n                        if null_entry == false {\r\n\r\n                                subMatrix := make([][]float32, submatrixSize)\r\n                                for i := range subMatrix {\r\n                                        subMatrix[i] = make([]float32, submatrixSize)\r\n                                }\r\n\r\n                                M[ii*matrixSize+jj] = \u0026subMatrix\r\n\r\n                        } else {\r\n                                M[ii*matrixSize+jj] = nil\r\n                        }\r\n                }\r\n        }\r\n}\r\n\r\nfunc sparselu_init(pBENCH *[]*[][]float32, pass string) {\r\n        *pBENCH = make([]*[][]float32, matrixSize*matrixSize)\r\n        genmat(*pBENCH)\r\n}\r\n\r\nfunc sparselu_par_call(BENCH []*[][]float32) {\r\n\r\n        var wg sync.WaitGroup\r\n\r\n        for kk := 0; kk \u003c matrixSize; kk++ {\r\n                for ii := kk + 1; ii \u003c matrixSize; ii++ {\r\n                        if BENCH[ii*matrixSize+kk] != nil {\r\n                                for jj := kk + 1; jj \u003c matrixSize; jj++ {\r\n                                        if BENCH[kk*matrixSize+jj] != nil {\r\n                                                //#pragma omp task untied firstprivate(kk, jj, ii) shared(BENCH)\r\n                                                wg.Add(1)\r\n                                                jj := jj\r\n\r\n                                                go func(wg *sync.WaitGroup) {\r\n                                                        defer (*wg).Done()\r\n                                                        if BENCH[ii*matrixSize+jj] == nil {\r\n                                                                subMatrix := make([][]float32, submatrixSize)\r\n                                                                // go-style initializing 2d matrix in a loop\r\n                                                                for i := range subMatrix {\r\n                                                                        subMatrix[i] = make([]float32, submatrixSize)\r\n                                                                }\r\n                                                                BENCH[ii*matrixSize+jj] = \u0026subMatrix\r\n                                                        }\r\n                                                        for i := 0; i \u003c submatrixSize; i++ {\r\n                                                                for j := 0; j \u003c submatrixSize; j++ {\r\n                                                                        for k := 0; k \u003c submatrixSize; k++ {\r\n                                                                        }\r\n                                                                }\r\n                                                        }\r\n                                                }(\u0026wg)\r\n                                        }\r\n                                }\r\n                                wg.Wait()\r\n                        }\r\n                }\r\n        }\r\n}\r\n\r\nfunc main() {\r\n\r\n        runtime.GOMAXPROCS(47)\r\n\r\n        flag.IntVar(\u0026matrixSize, \"n\", 50, \"Matrix size\")\r\n        flag.IntVar(\u0026submatrixSize, \"m\", 100, \"Submatrix size\")\r\n        flag.Parse()\r\n\r\n        var matrixPar []*[][]float32\r\n        sparselu_init(\u0026matrixPar, \"Parallel\")\r\n        sparselu_par_call(matrixPar)\r\n        fmt.Println(\"Program ended\")\r\n}\r\n```\r\n\r\nNow I'm aware that this isn't idiomatic go, at all, it's a quite literal transliteration of the C version, but nevertheless, I guess the go runtime shouldn't crash like this:\r\n\r\n**for i in {1..15}; do bin/sparselu-crash-mwe -n 201 -m 69; done**\r\n\r\n```go\r\nacquirep: p-\u003em=0xc20db16380(38) p-\u003estatus=1\r\nfatal error: acquirep: invalid p state\r\n\r\nruntime stack:\r\nruntime.throw(0x562667)\r\n        /usr/local/go/src/runtime/panic.go:491 +0xad\r\nacquirep(0xc208062400)\r\n        /usr/local/go/src/runtime/proc.c:2747 +0x10d\r\nstopm()\r\n        /usr/local/go/src/runtime/proc.c:1186 +0x1b2\r\nfindrunnable(0xc208062400)\r\n        /usr/local/go/src/runtime/proc.c:1487 +0x562\r\nschedule()\r\n        /usr/local/go/src/runtime/proc.c:1575 +0x151\r\ngoexit0(0xc2119ab680)\r\n        /usr/local/go/src/runtime/proc.c:1717 +0x16e\r\nruntime.mcall(0x42e3c4)\r\n        /usr/local/go/src/runtime/asm_amd64.s:186 +0x5a\r\n\r\ngoroutine 1 [semacquire]:\r\nsync.(*WaitGroup).Wait(0xc20d1e38a0)\r\n        /usr/local/go/src/sync/waitgroup.go:132 +0x169\r\nmain.sparselu_par_call(0xc2080ae000, 0x9dd1, 0x9dd1)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:96 +0x274\r\nmain.main()\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:112 +0x11f\r\n\r\ngoroutine 531203 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531207 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531185 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531210 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531224 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531186 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531195 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531213 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531219 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531191 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531187 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531194 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531220 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531225 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531184 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531176 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531200 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531208 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531182 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531214 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531189 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531221 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531174 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531211 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531205 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531222 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531178 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 530478 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531212 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531202 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531192 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531172 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 530480 [runnable]:\r\nsync.(*WaitGroup).Done(0xc20d1e38a0)\r\n        /usr/local/go/src/sync/waitgroup.go:84\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x2e5\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531169 [runnable]:\r\nsync.(*WaitGroup).Done(0xc20d1e38a0)\r\n        /usr/local/go/src/sync/waitgroup.go:84\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x2e5\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531188 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531171 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531206 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531216 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 530479 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531175 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531179 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 530477 [runnable]:\r\nsync.(*WaitGroup).Done(0xc20d1e38a0)\r\n        /usr/local/go/src/sync/waitgroup.go:84\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x2e5\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531197 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531223 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531183 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531181 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531209 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531217 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531180 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531190 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 530476 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531218 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531170 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531173 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531215 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531193 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531196 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531201 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531199 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531204 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531177 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n\r\ngoroutine 531198 [runnable]:\r\nmain.func·001(0xc20d1e38a0)\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:77\r\ncreated by main.sparselu_par_call\r\n        /home/stsimon/golang-parallel/src/benchmarks/sparselu-crash-mwe.go:93 +0x247\r\n```\r\n\r\nInlining or reducing the genmat() function to trivial cases seems to stop provoking the crash.\r\nI can't reproduce this on an Intel 2-core CPU (i3/i5).\r\n\r\nAm I doing something completely wrong here, or is this a legitimate runtime bug? How can I debug this further?\r\n\r\nThank you,\r\nArtjom",
	"user": {
		"login": "artjomsimon",
		"id": 2609170,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 6,
	"closed_at": "2015-06-22T18:26:44Z",
	"created_at": "2015-03-24T23:44:11Z",
	"updated_at": "2016-06-25T02:03:57Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
