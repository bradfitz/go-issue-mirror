{
	"id": 58241850,
	"number": 9931,
	"state": "closed",
	"title": "runtime: nacl-386 unexpected return pc",
	"body": "The nacl-386 builder has been occasionally failing with:\r\n\r\n```\r\n...\r\nok  \treflect\t0.218s\r\nok  \tregexp\t0.837s\r\nok  \tregexp/syntax\t1.185s\r\nok  \truntime\t9.114s\r\nok  \truntime/debug\t0.675s\r\nruntime: unexpected return pc for runtime.getg called from 0x108a4240\r\nfatal error: unknown caller pc\r\n\r\nruntime stack:\r\nruntime.throw(0x238228, 0x11)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/panic.go:511 +0x100 fp=0x10881cf4 sp=0x10881ce8\r\nruntime.gentraceback(0x6f660, 0x10818fdc, 0x0, 0x10800d20, 0x0, 0x0, 0x7fffffff, 0x10881dd4, 0x0, 0x0, ...)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/traceback.go:234 +0x1120 fp=0x10881d8c sp=0x10881cf4\r\nruntime.scanstack(0x10800d20)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:747 +0x3a0 fp=0x10881de0 sp=0x10881d8c\r\nruntime.gcphasework(0x10800d20)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:853 +0xc0 fp=0x10881dec sp=0x10881de0\r\nruntime.stopg(0x10800d20, 0x1)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc1.go:395 +0xc0 fp=0x10881e00 sp=0x10881dec\r\nruntime.markroot(0x1080e000, 0xf)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:595 +0x260 fp=0x10881e48 sp=0x10881e00\r\nruntime.parfordo(0x1080e000)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/parfor.go:95 +0x1c0 fp=0x10881ea4 sp=0x10881e48\r\nruntime.gc(0x9254200d, 0x13c42a5b, 0x0)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:1490 +0x3a0 fp=0x10881fbc sp=0x10881ea4\r\nruntime.gc_m(0x9254200d, 0x13c42a5b, 0x10886000)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:1291 +0xc0 fp=0x10881fd0 sp=0x10881fbc\r\nruntime.gcwork.func1()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/malloc.go:434 +0x60 fp=0x10881fe0 sp=0x10881fd0\r\nruntime.systemstack(0x10810500)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:254 +0x80 fp=0x10881fe4 sp=0x10881fe0\r\nruntime.mstart()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc1.go:667 fp=0x10881fe8 sp=0x10881fe4\r\n\r\ngoroutine 6 [garbage collection]:\r\nruntime.systemstack_switch()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:209 fp=0x10818784 sp=0x10818780\r\nruntime.gcwork(0x0)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/malloc.go:435 +0x4c0 fp=0x108187dc sp=0x10818784\r\nruntime.backgroundgc()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc0.go:66 +0x80 fp=0x108187f0 sp=0x108187dc\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x108187f4 sp=0x108187f0\r\ncreated by runtime.gogc\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/malloc.go:343 +0x120\r\n\r\ngoroutine 1 [chan receive]:\r\nruntime.gopark(0x273fe4, 0x108a4230, 0x22f2a8, 0xc, 0x3efc0017)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x108195d8 sp=0x108195c0\r\nruntime.goparkunlock(0x108a4230, 0x22f2a8, 0xc, 0x1084e317)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x108195f0 sp=0x108195d8\r\nruntime.chanrecv(0x1ca460, 0x108a4200, 0x108196e4, 0x10882e01, 0xa0000)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/chan.go:417 +0x4e0 fp=0x1081963c sp=0x108195f0\r\nruntime.chanrecv1(0x1ca460, 0x108a4200, 0x108196e4)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/chan.go:318 +0x40 fp=0x10819654 sp=0x1081963c\r\ntesting.RunTests(0x273db8, 0x6513e0, 0x6, 0x6, 0x1083a401)\r\n\t/tmp/buildlet-scatch290161130/go/src/testing/testing.go:557 +0xae0 fp=0x10819728 sp=0x10819654\r\ntesting.(*M).Run(0x108360f0, 0x66b080)\r\n\t/tmp/buildlet-scatch290161130/go/src/testing/testing.go:486 +0xe0 fp=0x1081976c sp=0x10819728\r\nmain.main()\r\n\truntime/pprof/_test/_testmain.go:64 +0x200 fp=0x108197d0 sp=0x1081976c\r\nruntime.main()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:88 +0x260 fp=0x108197f0 sp=0x108197d0\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x108197f4 sp=0x108197f0\r\n\r\ngoroutine 2 [force gc (idle)]:\r\nruntime.gopark(0x273fe4, 0x656378, 0x22f8a8, 0xf, 0x10800214)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x108167c4 sp=0x108167ac\r\nruntime.goparkunlock(0x656378, 0x22f8a8, 0xf, 0x10800014)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x108167dc sp=0x108167c4\r\nruntime.forcegchelper()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:121 +0xe0 fp=0x108167f0 sp=0x108167dc\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x108167f4 sp=0x108167f0\r\ncreated by runtime.init.4\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:110 +0x40\r\n\r\ngoroutine 3 [finalizer wait]:\r\nruntime.gopark(0x273fe4, 0x66b28c, 0x22f668, 0xe, 0x10800314)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x10816fa0 sp=0x10816f88\r\nruntime.goparkunlock(0x66b28c, 0x22f668, 0xe, 0x14)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x10816fb8 sp=0x10816fa0\r\nruntime.runfinq()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mfinal.go:132 +0xe0 fp=0x10816ff0 sp=0x10816fb8\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x10816ff4 sp=0x10816ff0\r\ncreated by runtime.createfing\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mfinal.go:113 +0x80\r\n\r\ngoroutine 4 [syscall]:\r\nruntime.notetsleepg(0x6564ec, 0xd2367ae7, 0x1b, 0x2)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/lock_sema.go:262 +0xc0 fp=0x10817790 sp=0x10817768\r\nruntime.timerproc()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/time.go:209 +0x180 fp=0x108177f0 sp=0x10817790\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x108177f4 sp=0x108177f0\r\ncreated by runtime.addtimerLocked\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/time.go:116 +0x220\r\n\r\ngoroutine 7 [GC sweep wait]:\r\nruntime.gopark(0x273fe4, 0x66b294, 0x22dec8, 0xd, 0x10800514)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x10817fc4 sp=0x10817fac\r\nruntime.goparkunlock(0x66b294, 0x22dec8, 0xd, 0x1084e114)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x10817fdc sp=0x10817fc4\r\nruntime.bgsweep()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc0.go:89 +0x120 fp=0x10817ff0 sp=0x10817fdc\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x10817ff4 sp=0x10817ff0\r\ncreated by runtime.gc\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/mgc.go:1597 +0x1600\r\n\r\ngoroutine 14 [semacquire]:\r\nruntime.gopark(0x273fe4, 0x65afe0, 0x22a748, 0xa, 0x10836019)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x10814eb4 sp=0x10814e9c\r\nruntime.goparkunlock(0x65afe0, 0x22a748, 0xa, 0x19)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x10814ecc sp=0x10814eb4\r\nruntime.semacquire(0x640034, 0x108a0000)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/sema.go:100 +0x300 fp=0x10814ef0 sp=0x10814ecc\r\nruntime.GOMAXPROCS(0x1, 0x1083a320)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/debug.go:25 +0xc0 fp=0x10814f04 sp=0x10814ef0\r\nruntime/pprof_test.TestTraceStress(0x1084e3c0)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/trace_test.go:198 +0xca0 fp=0x10814fbc sp=0x10814f04\r\ntesting.tRunner(0x1084e3c0, 0x651410)\r\n\t/tmp/buildlet-scatch290161130/go/src/testing/testing.go:448 +0x100 fp=0x10814fe8 sp=0x10814fbc\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x10814fec sp=0x10814fe8\r\ncreated by testing.RunTests\r\n\t/tmp/buildlet-scatch290161130/go/src/testing/testing.go:556 +0xaa0\r\n\r\ngoroutine 17 [trace reader (blocked)]:\r\nruntime.gopark(0x273fe4, 0x663020, 0x23be48, 0x16, 0x10800b14)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x10815f28 sp=0x10815f10\r\nruntime.goparkunlock(0x663020, 0x23be48, 0x16, 0x1084e414)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:159 +0x60 fp=0x10815f40 sp=0x10815f28\r\nruntime.ReadTrace(0x0, 0x0, 0x0)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/trace.go:306 +0x2e0 fp=0x10815fbc sp=0x10815f40\r\nruntime/pprof.StartTrace.func1(0x3efde770, 0x1084e480)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/pprof.go:629 +0x40 fp=0x10815fe8 sp=0x10815fbc\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x10815fec sp=0x10815fe8\r\ncreated by runtime/pprof.StartTrace\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/pprof.go:635 +0xa0\r\n\r\ngoroutine 18 [runnable, locked to thread]:\r\nruntime.traceGoEnd()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/trace.go:758 fp=0x10818fe0 sp=0x10818fdc\r\nruntime.goexit1()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc1.go:1540 +0x20 fp=0x10818fe8 sp=0x10818fe0\r\nruntime.getg(0x0)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2414 fp=0x10818fec sp=0x10818fe8\r\ncreated by runtime/pprof_test.TestTraceStress\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/trace_test.go:123 +0x500\r\n\r\ngoroutine 45 [select (no cases)]:\r\nruntime.gopark(0x0, 0x0, 0x237b88, 0x11, 0x273f10)\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/proc.go:153 +0x1a0 fp=0x160ca7d4 sp=0x160ca7bc\r\nruntime.block()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/select.go:176 +0x60 fp=0x160ca7ec sp=0x160ca7d4\r\nruntime/pprof_test.TestTraceStress.func9()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/trace_test.go:189 +0x60 fp=0x160ca7f0 sp=0x160ca7ec\r\nruntime.goexit()\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/asm_386.s:2410 +0x1 fp=0x160ca7f4 sp=0x160ca7f0\r\ncreated by runtime/pprof_test.TestTraceStress\r\n\t/tmp/buildlet-scatch290161130/go/src/runtime/pprof/trace_test.go:190 +0xb80\r\nFAIL\truntime/pprof\t0.594s\r\n?   \truntime/race\t[no test files]\r\nok  \tsort\t0.200s\r\nok  \tstrconv\t1.742s\r\nok  \tstrings\t0.210s\r\nok  \tsync\t0.187s\r\nok  \tsync/atomic\t0.398s\r\n...\r\n```\r\n\r\n/cc @aclements @dvyukov @minux @randall77 ",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "dvyukov",
		"id": 1095328,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2015-02-28T23:21:12Z",
	"created_at": "2015-02-19T17:39:07Z",
	"updated_at": "2016-06-25T02:01:17Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
