{
	"id": 212493119,
	"body": "Sure, here it is. Thank you.\r\n\r\nClient code:\r\n\r\n```go\r\npackage main\r\n\r\nimport \"net\"\r\n\r\nfunc main() {\r\n        _, err := net.Dial(\"unix\", \"@/Foo/bar1234\")\r\n        if err != nil {\r\n                panic(err)\r\n        }\r\n}\r\n```\r\n\r\nFailing server code:\r\n```c++\r\n#include \u003cfcntl.h\u003e\r\n#include \u003cstring.h\u003e\r\n#include \u003csys/socket.h\u003e\r\n#include \u003csys/un.h\u003e\r\n\r\nint main() {\r\n   int fd = socket(AF_UNIX, SOCK_STREAM, 0);\r\n   fcntl(fd, F_SETFD, FD_CLOEXEC);\r\n   struct sockaddr_un sun;\r\n   memset(\u0026sun, 0, sizeof(sun));\r\n   sun.sun_family = AF_UNIX;\r\n   strncpy(sun.sun_path, \"@/Foo/bar1234\", sizeof(sun.sun_path));\r\n   sun.sun_path[0] = '\\0';\r\n   bind(fd, (sockaddr *) \u0026sun, sizeof(sun));\r\n   listen(fd, 255);\r\n   while (true) {}\r\n}\r\n```\r\n\r\nWorking server code:\r\n```c++\r\n#include \u003cfcntl.h\u003e\r\n#include \u003cstring.h\u003e\r\n#include \u003csys/socket.h\u003e\r\n#include \u003csys/un.h\u003e\r\n\r\nint main() {\r\n   int fd = socket(AF_UNIX, SOCK_STREAM, 0);\r\n   fcntl(fd, F_SETFD, FD_CLOEXEC);\r\n   struct sockaddr_un sun;\r\n   memset(\u0026sun, 0, sizeof(sun));\r\n   sun.sun_family = AF_UNIX;\r\n   strncpy(sun.sun_path, \"@/Foo/bar1234\", sizeof(sun.sun_path));\r\n   int sun_len = strlen(sun.sun_path);\r\n   sun.sun_path[0] = '\\0';\r\n   bind(fd, (sockaddr *) \u0026sun, sun_len + sizeof(sun.sun_family));\r\n   listen(fd, 255);\r\n   while (true) {}\r\n}\r\n```\r\n\r\nThe server was compiled with `gcc (GCC) 4.5.1 20100924 (Red Hat 4.5.1-4)`.\r\n\r\nOutput:\r\n```\r\n$ gcc server_ok.cpp \u0026\u0026 ./a.out \u0026\r\n[1] 16593\r\n$ go run client.go \r\n$ killall a.out\r\n/bin/bash: line 15: 16603 Terminated              ./a.out\r\n[1]+  Exit 143                gcc server_ok.cpp \u0026\u0026 ./a.out\r\n$ gcc server_fail.cpp \u0026\u0026 ./a.out \u0026                                                                                                                                                                                    \r\n[1] 17557\r\n$ go run client.go                                                                                                                                                                                                    \r\npanic: dial unix @/Foo/bar1234: connection refused\r\n\r\ngoroutine 1 [running]:\r\nmain.main()\r\n        /home/gvalente/id/src/tacc/client.go:8 +0x6c\r\n\r\ngoroutine 2 [runnable]:\r\nruntime.forcegchelper()\r\n        /usr/lib/go/src/runtime/proc.go:90\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_386.s:2287 +0x1\r\n\r\ngoroutine 3 [runnable]:\r\nruntime.bgsweep()\r\n        /usr/lib/go/src/runtime/mgc0.go:82\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_386.s:2287 +0x1\r\n\r\ngoroutine 4 [runnable]:\r\nruntime.runfinq()\r\n        /usr/lib/go/src/runtime/malloc.go:712\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_386.s:2287 +0x1\r\nexit status 2\r\n```",
	"user": {
		"login": "7AC",
		"id": 734659,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-04-20T16:09:18Z",
	"updated_at": "2016-04-20T16:09:18Z"
}
