{
	"id": 155938029,
	"number": 15769,
	"state": "open",
	"title": "runtime: crash in MSpan_Sweep with Go 1.4",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\ngo 1.4\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\nLinux txslhpcscf2172 2.6.32-431.56.1.el6.x86_64 #1 SMP Mon Apr 20 17:00:51 EDT 2015 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n3. What did you do? \r\nhttp based client server is running. Only log messages were being displayed at that time.\r\n\r\n4. What did you expect to see?\r\n\r\nNo panic should happen\r\n\r\n5. What did you see instead?\r\nPanic occured:\r\nfatal error: unexpected signal during runtime execution\r\n[signal 0xb code=0x80 addr=0x0 pc=0x42be6a]\r\n\r\nruntime stack:\r\nruntime.MSpan_Sweep(0x7fa08d904d00, 0xe100000000, 0x100000001)\r\n\t/usr/local/go/src/runtime/mgc0.c:960 +0x14a\r\n\r\ngoroutine 3 [running]:\r\nruntime.switchtoM()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:198 fp=0xc20801dfa8 sp=0xc20801dfa0\r\nruntime.gosweepone(0x0)\r\n\t/usr/local/go/src/runtime/mgc0.c:1165 +0x1e fp=0xc20801dfc0 sp=0xc20801dfa8\r\nruntime.bgsweep()\r\n\t/usr/local/go/src/runtime/mgc0.go:85 +0x36 fp=0xc20801dfe0 sp=0xc20801dfc0\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc20801dfe8 sp=0xc20801dfe0\r\ncreated by gc\r\n\t/usr/local/go/src/runtime/mgc0.c:1383\r\n\r\ngoroutine 1 [select (no cases), 39 minutes]:\r\nmain.main()\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/swrepo.go:116 +0x5da\r\n\r\ngoroutine 5 [chan receive, 39 minutes]:\r\ncode.google.com/p/log4go.ConsoleLogWriter.run(0xc20805a060, 0x7fa08d911c18, 0xc208036008)\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/code.google.com/p/log4go/termlog.go:27 +0x7a\r\ncreated by code.google.com/p/log4go.NewConsoleLogWriter\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/code.google.com/p/log4go/termlog.go:19 +0x6b\r\n\r\ngoroutine 11 [IO wait]:\r\nnet.(*pollDesc).Wait(0xc2080d0060, 0x72, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:84 +0x47\r\nnet.(*pollDesc).WaitRead(0xc2080d0060, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:89 +0x43\r\nnet.(*netFD).Read(0xc2080d0000, 0xc208178000, 0x8000, 0x8000, 0x0, 0x7fa08d911ba0, 0xc20802b018)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_unix.go:242 +0x40f\r\nnet.(*conn).Read(0xc208036030, 0xc208178000, 0x8000, 0x8000, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/net.go:121 +0xdc\r\ncrypto/tls.(*block).readFromUntil(0xc2080d3560, 0x7fa08d916bc0, 0xc208036030, 0x5, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:454 +0xe6\r\ncrypto/tls.(*Conn).readRecord(0xc208100000, 0x17, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:539 +0x2da\r\ncrypto/tls.(*Conn).Read(0xc208100000, 0xc2080e7000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:904 +0x166\r\nnet/http.noteEOFReader.Read(0x7fa08d916af8, 0xc208100000, 0xc2080a01b8, 0xc2080e7000, 0x1000, 0x1000, 0x752ee0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/transport.go:1270 +0x6e\r\nnet/http.(*noteEOFReader).Read(0xc2080f7a00, 0xc2080e7000, 0x1000, 0x1000, 0xc208012000, 0x0, 0x0)\r\n\t\u003cautogenerated\u003e:125 +0xd4\r\nbufio.(*Reader).fill(0xc2080c4de0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:97 +0x1ce\r\nbufio.(*Reader).Peek(0xc2080c4de0, 0x1, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:132 +0xf0\r\nnet/http.(*persistConn).readLoop(0xc2080a0160)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/transport.go:842 +0xa4\r\ncreated by net/http.(*Transport).dialConn\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/transport.go:660 +0xc9f\r\n\r\ngoroutine 7 [IO wait]:\r\nnet.(*pollDesc).Wait(0xc2080d0d10, 0x72, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:84 +0x47\r\nnet.(*pollDesc).WaitRead(0xc2080d0d10, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:89 +0x43\r\nnet.(*netFD).accept(0xc2080d0cb0, 0x0, 0x7fa08d911ba0, 0xc20812bcf8)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_unix.go:419 +0x40b\r\nnet.(*TCPListener).AcceptTCP(0xc208036028, 0xc20805a1e0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/tcpsock_posix.go:234 +0x4e\r\nnet.(*TCPListener).Accept(0xc208036028, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/tcpsock_posix.go:244 +0x4c\r\ncrypto/tls.(*listener).Accept(0xc20806a6a0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/tls.go:46 +0x6b\r\nnet/http.(*Server).Serve(0xc2080c5e60, 0x7fa08d9169b0, 0xc20806a6a0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1728 +0x92\r\nnet/http.Serve(0x7fa08d9169b0, 0xc20806a6a0, 0x7fa08d9169e8, 0xc20809a630, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1606 +0xa1\r\nweb.(*Server).RunTLS(0xc20801f5a0, 0xc20802af70, 0x5, 0xc208088480, 0x0, 0x0)\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/web/server.go:87 +0x491\r\ncreated by swrepo/sw.RunHTTPS\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/sw/server.go:96 +0x656\r\n\r\ngoroutine 9 [IO wait, 37 minutes]:\r\nnet.(*pollDesc).Wait(0xc2080107d0, 0x72, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:84 +0x47\r\nnet.(*pollDesc).WaitRead(0xc2080107d0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:89 +0x43\r\nnet.(*netFD).Read(0xc208010770, 0xc208049c00, 0x400, 0x400, 0x0, 0x7fa08d911ba0, 0xc20802b040)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_unix.go:242 +0x40f\r\nnet.(*conn).Read(0xc2080e2080, 0xc208049c00, 0x400, 0x400, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/net.go:121 +0xdc\r\ncrypto/tls.(*block).readFromUntil(0xc2080d2720, 0x7fa08d916bc0, 0xc2080e2080, 0x5, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:454 +0xe6\r\ncrypto/tls.(*Conn).readRecord(0xc2080cb340, 0x17, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:539 +0x2da\r\ncrypto/tls.(*Conn).Read(0xc2080cb340, 0xc20800f000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:904 +0x166\r\nnet/http.(*liveSwitchReader).Read(0xc2080f2228, 0xc20800f000, 0x1000, 0x1000, 0x1c00000000000008, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:214 +0xab\r\nio.(*LimitedReader).Read(0xc2080f6a80, 0xc20800f000, 0x1000, 0x1000, 0x400, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/io/io.go:408 +0xce\r\nbufio.(*Reader).fill(0xc2080c5ec0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:97 +0x1ce\r\nbufio.(*Reader).ReadSlice(0xc2080c5ec0, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:295 +0x257\r\nbufio.(*Reader).ReadLine(0xc2080c5ec0, 0x0, 0x0, 0x0, 0xc207fff400, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:324 +0x62\r\nnet/textproto.(*Reader).readLineSlice(0xc20800b080, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/textproto/reader.go:55 +0x9e\r\nnet/textproto.(*Reader).ReadLine(0xc20800b080, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/textproto/reader.go:36 +0x4f\r\nnet/http.ReadRequest(0xc2080c5ec0, 0xc20803cc30, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/request.go:598 +0xcb\r\nnet/http.(*conn).readRequest(0xc2080f21e0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:586 +0x26f\r\nnet/http.(*conn).serve(0xc2080f21e0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1162 +0x69e\r\ncreated by net/http.(*Server).Serve\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1751 +0x35e\r\n\r\ngoroutine 13 [runnable]:\r\nbytes.funcÂ·001()\r\n\t/imsgit/Tools/go_14/go_64/src/bytes/buffer.go:186\r\nbytes.makeSlice(0x373f1, 0xc208220000, 0x373f1, 0x373f1)\r\n\t/imsgit/Tools/go_14/go_64/src/bytes/buffer.go:191 +0x98\r\nbytes.(*Buffer).grow(0xc2081e0000, 0x6d91, 0x8000)\r\n\t/imsgit/Tools/go_14/go_64/src/bytes/buffer.go:99 +0x243\r\nbytes.(*Buffer).Write(0xc2081e0000, 0xc2081e4000, 0x6d91, 0x8000, 0xc208036258, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bytes/buffer.go:127 +0x52\r\nmime/multipart.(*part).Write(0xc2081a5be0, 0xc2081e4000, 0x6d91, 0x8000, 0x6d91, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/mime/multipart/writer.go:179 +0x179\r\nio.Copy(0x7fa08d920f68, 0xc2081a5be0, 0x7fa08d911b50, 0xc208036258, 0x18000, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/io/io.go:364 +0x278\r\nswrepo/action.UploadLogFiles(0xc2081d06c0, 0x32, 0x0, 0x0, 0x0)\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/action/action.go:178 +0x552\r\nswrepo/action.CompressFiles(0x816a30, 0x6, 0x89e610, 0x41)\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/action/action.go:224 +0x9db\r\nswrepo/action.(*ActionT).Run(0xc2080f2e60, 0xc20800b500, 0x0, 0x0, 0x0, 0xc2080df1a0, 0x0, 0x0)\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/action/action.go:369 +0x2d63\r\ncreated by swrepo/sw.ExecuteAction\r\n\t/imsgit_local2/work/CMREPO_APS/repos/ims_cmrepo/src/swrepo/sw/handlers_agent.go:128 +0x13df\r\n\r\ngoroutine 12 [select]:\r\nnet/http.(*persistConn).writeLoop(0xc2080a0160)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/transport.go:945 +0x41d\r\ncreated by net/http.(*Transport).dialConn\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/transport.go:661 +0xcbc\r\n\r\ngoroutine 36 [IO wait]:\r\nnet.(*pollDesc).Wait(0xc2080d0760, 0x72, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:84 +0x47\r\nnet.(*pollDesc).WaitRead(0xc2080d0760, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_poll_runtime.go:89 +0x43\r\nnet.(*netFD).Read(0xc2080d0700, 0xc2080d5000, 0x400, 0x400, 0x0, 0x7fa08d911ba0, 0xc20812b668)\r\n\t/imsgit/Tools/go_14/go_64/src/net/fd_unix.go:242 +0x40f\r\nnet.(*conn).Read(0xc208036238, 0xc2080d5000, 0x400, 0x400, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/net.go:121 +0xdc\r\ncrypto/tls.(*block).readFromUntil(0xc2080d2900, 0x7fa08d916bc0, 0xc208036238, 0x5, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:454 +0xe6\r\ncrypto/tls.(*Conn).readRecord(0xc2080cadc0, 0x17, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:539 +0x2da\r\ncrypto/tls.(*Conn).Read(0xc2080cadc0, 0xc208104000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/crypto/tls/conn.go:904 +0x166\r\nnet/http.(*liveSwitchReader).Read(0xc208035308, 0xc208104000, 0x1000, 0x1000, 0x8, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:214 +0xab\r\nio.(*LimitedReader).Read(0xc2080f7440, 0xc208104000, 0x1000, 0x1000, 0x400, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/io/io.go:408 +0xce\r\nbufio.(*Reader).fill(0xc2080c48a0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:97 +0x1ce\r\nbufio.(*Reader).ReadSlice(0xc2080c48a0, 0xc20800b10a, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:295 +0x257\r\nbufio.(*Reader).ReadLine(0xc2080c48a0, 0x0, 0x0, 0x0, 0xc20800b100, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/bufio/bufio.go:324 +0x62\r\nnet/textproto.(*Reader).readLineSlice(0xc20809a0f0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/textproto/reader.go:55 +0x9e\r\nnet/textproto.(*Reader).ReadLine(0xc20809a0f0, 0x0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/textproto/reader.go:36 +0x4f\r\nnet/http.ReadRequest(0xc2080c48a0, 0xc2081881a0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/request.go:598 +0xcb\r\nnet/http.(*conn).readRequest(0xc2080352c0, 0x0, 0x0, 0x0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:586 +0x26f\r\nnet/http.(*conn).serve(0xc2080352c0)\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1162 +0x69e\r\ncreated by net/http.(*Server).Serve\r\n\t/imsgit/Tools/go_14/go_64/src/net/http/server.go:1751 +0x35e\r\n\r\n",
	"user": {
		"login": "lakb",
		"id": 17248029,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"created_at": "2016-05-20T10:57:57Z",
	"updated_at": "2016-05-20T13:46:56Z",
	"milestone": {
		"id": 1055141,
		"number": 6,
		"title": "Unplanned"
	}
}
