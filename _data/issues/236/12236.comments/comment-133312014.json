{
	"id": 133312014,
	"body": "1) Clean go 1.5  installation from golang.org\r\n2) Let ~/dev/gopath will be GOPATH, and into /src/ I put 2 folders: lib with lib.go and exe with exe.go\r\n3) cat lib.go\r\n```go\r\npackage lib\r\n func init() {\r\n        print(\"package lib\")\r\n }\r\n```\r\n4) `GOROOT=~/Apps/go-1.5-linux_amd64-vanilla/ GOPATH=~/dev/gopath/ ~/Apps/go-1.5-linux_amd64-vanilla/bin/go install -linkshared -buildmode=shared` **produces**\r\n`multiple roots /home/avd/dev/gopath/pkg/linux_amd64_dynlink \u0026 /home/avd/Apps/go-1.5-linux_amd64-vanilla/pkg/linux_amd64_dynlink`\r\nSo, according to [that](https://groups.google.com/forum/#!topic/golang-nuts/PLlAZM7AfOI), I run `GOROOT=~/Apps/go-1.5-linux_amd64-vanilla/ GOPATH=~/dev/gopath/ ~/Apps/go-1.5-linux_amd64-vanilla/bin/go install -linkshared -buildmode=shared std`\r\nAfter it installation goes fine.\r\n5) `cd ../exe/`, `cat exe.go`\r\n```go\r\npackage main\r\nimport (\r\n\t_ \"lib\"\r\n)\r\nfunc main() {\r\n\t\r\n}\r\n```\r\n`GOROOT=~/Apps/go-1.5-linux_amd64-vanilla/ GOPATH=~/dev/gopath/ ~/Apps/go-1.5-linux_amd64-vanilla/bin/go install -linkshared`\r\n\r\n`/home/avd/Apps/go-1.5-linux_amd64-vanilla/pkg/tool/linux_amd64/link: running gcc failed: exit status 1\r\ngcc: error: missing argument to ‘-l’`\r\nProbably, I do something wrong with `go install -buildmode=shared -linkshared std`?\r\nIf i run it without `-linkshared`, I get this when installing exe:\r\n`# /tmp/go-build059541814/lib.so\r\nsync/atomic.StorePointer: sync/atomic.StoreUintptr: not defined\r\nsync/atomic.SwapPointer: sync/atomic.SwapUintptr: not defined\r\nsync/atomic.CompareAndSwapPointer: sync/atomic.CompareAndSwapUintptr: not defined\r\nruntime.sync_atomic_CompareAndSwapUintptr·f: sync/atomic.CompareAndSwapUintptr: not defined\r\nruntime.sync_atomic_StoreUintptr·f: sync/atomic.StoreUintptr: not defined\r\nruntime.sync_atomic_SwapUintptr·f: sync/atomic.SwapUintptr: not defined\r\nsync/atomic.StorePointer: undefined: sync/atomic.StoreUintptr\r\nsync/atomic.SwapPointer: undefined: sync/atomic.SwapUintptr\r\nsync/atomic.CompareAndSwapPointer: undefined: sync/atomic.CompareAndSwapUintptr\r\nruntime.sync_atomic_CompareAndSwapUintptr·f: undefined: sync/atomic.CompareAndSwapUintptr\r\nruntime.sync_atomic_StoreUintptr·f: undefined: sync/atomic.StoreUintptr\r\nruntime.sync_atomic_SwapUintptr·f: undefined: sync/atomic.SwapUintptr`",
	"user": {
		"login": "avdva",
		"id": 12461031,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-08-21T07:07:18Z",
	"updated_at": "2015-08-21T09:35:58Z"
}
