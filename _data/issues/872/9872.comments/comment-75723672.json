{
	"id": 75723672,
	"body": "Have you tested your program with the race detector? \n\nCan you make a reproducible example available?\n\n\n\n\u003e On 24 Feb 2015, at 19:07, nprudhomme \u003cnotifications@github.com\u003e wrote:\n\u003e \n\u003e Same problem : go 1.4.2, os X 10.10.2 on a program that generate massive amount of data in a tree like (everything works just fine on go 1.3.3, all go 1.4 version fails)\n\u003e it is mostly random, sometimes everything goes fine (~10% of the time)\n\u003e \n\u003e the panic occurs on a gc during a map allocation in the middle a big recursive generation (mem size ~10Gb)\n\u003e \n\u003e line 165 : mystructs[code] = make(map[int]*MyStruct)\n\u003e \n\u003e runtime: garbage collector found invalid heap pointer *(0x20dbc3f60+0x30)=0x208ca7000 span=0x208c9e000-0x208ca7000-0x208ca8000 state=0\n\u003e fatal error: invalid heap pointer\n\u003e \n\u003e runtime stack:\n\u003e runtime.throw(0x2b1b63)\n\u003e /usr/local/go/src/runtime/panic.go:491 +0xad fp=0x2083adb08 sp=0x2083adad8\n\u003e scanblock(0x20dbc3f60, 0x78, 0x219060)\n\u003e /usr/local/go/src/runtime/mgc0.c:378 +0x551 fp=0x2083adc48 sp=0x2083adb08\n\u003e scanframe(0x2083add50, 0x0, 0x1)\n\u003e /usr/local/go/src/runtime/mgc0.c:719 +0x164 fp=0x2083adcb8 sp=0x2083adc48\n\u003e runtime.gentraceback(0x40725, 0x20dbc3e10, 0x0, 0x209745e60, 0x0, 0x0, 0x7fffffff, 0x2083ade00, 0x0, 0x0, ...)\n\u003e /usr/local/go/src/runtime/traceback.go:311 +0x7a8 fp=0x2083adda8 sp=0x2083adcb8\n\u003e scanstack(0x209745e60)\n\u003e /usr/local/go/src/runtime/mgc0.c:777 +0x21c fp=0x2083ade18 sp=0x2083adda8\n\u003e markroot(0x208324000, 0x6245)\n\u003e /usr/local/go/src/runtime/mgc0.c:553 +0xe7 fp=0x2083ade78 sp=0x2083ade18\n\u003e runtime.parfordo(0x208324000)\n\u003e /usr/local/go/src/runtime/parfor.c:91 +0x13b fp=0x2083adef8 sp=0x2083ade78\n\u003e runtime.gchelper()\n\u003e /usr/local/go/src/runtime/mgc0.c:1185 +0x4a fp=0x2083adf20 sp=0x2083adef8\n\u003e stopm()\n\u003e /usr/local/go/src/runtime/proc.c:1181 +0x158 fp=0x2083adf40 sp=0x2083adf20\n\u003e findrunnable(0x208327200)\n\u003e /usr/local/go/src/runtime/proc.c:1487 +0x562 fp=0x2083adf78 sp=0x2083adf40\n\u003e schedule()\n\u003e /usr/local/go/src/runtime/proc.c:1575 +0x151 fp=0x2083adfa8 sp=0x2083adf78\n\u003e runtime.park_m(0x208314120)\n\u003e /usr/local/go/src/runtime/proc.c:1654 +0x113 fp=0x2083adfd0 sp=0x2083adfa8\n\u003e runtime.mcall(0x58e34)\n\u003e /usr/local/go/src/runtime/asm_amd64.s:186 +0x5a fp=0x2083adfe0 sp=0x2083adfd0\n\u003e goroutine 1 [garbage collection]:\n\u003e runtime.switchtoM()\n\u003e /usr/local/go/src/runtime/asm_amd64.s:198 fp=0x20ba3ef60 sp=0x20ba3ef58\n\u003e runtime.gogc(0x200000000)\n\u003e /usr/local/go/src/runtime/malloc.go:469 +0x1cf fp=0x20ba3ef98 sp=0x20ba3ef60\n\u003e runtime.mallocgc(0x30, 0x193820, 0x0, 0x20ba3f0d0)\n\u003e /usr/local/go/src/runtime/malloc.go:341 +0x391 fp=0x20ba3f048 sp=0x20ba3ef98\n\u003e runtime.newobject(0x193820, 0x23768c8fccc17701)\n\u003e /usr/local/go/src/runtime/malloc.go:353 +0x49 fp=0x20ba3f070 sp=0x20ba3f048\n\u003e runtime.makemap(0x151c20, 0x0, 0x208616c6c)\n\u003e /usr/local/go/src/runtime/hashmap.go:220 +0x36e fp=0x20ba3f0c0 sp=0x20ba3f070\n\u003e main.searchTenant(0x1, 0x208d4abb0, 0x20859ea00, 0x208c06870, 0x3, 0x2208344b40, 0x20eedb460, 0x20eedb460)\n\u003e /Users/np/tools/go/src/tenant/tenanttype.go:165 +0xc49 fp=0x20ba3f398 sp=0x20ba3f0c0\n\u003e [....]\n\u003e \n\u003e â€”\n\u003e Reply to this email directly or view it on GitHub.\n\u003e \n",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-02-24T09:25:11Z",
	"updated_at": "2015-02-24T09:25:11Z"
}
