{
	"id": 169772267,
	"number": 16627,
	"state": "closed",
	"title": "runtime: Encountering strange build stack trace when running go build",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\n`Go version go1.6.3 darwin/amd64`\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\n```\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"darwin\"\r\nGOOS=\"darwin\"\r\nGOPATH=\"/Users/zg/work\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/local/Cellar/go/1.6.3/libexec\"\r\nGOTOOLDIR=\"/usr/local/Cellar/go/1.6.3/libexec/pkg/tool/darwin_amd64\"\r\nGO15VENDOREXPERIMENT=\"1\"\r\nCC=\"clang\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fno-common\"\r\nCXX=\"clang++\"\r\nCGO_ENABLED=\"1\"\r\n```\r\n3. What did you do?\r\nIf possible, provide a recipe for reproducing the error.\r\nA complete runnable program is good.\r\nA link on play.golang.org is best.\r\n\r\nI tried to run `go build gitHub.com/sn/service/router` and a huge stack trace spit out. After running the command again, it was successful without any issues.\r\n\r\n4. What did you expect to see?\r\nI expected to see the build succeed without any issues on the internals of Go itself.\r\n\r\n5. What did you see instead?\r\nI saw a stack trace that was unrecognizable.\r\n\r\nIs there some kind of caching mechanism involved that has to be cleared? When I run `go clean` and then try doing `go build` again, things build fine.\r\n\r\nHere is the stack trace:\r\n```\r\n$ go clean \u0026\u0026 go test github.com/sn/service/router | tee out\r\n# testmain\r\nfatal error: unexpected signal during runtime execution\r\n[signal 0xb code=0x1 addr=0x14233b9aa4e2 pc=0xf47b]\r\n\r\nruntime stack:\r\nruntime.throw(0x2c4920, 0x2a)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/panic.go:547 +0x90\r\nruntime.sigpanic()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/sigpanic_unix.go:12 +0x5a\r\nruntime.unlock(0x3a70a0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/lock_sema.go:107 +0x14b\r\nruntime.(*mheap).alloc_m(0x3a70a0, 0x1, 0x40000000012, 0x71fff0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mheap.go:492 +0x314\r\nruntime.(*mheap).alloc.func1()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mheap.go:502 +0x41\r\nruntime.systemstack(0xc820039e58)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/asm_amd64.s:307 +0xab\r\nruntime.(*mheap).alloc(0x3a70a0, 0x1, 0x10000000012, 0xf11f)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mheap.go:503 +0x63\r\nruntime.(*mcentral).grow(0x3a8b50, 0x0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mcentral.go:209 +0x93\r\nruntime.(*mcentral).cacheSpan(0x3a8b50, 0x71fff0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mcentral.go:89 +0x47d\r\nruntime.(*mcache).refill(0x402000, 0xc800000012, 0x71fff0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/mcache.go:119 +0xcc\r\nruntime.mallocgc.func2()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/malloc.go:642 +0x2b\r\nruntime.systemstack(0xc82001d500)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/asm_amd64.s:291 +0x79\r\nruntime.mstart()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/proc.go:1051\r\n\r\ngoroutine 1 [running]:\r\nruntime.systemstack_switch()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/asm_amd64.s:245 fp=0xc82003e9d0 sp=0xc82003e9c8\r\nruntime.mallocgc(0x120, 0x25c4c0, 0xc800000000, 0xc820072240)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/malloc.go:643 +0x869 fp=0xc82003eaa8 sp=0xc82003e9d0\r\nruntime.newarray(0x25c4c0, 0x6, 0x152a68)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/malloc.go:798 +0xc9 fp=0xc82003eae8 sp=0xc82003eaa8\r\nruntime.makeslice(0x1e67a0, 0x6, 0x6, 0x0, 0x0, 0x0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/slice.go:32 +0x165 fp=0xc82003eb38 sp=0xc82003eae8\r\ncmd/link/internal/ld.readsym(0xc820072240, 0xc82379db00, 0xc821925fe0, 0x7, 0xc8237a4c80, 0x45)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/objfile.go:239 +0xba6 fp=0xc82003ef80 sp=0xc82003eb38\r\ncmd/link/internal/ld.ldobjfile(0xc820072240, 0xc82379db00, 0xc821925fe0, 0x7, 0x8e007, 0xc8237a4c80, 0x45)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/objfile.go:147 +0xa62 fp=0xc82003f190 sp=0xc82003ef80\r\ncmd/link/internal/ld.ldobj(0xc82379db00, 0xc821925fe0, 0x7, 0x8e030, 0xc8237a4c80, 0x45, 0xc821919ac0, 0x3d, 0x1, 0x0)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/lib.go:1351 +0x1569 fp=0xc82003f400 sp=0xc82003f190\r\ncmd/link/internal/ld.objfile(0xc820abca10)\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/lib.go:847 +0x10d9 fp=0xc82003f710 sp=0xc82003f400\r\ncmd/link/internal/ld.loadlib()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/lib.go:513 +0x5ce fp=0xc82003f9f0 sp=0xc82003f710\r\ncmd/link/internal/ld.Ldmain()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/ld/pobj.go:214 +0x1cd3 fp=0xc82003fe70 sp=0xc82003f9f0\r\ncmd/link/internal/amd64.Main()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/internal/amd64/obj.go:44 +0x19 fp=0xc82003fe78 sp=0xc82003fe70\r\nmain.main()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/cmd/link/main.go:27 +0x36f fp=0xc82003ff50 sp=0xc82003fe78\r\nruntime.main()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/proc.go:188 +0x2b0 fp=0xc82003ffa0 sp=0xc82003ff50\r\nruntime.goexit()\r\n        /usr/local/Cellar/go/1.6.3/libexec/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc82003ffa8 sp=0xc82003ffa0\r\nFAIL    github.com/sn/service/router [build failed]\r\n\r\n```",
	"user": {
		"login": "zg",
		"id": 407905,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "OS-Darwin"
		}
	],
	"comments": 14,
	"closed_at": "2016-08-07T01:14:04Z",
	"created_at": "2016-08-06T23:52:28Z",
	"updated_at": "2016-10-13T00:02:32Z"
}
