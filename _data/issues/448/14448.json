{
	"id": 135253197,
	"number": 14448,
	"state": "closed",
	"title": "cmg/cgo: another ffmpeg pointer error",
	"body": "I'm largely adding this as an additional test to #14426.\r\n\r\n[TestEncoderUsage](https://github.com/stephenwithav/ffmpeg/blob/develop/ffmpeg_test.go#L14) fails with:\r\n\r\n```\r\ngo test -v                                                                                                                                                                                                                                                                                                                     \r\n=== RUN   TestEncoderUsage                                                                                                                                                                                                                                                                                                     \r\n2016/02/21 14:57:22 Encoder dimensions: 640, 480                                                                                                                                                                                                                                                                               \r\n--- FAIL: TestEncoderUsage (0.00s)                                                                                                                                                                                                                                                                                             \r\npanic: runtime error: cgo argument has Go pointer to Go pointer [recovered]                                                                                                                                                                                                                                                    \r\n        panic: runtime error: cgo argument has Go pointer to Go pointer                                                                                                                                                                                                                                                        \r\n                                                                                                                                                                                                                                                                                                                               \r\ngoroutine 5 [running]:                                                                                                                                                                                                                                                                                                         \r\npanic(0x57b820, 0xc8200106d0)                                                                                                                                                                                                                                                                                                  \r\n        /usr/local/go/src/runtime/panic.go:464 +0x3e6                                                                                                                                                                                                                                                                          \r\ntesting.tRunner.func1(0xc8200a0000)                                                                                                                                                                                                                                                                                            \r\n        /usr/local/go/src/testing/testing.go:467 +0x192                                                                                                                                                                                                                                                                        \r\npanic(0x57b820, 0xc8200106d0)                                                                                                                                                                                                                                                                                                  \r\n        /usr/local/go/src/runtime/panic.go:426 +0x4e9                                                                                                                                                                                                                                                                          \r\ngithub.com/stephenwithav/ffmpeg.(*Encoder).WriteFrame(0xc820070300, 0x7fa104dd7688, 0xc820014640, 0x0, 0x0)                                                                                                                                                                                                                    \r\n        /home/steven/repos/gopath/src/github.com/stephenwithav/ffmpeg/ffmpeg.go:143 +0x465                                                                                                                                                                                                                                     \r\ngithub.com/stephenwithav/ffmpeg.TestEncoderUsage(0xc8200a0000)                                                                                                                                                                                                                                                                 \r\n        /home/steven/repos/gopath/src/github.com/stephenwithav/ffmpeg/ffmpeg_test.go:35 +0x83f                                                                                                                                                                                                                                 \r\ntesting.tRunner(0xc8200a0000, 0x885260)                                                                                                                                                                                                                                                                                        \r\n        /usr/local/go/src/testing/testing.go:473 +0x98                                                                                                                                                                                                                                                                         \r\ncreated by testing.RunTests                                                                                                                                                                                                                                                                                                    \r\n        /usr/local/go/src/testing/testing.go:582 +0x892                                                                                                                                                                                                                                                                        \r\nexit status 2                                                                                                                                                                                                                                                                                                                  \r\nFAIL    github.com/stephenwithav/ffmpeg 0.052s  \r\n```\r\n\r\nThe offending code on line [143](https://github.com/stephenwithav/ffmpeg/blob/develop/ffmpeg.go#L143):\r\n\r\n```go\r\n\t// Perform scaling from input type to output type\r\n\tC.sws_scale(e._swscontext, \u0026input_data[0], \u0026input_linesize[0],\r\n\t\t0, e._context.height,\r\n\t\t\u0026e._frame.data[0], \u0026e._frame.linesize[0])\r\n```\r\n\r\nAny help would be appreciated.",
	"user": {
		"login": "stephenwithav",
		"id": 54563,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "ianlancetaylor",
		"id": 3194333,
		"type": "User",
		"site_admin": false
	},
	"comments": 3,
	"closed_at": "2016-02-21T21:14:25Z",
	"created_at": "2016-02-21T20:17:52Z",
	"updated_at": "2016-02-21T21:14:25Z"
}
