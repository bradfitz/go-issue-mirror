{
	"id": 114411099,
	"body": "FTR, this also fixed the following gotype crash:\r\n```go\r\npackage a\r\nvar e,f=f\u003e0\u003e(nil)\u003e\u003e0\r\n```\r\n```\r\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: runtime error: invalid memory address or nil pointer dereference [recovered]\r\n\tpanic: runtime error: invalid memory address or nil pointer dereference\r\n[signal 0xb code=0x1 addr=0x20 pc=0x4fe5a3]\r\n\r\ngoroutine 1 [running]:\r\nmain.checkPkgFiles.func2()\r\n\tsrc/golang.org/x/tools/cmd/gotype/gotype.go:212 +0x92\r\ngolang.org/x/tools/go/types.(*Checker).handleBailout(0xc8201021c0, 0xc820113d68)\r\n\tsrc/golang.org/x/tools/go/types/check.go:219 +0xd8\r\ngolang.org/x/tools/go/types.representableConst(0x0, 0x0, 0x0, 0x14, 0x0, 0x400)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:187 +0x33\r\ngolang.org/x/tools/go/types.(*Checker).shift(0xc8201021c0, 0xc820010940, 0xc8200109c0, 0x15)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:623 +0xeb\r\ngolang.org/x/tools/go/types.(*Checker).binary(0xc8201021c0, 0xc820010940, 0x7f3d97ef4918, 0xc82000aaa0, 0x7f3d97ef48a8, 0xc82000aac0, 0x15)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:735 +0x136\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0xc8201021c0, 0xc820010940, 0x7f3d97ef48e0, 0xc820016c00, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1382 +0x2ef9\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0xc8201021c0, 0xc820010940, 0x7f3d97ef48e0, 0xc820016c00, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:908 +0x7d\r\ngolang.org/x/tools/go/types.(*Checker).expr(0xc8201021c0, 0xc820010940, 0x7f3d97ef48e0, 0xc820016c00)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1436 +0x63\r\ngolang.org/x/tools/go/types.(*Checker).binary(0xc8201021c0, 0xc820010900, 0x7f3d97ef48e0, 0xc820016bd0, 0x7f3d97ef48e0, 0xc820016c00, 0x29)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:723 +0xa6\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0xc8201021c0, 0xc820010900, 0x7f3d97ef48e0, 0xc820016c30, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1382 +0x2ef9\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0xc8201021c0, 0xc820010900, 0x7f3d97ef48e0, 0xc820016c30, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:908 +0x7d\r\ngolang.org/x/tools/go/types.(*Checker).expr(0xc8201021c0, 0xc820010900, 0x7f3d97ef48e0, 0xc820016c30)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1436 +0x63\r\ngolang.org/x/tools/go/types.(*Checker).initVars.func1(0xc820010900, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/assignments.go:208 +0x72\r\ngolang.org/x/tools/go/types.unpack(0xc8201111c8, 0x1, 0x1, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/call.go:139 +0x60\r\ngolang.org/x/tools/go/types.(*Checker).initVars(0xc8201021c0, 0xc82000e9e0, 0x2, 0x2, 0xc82000ea10, 0x1, 0x1, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/assignments.go:208 +0xcb\r\ngolang.org/x/tools/go/types.(*Checker).varDecl(0xc8201021c0, 0xc820015bd0, 0xc82000e9e0, 0x2, 0x2, 0x0, 0x0, 0x7f3d97ef48e0, 0xc820016c30)\r\n\tsrc/golang.org/x/tools/go/types/decl.go:177 +0x2df\r\ngolang.org/x/tools/go/types.(*Checker).objDecl(0xc8201021c0, 0x7f3d97ef4a28, 0xc820015bd0, 0x0, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/decl.go:82 +0x483\r\ngolang.org/x/tools/go/types.(*Checker).ident(0xc8201021c0, 0xc820010840, 0xc82000aa20, 0x0, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/typexpr.go:37 +0x3a6\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0xc8201021c0, 0xc820010840, 0x7f3d97ef4870, 0xc82000aa20, 0x0, 0x0, 0x7e)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:952 +0x182\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0xc8201021c0, 0xc820010840, 0x7f3d97ef4870, 0xc82000aa20, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:908 +0x7d\r\ngolang.org/x/tools/go/types.(*Checker).expr(0xc8201021c0, 0xc820010840, 0x7f3d97ef4870, 0xc82000aa20)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1436 +0x63\r\ngolang.org/x/tools/go/types.(*Checker).binary(0xc8201021c0, 0xc820010840, 0x7f3d97ef4870, 0xc82000aa20, 0x7f3d97ef48a8, 0xc82000aa40, 0x29)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:722 +0x71\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016bd0, 0x0, 0x0, 0x7e)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1382 +0x2ef9\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016bd0, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:908 +0x7d\r\ngolang.org/x/tools/go/types.(*Checker).expr(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016bd0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1436 +0x63\r\ngolang.org/x/tools/go/types.(*Checker).binary(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016bd0, 0x7f3d97ef48e0, 0xc820016c00, 0x29)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:722 +0x71\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016c30, 0x0, 0x0, 0xc82006c090)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1382 +0x2ef9\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016c30, 0x0, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:908 +0x7d\r\ngolang.org/x/tools/go/types.(*Checker).expr(0xc8201021c0, 0xc820010840, 0x7f3d97ef48e0, 0xc820016c30)\r\n\tsrc/golang.org/x/tools/go/types/expr.go:1436 +0x63\r\ngolang.org/x/tools/go/types.(*Checker).initVars.func1(0xc820010840, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/assignments.go:208 +0x72\r\ngolang.org/x/tools/go/types.unpack(0xc820113a10, 0x1, 0xffffffffffff01, 0x7ac2e0, 0x0, 0xc81ffffaa5)\r\n\tsrc/golang.org/x/tools/go/types/call.go:139 +0x60\r\ngolang.org/x/tools/go/types.(*Checker).initVars(0xc8201021c0, 0xc82000e9e0, 0x2, 0x2, 0xc82000ea00, 0x1, 0x1, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/assignments.go:208 +0xcb\r\ngolang.org/x/tools/go/types.(*Checker).varDecl(0xc8201021c0, 0xc820015b80, 0xc82000e9e0, 0x2, 0x2, 0x0, 0x0, 0x7f3d97ef48e0, 0xc820016c30)\r\n\tsrc/golang.org/x/tools/go/types/decl.go:177 +0x2df\r\ngolang.org/x/tools/go/types.(*Checker).objDecl(0xc8201021c0, 0x7f3d97ef4a28, 0xc820015b80, 0x0, 0xc820113c90, 0x0, 0x8)\r\n\tsrc/golang.org/x/tools/go/types/decl.go:82 +0x483\r\ngolang.org/x/tools/go/types.(*Checker).packageObjects(0xc8201021c0, 0xc82000ab40, 0x2, 0x2)\r\n\tsrc/golang.org/x/tools/go/types/resolver.go:400 +0x22a\r\ngolang.org/x/tools/go/types.(*Checker).Files(0xc8201021c0, 0xc82006c060, 0x1, 0x1, 0x0, 0x0)\r\n\tsrc/golang.org/x/tools/go/types/check.go:231 +0xfc\r\ngolang.org/x/tools/go/types.(*Config).Check(0xc820010800, 0x71ed30, 0x3, 0xc820010780, 0xc82006c060, 0x1, 0x1, 0x0, 0x1, 0x0, ...)\r\n\tsrc/golang.org/x/tools/go/types/api.go:340 +0x248\r\nmain.checkPkgFiles(0xc82006c060, 0x1, 0x1)\r\n\tsrc/golang.org/x/tools/cmd/gotype/gotype.go:217 +0x204\r\nmain.main()\r\n\tsrc/golang.org/x/tools/cmd/gotype/gotype.go:254 +0x1d9\r\n```\r\n\r\n\r\nnow it prints:\r\n```\r\n/tmp/222.go:2:13: invalid operation: shifted operand (nil) (untyped nil value) must be integer\r\n/tmp/222.go:2:13: invalid operation: shifted operand (nil) (untyped nil value) must be integer\r\n/tmp/222.go:2:7: initialization cycle for f\r\n/tmp/222.go:2:7: \tf refers to\r\n/tmp/222.go:2:7: \tf\r\n```",
	"user": {
		"login": "dvyukov",
		"id": 1095328,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-06-23T08:55:50Z",
	"updated_at": "2015-06-23T08:56:54Z"
}
