{
	"id": 219927635,
	"body": "\u003e When I run this code it opens a webpage with a form.\r\n\r\nIt does that here.\r\n\r\n\u003e When I then submit a file, ...\r\n\r\nI have this:\r\n```\r\nC:\\dev\\src\\issues\\issue15664\u003ego version\r\ngo version go1.6.2 windows/386\r\n\r\nC:\\dev\\src\\issues\\issue15664\u003etype main.go\r\npackage main\r\n\r\nimport (\r\n    \"fmt\"\r\n    \"net/http\"\r\n    \"os/exec\"\r\n)\r\n\r\nfunc validate(w http.ResponseWriter, r *http.Request) {\r\n    file, header, err := r.FormFile(\"file\")\r\n    if err != nil {\r\n        fmt.Fprintf(w, \"validate: %s\\n\", err)\r\n        fmt.Println(err)\r\n        return\r\n    }\r\n    defer file.Close()\r\n    fmt.Fprintf(w, \"%s\\n\", header.Header)\r\n    fmt.Fprintf(w, \"%s\\n\", header.Filename)\r\n    fmt.Println(header.Header)\r\n    fmt.Println(header.Filename)\r\n}\r\n\r\nfunc index(w http.ResponseWriter, r *http.Request) {\r\n    fmt.Fprintf(w, html)\r\n}\r\n\r\nfunc main() {\r\n    http.HandleFunc(\"/\", index)\r\n    http.HandleFunc(\"/validate\", validate)\r\n    go exec.Command(\"rundll32\", \"url.dll,FileProtocolHandler\",\r\n        \"http://localhost:8090/\").Start()\r\n    http.ListenAndServe(\":8090\", nil)\r\n}\r\n\r\nvar html = `\u003c!DOCTYPE html\u003e\r\n\u003chtml\u003e\r\n\u003chead\u003e\r\n\u003ccharset=\"utf-8\"\u003e\r\n\u003ctitle\u003eValidation\u003c/title\u003e\r\n\u003cstyle type=\"text/css\"\u003e\r\nbody{font-family:arial,sans-serif;margin-top:4em;margin-left:4em}\r\n\u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003cbody\u003e\r\n\u003ch2\u003eValidation\u003c/h2\u003e\r\n\u003cp\u003eSelect and submit a file to validate.\u003c/p\u003e\r\n\u003cform enctype=\"multipart/form-data\" action=\"validate\" method=\"post\"\u003e\r\n\u003cinput type=\"file\" name=\"file\" /\u003e\r\n\u0026nbsp;\r\n\u003cinput type=\"submit\" value=\"Submit\"/\u003e\r\n\u003c/form\u003e\r\n\u003c/body\u003e\r\n\u003c/html\u003e\r\n`\r\nC:\\dev\\src\\issues\\issue15664\u003e\r\n```\r\n\r\n\u003e .. which invokes FormFile, I get a filepath from Filename that does not contain slashes (e.g. C:UserssdrDesktoptest.csv). ...\r\n\r\nI run your program. It opens my browser. I click \"Choose File\" button. That opens \"Open file\" dialogue. I navigate into c:\\tmp directory and select A.TXT file in that directory. Now I am back to my broser, and it says \"A.TXT\" next to \"Choose File\" button. Next I click Submit button, and browser displays `map[Content-Disposition:[form-data; name=\"file\"; filename=\"AOM.TXT\"] Content-Type:[text/plain]]\r\nAOM.TXT`.\r\n\r\nMy program says this:\r\n```\r\nC:\\dev\\src\\issues\\issue15664\u003ego run main.go\r\nmap[Content-Disposition:[form-data; name=\"file\"; filename=\"AOM.TXT\"] Content-Typ\r\ne:[text/plain]]\r\nAOM.TXT\r\n```\r\n\r\n\u003e ... I am using 1.6.2 on windows.\r\n\r\nMe too.\r\n\r\n\u003e I use the call to exec.Command(...).Start() as a convenience so that the initial page opens automatically. Removing it does not change the problem.\r\n\r\nThat is fine. I kept your code as is, but I still don't see how I can make form filename include full path.\r\n\r\nWha am I doing wrong?\r\n\r\nAlex",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-05-18T05:18:29Z",
	"updated_at": "2016-05-18T05:18:29Z"
}
