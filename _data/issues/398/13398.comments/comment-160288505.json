{
	"id": 160288505,
	"body": "To make the race check simple I created a repository\r\n\r\n    go get github.com/ikrabbe/golang_issue13398\r\n    cd $(echo $GOPATH|sed -e 's/:.*//')/src/github.com/ikrabbe/golang_issue13398\r\n    go run -race issue13398-buffer-race.go\r\n\r\nand got this result\r\n\r\n\t==================\r\n\tWARNING: DATA RACE\r\n\tRead by main goroutine:\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:26 +0x394\r\n\t\r\n\tPrevious write by goroutine 6:\r\n\t  bytes.(*Buffer).Truncate()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:74 +0xef\r\n\t  bytes.(*Buffer).ReadFrom()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:158 +0xcd\r\n\t  io.copyBuffer()\r\n\t      /home/ingo/install/go/src/io/io.go:374 +0x1a5\r\n\t  io.Copy()\r\n\t      /home/ingo/install/go/src/io/io.go:350 +0x78\r\n\t  os/exec.(*Cmd).writerDescriptor.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:232 +0x98\r\n\t  os/exec.(*Cmd).Start.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:340 +0x2a\r\n\t\r\n\tGoroutine 6 (running) created at:\r\n\t  os/exec.(*Cmd).Start()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:341 +0xe48\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:16 +0x170\r\n\t==================\r\n\t==================\r\n\tWARNING: DATA RACE\r\n\tRead by main goroutine:\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:26 +0x3b0\r\n\t\r\n\tPrevious write by goroutine 6:\r\n\t  bytes.(*Buffer).Truncate()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:72 +0xb5\r\n\t  bytes.(*Buffer).ReadFrom()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:158 +0xcd\r\n\t  io.copyBuffer()\r\n\t      /home/ingo/install/go/src/io/io.go:374 +0x1a5\r\n\t  io.Copy()\r\n\t      /home/ingo/install/go/src/io/io.go:350 +0x78\r\n\t  os/exec.(*Cmd).writerDescriptor.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:232 +0x98\r\n\t  os/exec.(*Cmd).Start.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:340 +0x2a\r\n\t\r\n\tGoroutine 6 (running) created at:\r\n\t  os/exec.(*Cmd).Start()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:341 +0xe48\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:16 +0x170\r\n\t==================\r\n\tBuffer Length 12\r\n\t==================\r\n\tWARNING: DATA RACE\r\n\tWrite by main goroutine:\r\n\t  bytes.(*Buffer).WriteTo()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:203 +0x65\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:27 +0x59c\r\n\t\r\n\tPrevious write by goroutine 6:\r\n\t  bytes.(*Buffer).ReadFrom()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:155 +0x65\r\n\t  io.copyBuffer()\r\n\t      /home/ingo/install/go/src/io/io.go:374 +0x1a5\r\n\t  io.Copy()\r\n\t      /home/ingo/install/go/src/io/io.go:350 +0x78\r\n\t  os/exec.(*Cmd).writerDescriptor.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:232 +0x98\r\n\t  os/exec.(*Cmd).Start.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:340 +0x2a\r\n\t\r\n\tGoroutine 6 (running) created at:\r\n\t  os/exec.(*Cmd).Start()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:341 +0xe48\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:16 +0x170\r\n\t==================\r\n\t59s 58s 57s ==================\r\n\tWARNING: DATA RACE\r\n\tRead by main goroutine:\r\n\t  syscall.raceReadRange()\r\n\t      /home/ingo/install/go/src/syscall/race.go:25 +0x38\r\n\t  syscall.Write()\r\n\t      /home/ingo/install/go/src/syscall/syscall_unix.go:178 +0xad\r\n\t  os.(*File).write()\r\n\t      /home/ingo/install/go/src/os/file_unix.go:245 +0xf4\r\n\t  os.(*File).Write()\r\n\t      /home/ingo/install/go/src/os/file.go:136 +0xbc\r\n\t  bytes.(*Buffer).WriteTo()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:206 +0x199\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:27 +0x59c\r\n\t\r\n\tPrevious write by goroutine 6:\r\n\t  runtime.slicecopy()\r\n\t      /home/ingo/install/go/src/runtime/slice.go:110 +0x0\r\n\t  bytes.(*Buffer).ReadFrom()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:169 +0x27f\r\n\t  io.copyBuffer()\r\n\t      /home/ingo/install/go/src/io/io.go:374 +0x1a5\r\n\t  io.Copy()\r\n\t      /home/ingo/install/go/src/io/io.go:350 +0x78\r\n\t  os/exec.(*Cmd).writerDescriptor.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:232 +0x98\r\n\t  os/exec.(*Cmd).Start.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:340 +0x2a\r\n\t\r\n\tGoroutine 6 (running) created at:\r\n\t  os/exec.(*Cmd).Start()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:341 +0xe48\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:16 +0x170\r\n\t==================\r\n\t==================\r\n\tWARNING: DATA RACE\r\n\tRead by main goroutine:\r\n\t  syscall.raceReadRange()\r\n\t      /home/ingo/install/go/src/syscall/race.go:25 +0x38\r\n\t  syscall.Write()\r\n\t      /home/ingo/install/go/src/syscall/syscall_unix.go:178 +0xad\r\n\t  os.(*File).write()\r\n\t      /home/ingo/install/go/src/os/file_unix.go:245 +0xf4\r\n\t  os.(*File).Write()\r\n\t      /home/ingo/install/go/src/os/file.go:136 +0xbc\r\n\t  bytes.(*Buffer).WriteTo()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:206 +0x199\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:27 +0x59c\r\n\t\r\n\tPrevious write by goroutine 6:\r\n\t  syscall.raceWriteRange()\r\n\t      /home/ingo/install/go/src/syscall/race.go:29 +0x38\r\n\t  syscall.Read()\r\n\t      /home/ingo/install/go/src/syscall/syscall_unix.go:163 +0x9d\r\n\t  os.(*File).read()\r\n\t      /home/ingo/install/go/src/os/file_unix.go:224 +0x89\r\n\t  os.(*File).Read()\r\n\t      /home/ingo/install/go/src/os/file.go:95 +0xbc\r\n\t  bytes.(*Buffer).ReadFrom()\r\n\t      /home/ingo/install/go/src/bytes/buffer.go:173 +0x414\r\n\t  io.copyBuffer()\r\n\t      /home/ingo/install/go/src/io/io.go:374 +0x1a5\r\n\t  io.Copy()\r\n\t      /home/ingo/install/go/src/io/io.go:350 +0x78\r\n\t  os/exec.(*Cmd).writerDescriptor.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:232 +0x98\r\n\t  os/exec.(*Cmd).Start.func1()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:340 +0x2a\r\n\t\r\n\tGoroutine 6 (running) created at:\r\n\t  os/exec.(*Cmd).Start()\r\n\t      /home/ingo/install/go/src/os/exec/exec.go:341 +0xe48\r\n\t  main.main()\r\n\t      /home/ingo/gotest/src/github.com/ikrabbe/golang_issue13398/issue13398-buffer-race.go:16 +0x170\r\n\t==================\r\n\tBuffer Length 12\r\n\t59s 55s 54s Buffer Length 12\r\n",
	"user": {
		"login": "ikrabbe",
		"id": 167360,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-11-28T12:23:46Z",
	"updated_at": "2015-11-28T12:23:46Z"
}
