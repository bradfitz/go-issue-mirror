{
	"id": 73321199,
	"body": "I took a quick hack at this. It does appear to offer some nice stack use wins, but it breaks our dwarf generation. Also, `twobitwalktype1` is a compiler performance bottleneck. This will need to wait at the least until the compiler transition to Go is completed.\r\n\r\nMy ugly hack code: https://github.com/josharian/go/compare/issue-8740. From the commit message there:\r\n\r\n```\r\nIn godoc binary\r\n\r\nTop 20 changed frame sizes, by absolute change\r\n\r\n2152    1304    -848    -39.4%  golang.org/x/tools/godoc/analysis       \"\".(*analysis).doCallgraph \r\n2496    1976    -520    -20.8%  golang.org/x/tools/godoc/analysis       \"\".Run \r\n952     448     -504    -52.9%  html/template   \"\".(*escaper).escapeListConditionally \r\n1408    920     -488    -34.7%  golang.org/x/tools/go/ssa       \"\".(*builder).stmt \r\n1680    1192    -488    -29.0%  golang.org/x/tools/go/loader    \"\".(*Config).Load \r\n2160    1688    -472    -21.9%  golang.org/x/tools/go/types     \"\".(*Checker).collectObjects \r\n1904    1472    -432    -22.7%  golang.org/x/tools/go/ssa       \"\".(*builder).expr0 \r\n728     320     -408    -56.0%  html/template   \"\".(*escaper).commit \r\n552     168     -384    -69.6%  encoding/gob    \"\".registerBasics \r\n1608    1232    -376    -23.4%  crypto/x509     \"\".buildExtensions \r\n1208    840     -368    -30.5%  go/doc  \"\".playExample \r\n1792    1424    -368    -20.5%  crypto/x509     \"\".parseCertificate \r\n1112    760     -352    -31.7%  golang.org/x/tools/godoc        \"\".(*handlerServer).GetPageInfo \r\n1384    1032    -352    -25.4%  golang.org/x/tools/go/ssa       \"\".(*Program).CreateTestMainPackage \r\n1792    1440    -352    -19.6%  golang.org/x/tools/go/types     \"\".(*Checker).builtin \r\n1968    1616    -352    -17.9%  golang.org/x/tools/go/types     \"\".(*Checker).stmt \r\n1160    824     -336    -29.0%  golang.org/x/tools/go/ssa       \"\".(*Package).Build \r\n1680    1368    -312    -18.6%  golang.org/x/tools/go/types     \"\".(*Checker).exprInternal \r\n2384    2088    -296    -12.4%  go/build        \"\".(*Context).Import \r\n1848    1568    -280    -15.2%  golang.org/x/tools/godoc/analysis       \"\".(*analysis).doChannelPeers \r\n\r\nTop 20 changed frame sizes, by percent change\r\n\r\n552     168     -384    -69.6%  encoding/gob    \"\".registerBasics \r\n168     72      -96     -57.1%  archive/zip     type..eq.\"\".checksumReader dupok \r\n728     320     -408    -56.0%  html/template   \"\".(*escaper).commit \r\n952     448     -504    -52.9%  html/template   \"\".(*escaper).escapeListConditionally \r\n144     72      -72     -50.0%  text/template   \"\".sortKeys \r\n200     104     -96     -48.0%  net/http        type..eq.\"\".conn dupok \r\n136     72      -64     -47.1%  archive/zip     type..eq.\"\".fileWriter dupok \r\n136     72      -64     -47.1%  crypto/cipher   type..eq.\"\".StreamWriter dupok \r\n136     72      -64     -47.1%  golang.org/x/tools/go/ssa       type..eq.\"\".DebugRef dupok \r\n136     72      -64     -47.1%  golang.org/x/tools/go/types     type..eq.\"\".operand dupok \r\n336     184     -152    -45.2%  encoding/gob    \"\".init \r\n120     72      -48     -40.0%  compress/flate  \"\".(*compressor).initDeflate \r\n2152    1304    -848    -39.4%  golang.org/x/tools/godoc/analysis       \"\".(*analysis).doCallgraph \r\n128     80      -48     -37.5%  go/doc  \"\".(*Package).Filter \r\n64      40      -24     -37.5%  compress/flate  \"\".(*huffmanBitWriter).writeCode \r\n512     328     -184    -35.9%  golang.org/x/tools/go/ast/astutil       \"\".AddNamedImport \r\n1408    920     -488    -34.7%  golang.org/x/tools/go/ssa       \"\".(*builder).stmt \r\n232     152     -80     -34.5%  net/http        \"\".init \r\n560     368     -192    -34.3%  text/template   \"\".(*Template).Clone \r\n120     80      -40     -33.3%  go/parser       \"\".(*parser).tryIdentOrType \r\n```",
	"user": {
		"login": "josharian",
		"id": 67496,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-02-06T22:04:18Z",
	"updated_at": "2015-02-06T22:04:18Z"
}
