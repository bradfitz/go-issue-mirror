{
	"id": 77863197,
	"number": 10904,
	"state": "open",
	"title": "x/net/webdav: build broken under go 1.4.2 @ commit 6dc0abc",
	"body": "Hi,\r\n\r\nWhile working on Debian packages for x/net, I found that the tests were failing due to problems with XML parsing:\r\n\r\n```\r\n$ GOPATH=~/tmp/go go test golang.org/x/net/webdav\r\n--- FAIL: TestMultistatusWriter (0.00s)\r\n\txml_test.go:615: section 9.2.2 (failed dependency): XML body\r\n\t\tgot  \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cpropstat xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cAuthors xmlns=\\\"http://ns.example.com/\\\" xmlns=\\\"http://ns.example.com/\\\"\u003e\u003c/Authors\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 424 Failed Dependency\u003c/status\u003e\u003c/propstat\u003e\u003cpropstat xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cCopyright-Owner xmlns=\\\"http://ns.example.com/\\\" xmlns=\\\"http://ns.example.com/\\\"\u003e\u003c/Copyright-Owner\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 409 Conflict\u003c/status\u003e\u003c/propstat\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eCopyright Owner cannot be deleted or altered.\u003c/responsedescription\u003e\u003c/response\u003e\u003c/multistatus\u003e\"\r\n\t\twant \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cpropstat xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cAuthors xmlns=\\\"http://ns.example.com/\\\" xmlns=\\\"http://ns.example.com/\\\"\u003e\u003c/Authors\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 424 Failed Dependency\u003c/status\u003e\u003c/propstat\u003e\u003cpropstat xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cCopyright-Owner xmlns=\\\"http://ns.example.com/\\\" xmlns=\\\"http://ns.example.com/\\\"\u003e\u003c/Copyright-Owner\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 409 Conflict\u003c/status\u003e\u003c/propstat\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\"\u003eCopyright Owner cannot be deleted or altered.\u003c/responsedescription\u003e\u003c/response\u003e\u003c/multistatus\u003e\"\r\n\txml_test.go:615: section 9.6.2 (lock-token-submitted): XML body\r\n\t\tgot  \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cstatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 423 Locked\u003c/status\u003e\u003cerror xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003clock-token-submitted xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003c/lock-token-submitted\u003e\u003c/error\u003e\u003c/response\u003e\u003c/multistatus\u003e\"\r\n\t\twant \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cstatus xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 423 Locked\u003c/status\u003e\u003cerror xmlns=\\\"DAV:\\\"\u003e\u003clock-token-submitted xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003c/lock-token-submitted\u003e\u003c/error\u003e\u003c/response\u003e\u003c/multistatus\u003e\"\r\n\txml_test.go:615: section 9.1.3: XML body\r\n\t\tgot  \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cpropstat xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cbigbox xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003cBoxType xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003eBox type A\u003c/BoxType\u003e\u003c/bigbox\u003e\u003cauthor xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003cName xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003eJ.J. Johnson\u003c/Name\u003e\u003c/author\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 200 OK\u003c/status\u003e\u003c/propstat\u003e\u003cpropstat xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cDingALing xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003c/DingALing\u003e\u003cRandom xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003c/Random\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 403 Forbidden\u003c/status\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eThe user does not have access to the DingALing property.\u003c/responsedescription\u003e\u003c/propstat\u003e\u003c/response\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003eThere has been an access violation error.\u003c/responsedescription\u003e\u003c/multistatus\u003e\"\r\n\t\twant \"\u003cmultistatus xmlns=\\\"DAV:\\\" xmlns=\\\"DAV:\\\"\u003e\u003cresponse xmlns=\\\"DAV:\\\"\u003e\u003chref xmlns=\\\"DAV:\\\"\u003ehttp://example.com/foo\u003c/href\u003e\u003cpropstat xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cbigbox xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003cBoxType xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003eBox type A\u003c/BoxType\u003e\u003c/bigbox\u003e\u003cauthor xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003cName xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003eJ.J. Johnson\u003c/Name\u003e\u003c/author\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 200 OK\u003c/status\u003e\u003c/propstat\u003e\u003cpropstat xmlns=\\\"DAV:\\\"\u003e\u003cprop xmlns=\\\"DAV:\\\"\u003e\u003cDingALing xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003c/DingALing\u003e\u003cRandom xmlns=\\\"http://ns.example.com/boxschema/\\\" xmlns=\\\"http://ns.example.com/boxschema/\\\"\u003e\u003c/Random\u003e\u003c/prop\u003e\u003cstatus xmlns=\\\"DAV:\\\"\u003eHTTP/1.1 403 Forbidden\u003c/status\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\"\u003eThe user does not have access to the DingALing property.\u003c/responsedescription\u003e\u003c/propstat\u003e\u003c/response\u003e\u003cresponsedescription xmlns=\\\"DAV:\\\"\u003eThere has been an access violation error.\u003c/responsedescription\u003e\u003c/multistatus\u003e\"\r\nFAIL\r\nFAIL\tgolang.org/x/net/webdav\t0.122s\r\n```\r\n\r\nThe tests pass again if I checkout the commit previous to the one referenced in the title:\r\n\r\n```\r\n$ git checkout 3d87fd621ca9a824c5cff17216ce44769456cb3f\r\nPrevious HEAD position was 6dc0abc... webdav: fix XML golden tests for encoding/xml xmlns change.\r\nHEAD is now at 3d87fd6... x/net/html: Sync the html parser and atom with the current whatwg spec\r\n\r\n$ GOPATH=~/tmp/go go test golang.org/x/net/webdav\r\nok  \tgolang.org/x/net/webdav\t0.050s\r\n```\r\n\r\nCoincidentally, that commit is supposed to fix XML issues that arose with changes in the stdlib, but I guess it was not verified that they pass with an older stdlib. I am using the newest version of golang from Debian (1.4.2).\r\n\r\nThanks.",
	"user": {
		"login": "TheTincho",
		"id": 5602605,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "nigeltao",
		"id": 8565232,
		"type": "User",
		"site_admin": false
	},
	"comments": 3,
	"created_at": "2015-05-19T00:13:46Z",
	"updated_at": "2015-06-03T01:11:39Z",
	"milestone": {
		"id": 1067491,
		"number": 22,
		"title": "Unreleased"
	}
}
