{
	"id": 51276890,
	"number": 747,
	"state": "closed",
	"title": "godoc segfaults",
	"body": "\u003cpre\u003eBefore filing a bug, please check whether it has been fixed since\nthe latest release: run \u0026quot;hg pull -u\u0026quot; and retry what you did to\nreproduce the problem.  Thanks.\n\nWhat steps will reproduce the problem?\n\nI run godoc using the following command line:\n\ngodoc -path=/Users/petar/tonika-git/src/pkg -http=:6060\n\nWhen I navigate to the menu item \u0026quot;Source files\u0026quot; I get a\nsegfault. This does not happen if I use:\n\ngodoc -http=:6060\n\nWhat is the expected output? What do you see instead?\n\npanic: interface conversion: interface is int64, not uint64 [recovered]\n\tpanic: interface conversion: interface is int64, not uint64\n\npanic PC=0x39bab8\nruntime.panic+0x7c /Users/petar/go/src/pkg/runtime/proc.c:1012\n\truntime.panic(0x0, 0x39bb00)\ntemplate.checkError+0xa2 /Users/petar/go/src/pkg/template/template.go:891\n\ttemplate.checkError(0x13d320, 0xa63690)\nruntime.panic+0xb2 /Users/petar/go/src/pkg/runtime/proc.c:994\n\truntime.panic(0x70166, 0x8dca78)\nruntime.ifaceE2T+0xf5 /Users/petar/go/src/pkg/runtime/iface.c:282\n\truntime.ifaceE2T(0x13d320, 0xa63690, 0x1009b8, 0x0)\nmain.timeFmt+0x29 /Users/petar/go/src/cmd/godoc/godoc.go:786\n\tmain.timeFmt(0x1009b8, 0x128b50, 0x11853b24269d5a00, 0x39bc88, 0x39bc78, ...)\ntemplate.*Template·writeVariable+0xff /Users/petar/go/src/pkg/template/template.go:717\n\ttemplate.*Template·writeVariable(0x93bbd0, 0x3aa900, 0x128b50, 0x11853b24269d5a00, \n0x448129, ...)\ntemplate.*Template·executeElement+0xd5 /Users/petar/go/src/pkg/template/template.go:739\n\ttemplate.*Template·executeElement(0x43f9b0, 0x414450, 0x8dcab0, 0x414450, 0x1, ...)\ntemplate._func_002+0xaa /Users/petar/go/src/pkg/template/template.go:832\n\ttemplate._func_002(0x43f9b0, 0x100000021, 0x8dcab0, 0x21, 0x11536, ...)\ntemplate.*Template·executeRepeated+0x39f\n/Users/petar/go/src/pkg/template/template.go:838\n\ttemplate.*Template·executeRepeated(0x8dcab0, 0x9c42a0, 0xa382c0, 0x8dcab0, 0xa38e00, ...)\ntemplate.*Template·executeElement+0x330 /Users/petar/go/src/pkg/template/template.go:745\n\ttemplate.*Template·executeElement(0x43f9b0, 0x4152a0, 0x8dca80, 0x4152a0, 0x1, ...)\ntemplate.*Template·execute+0x36 /Users/petar/go/src/pkg/template/template.go:756\n\ttemplate.*Template·execute(0x43f9b0, 0x12, 0x8dca80, 0x12, 0x8, ...)\ntemplate.*Template·Execute+0xeb /Users/petar/go/src/pkg/template/template.go:923\n\ttemplate.*Template·Execute(0x43f9b0, 0x2600000000, 0x8dca80, 0xa38e00, 0x91e6d0, ...)\nmain.applyTemplate+0x71 /Users/petar/go/src/cmd/godoc/godoc.go:970\n\tmain.applyTemplate(0x43f9b0, 0x108af0, 0x91e6c0, 0x93bbd0, 0x3aa900, ...)\nmain.serveDirectory+0x241 /Users/petar/go/src/cmd/godoc/godoc.go:1091\n\tmain.serveDirectory(0x43f9b0, 0xc8a30, 0xb, 0x108af0, 0x91e6c0, ...)\nmain.serveFile+0x5aa /Users/petar/go/src/cmd/godoc/godoc.go:1143\n\tmain.serveFile(0xdb86c0, 0x430a480, 0x92c660, 0x300000013)\nhttp.HandlerFunc·ServeHTTP+0x28 /Users/petar/go/src/pkg/http/server.go:326\n\thttp.HandlerFunc·ServeHTTP(0xdb86c0, 0x430a480, 0x59658, 0x6b4a, 0xdb86c0, ...)\nhttp.*ServeMux·ServeHTTP+0x1fd /Users/petar/go/src/pkg/http/server.go:508\n\thttp.*ServeMux·ServeHTTP(0x6b4a, 0xdb86c0, 0x430a480, 0x5, 0x6b01, ...)\nhttp.*Conn·serve+0x7d /Users/petar/go/src/pkg/http/server.go:289\n\thttp.*Conn·serve(0x38e300, 0xdb86c0)\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 90812 [4]:\ngosched+0x4e /Users/petar/go/src/pkg/runtime/proc.c:542\n\tgosched()\nchanrecv+0x164 /Users/petar/go/src/pkg/runtime/chan.c:355\n\tchanrecv(0xdb86b0, 0xa06e00, 0xab2e8, 0x100000001, 0x1, ...)\nruntime.chanrecv1+0x41 /Users/petar/go/src/pkg/runtime/chan.c:429\n\truntime.chanrecv1(0xdb8660, 0xd30ca8)\nnet.*pollServer·WaitRead+0x49 /Users/petar/go/src/pkg/net/fd.go:272\n\tnet.*pollServer·WaitRead(0xdb8660, 0x150ec80, 0x93091, 0x480400)\nnet.*netFD·Read+0x14d /Users/petar/go/src/pkg/net/fd.go:380\n\tnet.*netFD·Read(0x480400, 0x150ec80, 0x100000001001, 0x0, 0x473a20, ...)\nnet.*TCPConn·Read+0x74 /Users/petar/go/src/pkg/net/tcpsock.go:92\n\tnet.*TCPConn·Read(0x150ec80, 0x14e4000, 0x100000001000, 0x0, 0x473a20, ...)\nbufio.*Reader·fill+0x155 /Users/petar/go/src/pkg/bufio/bufio.go:95\n\tbufio.*Reader·fill(0x38ea48, 0x14e4000)\nbufio.*Reader·ReadSlice+0x1d5 /Users/petar/go/src/pkg/bufio/bufio.go:221\n\tbufio.*Reader·ReadSlice(0x47a8c0, 0xe6e00000000, 0x1d80a, 0xffffffff, 0x3b87, ...)\nhttp.readLineBytes+0x39 /Users/petar/go/src/pkg/http/request.go:225\n\thttp.readLineBytes(0x47a8c0, 0x1450a, 0x0, 0x0, 0x0, ...)\nhttp.readLine+0x34 /Users/petar/go/src/pkg/http/request.go:249\n\thttp.readLine(0x47a8c0, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.ReadRequest+0x61 /Users/petar/go/src/pkg/http/request.go:467\n\thttp.ReadRequest(0x47a8c0, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.*Conn·readRequest+0x58 /Users/petar/go/src/pkg/http/server.go:82\n\thttp.*Conn·readRequest(0x47a8c0, 0x3b87300, 0x0, 0x0, 0x0, ...)\nhttp.*Conn·serve+0x1c /Users/petar/go/src/pkg/http/server.go:282\n\thttp.*Conn·serve(0xdb8cc0, 0xdb8cc0)\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 111 [4]:\ngosched+0x4e /Users/petar/go/src/pkg/runtime/proc.c:542\n\tgosched()\nrunfinq+0x3f /Users/petar/go/src/pkg/runtime/mgc0.c:368\n\trunfinq()\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 4 [3]:\nruntime.entersyscall+0x50 /Users/petar/go/src/pkg/runtime/proc.c:563\n\truntime.entersyscall()\nsyscall.Syscall6+0x5 /Users/petar/go/src/pkg/syscall/asm_darwin_amd64.s:39\n\tsyscall.Syscall6()\nsyscall.kevent+0x6d /Users/petar/go/src/pkg/syscall/zsyscall_darwin_amd64.go:108\n\tsyscall.kevent(0x16b, 0x8, 0x0, 0x0, 0x8ec008, ...)\nsyscall.Kevent+0x99 /Users/petar/go/src/pkg/syscall/syscall_bsd.go:375\n\tsyscall.Kevent(0x8, 0x0, 0x0, 0x8ec008, 0xa, ...)\nnet.*pollster·WaitFD+0xfb /Users/petar/go/src/pkg/net/fd_darwin.go:87\n\tnet.*pollster·WaitFD(0x8, 0x0, 0x0, 0x8ec008, 0xa0000000a, ...)\nnet.*pollServer·Run+0x9e /Users/petar/go/src/pkg/net/fd.go:232\n\tnet.*pollServer·Run(0x8ec000, 0x0)\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 3 [3]:\nruntime.entersyscall+0x50 /Users/petar/go/src/pkg/runtime/proc.c:563\n\truntime.entersyscall()\nsyscall.Syscall6+0x5 /Users/petar/go/src/pkg/syscall/asm_darwin_amd64.s:39\n\tsyscall.Syscall6()\nsyscall.Select+0x5d /Users/petar/go/src/pkg/syscall/zsyscall_darwin_amd64.go:512\n\tsyscall.Select(0x5d, 0x0, 0x0, 0x0, 0x0, ...)\nsyscall.Sleep+0x71 /Users/petar/go/src/pkg/syscall/syscall_bsd.go:145\n\tsyscall.Sleep(0xd00000000, 0x0, 0x0, 0x0)\ntime.Sleep+0x3b /Users/petar/go/src/pkg/time/sleep.go:19\n\ttime.Sleep(0xdf8475800, 0x5f2c8, 0x3945c0, 0x2)\nmain.indexer+0x410 /Users/petar/go/src/cmd/godoc/godoc.go:1414\n\tmain.indexer()\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\ngoroutine 1 [4]:\ngosched+0x4e /Users/petar/go/src/pkg/runtime/proc.c:542\n\tgosched()\nchanrecv+0x164 /Users/petar/go/src/pkg/runtime/chan.c:355\n\tchanrecv(0x911050, 0x48d660, 0xab2e8, 0x100000001, 0x1, ...)\nruntime.chanrecv1+0x41 /Users/petar/go/src/pkg/runtime/chan.c:429\n\truntime.chanrecv1(0x911000, 0x397b50)\nnet.*pollServer·WaitRead+0x49 /Users/petar/go/src/pkg/net/fd.go:272\n\tnet.*pollServer·WaitRead(0x911000, 0x8f60a0, 0x93b0e, 0x480400)\nnet.*netFD·accept+0x2f2 /Users/petar/go/src/pkg/net/fd.go:508\n\tnet.*netFD·accept(0x480400, 0x8f60a0, 0x0, 0x0, 0x23, ...)\nnet.*TCPListener·AcceptTCP+0x5a /Users/petar/go/src/pkg/net/tcpsock.go:253\n\tnet.*TCPListener·AcceptTCP(0x8f60a0, 0x990de, 0x0, 0x0, 0x0, ...)\nnet.*TCPListener·Accept+0x34 /Users/petar/go/src/pkg/net/tcpsock.go:263\n\tnet.*TCPListener·Accept(0x47b788, 0x132cb, 0x0, 0x0, 0x8, ...)\nhttp.Serve+0x66 /Users/petar/go/src/pkg/http/server.go:551\n\thttp.Serve(0x47b788, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.ListenAndServe+0x8e /Users/petar/go/src/pkg/http/server.go:596\n\thttp.ListenAndServe(0x480880, 0x47b788, 0x473810, 0x38e300, 0x480880, ...)\nmain.main+0x6f7 /Users/petar/go/src/cmd/godoc/main.go:285\n\tmain.main()\nmainstart+0xf /Users/petar/go/src/pkg/runtime/amd64/asm.s:60\n\tmainstart()\ngoexit /Users/petar/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\n\nWhat is your $GOOS?  $GOARCH?\ndarwin, amd64\n\nWhich revision are you using?  (hg identify)\n9c15ff12bfe3+ tip\n\nPlease provide any additional information below.\u003c/pre\u003e",
	"user": {
		"login": "petar",
		"id": 285131,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"closed_at": "2014-12-08T10:05:42Z",
	"created_at": "2010-04-26T12:05:31Z",
	"updated_at": "2016-06-24T19:15:34Z"
}
