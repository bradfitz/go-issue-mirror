{
	"id": 147674968,
	"number": 15249,
	"state": "closed",
	"title": "net: TestInterfaces and TestInterfaceAddrs fail on unnumbered or dialup network interfaces",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\nI'm trying to build Go 1.6.1\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\nI can't run Go env but uname says:\r\n\r\n    FreeBSD miso 10.3-RELEASE FreeBSD 10.3-RELEASE #0 r297264: Fri Mar 25 02:10:02 UTC 2016     root@releng1.nyi.freebsd.org:/usr/obj/usr/src/sys/GENERIC  amd64\r\n\r\n3. What did you do?\r\nIf possible, provide a recipe for reproducing the error.\r\nA complete runnable program is good.\r\nA link on play.golang.org is best.\r\n\r\n```\r\n# in the Go source tree\r\ngit checkout go1.6.1\r\ngit clean -dxf\r\ncd src\r\n./all.bash 2\u003e\u00261 | tee /tmp/go1.6.1-build.log\r\n```\r\n\r\n4. What did you expect to see?\r\n\r\nA successful build.\r\n\r\n5. What did you see instead?\r\n\r\nFailed tests:\r\n\r\n```\r\n--- FAIL: TestInterfaces (0.00s)\r\n\tinterface_test.go:79: \"em0\": flags \"up|broadcast|multicast\", ifindex 1, mtu 1500\r\n\tinterface_test.go:80: hardware address \"34:e6:d7:60:b2:c5\"\r\n\tinterface_test.go:215: interface address \"fe80::36e6:d7ff:fe60:b2c5/64\"\r\n\tinterface_test.go:215: interface address \"2a01:1e8:e100:854d:36e6:d7ff:fe60:b2c5/64\"\r\n\tinterface_test.go:215: interface address \"192.168.2.20/24\"\r\n\tinterface_test.go:257: joined group address \"224.0.0.1\"\r\n\tinterface_test.go:257: joined group address \"ff01::1\"\r\n\tinterface_test.go:257: joined group address \"ff02::2:2342:deaf\"\r\n\tinterface_test.go:257: joined group address \"ff02::2:ff23:42de\"\r\n\tinterface_test.go:257: joined group address \"ff02::1\"\r\n\tinterface_test.go:257: joined group address \"ff02::1:ff60:b2c5\"\r\n\tinterface_test.go:79: \"ath0\": flags \"up|broadcast|multicast\", ifindex 2, mtu 2290\r\n\tinterface_test.go:80: hardware address \"1c:65:9d:0d:70:31\"\r\n\tinterface_test.go:79: \"lo0\": flags \"up|loopback|multicast\", ifindex 3, mtu 16384\r\n\tinterface_test.go:80: hardware address \"\"\r\n\tinterface_test.go:215: interface address \"::1/128\"\r\n\tinterface_test.go:215: interface address \"fe80::1/64\"\r\n\tinterface_test.go:215: interface address \"127.0.0.1/8\"\r\n\tinterface_test.go:257: joined group address \"224.0.0.1\"\r\n\tinterface_test.go:257: joined group address \"ff01::1\"\r\n\tinterface_test.go:257: joined group address \"ff02::2:2342:deaf\"\r\n\tinterface_test.go:257: joined group address \"ff02::2:ff23:42de\"\r\n\tinterface_test.go:257: joined group address \"ff02::1\"\r\n\tinterface_test.go:257: joined group address \"ff02::1:ff00:1\"\r\n\tinterface_test.go:79: \"wlan0\": flags \"up|broadcast|multicast\", ifindex 4, mtu 1500\r\n\tinterface_test.go:80: hardware address \"1c:65:9d:0d:70:31\"\r\n\tinterface_test.go:185: unexpected value: \u0026net.IPNet{IP:net.IP{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xff, 0xff, 0x0, 0x0, 0x0, 0x0}, Mask:net.IPMask{0xff, 0x0, 0x0, 0x0}}\r\n\tinterface_test.go:257: joined group address \"224.0.0.1\"\r\n--- FAIL: TestInterfaceAddrs (0.00s)\r\n\tinterface_test.go:215: interface address \"fe80::36e6:d7ff:fe60:b2c5/64\"\r\n\tinterface_test.go:215: interface address \"2a01:1e8:e100:854d:36e6:d7ff:fe60:b2c5/64\"\r\n\tinterface_test.go:215: interface address \"192.168.2.20/24\"\r\n\tinterface_test.go:215: interface address \"::1/128\"\r\n\tinterface_test.go:215: interface address \"fe80::1/64\"\r\n\tinterface_test.go:215: interface address \"127.0.0.1/8\"\r\n\tinterface_test.go:185: unexpected value: \u0026net.IPNet{IP:net.IP{0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xff, 0xff, 0x0, 0x0, 0x0, 0x0}, Mask:net.IPMask{0xff, 0x0, 0x0, 0x0}}\r\nFAIL\r\nFAIL\tnet\t4.447s\r\n```\r\n\r\nThe complete (hopefully) build log is attached as [go1.6.1-build.log.txt](https://github.com/golang/go/files/214588/go1.6.1-build.log.txt).\r\n\r\nHere is my ifconfig if that helps:\r\n\r\n```\r\n$ ifconfig\r\nem0: flags=8843\u003cUP,BROADCAST,RUNNING,SIMPLEX,MULTICAST\u003e metric 0 mtu 1500\r\n\toptions=4019b\u003cRXCSUM,TXCSUM,VLAN_MTU,VLAN_HWTAGGING,VLAN_HWCSUM,TSO4,VLAN_HWTSO\u003e\r\n\tether 34:e6:d7:60:b2:c5\r\n\tinet6 fe80::36e6:d7ff:fe60:b2c5%em0 prefixlen 64 scopeid 0x1 \r\n\tinet6 2a01:1e8:e100:854d:36e6:d7ff:fe60:b2c5 prefixlen 64 autoconf \r\n\tinet 192.168.2.20 netmask 0xffffff00 broadcast 192.168.2.255 \r\n\tnd6 options=23\u003cPERFORMNUD,ACCEPT_RTADV,AUTO_LINKLOCAL\u003e\r\n\tmedia: Ethernet autoselect (1000baseT \u003cfull-duplex\u003e)\r\n\tstatus: active\r\nath0: flags=8843\u003cUP,BROADCAST,RUNNING,SIMPLEX,MULTICAST\u003e metric 0 mtu 2290\r\n\tether 1c:65:9d:0d:70:31\r\n\tnd6 options=21\u003cPERFORMNUD,AUTO_LINKLOCAL\u003e\r\n\tmedia: IEEE 802.11 Wireless Ethernet autoselect mode 11ng\r\n\tstatus: associated\r\nlo0: flags=8049\u003cUP,LOOPBACK,RUNNING,MULTICAST\u003e metric 0 mtu 16384\r\n\toptions=600003\u003cRXCSUM,TXCSUM,RXCSUM_IPV6,TXCSUM_IPV6\u003e\r\n\tinet6 ::1 prefixlen 128 \r\n\tinet6 fe80::1%lo0 prefixlen 64 scopeid 0x3 \r\n\tinet 127.0.0.1 netmask 0xff000000 \r\n\tnd6 options=21\u003cPERFORMNUD,AUTO_LINKLOCAL\u003e\r\nwlan0: flags=8c43\u003cUP,BROADCAST,RUNNING,OACTIVE,SIMPLEX,MULTICAST\u003e metric 0 mtu 1500\r\n\tether 1c:65:9d:0d:70:31\r\n\tinet 0.0.0.0 netmask 0xff000000 broadcast 255.255.255.255 \r\n\tnd6 options=29\u003cPERFORMNUD,IFDISABLED,AUTO_LINKLOCAL\u003e\r\n\tmedia: IEEE 802.11 Wireless Ethernet autoselect (autoselect)\r\n\tstatus: no carrier\r\n\tssid \"Vodafone Hotspot\" channel 6 (2437 MHz 11g ht/20)\r\n\tregdomain 106 indoor ecm authmode OPEN privacy OFF txpower 20 bmiss 7\r\n\tscanvalid 60 protmode CTS ampdulimit 8k ampdudensity 8 shortgi wme\r\n\tburst\r\n```\r\n\r\n\r\n",
	"user": {
		"login": "fuzxxl",
		"id": 328433,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "Testing"
		}
	],
	"comments": 11,
	"closed_at": "2016-04-15T01:38:36Z",
	"created_at": "2016-04-12T08:34:44Z",
	"updated_at": "2016-04-15T01:38:36Z",
	"milestone": {
		"id": 1414133,
		"number": 31,
		"title": "Go1.7"
	}
}
