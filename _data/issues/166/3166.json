{
	"id": 51280207,
	"number": 3166,
	"state": "closed",
	"title": "runtime: openbsd crash (possible dup: 3102)",
	"body": "by **sarnowski@new-thoughts.org**:\n\n\u003cpre\u003eWhat steps will reproduce the problem?\n1. use amd64 OpenBSD-current\n1. checkout current tip\n2. run the src/all.bash script with bash\n\nWhat is the expected output?\ngo builds.\n\n\nWhat do you see instead?\nMost of the time, the compiler hangs while building the \u0026quot;math\u0026quot; or the\n\u0026quot;regex\u0026quot; package. But sometimes I get an error instead:\n\n# Building packages and commands for openbsd/amd64.\nruntime\nerrors\nsync/atomic\nunicode\nmath\nruntime: split stack overflow: 0x20c8bfe78 \u0026lt; 0x20c8c0000\nthrow: runtime: split stack overflow\n\ngoroutine 1 [syscall]:\n\ngoroutine 2 [chan receive]:\nmain.(*builder).do(0xf8400a9210, 0xf8400a9160, 0xf8400d2c40, 0xf8400a96e0)\n        /home/tobias/src/go/src/cmd/go/build.go:532 +0x3ed\nmain.runInstall(0x691070, 0xf840054230, 0x100000001, 0x0)\n        /home/tobias/src/go/src/cmd/go/build.go:180 +0x1cc\nmain.main()\n        /home/tobias/src/go/src/cmd/go/main.go:132 +0x2d8\ncreated by _rt0_amd64\n        /home/tobias/src/go/src/pkg/runtime/asm_amd64.s:69 +0xd1\n\ngoroutine 3 [runnable]:\nsyscall.Syscall6()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:57 +0x61\nsyscall.wait4(0x248c, 0xf8401941c0, 0x0, 0xf84010cf30, 0x1, ...)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:32 +0x81\nsyscall.Wait4(0x248c, 0x20c8bf584, 0xf800000000, 0xf84010cf30, 0xf840087d80, ...)\n        /home/tobias/src/go/src/pkg/syscall/syscall_bsd.go:136 +0x6a\nos.(*Process).Wait(0xf8402254a0, 0x20c8bf660, 0x0, 0x0, 0xf840225c40, ...)\n        /home/tobias/src/go/src/pkg/os/exec_unix.go:24 +0xe1\nos/exec.(*Cmd).Wait(0xf840236600, 0x0, 0x0, 0x0)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:294 +0x1ba\nos/exec.(*Cmd).Run(0xf840236600, 0x55ce08, 0xf840087d20, 0xf8401da690)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:220 +0x6d\nmain.(*builder).runOut(0xf8400a9210, 0xf8400c6900, 0x22, 0xf840187e91, 0x200000006, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:963 +0x17e\nmain.(*builder).run(0xf8400a9210, 0xf8400c6900, 0x22, 0xf840187e91, 0x6, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:930 +0x8d\nmain.goToolchain.gc(0xf8400a9210, 0xf8400d2540, 0xf840112720, 0x200000023, 0xf840225be0,\n...)\n        /home/tobias/src/go/src/cmd/go/build.go:1056 +0x782\nmain.goToolchain.gcÂ·i(0x0, 0xf8400a9210, 0xf8400d2540, 0xf840112720, 0x100000023, ...)\n        /home/tobias/src/go/src/cmd/go/bootstrap.go:0 +0xce\nmain.(*builder).build(0x43d0b7, 0xf8401192c0, 0xf8402ca1c0, 0x0, 0x206, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:604 +0x8aa\ncreated by main.(*builder).do\n        /home/tobias/src/go/src/cmd/go/build.go:529 +0x3bf\n\ngoroutine 4 [runnable]:\nsyscall.Syscall()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:34 +0x5b\nsyscall.Open(0x5a01f4, 0x9, 0x10000, 0xf840194320, 0x0, ...)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:738 +0x71\nos.OpenFile(0x5a01f4, 0x100000009, 0x0, 0xf8402ecc00, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file_unix.go:66 +0x67\nos.Open(0x5a01f4, 0x7665642f00000009, 0x2050d5fb0, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file.go:230 +0x54\nos/exec.(*Cmd).stdin(0xf8402cb200, 0x0, 0x0, 0x0, 0x1d000001c0, ...)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:145 +0x8a\nos/exec.(*Cmd).Start(0xf8402cb200, 0x0, 0x0, 0x20c8c0700)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:234 +0x1fb\nos/exec.(*Cmd).Run(0xf8402cb200, 0x55ce08, 0xf8403a2b40, 0xf8401da690)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:217 +0x25\nmain.(*builder).runOut(0xf8400a9210, 0xf8401a6ed0, 0x20, 0xf84007a989, 0x200000004, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:963 +0x17e\nmain.(*builder).run(0xf8400a9210, 0xf8401a6ed0, 0x20, 0xf84007a989, 0x4, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:930 +0x8d\nmain.goToolchain.gc(0xf8400a9210, 0xf8401068c0, 0xf8400c4660, 0x200000021, 0xf840233c80,\n...)\n        /home/tobias/src/go/src/cmd/go/build.go:1056 +0x782\nmain.goToolchain.gcÂ·i(0x0, 0xf8400a9210, 0xf8401068c0, 0xf8400c4660, 0x200000021, ...)\n        /home/tobias/src/go/src/cmd/go/bootstrap.go:0 +0xce\nmain.(*builder).build(0xf8400a9210, 0xf8402d9840, 0x20c8c0f00, 0x40fda2, 0x4fdb78, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:604 +0x8aa\nmain._func_004(0xf840147d98, 0xf840147da0, 0xf840147db8, 0x427c60, 0xf8402d9840, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:478 +0x2ff\nmain._func_005(0xf840147d98, 0xf840147238, 0x0, 0x0)\n        /home/tobias/src/go/src/cmd/go/build.go:527 +0xc0\ncreated by main.(*builder).do\n        /home/tobias/src/go/src/cmd/go/build.go:529 +0x3bf\n\ngoroutine 5 [syscall]:\nsyscall.Syscall6()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:38 +0x5\nsyscall.wait4(0x610d, 0xf840194420, 0x0, 0xf8402c7090, 0x1, ...)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:32 +0x81\nsyscall.Wait4(0x610d, 0x20c8c1584, 0xf800000000, 0xf8402c7090, 0xf8403a2d20, ...)\n        /home/tobias/src/go/src/pkg/syscall/syscall_bsd.go:136 +0x6a\nos.(*Process).Wait(0xf840225660, 0x20c8c1660, 0x0, 0x0, 0xf8402259c0, ...)\n        /home/tobias/src/go/src/pkg/os/exec_unix.go:24 +0xe1\nos/exec.(*Cmd).Wait(0xf840236700, 0x0, 0x0, 0x0)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:294 +0x1ba\nos/exec.(*Cmd).Run(0xf840236700, 0x55ce08, 0xf840087060, 0xf8401da690)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:220 +0x6d\nmain.(*builder).runOut(0xf8400a9210, 0xf8400edf60, 0x27, 0xf8401878a1, 0x20000000b, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:963 +0x17e\nmain.(*builder).run(0xf8400a9210, 0xf8400edf60, 0x27, 0xf8401878a1, 0xb, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:930 +0x8d\nmain.goToolchain.gc(0xf8400a9210, 0xf840106000, 0xf8401feb10, 0x200000028, 0xf840225900,\n...)\n        /home/tobias/src/go/src/cmd/go/build.go:1056 +0x782\nmain.goToolchain.gcÂ·i(0x0, 0xf8400a9210, 0xf840106000, 0xf8401feb10, 0x200000028, ...)\n        /home/tobias/src/go/src/cmd/go/bootstrap.go:0 +0xce\nmain.(*builder).build(0xf8400a9210, 0xf8402d9000, 0x20c8c1f00, 0x40fda2, 0x4fdb78, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:604 +0x8aa\nmain._func_004(0xf840147d98, 0xf840147da0, 0xf840147db8, 0x427c60, 0xf8402d9000, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:478 +0x2ff\nmain._func_005(0xf840147d98, 0xf840147238, 0x0, 0x0)\n        /home/tobias/src/go/src/cmd/go/build.go:527 +0xc0\ncreated by main.(*builder).do\n        /home/tobias/src/go/src/cmd/go/build.go:529 +0x3bf\n\ngoroutine 6 [runnable]:\nsyscall.Syscall()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:34 +0x5b\nsyscall.Close(0x8, 0x0, 0x0, 0xf8402a3000)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:337 +0x54\nsyscall.forkExec(0xf840355810, 0xf80000002d, 0xf8402cb100, 0x100000000c, 0xf840260980,\n...)\n        /home/tobias/src/go/src/pkg/syscall/exec_unix.go:173 +0x492\nsyscall.StartProcess(0xf840355810, 0xf80000002d, 0xf8402cb100, 0x100000000c,\n0xf840260980, ...)\n        /home/tobias/src/go/src/pkg/syscall/exec_unix.go:212 +0x76\nos.StartProcess(0xf840355810, 0x2d, 0xf8402cb100, 0x100000000c, 0xf8402aee00, ...)\n        /home/tobias/src/go/src/pkg/os/exec_posix.go:43 +0x307\nos/exec.(*Cmd).Start(0xf8402cb000, 0x0, 0x0, 0x20c8c2700)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:248 +0x4a7\nos/exec.(*Cmd).Run(0xf8402cb000, 0x55ce08, 0xf8402cfcc0, 0xf8401da690)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:217 +0x25\nmain.(*builder).runOut(0xf8400a9210, 0xf8400ed4e0, 0x23, 0xf840187aa1, 0x200000007, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:963 +0x17e\nmain.(*builder).run(0xf8400a9210, 0xf8400ed4e0, 0x23, 0xf840187aa1, 0x7, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:930 +0x8d\nmain.goToolchain.gc(0xf8400a9210, 0xf8401061c0, 0xf8401bb240, 0x200000024, 0xf8402255a0,\n...)\n        /home/tobias/src/go/src/cmd/go/build.go:1056 +0x782\nmain.goToolchain.gcÂ·i(0x0, 0xf8400a9210, 0xf8401061c0, 0xf8401bb240, 0x100000024, ...)\n        /home/tobias/src/go/src/cmd/go/bootstrap.go:0 +0xce\nmain.(*builder).build(0xf8400a9210, 0xf8402d92c0, 0x20c8c2f00, 0x40fda2, 0x4fdb78, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:604 +0x8aa\nmain._func_004(0xf840147d98, 0xf840147da0, 0xf840147db8, 0x427c60, 0xf8402d92c0, ...)\n        /home/tobias/src/go/src/cmd/go/build.go:478 +0x2ff\nmain._func_005(0xf840147d98, 0xf840147238, 0x0, 0x0)\n        /home/tobias/src/go/src/cmd/go/build.go:527 +0xc0\ncreated by main.(*builder).do\n        /home/tobias/src/go/src/cmd/go/build.go:529 +0x3bf\ngoroutine 49 [runnable]:\nsyscall.Syscall()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:34 +0x5b\nsyscall.Read(0x5, 0xf840191800, 0x20000000200, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:800 +0x78\nos.(*File).read(0xf840194148, 0xf840191800, 0x20000000200, 0x500b48, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file_unix.go:163 +0x58\nos.(*File).Read(0xf840194148, 0xf840191800, 0x20000000200, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file.go:95 +0x83\nbytes.(*Buffer).ReadFrom(0xf840087d20, 0xf8400b2090, 0xf840194148, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/bytes/buffer.go:153 +0x199\nio.Copy(0xf8401da690, 0xf840087d20, 0xf8400b2090, 0xf840194148, 0x0, ...)\n        /home/tobias/src/go/src/pkg/io/io.go:333 +0xc2\nos/exec._func_003(0xf840288130, 0xf840194138, 0x463656, 0x500ed0, 0x4391e2, ...)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:201 +0x5a\nos/exec._func_004(0xf840194118, 0xf84028df80, 0x0, 0x0)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:260 +0x1e\ncreated by os/exec.(*Cmd).Start\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:261 +0x661\n\ngoroutine 50 [runnable]:\nsyscall.Syscall()\n        /home/tobias/src/go/src/pkg/syscall/asm_openbsd_amd64.s:34 +0x5b\nsyscall.Read(0x7, 0xf840091000, 0x20000000200, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/syscall/zsyscall_openbsd_amd64.go:800 +0x78\nos.(*File).read(0xf840194238, 0xf840091000, 0x20000000200, 0x500b48, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file_unix.go:163 +0x58\nos.(*File).Read(0xf840194238, 0xf840091000, 0x20000000200, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/os/file.go:95 +0x83\nbytes.(*Buffer).ReadFrom(0xf840087060, 0xf8400b2090, 0xf840194238, 0x0, 0x0, ...)\n        /home/tobias/src/go/src/pkg/bytes/buffer.go:153 +0x199\nio.Copy(0xf8401da690, 0xf840087060, 0xf8400b2090, 0xf840194238, 0x0, ...)\n        /home/tobias/src/go/src/pkg/io/io.go:333 +0xc2\nos/exec._func_003(0xf840288500, 0xf840194228, 0x463656, 0xf0, 0x401e6f78, ...)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:201 +0x5a\nos/exec._func_004(0xf8401941b0, 0xf8402abc80, 0x0, 0x0)\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:260 +0x1e\ncreated by os/exec.(*Cmd).Start\n        /home/tobias/src/go/src/pkg/os/exec/exec.go:261 +0x661\n\n\nWhich operating system are you using?\nOpenBSD-current (5.1 beta, current publicly available snapshot will do it)\n\u003ca href=\"http://ftp.openbsd.org/pub/OpenBSD/snapshots/amd64/\"\u003ehttp://ftp.openbsd.org/pub/OpenBSD/snapshots/amd64/\u003c/a\u003e\n\nWhich revision are you using?  (hg identify)\n$ hg identify\na45cc1950c26 tip\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 3,
	"closed_at": "2014-12-08T10:16:28Z",
	"created_at": "2012-03-01T14:53:21Z",
	"updated_at": "2016-06-24T21:29:14Z"
}
