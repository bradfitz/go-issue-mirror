{
	"id": 68297675,
	"number": 10450,
	"state": "closed",
	"title": "runtime/pprof: bad stack split during tests",
	"body": "089d363 caused the `runtime/pprof` tests to fail on linux/arm64\r\n```\r\nruntime: newstack sp=0x4208025ed0 stack=[0x4208025800, 0x4208026000]\r\n\tmorebuf={pc:0x436994 sp:0x4208025ed0 lr:0x0}\r\n\tsched={pc:0x42b8ac sp:0x4208025ed0 lr:0x436994 ctxt:0x0}\r\nruntime.exitsyscall(0x0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/proc1.go:1862 +0x244\r\nruntime.notetsleepg(0x791bb8, 0x1a654cbae9, 0x0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/lock_futex.go:200 +0x98\r\nruntime.timerproc()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/time.go:209 +0x118\r\nruntime.goexit()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/asm_arm64.s:971 +0x4\r\nfatal error: runtime: stack split at bad time\r\n\r\nruntime stack:\r\nruntime.throw(0x69f530, 0x20)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/panic.go:543 +0x80\r\nruntime.newstack()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/stack1.go:654 +0x4c8\r\nruntime.morestack()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/asm_arm64.s:297 +0x5c\r\n\r\ngoroutine 5 [syscall]:\r\nruntime.exitsyscall(0x0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/proc1.go:1862 +0x244 fp=0x4208025f10 sp=0x4208025ed0\r\nruntime.notetsleepg(0x791bb8, 0x1a654cbae9, 0x0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/lock_futex.go:200 +0x98 fp=0x4208025f40 sp=0x4208025f10\r\nruntime.timerproc()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/time.go:209 +0x118 fp=0x4208025fd0 sp=0x4208025f40\r\nruntime.goexit()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/asm_arm64.s:971 +0x4 fp=0x4208025fd0 sp=0x4208025fd0\r\ncreated by runtime.addtimerLocked\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/time.go:116 +0x248\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.RunTests(0x6c8380, 0x77ff00, 0xe, 0xe, 0x4208086001)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/testing/testing.go:561 +0x808\r\ntesting.(*M).Run(0x42080141e0, 0x7b2f60)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/testing/testing.go:490 +0x94\r\nmain.main()\r\n\t/tmp/go-build084722531/runtime/pprof/_test/_testmain.go:82 +0x1f8\r\n\r\ngoroutine 17 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/asm_arm64.s:971 +0x4\r\n\r\ngoroutine 39 [running]:\r\n\tgoroutine running on other thread; stack unavailable\r\ncreated by testing.RunTests\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/testing/testing.go:560 +0x7d8\r\n\r\ngoroutine 40 [runnable]:\r\nruntime/pprof.StartTrace.func1(0x7f86ea1230, 0x42081c0380)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/pprof.go:627\r\ncreated by runtime/pprof.StartTrace\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/pprof.go:635 +0x84\r\n\r\ngoroutine 41 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func1()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:37\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:39 +0x184\r\n\r\ngoroutine 42 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func2()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:40\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:43 +0x19c\r\n\r\ngoroutine 43 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func3()\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:44\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:47 +0x1b4\r\n\r\ngoroutine 44 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func4(0x4208017260)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:49\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:51 +0x1f0\r\n\r\ngoroutine 45 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func5(0x42080172c0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:53\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:55 +0x22c\r\n\r\ngoroutine 46 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func6(0x4208017320, 0x4208017380)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:58\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:63 +0x290\r\n\r\ngoroutine 47 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func7(0x42080abdc0)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:66\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:69 +0x2d0\r\n\r\ngoroutine 48 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func8(0x420e6a4180)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:72\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:74 +0x318\r\n\r\ngoroutine 49 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func9(0x4208011940)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:76\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:80 +0x420\r\n\r\ngoroutine 50 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func10(0x7f86eb7ad8, 0x4208028108, 0x4208072090)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:85\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:91 +0x54c\r\n\r\ngoroutine 51 [runnable]:\r\nruntime/pprof_test.TestTraceSymbolize.func11(0x4208028110, 0x4208017440)\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:99\r\ncreated by runtime/pprof_test.TestTraceSymbolize\r\n\t/home/dfc/workspace/linux-arm64-canonical-2f98bac3107d/go/src/runtime/pprof/trace_stack_test.go:103 +0x6dc\r\nFAIL\truntime/pprof\t6.783s\r\n```\r\n\r\n/cc @minux @dvyukov ",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2015-04-15T09:24:13Z",
	"created_at": "2015-04-14T08:06:37Z",
	"updated_at": "2016-06-25T02:05:37Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
