{
	"id": 173563326,
	"body": "I'm sorry, we cannot accept an issue report with zero error checking.\nPlease add appropriate error handling to your program.\n\nOn Fri, 22 Jan 2016, 00:04 Benjamin Chenebault \u003cnotifications@github.com\u003e\nwrote:\n\n\u003e\n\u003e    - goversion \"1.5\"\n\u003e    - arch \"debian8-linux-amd64\"\n\u003e    - What did I do? \"Read line from TCP stream\"\n\u003e\n\u003e I received altered data when reading from tcpstream.\n\u003e Pointer receivedAAA is partially overwritten by pointer receivedBBB. (side\n\u003e effect of readSlice()?)\n\u003e Only appears on unit testing.\n\u003e Works fine with go1.4.2, go 1.4.3.\n\u003e\n\u003e Here is a way to reproduce the issue:\n\u003e\n\u003e package hello\n\u003e\n\u003e import (\n\u003e     \"bufio\"\n\u003e     \"fmt\"\n\u003e     \"net\"\n\u003e     \"testing\"\n\u003e )\n\u003e\n\u003e func TestBug(t *testing.T) {\n\u003e\n\u003e     AAA := \"AAAAAAAAAAAA\\n\"\n\u003e     BBB := \"BBBB\\n\"\n\u003e\n\u003e     // TCP Server\n\u003e     address, _ := net.ResolveTCPAddr(\"tcp\", fmt.Sprintf(\"0.0.0.0:%d\", 30299))\n\u003e     l, _ := net.ListenTCP(\"tcp\", address)\n\u003e\n\u003e     go func() {\n\u003e         for {\n\u003e             // Listen for an incoming connection.\n\u003e             conn, _ := l.AcceptTCP()\n\u003e             fmt.Fprintf(conn, AAA)\n\u003e             fmt.Fprintf(conn, BBB)\n\u003e             conn.Close()\n\u003e         }\n\u003e     }()\n\u003e\n\u003e     // TCP client\n\u003e     addr, _ := net.ResolveTCPAddr(\"tcp\", \"localhost:30299\")\n\u003e     connection, _ := net.DialTCP(\"tcp\", nil, addr)\n\u003e     defer connection.Close()\n\u003e\n\u003e     reader := bufio.NewReader(connection)\n\u003e     receivedAAA, _ := reader.ReadSlice('\\n')\n\u003e     receivedBBB, _ := reader.ReadSlice('\\n')\n\u003e\n\u003e     fmt.Printf(\"VALUE -- type %T: q=%p\\n\", receivedAAA, receivedAAA)\n\u003e     fmt.Printf(\"VALUE -- type %T: q=%p\\n\", receivedBBB, receivedBBB)\n\u003e\n\u003e     if string(receivedAAA) != AAA {\n\u003e         t.Error(\"should receive \" + AAA + \" but got \" + string(receivedAAA))\n\u003e     }\n\u003e     if string(receivedBBB) != BBB {\n\u003e         t.Error(\"should receive \" + BBB + \" but got \" + string(receivedBBB))\n\u003e     }\n\u003e\n\u003e }\n\u003e\n\u003e\n\u003e Error seems to be due to client bufio, since tcp dump is correct\n\u003e\n\u003e ####\n\u003e T 127.0.0.1:30299 -\u003e 127.0.0.1:43386 [AP]\n\u003e   AAAAAAAAAAAA.\n\u003e ##\n\u003e T 127.0.0.1:30299 -\u003e 127.0.0.1:43386 [AP]\n\u003e   BBBB.\n\u003e ####\n\u003e\n\u003e â€”\n\u003e Reply to this email directly or view it on GitHub\n\u003e \u003chttps://github.com/golang/go/issues/14055\u003e.\n\u003e\n",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-01-21T13:06:20Z",
	"updated_at": "2016-01-21T13:06:20Z"
}
