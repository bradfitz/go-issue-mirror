{
	"id": 51284380,
	"number": 5915,
	"state": "closed",
	"title": "compress/flate: panic in makeslice",
	"body": "by **mattcotework**:\n\n\u003cpre\u003eBefore filing a bug, please check whether it has been fixed since the\nlatest release. Search the issue tracker and check that you're running the\nlatest version of Go:\n\nRun \u0026quot;go version\u0026quot; and compare against\n\u003ca href=\"http://golang.org/doc/devel/release.html\"\u003ehttp://golang.org/doc/devel/release.html\u003c/a\u003e  If a newer version of Go exists,\ninstall it and retry what you did to reproduce the problem.\n\nThanks.\n\nWhat steps will reproduce the problem?\n\nimport (\n    \u0026quot;io/ioutil\u0026quot;\n    \u0026quot;bytes\u0026quot;\n    \u0026quot;compress/gzip\u0026quot;\n    \u0026quot;fmt\u0026quot;\n)\n\nfunc main() {\n\n    b, rerr := ioutil.ReadFile(\u0026quot;test.out\u0026quot;)\n\n    if rerr == nil {\n        br := bytes.NewReader(b)\n        gr, err := gzip.NewReader(br)\n        defer gr.Close()\n\n        if err == nil {\n            data, e2 := ioutil.ReadAll(gr)\n            fmt.Printf(\u0026quot;%s\\n\\n\u0026quot;, e2)\n            fmt.Printf(\u0026quot;%#v\u0026quot;, data)\n        }\n    }\n}\n\n\nWhat is the expected output?\n\n\n\nWhat do you see instead?\n\n\npanic: runtime error: makeslice: len out of range\n\ncompress/flate.(*huffmanDecoder).init(0xc3762e0230, 0xc376803000, 0x111, 0x13e, 0x0, ...)\n        /usr/local/go/src/pkg/compress/flate/inflate.go:128 +0x15d\ncompress/flate.(*decompressor).readHuffman(0xc3762e0200, 0x0, 0x0)\n        /usr/local/go/src/pkg/compress/flate/inflate.go:371 +0x450\ncompress/flate.(*decompressor).nextBlock(0xc3762e0200)\n        /usr/local/go/src/pkg/compress/flate/inflate.go:242 +0x19f\ncompress/flate.(*decompressor).Read(0xc3762e0200, 0xc376693a00, 0x200, 0x200, 0x200, ...)\n        /usr/local/go/src/pkg/compress/flate/inflate.go:264 +0x1a1\ncompress/gzip.(*Reader).Read(0xc376556840, 0xc376693a00, 0x200, 0x200, 0x200, ...)\n        /usr/local/go/src/pkg/compress/gzip/gunzip.go:207 +0xeb\ngnw.(*http_pair).processResponse(0xc37670b200, 0xc3677d7000)\n        /home/mcote/code/gnw/src/gnw/http.go:254 +0x2f0\ngnw.http_process_stream_segments(0xc3677d7000)\n        /home/mcote/code/gnw/src/gnw/http.go:154 +0x4ad\ngnw.(*GnwStreamSegmentsManager).Process(0xc3677d7000)\n        /home/mcote/code/gnw/src/gnw/gnwmain.go:142 +0x76\nmain.funcÂ·001()\n        /home/mcote/code/gnw/src/gnwpcapparser.go:317 +0x9c\ncreated by main.(*PcapMonitor).StartStreamProcessor\n        /home/mcote/code/gnw/src/gnwpcapparser.go:334 +0x83\n\nWhich compiler are you using (5g, 6g, 8g, gccgo)?\nWhich operating system are you using?\n\nGOARCH=\u0026quot;amd64\u0026quot;\nGOCHAR=\u0026quot;6\u0026quot;\nGOEXE=\u0026quot;\u0026quot;\nGOHOSTARCH=\u0026quot;amd64\u0026quot;\nGOHOSTOS=\u0026quot;linux\u0026quot;\nGOOS=\u0026quot;linux\u0026quot;\nGORACE=\u0026quot;\u0026quot;\nCC=\u0026quot;gcc\u0026quot;\nGOGCCFLAGS=\u0026quot;-g -O2 -fPIC -m64 -pthread\u0026quot;\nCGO_ENABLED=\u0026quot;1\u0026quot;\n\n\nWhich version are you using?  (run 'go version')\n\n1.1.1\n\nPlease provide any additional information below.\n\n\ntest.out listed above as base64 data:\n\n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\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 4,
	"closed_at": "2014-12-08T10:32:30Z",
	"created_at": "2013-07-18T16:22:13Z",
	"updated_at": "2016-06-24T22:52:13Z",
	"milestone": {
		"id": 1067207,
		"number": 14,
		"title": "Go1.2"
	}
}
