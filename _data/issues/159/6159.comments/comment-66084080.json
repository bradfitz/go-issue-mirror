{
	"id": 66084080,
	"body": "\u003ca id=\"c7\"\u003e\u003c/a\u003eComment 7 by **atkaaz**:\n\n\u003cpre\u003eYep, totally works with IGMPLevel 2 (maybe with 1 also, but didn't yet test, should I?)\nSo when IGMPLevel is 0 (aka disabled) it will fail like that.\n\nFri 08/16/2013  5:36:47.66 s:\\workspace.go.2013\\go\\src\u003ego test net -short\nok      net     2.546s\n\nthat is:\nHKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\services\\Tcpip\\Parameters\\\nREG_WORD (32bit value) IGMPLevel\n2\n\nI should note that although IGMP was enabled, my firewall still blocked all IGMP packets.\n\nThere are some things to note while I was trying this, if I don't append \"-short\" to `go\ntest net` command then it panics like so:\n\nFri 08/16/2013  5:43:31.63 s:\\workspace.go.2013\\go\\src\u003ego test net\n--- FAIL: TestDialGoogleIPv4 (0.02 seconds)\n        dialgoogle_test.go:66: lookup www.google.com: GetAddrInfoW: No such host is known.\n--- FAIL: TestGoogleSRV (0.01 seconds)\n        lookup_test.go:24: failed: LookupSRV: No DNS servers configured for local system.\n        lookup_test.go:27: no results\n        lookup_test.go:33: back door failed: LookupSRV: No DNS servers configured for local system.\n\n        lookup_test.go:36: back door no results\n--- FAIL: TestGmailMX (0.00 seconds)\n        lookup_test.go:46: failed: LookupMX: No DNS servers configured for local system.\n        lookup_test.go:49: no results\n--- FAIL: TestGmailNS (0.00 seconds)\n        lookup_test.go:59: failed: LookupNS: No DNS servers configured for local system.\n        lookup_test.go:62: no results\n--- FAIL: TestGmailTXT (0.00 seconds)\n        lookup_test.go:72: failed: LookupTXT: No DNS servers configured for local system.\n        lookup_test.go:75: no results\n--- FAIL: TestGoogleDNSAddr (0.02 seconds)\n        lookup_test.go:85: failed: LookupAddr: No DNS servers configured for local system.\n        lookup_test.go:88: no results\n--- FAIL: TestLookupIANACNAME (0.00 seconds)\n        lookup_test.go:98: LookupCNAME(\"www.iana.org.\") = \"\", LookupCNAME: No DNS servers configure\nd for local system., want \"*.icann.org.\", nil\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\nhere1\nhere2\nhere4\nhere6\na1\na4\na6\nb1\nb2\nb4\nb6\nb7  12\nf1\nb8  (0x0,0x0)\na8\nhere8\nherec\n--- FAIL: TestDualStackUDPListener (0.00 seconds)\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n        panic: runtime error: invalid memory address or nil pointer dereference\n[signal 0xc0000005 code=0x1 addr=0x0 pc=0x4ae960]\n\ngoroutine 456 [running]:\ntesting.func路005()\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:382 +0x107\nnet.checkDualStackSecondListener(0xc084095c60, 0x61a100, 0x3, 0xc084098348, 0x6, ...)\n        C:/Go/src/pkg/net/unicast_posix_test.go:357 +0x640\nnet.TestDualStackUDPListener(0xc084095c60)\n        C:/Go/src/pkg/net/unicast_posix_test.go:241 +0x770\ntesting.tRunner(0xc084095c60, 0x8197c8)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:387 +0xaa\ncreated by testing.RunTests\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:467 +0x917\n\ngoroutine 1 [chan receive]:\ntesting.RunTests(0x673fb0, 0x818e20, 0x6a, 0x6a, 0xc084002f00)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:468 +0x944\ntesting.Main(0x673fb0, 0x818e20, 0x6a, 0x6a, 0x812120, ...)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:399 +0x99\nmain.main()\n        net/_test/_testmain.go:291 +0x9f\n\ngoroutine 186 [chan send]:\nnet.func路090()\n        C:/Go/src/pkg/net/timeout_test.go:167 +0xa5\ncreated by net.TestWriteTimeout\n        C:/Go/src/pkg/net/timeout_test.go:170 +0x6ab\n\ngoroutine 188 [chan send]:\nnet.runDatagramPacketConnServer(0xc084095cf0, 0x61a100, 0x3, 0x61d430, 0xb, ...)\n        C:/Go/src/pkg/net/server_test.go:392 +0x4e3\ncreated by net.TestTimeoutUDP\n        C:/Go/src/pkg/net/timeout_test.go:244 +0x1d9\nFAIL    net     25.290s\n\n(tested the above with internet cable disconnected, but the same panic happens with\ninternet connected but still I am not allowing net.test.exe in firewall to go out)\n\nAlso, at one time it never exited(and didn't print anything on console) so I had to kill\ngo.exe and I notice net.test.exe is there in taskmanager and I am unable to kill it\n(Access is denied, although I'm admin user)\n\ntried the above with:\ngo version devel +8345604e9545 Thu Aug 15 22:37:16 2013 -0400 windows/amd64\n\nafter actually cleaning my modified files (the ones with println in them, via hg update\n-C so discarding any modified files) and recompiling with all.bat\nEverything worked calling all.bat (\"ALL TESTS PASSED\"), there were no test errors even\nthough I did block some http.test.exe and that test seems to have taken only 18 seconds\nbut still passed (wondering if something similar can be done for this current issue, for\nwhen IGMP is disabled in OS, because I assume it's analogous to http.test.exe when it\ndoesn't have internet access)\n\nAfter this, doing `go test net` (without `-short`) shows this then:\nFri 08/16/2013  5:58:06.93 s:\\workspace.go.2013\\go\\src\u003ego test net\n--- FAIL: TestDialGoogleIPv4 (12.03 seconds)\n        dialgoogle_test.go:66: lookup www.google.com: GetAddrInfoW: No such host is known.\n--- FAIL: TestGoogleSRV (0.00 seconds)\n        lookup_test.go:24: failed: LookupSRV: This operation returned because the timeout period ex\npired.\n        lookup_test.go:27: no results\n        lookup_test.go:33: back door failed: LookupSRV: This operation returned because the timeout\n period expired.\n        lookup_test.go:36: back door no results\n--- FAIL: TestGmailMX (0.00 seconds)\n        lookup_test.go:46: failed: LookupMX: This operation returned because the timeout period exp\nired.\n        lookup_test.go:49: no results\n--- FAIL: TestGmailNS (0.00 seconds)\n        lookup_test.go:59: failed: LookupNS: This operation returned because the timeout period exp\nired.\n        lookup_test.go:62: no results\n--- FAIL: TestGmailTXT (0.00 seconds)\n        lookup_test.go:72: failed: LookupTXT: This operation returned because the timeout period ex\npired.\n        lookup_test.go:75: no results\n--- FAIL: TestGoogleDNSAddr (0.00 seconds)\n        lookup_test.go:85: failed: LookupAddr: This operation returned because the timeout period e\nxpired.\n        lookup_test.go:88: no results\n--- FAIL: TestLookupIANACNAME (0.00 seconds)\n        lookup_test.go:98: LookupCNAME(\"www.iana.org.\") = \"\", LookupCNAME: This operation returned\nbecause the timeout period expired., want \"*.icann.org.\", nil\n--- FAIL: TestDualStackUDPListener (0.00 seconds)\npanic: runtime error: invalid memory address or nil pointer dereference [recovered]\n        panic: runtime error: invalid memory address or nil pointer dereference\n[signal 0xc0000005 code=0x1 addr=0x0 pc=0x4ae460]\n\ngoroutine 456 [running]:\ntesting.func路005()\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:382 +0x107\nnet.checkDualStackSecondListener(0xc0840a6d80, 0x619880, 0x3, 0xc084104740, 0x6, ...)\n        C:/Go/src/pkg/net/unicast_posix_test.go:357 +0x640\nnet.TestDualStackUDPListener(0xc0840a6d80)\n        C:/Go/src/pkg/net/unicast_posix_test.go:241 +0x770\ntesting.tRunner(0xc0840a6d80, 0x8197c8)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:387 +0xaa\ncreated by testing.RunTests\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:467 +0x917\n\ngoroutine 1 [chan receive]:\ntesting.RunTests(0x673730, 0x818e20, 0x6a, 0x6a, 0xc084002f00)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:468 +0x944\ntesting.Main(0x673730, 0x818e20, 0x6a, 0x6a, 0x812120, ...)\n        s:/workspace.go.2013/go/src/pkg/testing/testing.go:399 +0x99\nmain.main()\n        net/_test/_testmain.go:291 +0x9f\n\ngoroutine 188 [chan send]:\nnet.runDatagramPacketConnServer(0xc0840a6120, 0x619880, 0x3, 0x61cbb0, 0xb, ...)\n        C:/Go/src/pkg/net/server_test.go:392 +0x4e3\ncreated by net.TestTimeoutUDP\n        C:/Go/src/pkg/net/timeout_test.go:244 +0x1d9\n\ngoroutine 186 [chan send]:\nnet.func路090()\n        C:/Go/src/pkg/net/timeout_test.go:167 +0xa5\ncreated by net.TestWriteTimeout\n        C:/Go/src/pkg/net/timeout_test.go:170 +0x6ab\nFAIL    net     35.937s\n\n(note that, I had internet cable in but blocked net.test.exe from accessing the\ninternet, via firewall)\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-08-16T04:02:36Z",
	"updated_at": "2014-12-08T10:33:53Z"
}
