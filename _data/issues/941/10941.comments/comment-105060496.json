{
	"id": 105060496,
	"body": "@RLH Is it use processes to run parallel test?\r\nI think more GOMAXPROCS make it easier to reproduce it than multi processes.\r\n\r\nHere is new code to reproduce. This doesn't require wrk.\r\nhttps://gist.github.com/methane/a874718dea95cc031f35\r\n\r\nI have reproduced once on c4.4xlarge (16cores) within 1 hour.\r\nCrash dump is different from previous code.\r\n\r\n```console\r\nfatal error: acquireSudog: found s.elem != nil in cache\r\n\r\ngoroutine 55 [running]:\r\nruntime.throw(0x75d970, 0x2a)\r\n\t/Users/inada-n/local/go/src/runtime/panic.go:527 +0x96 fp=0xc208d8e5a8 sp=0xc208d8e590\r\nruntime.acquireSudog(0xc208e03700)\r\n\t/Users/inada-n/local/go/src/runtime/proc.go:232 +0x332 fp=0xc208d8e640 sp=0xc208d8e5a8\r\nruntime.selectgoImpl(0xc208d8e938, 0x0, 0x18)\r\n\t/Users/inada-n/local/go/src/runtime/select.go:369 +0x889 fp=0xc208d8e7e8 sp=0xc208d8e640\r\nruntime.selectgo(0xc208d8e938)\r\n\t/Users/inada-n/local/go/src/runtime/select.go:212 +0x12 fp=0xc208d8e808 sp=0xc208d8e7e8\r\nnet/http.(*persistConn).roundTrip(0xc2080fe000, 0xc2085da420, 0x0, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/transport.go:1165 +0x8e1 fp=0xc208d8ea40 sp=0xc208d8e808\r\nnet/http.(*Transport).RoundTrip(0xc20806a120, 0xc208100f70, 0xc207ff2546, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/transport.go:235 +0x533 fp=0xc208d8eb60 sp=0xc208d8ea40\r\nnet/http.send(0xc208100f70, 0x7fdfb4a2b468, 0xc20806a120, 0x16, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/client.go:220 +0x4e1 fp=0xc208d8ec58 sp=0xc208d8eb60\r\nnet/http.(*Client).send(0x87cd20, 0xc208100f70, 0x16, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/client.go:143 +0x15d fp=0xc208d8ed28 sp=0xc208d8ec58\r\nnet/http.(*Client).doFollowingRedirects(0x87cd20, 0xc208100f70, 0x78d1d8, 0x0, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/client.go:380 +0xbc3 fp=0xc208d8ef28 sp=0xc208d8ed28\r\nnet/http.(*Client).Get(0x87cd20, 0xc208010540, 0x16, 0xd, 0x0, 0x0)\r\n\t/Users/inada-n/local/go/src/net/http/client.go:306 +0xad fp=0xc208d8ef78 sp=0xc208d8ef28\r\nmain.client()\r\n\t/Users/inada-n/work/hellobench.go/hello/repro.go:43 +0x44 fp=0xc208d8efe0 sp=0xc208d8ef78\r\nruntime.goexit()\r\n\t/Users/inada-n/local/go/src/runtime/asm_amd64.s:1670 +0x1 fp=0xc208d8efe8 sp=0xc208d8efe0\r\ncreated by main.main\r\n\t/Users/inada-n/work/hellobench.go/hello/repro.go:34 +0x122\r\n\r\ngoroutine 1 [sleep]:\r\ntime.Sleep(0x3b9aca00)\r\n\t/Users/inada-n/local/go/src/runtime/time.go:59 +0xfc\r\nmain.main()\r\n\t/Users/inada-n/work/hellobench.go/hello/repro.go:37 +0x142\r\n\r\ngoroutine 5 [IO wait, 46 minutes]:\r\nnet.runtime_pollWait(0x7fdfb4a30590, 0x72, 0xc20800a1a0)\r\n\t/Users/inada-n/local/go/src/runtime/netpoll.go:157 +0x63\r\nnet.(*pollDesc).Wait(0xc208042140, 0x72, 0x0, 0x0)\r\n...\r\n```\r\n\r\nIt was cross compiled on Mac.\r\n```console\r\n$ ~/local/go/bin/go version\r\ngo version devel +8017ace Sat May 23 17:42:43 2015 +0000 darwin/amd64\r\n```",
	"user": {
		"login": "methane",
		"id": 199592,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-05-24T20:39:18Z",
	"updated_at": "2015-05-24T20:40:31Z"
}
