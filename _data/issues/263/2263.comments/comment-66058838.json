{
	"id": 66058838,
	"body": "\u003ca id=\"c2\"\u003e\u003c/a\u003eComment 2:\n\n\u003cpre\u003eIndeed.  I can reproduce this with telnet and curl.\n\nIn one window,\n\n$ telnet camlistore.org 443\n\n(and let it sit idle)\n\nIn the other window,\n\n$ curl \u003ca href=\"https://camlistore.org/\"\u003ehttps://camlistore.org/\u003c/a\u003e\n\nIt hangs.  Leave it hanging.\n\nBack in the telnet window, hit control-], q, \u0026lt;enter\u0026gt; and then the curl process\nunblocks.\n\nI think this explains why the camlistore website has been hanging every week or so,\nalways on https (and http works fine).\n\nLast time camlistore hung, I sent it a SIGQUIT and noticed that the only weird thing was:\n\n\ngoroutine 6 [4]:\nruntime.gosched+0x5c /home/camli/go/src/pkg/runtime/proc.c:603\n        runtime.gosched()\nruntime.chanrecv+0x177 /home/camli/go/src/pkg/runtime/chan.c:361\n        runtime.chanrecv(0xf840160a20, 0x7fc9117ed7e8, 0x0, 0x0, 0x70100cff0, ...)\nruntime.chanrecv1+0x4a /home/camli/go/src/pkg/runtime/chan.c:424\n        runtime.chanrecv1(0xf840160a20, 0xf8400d2780)\nnet.*pollServer·WaitRead+0x49 /home/camli/go/src/pkg/net/fd.go:255\n        net.*pollServer·WaitRead(0xf840021f80, 0xf8400d2780, 0x40000000400, 0xbffffffff)\nnet.*netFD·Read+0x1a4 /home/camli/go/src/pkg/net/fd.go:380\n        net.*netFD·Read(0xf8400d2780, 0xf8402cc800, 0x40000000400, 0x0, 0x0, ...)\nnet.*TCPConn·Read+0x95 /home/camli/go/src/pkg/net/tcpsock.go:96\n        net.*TCPConn·Read(0xf84019a638, 0xf8402cc800, 0x40000000400, 0x585638, 0x0, ...)\ncrypto/tls.*block·readFromUntil+0xa5 /home/camli/go/src/pkg/crypto/tls/conn.go:372\n        crypto/tls.*block·readFromUntil(0xf84020c3a0, 0xf840144990, 0xf84019a638, 0xf800000005, 0xf84019a638, ...)\ncrypto/tls.*Conn·readRecord+0xf2 /home/camli/go/src/pkg/crypto/tls/conn.go:452\n        crypto/tls.*Conn·readRecord(0xf840038380, 0xf800000016, 0xf840317750, 0xf8402a6800, 0x400000009, ...)\ncrypto/tls.*Conn·readHandshake+0x91 /home/camli/go/src/pkg/crypto/tls/conn.go:630\n        crypto/tls.*Conn·readHandshake(0xf840038380, 0xf84019a616, 0xf84019a684, 0x4)\ncrypto/tls.*Conn·serverHandshake+0x119f\n/home/camli/go/src/pkg/crypto/tls/handshake_server.go:200\n        crypto/tls.*Conn·serverHandshake(0xf840038380, 0x0, 0x0, 0x0)\ncrypto/tls.*Conn·Handshake+0xfd /home/camli/go/src/pkg/crypto/tls/conn.go:756\n        crypto/tls.*Conn·Handshake(0xf840038380, 0x0, 0x0, 0xf840038380)\nhttp.newConn+0x1bd /home/camli/go/src/pkg/http/server.go:155\n        http.newConn(0xf840147540, 0xf840038380, 0xf840045f60, 0xf840045f30, 0xf8401404b0, ...)\nhttp.*Server·Serve+0x2d5 /home/camli/go/src/pkg/http/server.go:889\n        http.*Server·Serve(0xf840012030, 0xf840142d40, 0xf840143c80, 0x0, 0x0, ...)\nhttp.*Server·ListenAndServeTLS+0x29f /home/camli/go/src/pkg/http/server.go:996\n        http.*Server·ListenAndServeTLS(0xf840012030, 0x7fff806973ac, 0x17, 0x7fff806973cd, 0x17, ...)\nmain._func_003+0x4a /home/camli/camlistore/website/camweb.go:330\n        main._func_003(0xf840000658, 0xf840000488, 0x0, 0x0)\nruntime.goexit /home/camli/go/src/pkg/runtime/proc.c:178\n        runtime.goexit()\n----- goroutine created by -----\nmain.main+0x1397 /home/camli/camlistore/website/camweb.go:331\n\n\nThat's probably related.\u003c/pre\u003e\n\n\n_Owner changed to @bradfitz._\n\n_Status changed to **Accepted**._",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2011-09-20T00:51:18Z",
	"updated_at": "2014-12-22T06:03:28Z"
}
