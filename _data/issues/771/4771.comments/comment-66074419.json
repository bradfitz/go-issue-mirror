{
	"id": 66074419,
	"body": "\u003ca id=\"c17\"\u003e\u003c/a\u003eComment 17:\n\n\u003cpre\u003eyeah, every implementation is different in these aspects:\n1. \"=\\r\\r\\r\\n\"  should it decode to \"\\r\\r\\n\" (php), or \"\" (python)? (RFC 2045 says this\nis illegal)\n2. while space/tab at end of line, remove them or not? (RFC 2045 says so, but both\nimplementations\nkeep them)\n\nrelevant source code:\n\u003ca href=\"http://hg.python.org/cpython/file/aa77f7eb2bf1/Lib/quopri.py\"\u003ehttp://hg.python.org/cpython/file/aa77f7eb2bf1/Lib/quopri.py\u003c/a\u003e  [py3] or\n\u003ca href=\"http://hg.python.org/cpython/file/70274d53c1dd/Lib/quopri.py\"\u003ehttp://hg.python.org/cpython/file/70274d53c1dd/Lib/quopri.py\u003c/a\u003e [py2] and\n\u003ca href=\"http://hg.python.org/cpython/file/aa77f7eb2bf1/Modules/binascii.c#l1224\"\u003ehttp://hg.python.org/cpython/file/aa77f7eb2bf1/Modules/binascii.c#l1224\u003c/a\u003e [py3]\n\u003ca href=\"http://hg.python.org/cpython/file/70274d53c1dd/Modules/binascii.c#l1191\"\u003ehttp://hg.python.org/cpython/file/70274d53c1dd/Modules/binascii.c#l1191\u003c/a\u003e [py2]\n(normally python will use binascii's C version, but C version and python version doesn't\nagree with each other)\n\u003ca href=\"http://lxr.php.net/xref/php-src/ext/standard/quot_print.c\"\u003ehttp://lxr.php.net/xref/php-src/ext/standard/quot_print.c\u003c/a\u003e\n\u003ca href=\"http://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/platform/text/QuotedPrintable.cpp\u0026sq=package:chromium\"\u003ehttp://code.google.com/p/chromium/codesearch#chromium/src/third_party/WebKit/Source/WebCore/platform/text/QuotedPrintable.cpp\u0026sq=package:chromium\u003c/a\u003e\n\nall three decoder disregard the 2nd space rule (except the pure python version, but\nnormally it's not used).\nwebkit's qp decoder is the most simple of the three, only ignore \\r\\n if immediately\npreceded by =,\nand in all other cases, it will pass the source data through.\nphp's decoder only treats \"=\\r\", \"=\\n\" and \"=\\r\\n\" as soft line breaks and remove them.\npython's decoder will treat \"=\\n‚Äù or \"=\\r[^\\n]*\\n\" as soft line breaks and remove\nthem, even \"=\\raaa\\n\" will decoded as \"\".\n\n\nGiven that all existing implementation don't agree with each other, my proposal for our\ndecoder is:\n1. pass through \\r, \\n if they are not immediately preceded by =, this should fix this\nparticular issue.\n2. disregard the aforementioned point 2 about removing while spaces at the line end, and\nhope that\nthere won't be any broken MTA anymore.\n3. treat \"=\\n\", \"=\\r\\n\" as soft line breaks only, and give error for other cases (in\nparticular, \"=\\r\" without\nbeing followed by \"\\n\" is an error)\n\nWhat do you think?\u003c/pre\u003e",
	"user": {
		"login": "minux",
		"id": 135652,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-02-19T10:05:43Z",
	"updated_at": "2014-12-08T10:25:21Z"
}
