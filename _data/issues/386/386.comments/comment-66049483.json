{
	"id": 66049483,
	"body": "\u003ca id=\"c5\"\u003e\u003c/a\u003eComment 5:\n\n\u003cpre\u003eI can reproduce this bug, but I got a different result when running \"x\" (it segfaults\nsometimes).\n\nReproducing the bug:\n\n~/go/src/pkg/archive/tar$ ./8.out \nSegmentation fault\n\n~/go/src/pkg/archive/tar$ strace -f ./8.out -s 100000\nexecve(\"./8.out\", [\"./8.out\", \"-s\", \"100000\"], [/* 22 vars */]) = 0\nbrk(0)                                  = 0x9905d000\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\nmmap2(NULL, 12288, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb8043000\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\nmmap2(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb8042000\nset_thread_area({entry_number:-1 -\u0026gt; 6, base_addr:0xb8042690, limit:1048575,\nseg_32bit:1, contents:0, read_exec_only:0, \nlimit_in_pages:1, seg_not_present:0, useable:1}) = 0\nmodify_ldt(1, {entry_number:7, base_addr:0x80b9134, limit:1048575, seg_32bit:1,\ncontents:0, read_exec_only:0, \nlimit_in_pages:1, seg_not_present:0, useable:1}, 16) = 0\n--- SIGSEGV (Segmentation fault) @ 0 (0) ---\n+++ killed by SIGSEGV +++\nProcess 13739 detached\n\n\n== dmesg ==\nkernel BUG at arch/x86/xen/enlighten.c:436!\ninvalid opcode: 0000 [#2] SMP \n\nPid: 13003, comm: 8.out Tainted: G      D W (2.6.27.2-xenU #1)\nEIP: 0061:[\u0026lt;c01034cb\u0026gt;] EFLAGS: 00210282 CPU: 0\nEIP is at xen_write_ldt_entry+0x87/0x94\nEAX: ffffffea EBX: c4a89038 ECX: 00000001 EDX: 9134ffff\nESI: 08eff20b EDI: 00000000 EBP: 00000008 ESP: c9b75f64\n DS: 007b ES: 007b FS: 00d8 GS: 0033 SS: 0069\nProcess 8.out (pid: 13003, ti=c9b74000 task=c9a257f0 task.ti=c9b74000)\nStack: 08eff20b 00000000 09a69038 00000000 00000280 0000000f 00000001 c0109941 \n       c62e8c18 c62e8ac0 00000007 080b9134 000fffff 00000051 9134ffff 08eff20b \n       00000001 bff6f77c 0806ea1a c9b74000 c0106d46 00000001 bff6f6c8 00000010 \nCall Trace:\n [\u0026lt;c0109941\u0026gt;] write_ldt+0x1a7/0x1c3\n [\u0026lt;c0106d46\u0026gt;] syscall_call+0x7/0xb\n [\u0026lt;c0430000\u0026gt;] hrtimer_nanosleep_restart+0x28/0x51\n\n\nTesting with x.c and xx.c:\n\n~/go/src/pkg/archive/tar$ ./x\nSegmentation fault\n\n~/go/src/pkg/archive/tar$ ./xx\nok - set_thread_area\n\n(again)\n~/go/src/pkg/archive/tar$ ./x\nok\n\n~/go/src/pkg/archive/tar$ ./x\nSegmentation fault\n\n\nIn the end, x.c crashes only sometimes, while \"gotest\" in pkg/archives/tar crashes every\ntime.\u003c/pre\u003e",
	"user": {
		"login": "nictuku",
		"id": 202998,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2009-12-14T06:11:10Z",
	"updated_at": "2014-12-22T05:50:16Z"
}
