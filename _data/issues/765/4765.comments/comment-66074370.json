{
	"id": 66074370,
	"body": "\u003ca id=\"c2\"\u003e\u003c/a\u003eComment 2:\n\n\u003cpre\u003eThinking aloud here, the 5{c,g,l} toolchain does not use or generate Thumb{,2}\ninstructions currently. The only place we use them is inside the runtime to check for a\nkernel that does not support EABI.\n\nIs it possible to instead alter the ELF flags to make our EABI binary unpalatable to\nOABI kernels ? Forgive me if this has already been tried.\n\nHere is the output from an old OABI version of nano (from the debian woody archive,\nwhich is arm, not armel), vs a modern armhf vim binary. While this armhf system refuses\nto recognise the older nano binary as executable, I wonder if it is possible to do the\ninverse and make newer EABI binaries not runnable on OABI systems, thereby removing the\nneed for a check inside the runtime.\n\n% readelf -h nano \nELF Header:\n  Magic:   7f 45 4c 46 01 01 01 61 00 00 00 00 00 00 00 00 \n  Class:                             ELF32\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            ARM\n  ABI Version:                       0\n  Type:                              EXEC (Executable file)\n  Machine:                           ARM\n  Version:                           0x1\n  Entry point address:               0x9fec\n  Start of program headers:          52 (bytes into file)\n  Start of section headers:          74868 (bytes into file)\n  Flags:                             0x2, has entry point, GNU EABI\n  Size of this header:               52 (bytes)\n  Size of program headers:           32 (bytes)\n  Number of program headers:         6\n  Size of section headers:           40 (bytes)\n  Number of section headers:         23\n  Section header string table index: 22\n% readelf -h $(which vim)\nELF Header:\n  Magic:   7f 45 4c 46 01 01 01 00 00 00 00 00 00 00 00 00 \n  Class:                             ELF32\n  Data:                              2's complement, little endian\n  Version:                           1 (current)\n  OS/ABI:                            UNIX - System V\n  ABI Version:                       0\n  Type:                              EXEC (Executable file)\n  Machine:                           ARM\n  Version:                           0x1\n  Entry point address:               0x2a0b9\n  Start of program headers:          52 (bytes into file)\n  Start of section headers:          1275812 (bytes into file)\n  Flags:                             0x5000402, has entry point, Version5 EABI, hard-float ABI\n  Size of this header:               52 (bytes)\n  Size of program headers:           32 (bytes)\n  Number of program headers:         9\n  Size of section headers:           40 (bytes)\n  Number of section headers:         28\n  Section header string table index: 27\u003c/pre\u003e",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-02-06T04:24:03Z",
	"updated_at": "2014-12-08T10:25:18Z"
}
