{
	"id": 89095868,
	"number": 11261,
	"state": "closed",
	"title": "syscall: TestCloneNEWUSERAndRemapNoRootDisableSetgroups failing with \"operation not permitted\"",
	"body": "`go version devel +dd44d49 Wed Jun 17 20:00:06 2015 +0200 linux/amd64`\r\n\r\n```\r\n$ uname -a\r\nLinux gauss 3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt11-1 (2015-05-24) x86_64 GNU/Linux\r\n```\r\n\r\n`./all.bash` fails with\r\n\r\n```\r\n--- FAIL: TestCloneNEWUSERAndRemapNoRootDisableSetgroups (0.00s)\r\n\texec_linux_test.go:45: Cmd failed with err fork/exec /usr/bin/whoami: operation not permitted, output: \r\nFAIL\r\nFAIL\tsyscall\t0.020s\r\n```\r\nOutput of\r\n```\r\n$ strace -f ./syscall.test -test.run=TestCloneNEWUSERAndRemapNoRootDisableSetgroups\r\n```\r\nis\r\n```\r\nexecve(\"./syscall.test\", [\"./syscall.test\", \"-test.run=TestCloneNEWUSERAndRem\"...], [/* 42 vars */]) = 0\r\nbrk(0)                                  = 0x2187000\r\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\r\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74baf75000\r\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\r\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\r\nfstat(3, {st_mode=S_IFREG|0644, st_size=104291, ...}) = 0\r\nmmap(NULL, 104291, PROT_READ, MAP_PRIVATE, 3, 0) = 0x7f74baf5b000\r\nclose(3)                                = 0\r\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\r\nopen(\"/lib/x86_64-linux-gnu/libpthread.so.0\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\0\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0\u003e\\0\\1\\0\\0\\0\\20o\\0\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=137440, ...}) = 0\r\nmmap(NULL, 2213008, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f74bab3a000\r\nmprotect(0x7f74bab52000, 2093056, PROT_NONE) = 0\r\nmmap(0x7f74bad51000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x17000) = 0x7f74bad51000\r\nmmap(0x7f74bad53000, 13456, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f74bad53000\r\nclose(3)                                = 0\r\naccess(\"/etc/ld.so.nohwcap\", F_OK)      = -1 ENOENT (No such file or directory)\r\nopen(\"/lib/x86_64-linux-gnu/libc.so.6\", O_RDONLY|O_CLOEXEC) = 3\r\nread(3, \"\\177ELF\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0\u003e\\0\\1\\0\\0\\0P\\34\\2\\0\\0\\0\\0\\0\"..., 832) = 832\r\nfstat(3, {st_mode=S_IFREG|0755, st_size=1729984, ...}) = 0\r\nmmap(NULL, 3836448, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0x7f74ba791000\r\nmprotect(0x7f74ba930000, 2097152, PROT_NONE) = 0\r\nmmap(0x7f74bab30000, 24576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0x19f000) = 0x7f74bab30000\r\nmmap(0x7f74bab36000, 14880, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0x7f74bab36000\r\nclose(3)                                = 0\r\nmmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74baf5a000\r\nmmap(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74baf58000\r\narch_prctl(ARCH_SET_FS, 0x7f74baf58740) = 0\r\nmprotect(0x7f74bab30000, 16384, PROT_READ) = 0\r\nmprotect(0x7f74bad51000, 4096, PROT_READ) = 0\r\nmprotect(0x7f74baf77000, 4096, PROT_READ) = 0\r\nmunmap(0x7f74baf5b000, 104291)          = 0\r\nset_tid_address(0x7f74baf58a10)         = 6090\r\nset_robust_list(0x7f74baf58a20, 24)     = 0\r\nrt_sigaction(SIGRTMIN, {0x7f74bab409f0, [], SA_RESTORER|SA_SIGINFO, 0x7f74bab498d0}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_1, {0x7f74bab40a80, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7f74bab498d0}, NULL, 8) = 0\r\nrt_sigprocmask(SIG_UNBLOCK, [RTMIN RT_1], NULL, 8) = 0\r\ngetrlimit(RLIMIT_STACK, {rlim_cur=8192*1024, rlim_max=RLIM64_INFINITY}) = 0\r\nsched_getaffinity(0, 128, {f, 0, 0, 0, 0, 0, 0, 0}) = 64\r\nmmap(0xc000000000, 65536, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc000000000\r\nmunmap(0xc000000000, 65536)             = 0\r\nmmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74baf18000\r\nmmap(0xc820000000, 1048576, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc820000000\r\nmmap(0xc81fff8000, 32768, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc81fff8000\r\nmmap(0xc000000000, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xc000000000\r\nmmap(NULL, 65536, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74baf65000\r\nmmap(NULL, 1439992, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74badb8000\r\nsigaltstack({ss_sp=0xc820002000, ss_flags=0, ss_size=32672}, NULL) = 0\r\nrt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\r\nrt_sigaction(SIGHUP, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGHUP, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGHUP, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGINT, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGINT, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGINT, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGQUIT, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGQUIT, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGILL, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGILL, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGTRAP, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGTRAP, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGABRT, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGABRT, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGBUS, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGBUS, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGFPE, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGFPE, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGUSR1, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGUSR1, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGSEGV, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGSEGV, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGUSR2, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGUSR2, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGPIPE, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGPIPE, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGALRM, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGALRM, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGTERM, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGTERM, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGSTKFLT, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGSTKFLT, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGCHLD, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGCHLD, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGURG, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGURG, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGXCPU, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGXCPU, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGXFSZ, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGXFSZ, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGVTALRM, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGVTALRM, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGPROF, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGPROF, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGWINCH, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGWINCH, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGIO, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGIO, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGPWR, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGPWR, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGSYS, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGSYS, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRTMIN, NULL, {0x7f74bab409f0, [], SA_RESTORER|SA_SIGINFO, 0x7f74bab498d0}, 8) = 0\r\nrt_sigaction(SIGRTMIN, NULL, {0x7f74bab409f0, [], SA_RESTORER|SA_SIGINFO, 0x7f74bab498d0}, 8) = 0\r\nrt_sigaction(SIGRTMIN, {0x7f74bab409f0, [], SA_RESTORER|SA_STACK|SA_SIGINFO, 0x7f74bab498d0}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_1, NULL, {0x7f74bab40a80, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7f74bab498d0}, 8) = 0\r\nrt_sigaction(SIGRT_1, NULL, {0x7f74bab40a80, [], SA_RESTORER|SA_RESTART|SA_SIGINFO, 0x7f74bab498d0}, 8) = 0\r\nrt_sigaction(SIGRT_1, {0x7f74bab40a80, [], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x7f74bab498d0}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_2, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_2, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_3, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_3, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_4, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_4, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_5, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_5, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_6, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_6, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_7, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_7, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_8, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_8, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_9, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_9, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_10, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_10, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_11, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_11, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_12, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_12, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_13, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_13, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_14, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_14, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_15, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_15, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_16, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_16, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_17, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_17, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_18, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_18, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_19, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_19, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_20, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_20, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_21, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_21, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_22, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_22, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_23, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_23, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_24, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_24, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_25, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_25, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_26, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_26, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_27, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_27, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_28, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_28, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_29, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_29, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_30, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_30, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_31, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_31, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigaction(SIGRT_32, NULL, {SIG_DFL, [], 0}, 8) = 0\r\nrt_sigaction(SIGRT_32, {0x45d120, ~[], SA_RESTORER|SA_STACK|SA_RESTART|SA_SIGINFO, 0x45d140}, NULL, 8) = 0\r\nrt_sigprocmask(SIG_SETMASK, NULL, [], 8) = 0\r\nbrk(0)                                  = 0x2187000\r\nbrk(0x21a8000)                          = 0x21a8000\r\nrt_sigprocmask(SIG_SETMASK, ~[RTMIN RT_1], [], 8) = 0\r\nmmap(NULL, 8392704, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7f74b9f90000\r\nmprotect(0x7f74b9f90000, 4096, PROT_NONE) = 0\r\nclone(Process 6091 attached\r\nchild_stack=0x7f74ba78ffb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f74ba7909d0, tls=0x7f74ba790700, child_tidptr=0x7f74ba7909d0) = 6091\r\n[pid  6091] set_robust_list(0x7f74ba7909e0, 24 \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... set_robust_list resumed\u003e ) = 0\r\n[pid  6090] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6091] sigaltstack({ss_sp=0xc820042000, ss_flags=0, ss_size=32672} \u003cunfinished ...\u003e\r\n[pid  6090] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0 \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... sigaltstack resumed\u003e , NULL) = 0\r\n[pid  6090] \u003c... mmap resumed\u003e )        = 0x7f74bad78000\r\n[pid  6091] rt_sigprocmask(SIG_SETMASK, [], NULL, 8) = 0\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, NULL, [], 8) = 0\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, ~[RTMIN RT_1], [], 8) = 0\r\n[pid  6090] mmap(NULL, 8392704, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7f74b978f000\r\n[pid  6090] mprotect(0x7f74b978f000, 4096, PROT_NONE \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... mprotect resumed\u003e )    = 0\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] clone(Process 6092 attached\r\nchild_stack=0x7f74b9f8efb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f74b9f8f9d0, tls=0x7f74b9f8f700, child_tidptr=0x7f74b9f8f9d0) = 6092\r\n[pid  6092] set_robust_list(0x7f74b9f8f9e0, 24 \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6092] \u003c... set_robust_list resumed\u003e ) = 0\r\n[pid  6090] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6092] sigaltstack({ss_sp=0xc820052000, ss_flags=0, ss_size=32672} \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, NULL,  \u003cunfinished ...\u003e\r\n[pid  6092] \u003c... sigaltstack resumed\u003e , NULL) = 0\r\n[pid  6090] \u003c... rt_sigprocmask resumed\u003e [], 8) = 0\r\n[pid  6092] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, ~[RTMIN RT_1],  \u003cunfinished ...\u003e\r\n[pid  6092] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6090] \u003c... rt_sigprocmask resumed\u003e [], 8) = 0\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] mmap(NULL, 8392704, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0 \u003cunfinished ...\u003e\r\n[pid  6092] rt_sigprocmask(SIG_SETMASK, NULL,  \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... mmap resumed\u003e )        = 0x7f74b8f8e000\r\n[pid  6092] \u003c... rt_sigprocmask resumed\u003e [], 8) = 0\r\n[pid  6090] mprotect(0x7f74b8f8e000, 4096, PROT_NONE \u003cunfinished ...\u003e\r\n[pid  6092] mmap(NULL, 134217728, PROT_NONE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_NORESERVE, -1, 0 \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... mprotect resumed\u003e )    = 0\r\n[pid  6092] \u003c... mmap resumed\u003e )        = 0x7f74b0f8e000\r\n[pid  6090] clone( \u003cunfinished ...\u003e\r\n[pid  6092] munmap(0x7f74b0f8e000, 50798592Process 6093 attached\r\n \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... clone resumed\u003e child_stack=0x7f74b978dfb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f74b978e9d0, tls=0x7f74b978e700, child_tidptr=0x7f74b978e9d0) = 6093\r\n[pid  6093] set_robust_list(0x7f74b978e9e0, 24 \u003cunfinished ...\u003e\r\n[pid  6090] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6093] \u003c... set_robust_list resumed\u003e ) = 0\r\n[pid  6090] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6093] sigaltstack({ss_sp=0xc82005a000, ss_flags=0, ss_size=32672} \u003cunfinished ...\u003e\r\n[pid  6090] futex(0x721108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6093] \u003c... sigaltstack resumed\u003e , NULL) = 0\r\n[pid  6092] \u003c... munmap resumed\u003e )      = 0\r\n[pid  6093] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6092] munmap(0x7f74b8000000, 16310272 \u003cunfinished ...\u003e\r\n[pid  6093] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6092] \u003c... munmap resumed\u003e )      = 0\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6093] futex(0xc820030d08, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6092] mprotect(0x7f74b4000000, 135168, PROT_READ|PROT_WRITE) = 0\r\n[pid  6092] rt_sigprocmask(SIG_SETMASK, ~[RTMIN RT_1], [], 8) = 0\r\n[pid  6092] mmap(NULL, 8392704, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS|MAP_STACK, -1, 0) = 0x7f74b878d000\r\n[pid  6092] mprotect(0x7f74b878d000, 4096, PROT_NONE) = 0\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6092] clone( \u003cunfinished ...\u003e\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20}Process 6094 attached\r\n \u003cunfinished ...\u003e\r\n[pid  6094] set_robust_list(0x7f74b8f8d9e0, 24 \u003cunfinished ...\u003e\r\n[pid  6092] \u003c... clone resumed\u003e child_stack=0x7f74b8f8cfb0, flags=CLONE_VM|CLONE_FS|CLONE_FILES|CLONE_SIGHAND|CLONE_THREAD|CLONE_SYSVSEM|CLONE_SETTLS|CLONE_PARENT_SETTID|CLONE_CHILD_CLEARTID, parent_tidptr=0x7f74b8f8d9d0, tls=0x7f74b8f8d700, child_tidptr=0x7f74b8f8d9d0) = 6094\r\n[pid  6094] \u003c... set_robust_list resumed\u003e ) = 0\r\n[pid  6092] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6094] sigaltstack({ss_sp=0xc820066000, ss_flags=0, ss_size=32672} \u003cunfinished ...\u003e\r\n[pid  6092] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6094] \u003c... sigaltstack resumed\u003e , NULL) = 0\r\n[pid  6092] futex(0x721108, FUTEX_WAKE, 1 \u003cunfinished ...\u003e\r\n[pid  6094] rt_sigprocmask(SIG_SETMASK, [],  \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... futex resumed\u003e )       = 0\r\n[pid  6094] \u003c... rt_sigprocmask resumed\u003e NULL, 8) = 0\r\n[pid  6092] \u003c... futex resumed\u003e )       = 1\r\n[pid  6094] select(0, NULL, NULL, NULL, {0, 100} \u003cunfinished ...\u003e\r\n[pid  6090] futex(0xc820030d08, FUTEX_WAKE, 1 \u003cunfinished ...\u003e\r\n[pid  6092] futex(0xc820030908, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... futex resumed\u003e )       = 1\r\n[pid  6093] \u003c... futex resumed\u003e )       = 0\r\n[pid  6090] futex(0x721108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... futex resumed\u003e )       = -1 EAGAIN (Resource temporarily unavailable)\r\n[pid  6093] futex(0x721108, FUTEX_WAKE, 1 \u003cunfinished ...\u003e\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6093] \u003c... futex resumed\u003e )       = 0\r\n[pid  6093] futex(0xc820030d08, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6094] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6094] futex(0xc820062108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6090] mmap(NULL, 262144, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7f74b874d000\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] futex(0xc820062108, FUTEX_WAKE, 1) = 1\r\n[pid  6094] \u003c... futex resumed\u003e )       = 0\r\n[pid  6094] select(0, NULL, NULL, NULL, {0, 100} \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] openat(AT_FDCWD, \"/proc/sys/net/core/somaxconn\", O_RDONLY|O_CLOEXEC \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... openat resumed\u003e )      = 3\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] read(3, \"128\\n\", 4096)      = 4\r\n[pid  6094] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] read(3,  \u003cunfinished ...\u003e\r\n[pid  6094] futex(0xc820030d08, FUTEX_WAKE, 1 \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... read resumed\u003e \"\", 4092) = 0\r\n[pid  6094] \u003c... futex resumed\u003e )       = 1\r\n[pid  6090] close(3 \u003cunfinished ...\u003e\r\n[pid  6094] futex(0xc820062108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... close resumed\u003e )       = 0\r\n[pid  6093] \u003c... futex resumed\u003e )       = 0\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6093] futex(0xc820030d08, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6090] socket(PF_INET, SOCK_STREAM, IPPROTO_TCP \u003cunfinished ...\u003e\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... socket resumed\u003e )      = 3\r\n[pid  6090] close(3)                    = 0\r\n[pid  6090] socket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 3\r\n[pid  6090] setsockopt(3, SOL_IPV6, IPV6_V6ONLY, [1], 4) = 0\r\n[pid  6090] bind(3, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6, \"::1\", \u0026sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28 \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... bind resumed\u003e )        = 0\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] socket(PF_INET6, SOCK_STREAM, IPPROTO_TCP) = 4\r\n[pid  6090] setsockopt(4, SOL_IPV6, IPV6_V6ONLY, [0], 4) = 0\r\n[pid  6090] bind(4, {sa_family=AF_INET6, sin6_port=htons(0), inet_pton(AF_INET6, \"::ffff:127.0.0.1\", \u0026sin6_addr), sin6_flowinfo=0, sin6_scope_id=0}, 28) = 0\r\n[pid  6090] close(4)                    = 0\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] close(3 \u003cunfinished ...\u003e\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] \u003c... close resumed\u003e )       = 0\r\n[pid  6090] futex(0xc820030d08, FUTEX_WAKE, 1) = 1\r\n[pid  6093] \u003c... futex resumed\u003e )       = 0\r\n[pid  6093] select(0, NULL, NULL, NULL, {0, 100} \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] getuid()                    = 1000\r\n[pid  6090] getuid()                    = 1000\r\n[pid  6090] getgid()                    = 1000\r\n[pid  6090] stat(\"/proc/self/ns/user\",  \u003cunfinished ...\u003e\r\n[pid  6093] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... stat resumed\u003e {st_mode=S_IFREG|0444, st_size=0, ...}) = 0\r\n[pid  6093] futex(0xc820062108, FUTEX_WAKE, 1 \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6094] \u003c... futex resumed\u003e )       = 0\r\n[pid  6093] \u003c... futex resumed\u003e )       = 1\r\n[pid  6094] futex(0xc820062108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6093] futex(0x744540, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] stat(\"/usr/local/bin/whoami\", 0xc82009e240) = -1 ENOENT (No such file or directory)\r\n[pid  6090] stat(\"/usr/bin/whoami\", {st_mode=S_IFREG|0755, st_size=27112, ...}) = 0\r\n[pid  6090] openat(AT_FDCWD, \"/dev/null\", O_RDONLY|O_CLOEXEC) = 3\r\n[pid  6090] pipe2( \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... pipe2 resumed\u003e [4, 5], O_CLOEXEC) = 0\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] pipe2([6, 7], O_CLOEXEC)    = 0\r\n[pid  6090] getpid()                    = 6090\r\n[pid  6090] pipe2([8, 9], O_CLOEXEC)    = 0\r\n[pid  6090] clone( \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... clone resumed\u003e child_stack=0, flags=CLONE_NEWUSER|SIGCHLD) = -1 EPERM (Operation not permitted)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] close(6)                    = 0\r\n[pid  6090] close(7)                    = 0\r\n[pid  6090] close(3)                    = 0\r\n[pid  6090] close(5)                    = 0\r\n[pid  6090] close(4)                    = 0\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] futex(0xc820062108, FUTEX_WAKE, 1) = 1\r\n[pid  6094] \u003c... futex resumed\u003e )       = 0\r\n[pid  6094] futex(0xc820062108, FUTEX_WAIT, 0, NULL \u003cunfinished ...\u003e\r\n[pid  6090] write(1, \"--- FAIL: TestCloneNEWUSERAndRem\"..., 170--- FAIL: TestCloneNEWUSERAndRemapNoRootDisableSetgroups (0.00s)\r\n\texec_linux_test.go:45: Cmd failed with err fork/exec /usr/bin/whoami: operation not permitted, output: \r\n) = 170\r\n[pid  6090] write(1, \"FAIL\\n\", 5FAIL\r\n \u003cunfinished ...\u003e\r\n[pid  6091] \u003c... select resumed\u003e )      = 0 (Timeout)\r\n[pid  6090] \u003c... write resumed\u003e )       = 5\r\n[pid  6091] select(0, NULL, NULL, NULL, {0, 20} \u003cunfinished ...\u003e\r\n[pid  6090] exit_group(1)               = ?\r\n[pid  6094] \u003c... futex resumed\u003e )       = ? \u003cunavailable\u003e\r\n[pid  6094] +++ exited with 1 +++\r\n[pid  6092] +++ exited with 1 +++\r\n[pid  6091] +++ exited with 1 +++\r\n[pid  6093] +++ exited with 1 +++\r\n+++ exited with 1 +++\r\n```",
	"user": {
		"login": "ALTree",
		"id": 3586803,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		},
		{
			"name": "OS-Linux"
		}
	],
	"assignee": {
		"login": "ianlancetaylor",
		"id": 3194333,
		"type": "User",
		"site_admin": false
	},
	"comments": 23,
	"closed_at": "2015-06-20T00:53:06Z",
	"created_at": "2015-06-17T18:49:16Z",
	"updated_at": "2016-09-22T15:54:24Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
