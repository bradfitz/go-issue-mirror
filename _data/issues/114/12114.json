{
	"id": 100397556,
	"number": 12114,
	"state": "closed",
	"title": "cmd/vet: go vet panics on type assertion",
	"body": "I don't know if this is the right place, but here goes. \r\n\r\n**My version and OS/architecture:**\r\n```console\r\n\u003e go version\r\ngo version go1.4.2 linux/amd64\r\n```\r\n\r\n**What I did:** I ran `go vet` on https://github.com/GoogleCloudPlatform/kubernetes/blob/9f77e491091c88b4498e8cc90c773dff00d33330/pkg/api/validation/validation.go.\r\n\r\n**What I expected:** A nicely formatted list of mistakes, a warning indicating it's not valid Go source, or no output at all.\r\n\r\n**What I saw:** A panic on a failed type assertion.\r\n\r\n```console\r\n \u003e go vet ./pkg/api/validation/validation.go \r\npanic: interface conversion: exact.Value is exact.unknownVal, not exact.stringVal [recovered]\r\n\tpanic: interface conversion: exact.Value is exact.unknownVal, not exact.stringVal\r\n\r\ngoroutine 1 [running]:\r\ngolang.org/x/tools/go/types.(*Checker).handleBailout(0x4c20813cf70, 0x4c208239868)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/check.go:218 +0xfc\r\ngolang.org/x/tools/go/exact.BinaryOp(0x7efcd6c772a0, 0x4c20820ced0, 0xc, 0x7efcd6c77268, 0x80eb18, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/exact/exact.go:781 +0x187\r\ngolang.org/x/tools/go/types.(*Checker).binary(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c71530, 0x4c20812a960, 0x7efcd6c710b8, 0x4c20812a980, 0xc)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:781 +0x6ca\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6060, 0x0, 0x0, 0x4c208050b40)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1373 +0x2ea7\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6060, 0x0, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:908 +0x80\r\ngolang.org/x/tools/go/types.(*Checker).expr(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6060)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1427 +0x6e\r\ngolang.org/x/tools/go/types.(*Checker).binary(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6060, 0x7efcd6c71530, 0x4c20812a9a0, 0xc)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:722 +0x74\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6120, 0x0, 0x0, 0x4c208238b58)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1373 +0x2ea7\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6120, 0x0, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:908 +0x80\r\ngolang.org/x/tools/go/types.(*Checker).expr(0x4c20813cf70, 0x4c20822ea80, 0x7efcd6c715a0, 0x4c2080d6120)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1427 +0x6e\r\ngolang.org/x/tools/go/types.funcÂ·007(0x4c20822ea80, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/call.go:64 +0x7f\r\ngolang.org/x/tools/go/types.unpack(0x4c208238d20, 0x1, 0x4c2081d6600, 0x4c2081d6630, 0x522e01, 0x4c20813cf70)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/call.go:139 +0x68\r\ngolang.org/x/tools/go/types.(*Checker).call(0x4c20813cf70, 0x4c20822ea40, 0x4c2081277c0, 0x4c2081277c0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/call.go:64 +0x93b\r\ngolang.org/x/tools/go/types.(*Checker).exprInternal(0x4c20813cf70, 0x4c20822ea40, 0x7efcd6c71610, 0x4c2081277c0, 0x0, 0x0, 0x607c20)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1339 +0x2f30\r\ngolang.org/x/tools/go/types.(*Checker).rawExpr(0x4c20813cf70, 0x4c20822ea40, 0x7efcd6c71610, 0x4c2081277c0, 0x0, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:908 +0x80\r\ngolang.org/x/tools/go/types.(*Checker).expr(0x4c20813cf70, 0x4c20822ea40, 0x7efcd6c71610, 0x4c2081277c0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/expr.go:1427 +0x6e\r\ngolang.org/x/tools/go/types.(*Checker).varDecl(0x4c20813cf70, 0x4c2081eb220, 0x4c2081177a8, 0x1, 0x1, 0x0, 0x0, 0x7efcd6c71610, 0x4c2081277c0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/decl.go:158 +0x38e\r\ngolang.org/x/tools/go/types.(*Checker).objDecl(0x4c20813cf70, 0x7efcd6c71188, 0x4c2081eb220, 0x0, 0x4c208239790, 0x0, 0x8)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/decl.go:81 +0x441\r\ngolang.org/x/tools/go/types.(*Checker).packageObjects(0x4c20813cf70, 0x4c2080e5000, 0x78, 0x80)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/resolver.go:389 +0x1ff\r\ngolang.org/x/tools/go/types.(*Checker).Files(0x4c20813cf70, 0x4c20803ab20, 0x1, 0x1, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/check.go:230 +0x103\r\ngolang.org/x/tools/go/types.(*Config).Check(0x4c208154f30, 0x4c2080325e0, 0xa, 0x4c20808e040, 0x4c20803ab20, 0x1, 0x1, 0x4c2081359f0, 0x4c20803ab30, 0x0, ...)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/go/types/api.go:336 +0xbb\r\nmain.(*Package).check(0x4c2081359a0, 0x4c20808e040, 0x4c20803ab20, 0x1, 0x1, 0x0, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/cmd/vet/types.go:68 +0x2d4\r\nmain.doPackage(0x6b6830, 0x1, 0x4c20800a010, 0x1, 0x1, 0x0)\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/cmd/vet/main.go:335 +0x9f3\r\nmain.main()\r\n\t/tmp/go-build-release/gopath/src/golang.org/x/tools/cmd/vet/main.go:250 +0x8bb\r\nexit status 2\r\n```",
	"user": {
		"login": "krousey",
		"id": 157083,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 2,
	"closed_at": "2015-08-12T00:21:22Z",
	"created_at": "2015-08-11T20:08:05Z",
	"updated_at": "2016-08-22T18:42:11Z"
}
