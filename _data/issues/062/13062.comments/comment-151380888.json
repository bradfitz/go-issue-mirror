{
	"id": 151380888,
	"body": "Anything in syslog or dmesg ?\n\nCan you please run with GODEBUG=gctrace=1 and add this output with a crash report.\n\n\n\n\u003e On 27 Oct 2015, at 16:33, Beyang Liu \u003cnotifications@github.com\u003e wrote:\n\u003e \n\u003e This involves a bus error that occurs in assignment to a local map with no concurrency involved. This happens within the context of a program that constructs a large in-memory index and consumes a lot of memory (~60GB) in the process.\n\u003e \n\u003e Here's additional info about the environment:\n\u003e \n\u003e Go 1.5.1\n\u003e Compiling on Ubuntu 14.04 x86_64\n\u003e Running on CentOS 5.11 x86_64\n\u003e unexpected fault address 0x0\n\u003e fatal error: fault\n\u003e [signal 0x7 code=0x80 addr=0x0 pc=0x40873b]\n\u003e \n\u003e goroutine 97699 [running]:\n\u003e runtime.throw(0x17f5cc0, 0x5)\n\u003e     /home/beyang/go/src/runtime/panic.go:527 +0x90 fp=0xc8c9b63ac0 sp=0xc8c9b63aa8\n\u003e runtime.sigpanic()\n\u003e     /home/beyang/go/src/runtime/sigpanic_unix.go:21 +0x10c fp=0xc8c9b63b10 sp=0xc8c9b63ac0\n\u003e runtime.mapassign1(0x12c6fe0, 0xc88283b998, 0xc8c9b63c68, 0xc8c9b63cd8)\n\u003e     /home/beyang/go/src/runtime/hashmap.go:446 +0x1fb fp=0xc8c9b63bb8 sp=0xc8c9b63b10\n\u003e sourcegraph.com/sourcegraph/srclib/store.(*defQueryTreeIndex).Build.func2(0xc8cb925110, 0x27, 0x189e, 0xc8839696c0)\n\u003e     /home/beyang/src/src.sourcegraph.com/sourcegraph/Godeps/_workspace/src/sourcegraph.com/sourcegraph/srclib/store/def_query_tree_index.go:150 +0x233 fp=0xc8c9b63d30 sp=0xc8c9b63bb8\n\u003e sourcegraph.com/sourcegraph/srclib/store.(*defQueryTreeIndex).Build.func2(0xc8cb9250e0, 0x26, 0x189e, 0xc8839695e0)\n\u003e     /home/beyang/src/src.sourcegraph.com/sourcegraph/Godeps/_workspace/src/sourcegraph.com/sourcegraph/srclib/store/def_query_tree_index.go:154 +0x3d0 fp=0xc8c9b63ea8 sp=0xc8c9b63d30\n\u003e sourcegraph.com/sourcegraph/srclib/store.(*defQueryTreeIndex).Build.func2(0xc8cb9250b0, 0x25, 0x189e, 0xc8839695c0)\n\u003e     /home/beyang/src/src.sourcegraph.com/sourcegraph/Godeps/_workspace/src/sourcegraph.com/sourcegraph/srclib/store/def_query_tree_index.go:154 +0x3d0 fp=0xc8c9b64020 sp=0xc8c9b63ea8\n\u003e sourcegraph.com/sourcegraph/srclib/store.(*defQueryTreeIndex).Build.func2(0xc8cb925080, 0x24, 0x189e, 0xc8839695a0)\n\u003e ...\n\u003e \n\u003e Unfortunately, I have not been able to find a consistent repro for this. It happens about 25% of the time when running the program over a large dataset.\n\u003e \n\u003e The hashmap assignment involves a local variable with no concurrency: https://sourcegraph.com/github.com/sourcegraph/srclib@2b53944d3fb5c9882f66bff716f396a0542eeec7/.tree/store/def_query_tree_index.go#startline=150\u0026endline=150.\n\u003e \n\u003e Issues #11286 and #12415 might be related, but don't appear to have the same underlying cause.\n\u003e \n\u003e This issue does not seem to occur when GOGC=off.\n\u003e \n\u003e Any ideas about what might be the cause here, or if there are known fixes or workarounds? I'm still trying to construct a reliable repro, but any advice/insight would be appreciated!\n\u003e \n\u003e â€”\n\u003e Reply to this email directly or view it on GitHub.\n\u003e \n",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-10-27T05:39:27Z",
	"updated_at": "2015-10-27T05:39:27Z"
}
