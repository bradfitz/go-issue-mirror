{
	"id": 220507417,
	"body": "Thanks for reply @ianlancetaylor , I mean the command invoke by runOut() at https://github.com/golang/go/blob/master/src/cmd/go/build.go#L2039 \r\n\r\nFollowing log is the real command and all environment when build runtime/cgo:\r\n\r\nThis issue has postpone to Go 1.8, just save relative information for analysis late.\r\n\r\n\u003cpre\u003e\r\n$ clang --version\r\nFreeBSD clang version 3.8.0 (tags/RELEASE_380/final 262564) (based on LLVM 3.8.0)\r\nTarget: x86_64-unknown-freebsd11.0\r\nThread model: posix\r\nInstalledDir: /usr/bin\r\n\u003c/pre\u003e\r\n\r\n./all.bash invoke command:\r\nCC=clang /home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/go_bootstrap install -gcflags -ldflags -v std cmd\r\n\r\n\u003cpre\u003e\r\n##### Building packages and commands for freebsd/amd64.\r\nruntime/internal/sys\r\nruntime/internal/atomic\r\nruntime\r\nerrors\r\ninternal/race\r\nsync/atomic\r\n\r\n....\r\n\r\ncmd/internal/bio\r\ncmd/compile/internal/big\r\nruntime/cgo\r\ncd /home/rhinofly/sandspace/go/src/runtime/cgo\r\nCGO_LDFLAGS=\"-g\" \"-O2\" \"-lpthread\" /home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/cgo -objdir $WORK/runtime/cgo/_obj/ -importpath runtime/cgo -import_runtime_cgo=false -import_syscall=false -- -I $WORK/runtime/cgo/_obj/ -Wall -Werror cgo.go\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/_cgo_main.o -c $WORK/runtime/cgo/_obj/_cgo_main.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/_cgo_export.o -c $WORK/runtime/cgo/_obj/_cgo_export.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/cgo.cgo2.o -c $WORK/runtime/cgo/_obj/cgo.cgo2.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_context.o -c ./gcc_context.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_freebsd_amd64.o -c ./gcc_freebsd_amd64.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_libinit.o -c ./gcc_libinit.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_setenv.o -c ./gcc_setenv.c\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_util.o -c ./gcc_util.c\r\n --- environment for src/runtime/cgo\r\nCC=clang\r\nGOHOSTARCH=amd64\r\nLC_MONETARY=en_US.UTF-8\r\nGLADE_PIXMAP_PATH=:\r\nXDG_MENU_PREFIX=xfce-\r\nSHELL=/usr/local/bin/bash\r\nTERM=dumb\r\nXDG_SESSION_COOKIE=12deea0229a14da431e00f8d57332f61-1463131597.699032-679227067\r\nGOBIN=/home/rhinofly/sandspace/go/bin\r\nLC_NUMERIC=en_US.UTF-8\r\nWINDOWID=44040196\r\nGNOME_KEYRING_CONTROL=/home/rhinofly/home/.cache/keyring-N2ZOHY\r\nOLDPWD=/home/rhinofly/sandspace/go/src\r\nLC_ALL=en_US.UTF-8\r\nUSER=rhinofly\r\nGOROOT_BOOTSTRAP=/home/rhinofly/home/sandspace/bootstrap.official/freebsd_amd64\r\nGLADE_MODULE_PATH=:\r\nSSH_AUTH_SOCK=/tmp/ssh-hytb0ID0idxx/agent.1203\r\nUSERNAME=rhinofly\r\nSESSION_MANAGER=local/n550jk.localdomain:/tmp/.ICE-unix/1216\r\nGOSPACE=/home/rhinofly/home/sandspace\r\nXDG_CONFIG_DIRS=/etc/xdg:/usr/local/etc/xdg\r\nDESKTOP_SESSION=xfce\r\nPATH=/home/rhinofly/sandspace/go/bin:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin:/usr/games:/usr/local/games\r\nLC_MESSAGES=en_US.UTF-8\r\nQT_IM_MODULE=fcitx\r\nLC_COLLATE=en_US.UTF-8\r\nGOARM=7\r\nPWD=/home/rhinofly/sandspace/go/src\r\nXDG_SESSION_TYPE=x11\r\nXMODIFIERS=@im=fcitx\r\nGOARCH=amd64\r\nLANG=en_US.UTF-8\r\nGDMSESSION=xfce\r\nCGO_ENABLED=1\r\nHOME=/home/rhinofly/home\r\nSHLVL=4\r\nGOROOT=/home/rhinofly/sandspace/go\r\nGOOS=freebsd\r\nLOGNAME=rhinofly\r\nXDG_SESSION_DESKTOP=xfce\r\nLC_CTYPE=en_US.UTF-8\r\nXDG_DATA_DIRS=/usr/local/share:/usr/share\r\nGOHOSTOS=freebsd\r\nGOPATH=\r\nWINDOWPATH=9\r\nDISPLAY=:0.0\r\nGTK3_IM_MODULE=fcitx\r\nGLADE_CATALOG_PATH=:\r\nGTK_IM_MODULE=fcitx\r\nXDG_CURRENT_DESKTOP=XFCE\r\nLC_TIME=en_US.UTF-8\r\nXAUTHORITY=/var/run/gdm/auth-for-rhinofly-5ZAgcz/database\r\nCOLORTERM=xfce4-terminal\r\n_=/home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/go_bootstrap\r\nGOTOOLDIR=/home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64\r\nGOGCCFLAGS=-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/home/rhinofly/home/sandspace/tmp/go-build049237945=/tmp/go-build -gno-record-gcc-switches\r\nCXX=clang++\r\n ---\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/runtime/cgo/_obj/ -g -O2 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_amd64.o -c ./gcc_amd64.S\r\n# runtime/cgo\r\nruntime/cgo/gcc_amd64.S:47:1: warning: DWARF2 only supports one section per compilation unit\r\n.section .note.GNU-stack,\"\",@progbits\r\n^\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -o $WORK/runtime/cgo/_obj/_cgo_.o $WORK/runtime/cgo/_obj/_cgo_main.o $WORK/runtime/cgo/_obj/_cgo_export.o $WORK/runtime/cgo/_obj/cgo.cgo2.o $WORK/runtime/cgo/_obj/gcc_context.o $WORK/runtime/cgo/_obj/gcc_freebsd_amd64.o $WORK/runtime/cgo/_obj/gcc_libinit.o $WORK/runtime/cgo/_obj/gcc_setenv.o $WORK/runtime/cgo/_obj/gcc_util.o $WORK/runtime/cgo/_obj/gcc_amd64.o -g -O2 -lpthread\r\n/home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/cgo -objdir $WORK/runtime/cgo/_obj/ -dynpackage cgo -dynimport $WORK/runtime/cgo/_obj/_cgo_.o -dynout $WORK/runtime/cgo/_obj/_cgo_import.go -dynlinker\r\nclang -I . -fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -o $WORK/runtime/cgo/_obj/_all.o $WORK/runtime/cgo/_obj/_cgo_export.o $WORK/runtime/cgo/_obj/cgo.cgo2.o $WORK/runtime/cgo/_obj/gcc_context.o $WORK/runtime/cgo/_obj/gcc_freebsd_amd64.o $WORK/runtime/cgo/_obj/gcc_libinit.o $WORK/runtime/cgo/_obj/gcc_setenv.o $WORK/runtime/cgo/_obj/gcc_util.o $WORK/runtime/cgo/_obj/gcc_amd64.o -g -O2 -Wl,-r -nostdlib\r\n/home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/compile -o $WORK/runtime/cgo.a -trimpath $WORK -p runtime/cgo -buildid f6d80b347c15845bdb589d38b0202f637d2e07c0 -D _/home/rhinofly/sandspace/go/src/runtime/cgo -I $WORK -pack -asmhdr $WORK/runtime/cgo/_obj/go_asm.h ./callbacks.go ./freebsd.go ./iscgo.go ./setenv.go $WORK/runtime/cgo/_obj/_cgo_gotypes.go $WORK/runtime/cgo/_obj/cgo.cgo1.go $WORK/runtime/cgo/_obj/_cgo_import.go\r\n/home/rhinofly/sandspace/go/pkg/tool/freebsd_amd64/asm -o $WORK/runtime/cgo/_obj/asm_amd64.o -trimpath $WORK -I $WORK/runtime/cgo/_obj/ -I /home/rhinofly/sandspace/go/pkg/include -D GOOS_freebsd -D GOARCH_amd64 ./asm_amd64.s\r\ngo/importer\r\nnet\r\nos/user\r\ncmd/asm/internal/arch\r\ncmd/compile/internal/ssa\r\n\r\n...\r\n...\r\n\r\n\u003c/pre\u003e\r\n\r\nBTW: ./all.bash does not PASS at present, effected by https://github.com/golang/go/issues/15405\r\n",
	"user": {
		"login": "wheelcomplex",
		"id": 1411633,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-05-20T03:14:38Z",
	"updated_at": "2016-05-20T03:14:38Z"
}
