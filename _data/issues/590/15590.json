{
	"id": 153586618,
	"number": 15590,
	"state": "closed",
	"title": "go http concurrency and Goroutines do not release memory!!!",
	"body": "1. What version of Go are you using (`go version`)?\r\ngo version go1.6.2 linux/amd64\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/xxxxxx/Desktop/maas\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/local/go\"\r\nGOTOOLDIR=\"/usr/local/go/pkg/tool/linux_amd64\"\r\nGO15VENDOREXPERIMENT=\"1\"\r\nCC=\"gcc\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0\"\r\nCXX=\"g++\"\r\nCGO_ENABLED=\"1\"\r\n\r\nLinux Development 3.10.0-327.el7.x86_64 #1 SMP Thu Nov 19 22:10:57 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n3. What did you do?\r\nDo many http.request to website in order to keep monitoring http or some services.\r\n\r\n4. What did you expect to see?\r\nGo 1.6 should auto release or GC all go Goroutines if finished jobs...\r\n\r\n5. What did you see instead?\r\ni use command to filer: ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 12.0 17604 196984 17:52 root         0\r\n20648 grep            grep --color=auto test       0.0   964 112644 17:52 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 12.6 16972 196984 17:52 root         0\r\n20673 grep            grep --color=auto test       0.0   960 112644 17:52 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.0 24036 203036 17:52 root         0\r\n21681 grep            grep --color=auto test       0.0   964 112644 17:53 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.0 24284 203036 17:52 root         0\r\n21727 grep            grep --color=auto test       0.0   964 112644 17:53 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.0 24540 204092 17:52 root         0\r\n21792 grep            grep --color=auto test       0.0   964 112644 17:53 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.1 31056 210436 17:52 root         0\r\n22886 grep            grep --color=auto test       0.0   964 112644 17:54 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.1 30824 210436 17:52 root         0\r\n22899 grep            grep --color=auto test       0.0   964 112644 17:54 john   1000\r\n[johnkou@Development Desktop]$ ps -e -o 'pid,comm,args,pcpu,rsz,vsz,stime,user,uid' | grep test\r\n20310 test            /tmp/go-build396582964/comm 11.6 42492 222576 17:52 root         0\r\n25171 grep            grep --color=auto test       0.0   964 112644 17:56 john   1000\r\n\r\nI have already used debug.FreeOSMemory() or runtime.GC() again, but .... wow memory usage is very high and more and more!!!!   It means that if many go routine (go func()), it will not release memory!!!????\r\n\r\nCould you see my code: https://play.golang.org/p/GxeL81eeJ2\r\nIf you want to test, please add more website url in order to expect the result.\r\nThanks and have a nice day.",
	"user": {
		"login": "andymacau853",
		"id": 1874941,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"closed_at": "2016-05-07T16:14:18Z",
	"created_at": "2016-05-07T10:06:30Z",
	"updated_at": "2016-05-10T14:41:10Z"
}
