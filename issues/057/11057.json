{
	"id": 84863960,
	"number": 11057,
	"state": "closed",
	"title": "runtime: crash in gcInstallStackBarrier",
	"body": "Seen once:\n\n    ##### GOMAXPROCS=2 runtime -cpu=1,2,4\n    --- FAIL: TestGcSys (0.04s)\n    \tcrash_test.go:92: building source: exit status 2\n    \t\tpanic: runtime error: slice bounds out of range\n    \t\tfatal error: panic on system stack\n    \n    \t\truntime stack:\n    \t\truntime.throw(0x98c770, 0x15)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/panic.go:527 +0x96\n    \t\truntime.gopanic(0x897800, 0xc208010180)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/panic.go:354 +0xbc\n    \t\truntime.panicslice()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/panic.go:18 +0x50\n    \t\truntime.gcInstallStackBarrier(0xc2080d5e40, 0x7f4ec90bcb50)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:510 +0xb1\n    \t\truntime.scanstack.func1(0x7f4ec90bcb50, 0x0, 0x1)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:365 +0xa2\n    \t\truntime.gentraceback(0x62cd25, 0xc2080429b8, 0x0, 0xc2080d5e40, 0x0, 0x0, 0x7fffffff, 0x7f4ec90bcc68, 0x0, 0x0, ...)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/traceback.go:336 +0xa81\n    \t\truntime.scanstack(0xc2080d5e40)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:380 +0x351\n    \t\truntime.gcphasework(0xc2080d5e40)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:273 +0x70\n    \t\truntime.stopg(0xc2080d5e40, 0x3)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/proc1.go:395 +0x91\n    \t\truntime.markroot(0xc208018000, 0xe)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:138 +0x1f2\n    \t\truntime.parfordo(0xc208018000)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/parfor.go:95 +0x12d\n    \t\truntime.gcscan_m()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgcmark.go:37 +0xe1\n    \t\truntime.gc.func1()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgc.go:843 +0x5f\n    \t\truntime.systemstack(0xc20801a000)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/asm_amd64.s:262 +0x7c\n    \t\truntime.mstart()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/proc1.go:656\n    \n    \t\tgoroutine 7 [garbage collection scan]:\n    \t\truntime.systemstack_switch()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/asm_amd64.s:216 fp=0xc2080244e8 sp=0xc2080244e0\n    \t\truntime.gc(0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgc.go:855 +0x1dc fp=0xc208024790 sp=0xc2080244e8\n    \t\truntime.backgroundgc()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgc.go:775 +0x40 fp=0xc2080247c0 sp=0xc208024790\n    \t\truntime.goexit()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/asm_amd64.s:1700 +0x1 fp=0xc2080247c8 sp=0xc2080247c0\n    \t\tcreated by runtime.startGC\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/mgc.go:748 +0x14a\n    \n    \t\tgoroutine 1 [semacquire]:\n    \t\tsync.runtime_Semacquire(0xc2085de110)\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/sema.go:43 +0x2d\n    \t\tsync.(*WaitGroup).Wait(0xc2086007c0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/sync/waitgroup.go:132 +0x15d\n    \t\tmain.(*builder).do(0xc20812fa40, 0xc208552270)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1153 +0x3c9\n    \t\tmain.runBuild(0xb986e0, 0xc20800a230, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:441 +0x51f\n    \t\tmain.main()\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/main.go:177 +0x750\n    \n    \t\tgoroutine 17 [syscall, locked to thread]:\n    \t\truntime.goexit()\n    \t\t\t/tmp/buildlet-scatch328051143/src/runtime/asm_amd64.s:1700 +0x1\n    \n    \t\tgoroutine 5 [syscall]:\n    \t\tos/signal.loop()\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/signal/signal_unix.go:22 +0x1f\n    \t\tcreated by os/signal.init.1\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/signal/signal_unix.go:28 +0x3e\n    \n    \t\tgoroutine 18 [select]:\n    \t\tmain.(*builder).do.func2(0xc2086007c0, 0xc20812fa40, 0xc2086007a0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1134 +0x1d1\n    \t\tcreated by main.(*builder).do\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1150 +0x3a1\n    \n    \t\tgoroutine 19 [syscall]:\n    \t\tsyscall.Syscall(0x0, 0x6, 0xc208042a80, 0x8, 0x0, 0x8, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/syscall/asm_linux_amd64.s:18 +0x5\n    \t\tsyscall.readlen(0x6, 0xc208042a80, 0x8, 0x11, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/syscall/zsyscall_linux_amd64.go:1085 +0x53\n    \t\tsyscall.forkExec(0xc208604480, 0x3a, 0xc208528400, 0x10, 0x10, 0xc208042c50, 0x1b61, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/syscall/exec_unix.go:200 +0x56a\n    \t\tsyscall.StartProcess(0xc208604480, 0x3a, 0xc208528400, 0x10, 0x10, 0xc208042c50, 0x1, 0x4, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/syscall/exec_unix.go:238 +0x6e\n    \t\tos.startProcess(0xc208604480, 0x3a, 0xc208528400, 0x10, 0x10, 0xc208042e88, 0x910360, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/exec_posix.go:45 +0x33f\n    \t\tos.StartProcess(0xc208604480, 0x3a, 0xc208528400, 0x10, 0x10, 0xc208042e88, 0x0, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/doc.go:24 +0x6c\n    \t\tos/exec.(*Cmd).Start(0xc208574140, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/exec/exec.go:319 +0x76a\n    \t\tos/exec.(*Cmd).Run(0xc208574140, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/os/exec/exec.go:246 +0x34\n    \t\tmain.(*builder).runOut(0xc20812fa40, 0xc208121340, 0x16, 0xc2081212c0, 0x17, 0x0, 0x0, 0x0, 0xc20860a000, 0xd, ...)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1924 +0x334\n    \t\tmain.gcToolchain.gc(0xc20812fa40, 0xc208136000, 0xc2085f7200, 0x30, 0xc208604300, 0x34, 0xc208184500, 0xc2086008c0, 0x2, 0x2, ...)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:2171 +0xfe2\n    \t\tmain.(*gcToolchain).gc(0xbc5318, 0xc20812fa40, 0xc208136000, 0xc2085f7200, 0x30, 0xc208604300, 0x34, 0x0, 0xc2086008c0, 0x2, ...)\n    \t\t\t\u003cautogenerated\u003e:3 +0x191\n    \t\tmain.(*builder).build(0xc20812fa40, 0xc208552270, 0x0, 0x0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1320 +0x253e\n    \t\tmain.(*builder).do.func1(0xc208552270)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1087 +0x3bc\n    \t\tmain.(*builder).do.func2(0xc2086007c0, 0xc20812fa40, 0xc2086007a0)\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1144 +0x158\n    \t\tcreated by main.(*builder).do\n    \t\t\t/tmp/buildlet-scatch328051143/src/cmd/go/build.go:1150 +0x3a1\n    FAIL\n    FAIL\truntime\t34.358s\n    2015/06/03 20:57:17 Failed: exit status 1\n    Error running run: exit status 1\n    *** FAILED ***\n    $",
	"user": {
		"login": "rsc",
		"id": 104030,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "aclements",
		"id": 2688315,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2015-06-04T02:13:33Z",
	"created_at": "2015-06-04T02:10:13Z",
	"updated_at": "2016-06-25T02:10:16Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
