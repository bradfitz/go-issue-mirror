{
	"id": 97247280,
	"number": 11869,
	"state": "closed",
	"title": "x/build: reverse roundtripper hang",
	"body": "linux-arm reverse builders all hung. Stacks like:\r\n\r\n(Note that it's in doHeaderTimeout so it's trying to do timeouts, but then I think the custom reverse RoundTripper blocks forever via *body.Close)\r\n\r\n```\r\ngoroutine 7484955 [IO wait, 12686 minutes]:\r\nnet.runtime_pollWait(0x7fb6d49e9c00, 0x72, 0xc82000a150)\r\n\t/home/bradfitz/go/src/runtime/netpoll.go:157 +0x60\r\nnet.(*pollDesc).Wait(0xc83d468f40, 0x72, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/fd_poll_runtime.go:73 +0x3a\r\nnet.(*pollDesc).WaitRead(0xc83d468f40, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/fd_poll_runtime.go:78 +0x36\r\nnet.(*netFD).Read(0xc83d468ee0, 0xc842a80000, 0x2000, 0x2000, 0x0, 0x7fb6d998c050, 0xc82000a150)\r\n\t/home/bradfitz/go/src/net/fd_unix.go:232 +0x23a\r\nnet.(*conn).Read(0xc83494b180, 0xc842a80000, 0x2000, 0x2000, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/net.go:124 +0xe4\r\ncrypto/tls.(*block).readFromUntil(0xc8357a5560, 0x7fb6d6b570e8, 0xc83494b180, 0x5, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/crypto/tls/conn.go:455 +0xcc\r\ncrypto/tls.(*Conn).readRecord(0xc82f821b80, 0xaead17, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/crypto/tls/conn.go:540 +0x2d1\r\ncrypto/tls.(*Conn).Read(0xc82f821b80, 0xc82658f000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/crypto/tls/conn.go:901 +0x167\r\nnet/http.(*liveSwitchReader).Read(0xc840516258, 0xc82658f000, 0x1000, 0x1000, 0xd, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/server.go:219 +0xa4\r\nio.(*LimitedReader).Read(0xc820c25000, 0xc82658f000, 0x1000, 0x1000, 0xd, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/io/io.go:427 +0xbd\r\nbufio.(*Reader).fill(0xc82ae30d20)\r\n\t/home/bradfitz/go/src/bufio/bufio.go:97 +0x1e9\r\nbufio.(*Reader).ReadSlice(0xc82ae30d20, 0xa, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/bufio/bufio.go:328 +0x21a\r\nnet/http/internal.readLine(0xc82ae30d20, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/internal/chunked.go:110 +0x4b\r\nnet/http/internal.(*chunkedReader).beginChunk(0xc832efe990)\r\n\t/home/bradfitz/go/src/net/http/internal/chunked.go:47 +0x39\r\nnet/http/internal.(*chunkedReader).Read(0xc832efe990, 0xc8332c6000, 0x2000, 0x2000, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/internal/chunked.go:77 +0xb7\r\nnet/http.(*body).readLocked(0xc839cdbc40, 0xc8332c6000, 0x2000, 0x2000, 0x8, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/transfer.go:625 +0x98\r\nnet/http.bodyLocked.Read(0xc839cdbc40, 0xc8332c6000, 0x2000, 0x2000, 0x8, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/transfer.go:790 +0x89\r\nio/ioutil.devNull.ReadFrom(0x0, 0x7fb6d99ae3f0, 0xc839cdbc40, 0x659, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/io/ioutil/ioutil.go:151 +0x9e\r\nio/ioutil.(*devNull).ReadFrom(0xc82000a2c0, 0x7fb6d99ae3f0, 0xc839cdbc40, 0xc8329ffe10, 0x0, 0x0)\r\n\t\u003cautogenerated\u003e:9 +0xb1\r\nio.copyBuffer(0x7fb6d99901c0, 0xc82000a2c0, 0x7fb6d99ae3f0, 0xc839cdbc40, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/io/io.go:375 +0x180\r\nio.Copy(0x7fb6d99901c0, 0xc82000a2c0, 0x7fb6d99ae3f0, 0xc839cdbc40, 0xc841924900, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/io/io.go:351 +0x64\r\nnet/http.(*body).Close(0xc839cdbc40, 0x0, 0x0)\r\n\t/home/bradfitz/go/src/net/http/transfer.go:768 +0x2d7\r\nmain.(*reverseLockedBody).Close(0xc838410740, 0x0, 0x0)\r\n\t/home/bradfitz/src/golang.org/x/build/cmd/coordinator/reverse.go:502 +0x4a\r\ngolang.org/x/build/buildlet.(*Client).doHeaderTimeout.func2()\r\n\t/home/bradfitz/src/golang.org/x/build/buildlet/buildletclient.go:259 +0x92\r\ncreated by golang.org/x/build/buildlet.(*Client).doHeaderTimeout\r\n\t/home/bradfitz/src/golang.org/x/build/buildlet/buildletclient.go:267 +0x275\r\n```",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "Builders"
		},
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"closed_at": "2015-07-28T05:36:06Z",
	"created_at": "2015-07-25T19:05:08Z",
	"updated_at": "2016-08-05T16:11:15Z"
}
