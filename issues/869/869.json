{
	"id": 51277040,
	"number": 869,
	"state": "closed",
	"title": "segfault while building pkg when running all.bash",
	"body": "by **dan.erat**:\n\n\u003cpre\u003eWhat steps will reproduce the problem?\n1. Check out the latest code.\n2. Run \u0026quot;./all.bash\u0026quot; in the src/ directory.\n\nWhat is the expected output?\nEverything compiles.\n\nWhat do you see instead?\nConsistent segfaults in one place:\n\n%%%% making pkg %%%%\n\ncd runtime \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd unicode \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd math \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd sort \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/runtime'\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/unicode'\n/home/derat/local/bin/6g -o _go_.6 casetables.go digit.go letter.go tables.go \nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/sort'\n/home/derat/local/bin/6g -o _go_.6 sort.go \ncp runtime.h /home/derat/go/pkg/linux_amd64/runtime.h\nmake[1]: *** [_go_.6] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/unicode'\nmake: *** [unicode.install] Error 2\nmake: *** Waiting for unfinished jobs....\n/home/derat/local/bin/quietgcc -o mkversion -I \u0026quot;/home/derat/go/include\u0026quot;\nmkversion.c \u0026quot;/home/derat/go/lib/lib9.a\u0026quot;\nmake[1]: *** [_go_.6] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/sort'\nmake: *** [sort.install] Error 2\n/home/derat/local/bin/6c -Ilinux -Iamd64 -Ilinux/amd64 -wF -D_64BIT   -a proc.c\n\u0026gt;runtime.acid.amd64\ncp cgocall.h /home/derat/go/pkg/linux_amd64/cgocall.h\n/home/derat/local/bin/6c -Ilinux -Iamd64 -Ilinux/amd64 -wF -D_64BIT   cgocall.c\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/math'\n/home/derat/local/bin/6g -o _go_.6 acosh.go asin.go asinh.go atan.go atanh.go atan2.go\nbits.go cbrt.go const.go copysign.go erf.go exp.go expm1.go fabs.go floor.go fmod.go\nfrexp.go gamma.go hypot.go hypot_port.go j0.go j1.go jn.go logb.go lgamma.go ldexp.go\nlog.go log1p.go modf.go nextafter.go pow.go pow10.go remainder.go signbit.go sin.go\nsincos.go sinh.go sqrt_port.go tan.go tanh.go unsafe.go fdim_decl.go sqrt_decl.go  \nSegmentation fault\nmake[1]: *** [cgocall.6] Segmentation fault\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: *** [runtime.acid.amd64] Error 139\n/home/derat/local/bin/6a fdim_amd64.s\nmake[1]: *** [_go_.6] Segmentation fault\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: *** [fdim_amd64.6] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/math'\nmake: *** [math.install] Error 2\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/runtime'\nmake: *** [runtime.install] Error 2\n\nWhat is your $GOOS?  $GOARCH?\nlinux, amd64\n\nWhich revision are you using?  (hg identify)\n5924e1889138 tip\n\nPlease provide any additional information below.\n/proc/cpuinfo reports \u0026quot;Intel(R) Core(TM)2 Duo CPU     E7400  @ 2.80GHz\u0026quot;.\n\n/etc/lsb-release:\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=10.04\nDISTRIB_CODENAME=lucid\nDISTRIB_DESCRIPTION=\u0026quot;Ubuntu 10.04 LTS\u0026quot;\n\nuname -a:\nLinux shuttle 2.6.32-22-generic #36-Ubuntu SMP Thu Jun 3 19:31:57 UTC 2010 x86_64\nGNU/Linux\n\n\u0026quot;free\u0026quot;:\n             total       used       free     shared    buffers     cached\nMem:       2056372     942456    1113916          0     144784     440368\n-/+ buffers/cache:     357304    1699068\nSwap:      6016300          0    6016300\n\nI see a segfault in the same place when I set GOARCH to 386 instead:\n%%%% making pkg %%%%\n\ncd runtime \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd unicode \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd math \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\ncd sort \u0026amp;\u0026amp; /home/derat/local/bin/gomake install\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/runtime'\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/sort'\n/home/derat/local/bin/8g -o _go_.8 sort.go \nmake[1]: *** [_go_.8] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/sort'\nmake: *** [sort.install] Error 2\nmake: *** Waiting for unfinished jobs....\ncp runtime.h /home/derat/go/pkg/linux_386/runtime.h\ncp cgocall.h /home/derat/go/pkg/linux_386/cgocall.h\n/home/derat/local/bin/quietgcc -o mkversion -I \u0026quot;/home/derat/go/include\u0026quot;\nmkversion.c \u0026quot;/home/derat/go/lib/lib9.a\u0026quot;\n/home/derat/local/bin/8c -Ilinux -I386 -Ilinux/386 -wF    -a proc.c \u0026gt;runtime.acid.386\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/unicode'\n/home/derat/local/bin/8g -o _go_.8 casetables.go digit.go letter.go tables.go \nmake[1]: *** [_go_.8] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/unicode'\nmake: *** [unicode.install] Error 2\n/home/derat/local/bin/8c -Ilinux -I386 -Ilinux/386 -wF    cgocall.c\nSegmentation fault\nmake[1]: *** [runtime.acid.386] Error 139\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: *** [cgocall.8] Segmentation fault\nmake[1]: Entering directory `/home/derat/programming/go/src/pkg/math'\n/home/derat/local/bin/8g -o _go_.8 acosh.go asinh.go atanh.go bits.go cbrt.go const.go\ncopysign.go erf.go fdim.go gamma.go hypot_port.go j0.go j1.go jn.go logb.go lgamma.go\nnextafter.go pow.go pow10.go signbit.go sinh.go sqrt_port.go tanh.go unsafe.go\nasin_decl.go atan_decl.go atan2_decl.go exp_decl.go exp2_decl.go expm1_decl.go\nfabs_decl.go floor_decl.go frexp_decl.go fmod_decl.go hypot_decl.go ldexp_decl.go\nlog_decl.go log1p_decl.go modf_decl.go remainder_decl.go sin_decl.go sincos_decl.go\nsqrt_decl.go tan_decl.go  \n/home/derat/local/bin/8a asin_386.s\nmake[1]: *** [_go_.8] Segmentation fault\nmake[1]: *** Waiting for unfinished jobs....\nmake[1]: *** [asin_386.8] Segmentation fault\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/math'\nmake: *** [math.install] Error 2\nmake[1]: Leaving directory `/home/derat/programming/go/src/pkg/runtime'\nmake: *** [runtime.install] Error 2\n\nI saw this when first trying to build go a week or two ago.  It persists after syncing,\nand always appears to die in the same place.  I'm not using virtualization.  Let me know\nif there's any other information that I can provide about my system.\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 5,
	"closed_at": "2014-12-08T10:06:09Z",
	"created_at": "2010-06-17T05:19:59Z",
	"updated_at": "2016-06-24T19:17:04Z"
}
