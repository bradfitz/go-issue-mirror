{
	"id": 66075675,
	"body": "\u003ca id=\"c14\"\u003e\u003c/a\u003eComment 14:\n\n\u003cpre\u003eI've been playing with this a bit more and have some results that show that removing\nappend crossover for 386/amd64 is a net positive.\n\nlinux/amd64\n\nbenchmark                     old ns/op    new ns/op    delta\nBenchmarkAppend                     102          104   +1.96%\nBenchmarkAppend1Byte                 10           11   +0.92%\nBenchmarkAppend4Bytes                15           11  -28.10%\nBenchmarkAppend7Bytes                17           12  -32.58%\nBenchmarkAppend8Bytes                18           12  -36.17%\nBenchmarkAppend15Bytes               24           11  -55.02%\nBenchmarkAppend16Bytes               25           11  -56.03%\nBenchmarkAppend32Bytes               11           12   +4.31%\nBenchmarkAppendStr1Byte               8            9  +13.99%\nBenchmarkAppendStr4Bytes             11            9  -17.52%\nBenchmarkAppendStr8Bytes             14            9  -35.70%\nBenchmarkAppendStr16Bytes            21            9  -55.19%\nBenchmarkAppendStr32Bytes            10           10   -5.66%\nBenchmarkAppendSpecialCase           49           52   +7.96%\n\nlinux/386\n\nbenchmark                     old ns/op    new ns/op    delta\nBenchmarkAppend                     218          218   +0.00%\nBenchmarkAppend1Byte                 75           73   -3.31%\nBenchmarkAppend4Bytes                91           73  -19.91%\nBenchmarkAppend7Bytes               108           74  -31.20%\nBenchmarkAppend8Bytes               115           74  -35.39%\nBenchmarkAppend15Bytes              162           77  -52.22%\nBenchmarkAppend16Bytes              168           77  -53.93%\nBenchmarkAppend32Bytes               88           86   -1.93%\nBenchmarkAppendStr1Byte              57           59   +3.14%\nBenchmarkAppendStr4Bytes             72           59  -17.40%\nBenchmarkAppendStr8Bytes             92           60  -34.77%\nBenchmarkAppendStr16Bytes           141           63  -54.89%\nBenchmarkAppendStr32Bytes            75           74   -1.72%\nBenchmarkAppendSpecialCase          270          288   +6.67%\n\nThere is a small regression for AppendStr1Byte and the special case case.\n\nHowever the same is not true for linux/arm which regresses as it lacks the powerful\nstring move operations that intel has. It is possible that the append crossover should\nbe reduced from 8 to 4.\n\nalarm(~/go/src/pkg/runtime) % ~/go/misc/benchcmp {old,new}.txt\nbenchmark                     old ns/op    new ns/op    delta\nBenchmarkAppend                     811          801   -1.23%\nBenchmarkAppend1Byte                100          103   +3.00%\nBenchmarkAppend4Bytes               117          145  +23.93%\nBenchmarkAppend8Bytes               139          119  -14.39%\nBenchmarkAppend16Bytes              130          124   -4.62%\nBenchmarkAppend32Bytes              125          145  +16.00%\nBenchmarkAppendStr1Byte              72           83  +16.39%\nBenchmarkAppendStr4Bytes             90          125  +38.58%\nBenchmarkAppendStr8Bytes            112           98  -11.88%\nBenchmarkAppendStr16Bytes           105          103   -1.90%\nBenchmarkAppendStr32Bytes           101          124  +22.77%\nBenchmarkAppendSpecialCase          624          622   -0.32%\u003c/pre\u003e",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-08-05T09:40:17Z",
	"updated_at": "2014-12-08T10:26:26Z"
}
