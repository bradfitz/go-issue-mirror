{
	"id": 66050046,
	"body": "\u003ca id=\"c7\"\u003e\u003c/a\u003eComment 7:\n\n\u003cpre\u003eFWIW i've just seen a similar crash with GOGC=off,\nin godoc. if it's one of my changes that has tickled\nor caused the problem, this at least eliminates go/lookup\nand cmd/godef.\n\n% GOGC=off\n% godoc -http :6060\nSIGBUS: bus error\nFaulting address: 0x14\npc: 0x224b0\n\nparser·*parser·declare+0x34 /Users/rog/other/go/src/pkg/go/parser/parser.go:287\n\tparser·*parser·declare(0x110d2280, 0x0, 0xd5201, 0x54, 0xd52b0, ...)\nparser·*parser·parseParameterList+0x20b \n/Users/rog/other/go/src/pkg/go/parser/parser.go:649\n\tparser·*parser·parseParameterList(0x110d2280, 0x1, 0x110d1b90, 0xd)\nparser·*parser·parseParameters+0x91 \n/Users/rog/other/go/src/pkg/go/parser/parser.go:694\n\tparser·*parser·parseParameters(0x110d2280, 0x501, 0x1, 0x75dd8)\nparser·*parser·parseSignature+0x77 \n/Users/rog/other/go/src/pkg/go/parser/parser.go:727\n\tparser·*parser·parseSignature(0x110d2280, 0x0, 0x0, 0x0, 0x0, ...)\nparser·*parser·parseFunctionDecl+0x10a \n/Users/rog/other/go/src/pkg/go/parser/parser.go:1987\n\tparser·*parser·parseFunctionDecl(0x110d2280, 0xc385c, 0x110c58c0)\nparser·*parser·parseDecl+0xdd \n/Users/rog/other/go/src/pkg/go/parser/parser.go:2022\n\tparser·*parser·parseDecl(0x110d2280, 0xc385c, 0x110c58c0)\nparser·*parser·parseFile+0x1a3 \n/Users/rog/other/go/src/pkg/go/parser/parser.go:2085\n\tparser·*parser·parseFile(0x110d2280, 0x110d1c10, 0xd)\nparser·ParseFile+0x144 /Users/rog/other/go/src/pkg/go/parser/interface.go:144\n\tparser·ParseFile(0x110d1b90, 0xd, 0x0, 0x0, 0x4, ...)\nmain·*Indexer·VisitFile+0x6a /Users/rog/other/go/src/cmd/godoc/index.go:603\n\tmain·*Indexer·VisitFile(0x174800, 0x110d1b90, 0xd, 0x104152b0, 0x174800, \n...)\npath·walk+0x66 /Users/rog/other/go/src/pkg/path/path.go:150\n\tpath·walk(0x110d1b90, 0xd, 0x104152b0, 0x174820, 0x174800, ...)\npath·walk+0x1ac /Users/rog/other/go/src/pkg/path/path.go:166\n\tpath·walk(0x10412128, 0x4, 0x1b95b0, 0x174820, 0x174800, ...)\npath·walk+0x1ac /Users/rog/other/go/src/pkg/path/path.go:166\n\tpath·walk(0x90364, 0x1, 0x1a0070, 0x174820, 0x174800, ...)\npath·Walk+0x85 /Users/rog/other/go/src/pkg/path/path.go:185\n\tpath·Walk(0x90364, 0x1, 0x174820, 0x174800, 0x0, ...)\nmain·NewIndex+0xa3 /Users/rog/other/go/src/cmd/godoc/index.go:643\n\tmain·NewIndex(0x90364, 0x1, 0x0, 0x0)\nmain·indexer+0x93 /Users/rog/other/go/src/cmd/godoc/godoc.go:1182\n\tmain·indexer()\ngoexit /Users/rog/other/go/src/pkg/runtime/proc.c:138\n\tgoexit()\n\ngoroutine 5156 [4]:\ngosched+0x4a /Users/rog/other/go/src/pkg/runtime/proc.c:524\n\tgosched()\nchanrecv+0x14e /Users/rog/other/go/src/pkg/runtime/chan.c:347\n\tchanrecv(0x48596c0, 0x6b1a66c, 0x0, 0x1)\nruntime·chanrecv1+0x4e /Users/rog/other/go/src/pkg/runtime/chan.c:417\n\truntime·chanrecv1(0x48596c0, 0x466fb80)\nnet·*pollServer·WaitRead+0x4d /Users/rog/other/go/src/pkg/net/fd.go:276\n\tnet·*pollServer·WaitRead(0x1746e0, 0x466fb80, 0x1001)\nnet·*netFD·Read+0x184 /Users/rog/other/go/src/pkg/net/fd.go:384\n\tnet·*netFD·Read(0x466fb80, 0x4660000, 0x1000, 0x1000, 0x0, ...)\nnet·*TCPConn·Read+0x70 /Users/rog/other/go/src/pkg/net/tcpsock.go:92\n\tnet·*TCPConn·Read(0x6f14a90, 0x4660000, 0x1000, 0x1000, 0x0, ...)\nbufio·*Reader·fill+0x1b3 /Users/rog/other/go/src/pkg/bufio/bufio.go:95\n\tbufio·*Reader·fill(0x48324e0, 0x0)\nbufio·*Reader·ReadSlice+0x256 /Users/rog/other/go/src/pkg/bufio/bufio.go:221\n\tbufio·*Reader·ReadSlice(0x48324e0, 0xa, 0x0, 0x0, 0x0, ...)\nhttp·readLineBytes+0x4c /Users/rog/other/go/src/pkg/http/request.go:210\n\thttp·readLineBytes(0x48324e0, 0x0, 0x0, 0x0, 0x0, ...)\nhttp·readLine+0x36 /Users/rog/other/go/src/pkg/http/request.go:234\n\thttp·readLine(0x48324e0, 0x0, 0x0, 0x0, 0x0, ...)\nhttp·ReadRequest+0x62 /Users/rog/other/go/src/pkg/http/request.go:452\n\thttp·ReadRequest(0x48324e0, 0x9480d70, 0x0, 0x0)\nhttp·*Conn·readRequest+0x63 /Users/rog/other/go/src/pkg/http/server.go:77\n\thttp·*Conn·readRequest(0x6f1a080, 0x6f1a080, 0x0, 0x0)\nhttp·*Conn·serve+0x26 /Users/rog/other/go/src/pkg/http/server.go:277\n\thttp·*Conn·serve(0x6f1a080, 0x6f14a90)\ngoexit /Users/rog/other/go/src/pkg/runtime/proc.c:138\n\tgoexit()\n0x6f1a080 unknown pc\n\ngoroutine 609 [3]:\nruntime·entersyscall+0x5d /Users/rog/other/go/src/pkg/runtime/proc.c:545\n\truntime·entersyscall()\nsyscall·Syscall6+0x5 /Users/rog/other/go/src/pkg/syscall/asm_darwin_386.s:39\n\tsyscall·Syscall6()\nsyscall·kevent+0x58 \n/Users/rog/other/go/src/pkg/syscall/zsyscall_darwin_386.go:108\n\tsyscall·kevent(0x7, 0x0, 0x0, 0x1516004, 0xa, ...)\nsyscall·Kevent+0x8c /Users/rog/other/go/src/pkg/syscall/syscall_darwin.go:378\n\tsyscall·Kevent(0x7, 0x0, 0x0, 0x0, 0x1516004, ...)\nnet·*pollster·WaitFD+0x11c /Users/rog/other/go/src/pkg/net/fd_darwin.go:87\n\tnet·*pollster·WaitFD(0x1516000, 0x0, 0x0, 0x64, 0x0, ...)\nnet·*pollServer·Run+0xc9 /Users/rog/other/go/src/pkg/net/fd.go:236\n\tnet·*pollServer·Run(0x1746e0, 0xc0f10)\ngoexit /Users/rog/other/go/src/pkg/runtime/proc.c:138\n\tgoexit()\n0x1746e0 unknown pc\n\ngoroutine 14108 [4]:\ngosched+0x4a /Users/rog/other/go/src/pkg/runtime/proc.c:524\n\tgosched()\nchanrecv+0x14e /Users/rog/other/go/src/pkg/runtime/chan.c:347\n\tchanrecv(0xd1c9700, 0x12d76c, 0x0, 0x1)\nruntime·chanrecv1+0x4e /Users/rog/other/go/src/pkg/runtime/chan.c:417\n\truntime·chanrecv1(0xd1c9700, 0xd013b80)\nnet·*pollServer·WaitRead+0x4d /Users/rog/other/go/src/pkg/net/fd.go:276\n\tnet·*pollServer·WaitRead(0x1746e0, 0xd013b80, 0x1001)\nnet·*netFD·Read+0x184 /Users/rog/other/go/src/pkg/net/fd.go:384\n\tnet·*netFD·Read(0xd013b80, 0x4663000, 0x1000, 0x1000, 0x0, ...)\nnet·*TCPConn·Read+0x70 /Users/rog/other/go/src/pkg/net/tcpsock.go:92\n\tnet·*TCPConn·Read(0xd1ef0a0, 0x4663000, 0x1000, 0x1000, 0x0, ...)\nbufio·*Reader·fill+0x1b3 /Users/rog/other/go/src/pkg/bufio/bufio.go:95\n\tbufio·*Reader·fill(0xd1fc480, 0x0)\nbufio·*Reader·ReadSlice+0x256 /Users/rog/other/go/src/pkg/bufio/bufio.go:221\n\tbufio·*Reader·ReadSlice(0xd1fc480, 0xa, 0x0, 0x0, 0x0, ...)\nhttp·readLineBytes+0x4c /Users/rog/other/go/src/pkg/http/request.go:210\n\thttp·readLineBytes(0xd1fc480, 0x0, 0x0, 0x0, 0x0, ...)\nhttp·readLine+0x36 /Users/rog/other/go/src/pkg/http/request.go:234\n\thttp·readLine(0xd1fc480, 0x0, 0x0, 0x0, 0x0, ...)\nhttp·ReadRequest+0x62 /Users/rog/other/go/src/pkg/http/request.go:452\n\thttp·ReadRequest(0xd1fc480, 0xd29a730, 0x0, 0x0)\nhttp·*Conn·readRequest+0x63 /Users/rog/other/go/src/pkg/http/server.go:77\n\thttp·*Conn·readRequest(0xd213280, 0xd213280, 0x0, 0x0)\nhttp·*Conn·serve+0x26 /Users/rog/other/go/src/pkg/http/server.go:277\n\thttp·*Conn·serve(0xd213280, 0xd1ef0a0)\ngoexit /Users/rog/other/go/src/pkg/runtime/proc.c:138\n\tgoexit()\n0xd213280 unknown pc\n\ngoroutine 1 [4]:\ngosched+0x4a /Users/rog/other/go/src/pkg/runtime/proc.c:524\n\tgosched()\nchanrecv+0x14e /Users/rog/other/go/src/pkg/runtime/chan.c:347\n\tchanrecv(0x150e940, 0x12ca08, 0x0, 0x1)\nruntime·chanrecv1+0x4e /Users/rog/other/go/src/pkg/runtime/chan.c:417\n\truntime·chanrecv1(0x150e940, 0x1065980)\nnet·*pollServer·WaitRead+0x4d /Users/rog/other/go/src/pkg/net/fd.go:276\n\tnet·*pollServer·WaitRead(0x1746e0, 0x1065980, 0x0)\nnet·*netFD·accept+0x2be /Users/rog/other/go/src/pkg/net/fd.go:512\n\tnet·*netFD·accept(0x1065980, 0x87aec, 0x3d547, 0x0, 0x0, ...)\nnet·*TCPListener·AcceptTCP+0x53 \n/Users/rog/other/go/src/pkg/net/tcpsock.go:253\n\tnet·*TCPListener·AcceptTCP(0x1512600, 0x6f261, 0x0, 0x0)\nnet·*TCPListener·Accept+0x36 /Users/rog/other/go/src/pkg/net/tcpsock.go:263\n\tnet·*TCPListener·Accept(0x1512600, 0x0, 0x0, 0x0, 0x0, ...)\nhttp·Serve+0x65 /Users/rog/other/go/src/pkg/http/server.go:532\n\thttp·Serve(0x1510de0, 0x1512600, 0x174600, 0x1234f8, 0x1510de0, ...)\nhttp·ListenAndServe+0x84 /Users/rog/other/go/src/pkg/http/server.go:576\n\thttp·ListenAndServe(0x123010, 0x5, 0x174600, 0x1234f8, 0x0, ...)\nmain·main+0x553 /Users/rog/other/go/src/cmd/godoc/main.go:212\n\tmain·main()\nmainstart+0xf /Users/rog/other/go/src/pkg/runtime/386/asm.s:83\n\tmainstart()\ngoexit /Users/rog/other/go/src/pkg/runtime/proc.c:138\n\tgoexit()\neax     0x12e400\nebx     0x110d2280\necx     0x12b8c0\nedx     0x0\nedi     0x12e3e8\nesi     0x14\nebp     0x0\nesp     0x12e3e8\neip     0x224b0\neflags  0x10206\ncs      0x17\nfs      0x1f\ngs      0x57\n% gdb godoc\nGNU gdb 6.3.50-20050815 (Apple version gdb-962) (Sat Jul 26 08:14:40 UTC 2008)\nCopyright 2004 Free Software Foundation, Inc.\nGDB is free software, covered by the GNU General Public License, and you are\nwelcome to change it and/or distribute copies of it under certain conditions.\nType \"show copying\" to see the conditions.\nThere is absolutely no warranty for GDB.  Type \"show warranty\" for details.\nThis GDB was configured as \"i386-apple-darwin\"...Reading symbols for shared \nlibraries . done\n\n(gdb) run  -http :6060\nStarting program: /Users/rog/bin/godoc -http :6060\nReading symbols for shared libraries + done\n\nProgram received signal EXC_BAD_ACCESS, Could not access memory.\nReason: KERN_PROTECTION_FAILURE at address: 0x00000014\n[Switching to process 60502 thread 0x3303]\n0x000224b0 in ?? ()\n(gdb) where\n#0  0x000224b0 in ?? ()\nCannot access memory at address 0x4\n(gdb) The program is running.  Exit anyway? (y or n) y\u003c/pre\u003e",
	"user": {
		"login": "rogpeppe",
		"id": 66491,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2010-01-10T14:57:32Z",
	"updated_at": "2014-12-08T10:04:51Z"
}
