{
	"id": 51289068,
	"number": 9082,
	"state": "closed",
	"title": "runtime: SWIG: Export Go version through runtime.h and let SWIG generated code fail to build if the Go version is unsupported",
	"body": "\u003cpre\u003eIssue:\nSWIG or the generated C code by SWIG currently has no support for checking the Go\nversion in use.\n\n\nBackground:\nDuring the discussion of \u003ca href=\"https://golang.org/issue/9065\"\u003eissue #9065\u003c/a\u003e [1] Ian pointed out that the current SWIG version no\nlonger works with Go 1.0.3 [2].  In general SWIG should support old Go versions for as\nlong as possible but sometimes support for old Go versions needs to be dropped because\nof incompatibilities or bugs or in order to support new features.\n\n\nProposal:\nruntime.h defines the Go version as a constant similarly to SWIG_VERSION [3] or the\noften used GCC_VERSION [4] constant.\n\n\nPossible use cases:\n1) Clear error message to the user in case an unsupported Go version is in use. The C\ncode generated by SWIG can include a simple preprocessor check if the Go version in use\nis supported and if it isn't fail via the #error directive and a clear error message.\n\n2) New and optional features could be made available conditionally if the Go version in\nuse supports it. In case a Go version does not support a new feature a warning message\ncan be generated via the #warning preprocessor directive. CL 171270043 [5] would need to\nbe reverted though as currently warnings are ignored/hidden.\n\n3) If there are incompatibilities between major Go versions (Go 1 vs. 2) then the\ngenerated C code by SWIG could be made compatible to several major Go versions.\n\n\nLinks:\n[1] \u003ca href=\"https://golang.org/issue/9065\"\u003ehttps://golang.org/issue/9065\u003c/a\u003e\n[2] \u003ca href=\"https://golang.org/issue/9065?c=7\"\u003ehttps://golang.org/issue/9065?c=7\u003c/a\u003e\n[3] \u003ca href=\"http://www.swig.org/Doc3.0/SWIGDocumentation.html#Preprocessor_condition_compilation\"\u003ehttp://www.swig.org/Doc3.0/SWIGDocumentation.html#Preprocessor_condition_compilation\u003c/a\u003e\n[4]\n\u003ca href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.2/cpp/Common-Predefined-Macros.html#Common-Predefined-Macros4\"\u003ehttps://gcc.gnu.org/onlinedocs/gcc-4.9.2/cpp/Common-Predefined-Macros.html#Common-Predefined-Macros4\u003c/a\u003e\n[5] \u003ca href=\"https://golang.org/cl/171270043\"\u003ehttps://golang.org/cl/171270043\u003c/a\u003e\u003c/pre\u003e",
	"user": {
		"login": "michael-schaller",
		"id": 1525237,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 4,
	"closed_at": "2015-04-02T15:46:23Z",
	"created_at": "2014-11-10T12:58:23Z",
	"updated_at": "2016-06-25T01:44:17Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
