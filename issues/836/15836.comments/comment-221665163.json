{
	"id": 221665163,
	"body": "I don't know if error reporting for cgo code is supposed to be accurate when printing line numbers, so I'm not sure if this a bug or not; but right now we are printing completely bogus information, and it's rather confusing (even more confusing on tip, with a random line of code appearing in the error message).\r\n\r\nMore info about my env below.\r\n\r\nGo 1.6:\r\n\r\n```\r\n$ go env\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/alberto/gocode\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/local/go\"\r\nGOTOOLDIR=\"/usr/local/go/pkg/tool/linux_amd64\"\r\nGO15VENDOREXPERIMENT=\"1\"\r\nCC=\"gcc\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0\"\r\nCXX=\"g++\"\r\nCGO_ENABLED=\"1\"\r\n```\r\n\r\ntip:\r\n\r\n``` \r\n$ gotip env\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/alberto/gocode\"\r\nGORACE=\"\"\r\nGOROOT=\"/home/alberto/go\"\r\nGOTOOLDIR=\"/home/alberto/go/pkg/tool/linux_amd64\"\r\nCC=\"gcc\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build949309868=/tmp/go-build -gno-record-gcc-switches\"\r\nCXX=\"g++\"\r\nCGO_ENABLED=\"1\"\r\n```\r\n\r\nthe c compiler:\r\n\r\n```\r\n$ gcc --version\r\ngcc (Debian 5.3.1-19) 5.3.1 20160509\r\n```\r\n\r\n`-x` output for go1.6:\r\n\r\n```\r\n$ go build -x test.go \r\nWORK=/tmp/go-build652767123\r\nmkdir -p $WORK/command-line-arguments/_obj/\r\nmkdir -p $WORK/\r\ncd /home/alberto/Desktop/foo\r\nCGO_LDFLAGS=\"-g\" \"-O2\" \"-lmpfr\" \"-lgmp\" /usr/local/go/pkg/tool/linux_amd64/cgo -objdir $WORK/command-line-arguments/_obj/ -importpath command-line-arguments -- -I $WORK/command-line-arguments/_obj/ test.go\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/_cgo_main.o -c $WORK/command-line-arguments/_obj/_cgo_main.c\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/_cgo_export.o -c $WORK/command-line-arguments/_obj/_cgo_export.c\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/test.cgo2.o -c $WORK/command-line-arguments/_obj/test.cgo2.c\r\n# command-line-arguments\r\nIn file included from ./test.go:6:0:\r\n./test.go: In function ‘_cgo_b5bec8c53dc8_Cfunc_mpfr_get_prec’:\r\n./test.go:41:23: error: request for member ‘_mpfr_prec’ in something not a structure or union\r\n./test.go:41:23: error: request for member ‘_mpfr_prec’ in something not a structure or union\r\n```\r\n\r\n`-x` output for tip:\r\n\r\n```\r\n$ gotip build -x test.go \r\nWORK=/tmp/go-build055975085\r\nmkdir -p $WORK/command-line-arguments/_obj/\r\nmkdir -p $WORK/\r\ncd /home/alberto/Desktop/foo\r\nCGO_LDFLAGS=\"-g\" \"-O2\" \"-lmpfr\" \"-lgmp\" /home/alberto/go/pkg/tool/linux_amd64/cgo -objdir $WORK/command-line-arguments/_obj/ -importpath command-line-arguments -- -I $WORK/command-line-arguments/_obj/ test.go\r\ncd $WORK\r\ngcc -fdebug-prefix-map=a=b -c trivial.c\r\ngcc -gno-record-gcc-switches -c trivial.c\r\ncd /home/alberto/Desktop/foo\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/_cgo_main.o -c $WORK/command-line-arguments/_obj/_cgo_main.c\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/_cgo_export.o -c $WORK/command-line-arguments/_obj/_cgo_export.c\r\ngcc -I . -fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=$WORK=/tmp/go-build -gno-record-gcc-switches -I $WORK/command-line-arguments/_obj/ -g -O2 -o $WORK/command-line-arguments/_obj/test.cgo2.o -c $WORK/command-line-arguments/_obj/test.cgo2.c\r\n# command-line-arguments\r\nIn file included from ./test.go:6:0:\r\n./test.go: In function ‘_cgo_b5bec8c53dc8_Cfunc_mpfr_get_prec’:\r\n./test.go:49:6: error: request for member ‘_mpfr_prec’ in something not a structure or union\r\n  // this isn't the line you're looking for\r\n      ^\r\n./test.go:49:6: error: request for member ‘_mpfr_prec’ in something not a structure or union\r\n  // this isn't the line you're looking for\r\n      ^\r\n```\r\n\r\n\r\n\r\n",
	"user": {
		"login": "ALTree",
		"id": 3586803,
		"type": "User",
		"site_admin": false
	},
	"reactions": {
		"total_count": 1,
		"+1": 1
	},
	"created_at": "2016-05-25T18:31:16Z",
	"updated_at": "2016-05-25T18:33:37Z"
}
