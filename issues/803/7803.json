{
	"id": 51287230,
	"number": 7803,
	"state": "open",
	"title": "misc/gdb: breakpoints break things",
	"body": "\u003cpre\u003eWhat steps reproduce the problem?\n\nhg clone tip\ncd $GOROOT/src\n./make.bash\ncd pkg/net/http\ngo test -c\ngdb ./http.test\nbreak strings.Repeat\nrun\n\nWhat happened?\n\nReading symbols from /home/albert/go/src/pkg/net/http/http.test...done.\nLoading Go Runtime support.\n(gdb) break strings.Repeat\nBreakpoint 1 at 0x535cfb: strings.Repeat. (2 locations)\n(gdb) run\nStarting program: /home/albert/go/src/pkg/net/http/http.test \n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \u0026quot;/lib64/libthread_db.so.1\u0026quot;.\n[New Thread 0x7ffff7e2b700 (LWP 12059)]\nruntime: unexpected return pc for flag.(*FlagSet).parseOne called from 0x1a\nruntime: unexpected return pc for flag.(*FlagSet).parseOne called from 0x1a\nfatal error: unknown caller pc\n\nruntime stack:\nruntime.throw(0xa0b471)\n\t/home/albert/go/src/pkg/runtime/panic.c:520 +0x69 fp=0x7fffffffd8d8\nruntime.gentraceback(0x40a962, 0xc2080674a8, 0x0, 0xc208002120, 0xc200000000, 0x0,\n0x7fffffff, 0x4090c0, 0x7fffffffdaa0, 0x0)\n\t/home/albert/go/src/pkg/runtime/traceback_x86.c:167 +0x819 fp=0x7fffffffd9a0\naddstackroots(0xc208002120, 0x7fffffffdaa0)\n\t/home/albert/go/src/pkg/runtime/mgc0.c:1676 +0x168 fp=0x7fffffffda30\nmarkroot(0xc20800c900, 0x2b00000005)\n\t/home/albert/go/src/pkg/runtime/mgc0.c:1309 +0xbe fp=0x7fffffffdab0\nruntime.parfordo(0xc20800c900)\n\t/home/albert/go/src/pkg/runtime/parfor.c:88 +0xa3 fp=0x7fffffffdb28\ngc(0xc2080674c0)\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2387 +0x1d6 fp=0x7fffffffdc58\nmgc(0xc208002120)\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2329 +0x2e fp=0x7fffffffdc68\nruntime.mcall(0x42b587)\n\t/home/albert/go/src/pkg/runtime/asm_amd64.s:181 +0x4b fp=0x7fffffffdc78\n\ngoroutine 16 [garbage collection]:\nruntime.gc(0xc200000000)\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2309 +0x1b2 fp=0xc2080674d0\nruntime.mallocgc(0xbdc000, 0x6ff561, 0x1)\n\t/home/albert/go/src/pkg/runtime/malloc.goc:204 +0x1d6 fp=0xc208067538\ncnew(0x6ff560, 0xbdb328, 0x1)\n\t/home/albert/go/src/pkg/runtime/malloc.goc:835 +0xc1 fp=0xc208067558\nruntime.cnewarray(0x6ff560, 0xbdb328)\n\t/home/albert/go/src/pkg/runtime/malloc.goc:848 +0x3a fp=0xc208067578\nmakeslice1(0x6ed6c0, 0x0, 0xbdb328, 0xc2080675d8)\n\t/home/albert/go/src/pkg/runtime/slice.goc:55 +0x4d fp=0xc208067590\nruntime.makeslice(0x6ed6c0, 0x0, 0xbdb328, 0x0, 0x0, 0xbdb328)\n\t/home/albert/go/src/pkg/runtime/slice.goc:36 +0xb3 fp=0xc2080675c0\nstrconv.quoteWith(0x53605a, 0x7e7770, 0x22, 0x0, 0x0)\n\t/home/albert/go/src/pkg/strconv/quote.go:15 +0x79 fp=0xc2080676a8\nstrconv.Quote(0x53605a, 0x7e7770, 0x0, 0x0)\n\t/home/albert/go/src/pkg/strconv/quote.go:91 +0x4d fp=0xc2080676d8\nfmt.(*fmt).fmt_q(0xc208026060, 0x53605a, 0x7e7770)\n\t/home/albert/go/src/pkg/fmt/format.go:334 +0x11f fp=0xc208067728\nfmt.(*pp).fmtString(0xc208026000, 0x53605a, 0x7e7770, 0x71)\n\t/home/albert/go/src/pkg/fmt/print.go:517 +0xa2 fp=0xc208067758\nfmt.(*pp).printArg(0xc208026000, 0x6ff160, 0xc208000f20, 0x71, 0x0, 0x0)\n\t/home/albert/go/src/pkg/fmt/print.go:780 +0xabb fp=0xc2080677d8\nfmt.(*pp).doPrintf(0xc208026000, 0x85b1f0, 0x24, 0xc208067dd0, 0x3, 0x3)\n\t/home/albert/go/src/pkg/fmt/print.go:1159 +0x2044 fp=0xc208067b20\nfmt.Sprintf(0x85b1f0, 0x24, 0xc208067dd0, 0x3, 0x3, 0x0, 0x0)\n\t/home/albert/go/src/pkg/fmt/print.go:203 +0x7c fp=0xc208067b70\nfmt.Errorf(0x85b1f0, 0x24, 0xc208067dd0, 0x3, 0x3, 0x0, 0x0)\n\t/home/albert/go/src/pkg/fmt/print.go:212 +0x6c fp=0xc208067bc8\nflag.(*FlagSet).failf(0x5432d1, 0x85b1f0, 0x24, 0xc208067dd0, 0x3, 0x3, 0x0, 0x0)\n\t/home/albert/go/src/pkg/flag/flag.go:694 +0x83 fp=0xc208067c68\nruntime: unexpected return pc for flag.(*FlagSet).parseOne called from 0x1a\nflag.(*FlagSet).parseOne(0x5432d1, 0xc20802c120, 0xc208000010, 0x0)\n\t/home/albert/go/src/pkg/flag/flag.go:758 +0x76a fp=0xc208067e08\ncreated by _rt0_go\n\t/home/albert/go/src/pkg/runtime/asm_amd64.s:97 +0x120\n\ngoroutine 17 [runnable]:\nruntime.MHeap_Scavenger()\n\t/home/albert/go/src/pkg/runtime/mheap.c:507 fp=0x7ffff7febfa8\nruntime.goexit()\n\t/home/albert/go/src/pkg/runtime/proc.c:1430 fp=0x7ffff7febfb0\ncreated by runtime.main\n\t/home/albert/go/src/pkg/runtime/proc.c:207\n\ngoroutine 18 [runnable]:\nbgsweep()\n\t/home/albert/go/src/pkg/runtime/mgc0.c:1960 fp=0x7ffff7fdcfa8\nruntime.goexit()\n\t/home/albert/go/src/pkg/runtime/proc.c:1430 fp=0x7ffff7fdcfb0\ncreated by runtime.gc\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2249\n\ngoroutine 19 [runnable]:\nrunfinq()\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2586 fp=0x7ffff7feafa8\nruntime.goexit()\n\t/home/albert/go/src/pkg/runtime/proc.c:1430 fp=0x7ffff7feafb0\ncreated by runtime.gc\n\t/home/albert/go/src/pkg/runtime/mgc0.c:2249\n[Thread 0x7ffff7e2b700 (LWP 12059) exited]\n[Inferior 1 (process 12055) exited with code 02]\n\n\nPlease provide any additional information below.\n\nFedora Core 20 x86_64 with most updates installed\n\ngdb-7.6.50.20130731-19.fc20.x86_64\u003c/pre\u003e",
	"user": {
		"login": "alberts",
		"id": 409689,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"created_at": "2014-04-17T06:47:27Z",
	"updated_at": "2015-04-14T19:45:22Z",
	"milestone": {
		"id": 1055141,
		"number": 6,
		"title": "Unplanned"
	}
}
