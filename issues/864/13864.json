{
	"id": 125523977,
	"number": 13864,
	"state": "closed",
	"title": "runtime/pprof: TestStackBarrierProfiling fails with \"SIGTRAP: trace trap PC=0x459cfd m=2\" on linux",
	"body": "all.bash fails on fedora-vm,\r\n```\r\nuname -a\r\nLinux fedora-amd64.localdomain 4.2.8-200.fc22.x86_64 #1 SMP Tue Dec 15 16:50:23 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\ngit rev-parse HEAD\r\nacc7161320038ee6377d589890526cd11912b4e8\r\n\r\nulimit -a\r\ncore file size          (blocks, -c) 0\r\ndata seg size           (kbytes, -d) unlimited\r\nscheduling priority             (-e) 0\r\nfile size               (blocks, -f) unlimited\r\npending signals                 (-i) 7851\r\nmax locked memory       (kbytes, -l) 64\r\nmax memory size         (kbytes, -m) unlimited\r\nopen files                      (-n) 1024\r\npipe size            (512 bytes, -p) 8\r\nPOSIX message queues     (bytes, -q) 819200\r\nreal-time priority              (-r) 0\r\nstack size              (kbytes, -s) 8192\r\ncpu time               (seconds, -t) unlimited\r\nmax user processes              (-u) 4096\r\nvirtual memory          (kbytes, -v) unlimited\r\nfile locks                      (-x) unlimited\r\n```\r\nwith the following dying message:\r\n```\r\n--- FAIL: TestStackBarrierProfiling (0.02s)\r\n\tpprof_test.go:363: subprocess failed with exit status 2:\r\n\t\tSIGTRAP: trace trap\r\n\t\tPC=0x459cfd m=2\r\n\t\t\r\n\t\tgoroutine 0 [idle]:\r\n\t\truntime.morestack()\r\n\t\t\t/go/src/runtime/asm_amd64.s:331 +0x1d\r\n\t\t\r\n\t\tgoroutine 4 [running]:\r\n\t\truntime.systemstack_switch()\r\n\t\t\t/go/src/runtime/asm_amd64.s:245 fp=0xc8200414f8 sp=0xc8200414f0\r\n\t\truntime.gcMarkTermination()\r\n\t\t\t/go/src/runtime/mgc.go:1255 +0x3a9 fp=0xc820041748 sp=0xc8200414f8\r\n\t\truntime.gcMarkDone()\r\n\t\t\t/go/src/runtime/mgc.go:1141 +0x286 fp=0xc820041768 sp=0xc820041748\r\n\t\truntime.gcBgMarkWorker(0xc82001c000)\r\n\t\t\t/go/src/runtime/mgc.go:1465 +0x4d8 fp=0xc8200417d8 sp=0xc820041768\r\n\t\truntime.goexit()\r\n\t\t\t/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc8200417e0 sp=0xc8200417d8\r\n\t\tcreated by runtime.gcBgMarkStartWorkers\r\n\t\t\t/go/src/runtime/mgc.go:1335 +0x93\r\n\t\t\r\n\t\tgoroutine 1 [chan receive]:\r\n\t\ttesting.RunTests(0x610ac0, 0x6b03e0, 0x8, 0x8, 0x7f2e00000001)\r\n\t\t\t/go/src/testing/testing.go:583 +0x8d2\r\n\t\ttesting.(*M).Run(0xc8200bef38, 0x408ee7)\r\n\t\t\t/go/src/testing/testing.go:515 +0x81\r\n\t\tmain.main()\r\n\t\t\truntime/pprof/_test/_testmain.go:70 +0x117\r\n\t\t\r\n\t\tgoroutine 19 [runnable]:\r\n\t\truntime/pprof_test.deepStack(0x1c1, 0xc820161800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:393 +0x52\r\n\t\truntime/pprof_test.deepStack(0x1c2, 0xc820161400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c3, 0xc820161000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c4, 0xc820160c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c5, 0xc820160800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c6, 0xc820160400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c7, 0xc820160000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c8, 0xc82015fc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1c9, 0xc82015f800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ca, 0xc82015f400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1cb, 0xc82015f000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1cc, 0xc82015ec00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1cd, 0xc82015e800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ce, 0xc82015e400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1cf, 0xc82015e000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d0, 0xc82015dc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d1, 0xc82015d800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d2, 0xc82015d400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d3, 0xc82015d000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d4, 0xc82015cc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d5, 0xc82015c800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d6, 0xc82015c400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d7, 0xc82015c000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d8, 0xc82015bc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1d9, 0xc82015b800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1da, 0xc82015b400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1db, 0xc82015b000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1dc, 0xc82015ac00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1dd, 0xc82015a800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1de, 0xc82015a400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1df, 0xc82015a000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e0, 0xc820159c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e1, 0xc820159800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e2, 0xc820159400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e3, 0xc820159000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e4, 0xc820158c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e5, 0xc820158800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e6, 0xc820158400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e7, 0xc820158000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e8, 0xc820157c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1e9, 0xc820157800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ea, 0xc820157400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1eb, 0xc820157000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ec, 0xc820156c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ed, 0xc820156800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ee, 0xc820156400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ef, 0xc820156000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f0, 0xc820155c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f1, 0xc820155800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f2, 0xc820155400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f3, 0xc820155000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f4, 0xc820154c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f5, 0xc820154800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f6, 0xc820154400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f7, 0xc820154000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f8, 0xc820153c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1f9, 0xc820153800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1fa, 0xc820153400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1fb, 0xc820153000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1fc, 0xc820152c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1fd, 0xc820152800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1fe, 0xc820152400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x1ff, 0xc820152000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x200, 0xc820151c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x201, 0xc820151800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x202, 0xc820151400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x203, 0xc820151000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x204, 0xc820150c00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x205, 0xc820150800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x206, 0xc820150400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x207, 0xc820150000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x208, 0xc82014fc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x209, 0xc82014f800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20a, 0xc82014f400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20b, 0xc82014f000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20c, 0xc82014ec00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20d, 0xc82014e800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20e, 0xc82014e400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x20f, 0xc82014e000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x210, 0xc82014dc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x211, 0xc82014d800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x212, 0xc82014d400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x213, 0xc82014d000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x214, 0xc82014cc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x215, 0xc82014c800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x216, 0xc82014c400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x217, 0xc82014c000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x218, 0xc82014bc00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x219, 0xc82014b800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x21a, 0xc82014b400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x21b, 0xc82014b000)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x21c, 0xc82014ac00)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x21d, 0xc82014a800)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\truntime/pprof_test.deepStack(0x21e, 0xc82014a400)\r\n\t\t\t/go/src/runtime/pprof/pprof_test.go:394 +0x90\r\n\t\tcreated by testing.RunTests\r\n\t\t\t/go/src/testing/testing.go:582 +0x892\r\n\t\t\r\n\t\tgoroutine 20 [runnable]:\r\n\t\truntime/pprof.profileWriter(0x7f2e60199650, 0xc82009a310)\r\n\t\t\t/go/src/runtime/pprof/pprof.go:597\r\n\t\tcreated by runtime/pprof.StartCPUProfile\r\n\t\t\t/go/src/runtime/pprof/pprof.go:593 +0x145\r\n\t\t\r\n\t\trax    0xf80\r\n\t\trbx    0xc82002a400\r\n\t\trcx    0xc820000900\r\n\t\trdx    0x0\r\n\t\trdi    0x42eec0\r\n\t\trsi    0xc820000900\r\n\t\trbp    0x2\r\n\t\trsp    0xc82003af78\r\n\t\tr8     0xc820000f00\r\n\t\tr9     0x47ae147ae147ae15\r\n\t\tr10    0x4d9e5\r\n\t\tr11    0x203\r\n\t\tr12    0x42f150\r\n\t\tr13    0x60fe08\r\n\t\tr14    0x0\r\n\t\tr15    0x8\r\n\t\trip    0x459cfd\r\n\t\trflags 0x246\r\n\t\tcs     0x33\r\n\t\tfs     0x0\r\n\t\tgs     0x0\r\nFAIL\r\n```",
	"user": {
		"login": "mikioh",
		"id": 92117,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"closed_at": "2016-01-27T20:47:05Z",
	"created_at": "2016-01-08T01:42:49Z",
	"updated_at": "2016-01-27T20:47:05Z",
	"milestone": {
		"id": 1425772,
		"number": 34,
		"title": "Go1.6Maybe"
	}
}
