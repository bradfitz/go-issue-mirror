{
	"id": 132322651,
	"number": 14269,
	"state": "open",
	"title": "x/crypto/ssh/test: TestCertLogin fails on ubuntu xenial",
	"body": "I presume this is some incompatibility with a new openssh, but I haven't actually looked into it much at all yet:\r\n\r\n```shellsession\r\nroot@xenial:~# go test golang.org/x/crypto/ssh/test -v -run TestCertLogin\r\n=== RUN   TestCertLogin\r\n--- FAIL: TestCertLogin (0.02s)\r\n\tcert_test.go:44: TryDial: ssh: handshake failed: ssh: unable to authenticate, attempted methods [none publickey], no supported methods remain\r\n\ttest_unix_test.go:209: sshd: debug1: inetd sockets after dupping: 3, 4\r\n\t\tConnection from UNKNOWN port 65535 on /tmp/unixConnection454425008/ssh port 65535\r\n\t\tdebug1: Client protocol version 2.0; client software version Go\r\n\t\tdebug1: no match: Go\r\n\t\tdebug1: Enabling compatibility mode for protocol 2.0\r\n\t\tdebug1: Local version string SSH-2.0-OpenSSH_7.1p2 Ubuntu-2\r\n\t\tdebug2: fd 3 setting O_NONBLOCK\r\n\t\tdebug2: Network child is on pid 9279\r\n\t\tdebug1: permanently_set_uid: 106/65534 [preauth]\r\n\t\tdebug1: list_hostkey_types: ssh-rsa,ecdsa-sha2-nistp256 [preauth]\r\n\t\tdebug1: SSH2_MSG_KEXINIT sent [preauth]\r\n\t\tdebug1: SSH2_MSG_KEXINIT received [preauth]\r\n\t\tdebug2: kex_parse_kexinit: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group-exchange-sha256,diffie-hellman-group14-sha1 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: ssh-rsa,ecdsa-sha2-nistp256 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com [preauth]\r\n\t\tdebug2: kex_parse_kexinit: chacha20-poly1305@openssh.com,aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,aes256-gcm@openssh.com [preauth]\r\n\t\tdebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: umac-64-etm@openssh.com,umac-128-etm@openssh.com,hmac-sha2-256-etm@openssh.com,hmac-sha2-512-etm@openssh.com,hmac-sha1-etm@openssh.com,umac-64@openssh.com,umac-128@openssh.com,hmac-sha2-256,hmac-sha2-512,hmac-sha1 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: none,zlib@openssh.com [preauth]\r\n\t\tdebug2: kex_parse_kexinit: none,zlib@openssh.com [preauth]\r\n\t\tdebug2: kex_parse_kexinit:  [preauth]\r\n\t\tdebug2: kex_parse_kexinit:  [preauth]\r\n\t\tdebug2: first_kex_follows 0  [preauth]\r\n\t\tdebug2: reserved 0  [preauth]\r\n\t\tdebug2: kex_parse_kexinit: curve25519-sha256@libssh.org,ecdh-sha2-nistp256,ecdh-sha2-nistp384,ecdh-sha2-nistp521,diffie-hellman-group14-sha1,diffie-hellman-group1-sha1 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: ssh-rsa-cert-v01@openssh.com,ssh-dss-cert-v01@openssh.com,ecdsa-sha2-nistp256-cert-v01@openssh.com,ecdsa-sha2-nistp384-cert-v01@openssh.com,ecdsa-sha2-nistp521-cert-v01@openssh.com,ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521,ssh-rsa,ssh-dss [preauth]\r\n\t\tdebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,arcfour256,arcfour128 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: aes128-ctr,aes192-ctr,aes256-ctr,aes128-gcm@openssh.com,arcfour256,arcfour128 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: hmac-sha2-256,hmac-sha1,hmac-sha1-96 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: hmac-sha2-256,hmac-sha1,hmac-sha1-96 [preauth]\r\n\t\tdebug2: kex_parse_kexinit: none [preauth]\r\n\t\tdebug2: kex_parse_kexinit: none [preauth]\r\n\t\tdebug2: kex_parse_kexinit:  [preauth]\r\n\t\tdebug2: kex_parse_kexinit:  [preauth]\r\n\t\tdebug2: first_kex_follows 0  [preauth]\r\n\t\tdebug2: reserved 0  [preauth]\r\n\t\tdebug1: kex: client-\u003eserver aes128-ctr hmac-sha2-256 none [preauth]\r\n\t\tdebug1: kex: server-\u003eclient aes128-ctr hmac-sha2-256 none [preauth]\r\n\t\tdebug1: expecting SSH2_MSG_KEX_ECDH_INIT [preauth]\r\n\t\tdebug2: monitor_read: 6 used once, disabling now\r\n\t\tdebug2: set_newkeys: mode 1 [preauth]\r\n\t\tdebug1: SSH2_MSG_NEWKEYS sent [preauth]\r\n\t\tdebug1: expecting SSH2_MSG_NEWKEYS [preauth]\r\n\t\tdebug2: set_newkeys: mode 0 [preauth]\r\n\t\tdebug1: SSH2_MSG_NEWKEYS received [preauth]\r\n\t\tdebug1: KEX done [preauth]\r\n\t\tdebug1: userauth-request for user root service ssh-connection method none [preauth]\r\n\t\tdebug1: attempt 0 failures 0 [preauth]\r\n\t\tdebug2: parse_server_config: config reprocess config len 526\r\n\t\tUser root not allowed because account is locked\r\n\t\tdebug2: monitor_read: 8 used once, disabling now\r\n\t\tinput_userauth_request: invalid user root [preauth]\r\n\t\tdebug2: input_userauth_request: try method none [preauth]\r\n\t\tdebug2: monitor_read: 4 used once, disabling now\r\n\t\tdebug1: userauth-request for user root service ssh-connection method publickey [preauth]\r\n\t\tdebug1: attempt 1 failures 0 [preauth]\r\n\t\tdebug2: input_userauth_request: try method publickey [preauth]\r\n\t\tmm_log_handler: write: Broken pipe\r\n\t\tdebug1: do_cleanup\r\nFAIL\r\nexit status 1\r\nFAIL\tgolang.org/x/crypto/ssh/test\t0.043s\r\n```",
	"user": {
		"login": "mwhudson",
		"id": 672022,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"created_at": "2016-02-09T03:30:18Z",
	"updated_at": "2016-02-28T22:56:04Z",
	"milestone": {
		"id": 1067491,
		"number": 22,
		"title": "Unreleased"
	}
}
