{
	"id": 98103738,
	"number": 11933,
	"state": "closed",
	"title": "runtime: arm64 64k PAGE_SIZE compile all.bash testcase error.",
	"body": "Hi,my arm64 kernel PAGE_SIZE is 64k,and i change the _PhyPagesize to 65536 in arch1_arm64.go file,and it can compile and run,but some test case prints error.\r\n\r\n#### 2.garbage_test error\r\n```\r\n--- FAIL: TestFreeOSMemory (0.00s)\r\n\tgarbage_test.go:105: released before=0; released after=0; did not go up\r\nallocating objects\r\nstarting gc\r\nfinalized 0x48200104e0\r\nfinalized 0x48200104b0\r\nstarting dump\r\ndone dump\r\nFAIL\r\nFAIL\truntime/debug\t0.207s\r\n```\r\n#### 3. atomic error\r\n```\r\npanic: test timed out after 2m0s\r\n\r\ngoroutine 161 [running]:\r\ntesting.startAlarm.func1()\r\n\t/home/work/go-github-64k/src/testing/testing.go:702 +0x12c\r\ncreated by time.goFunc\r\n\t/home/work/go-github-64k/src/time/sleep.go:129 +0x3c\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.RunTests(0x204300, 0x2a4900, 0x2a, 0x2a, 0x4820093401)\r\n\t/home/work/go-github-64k/src/testing/testing.go:561 +0x680\r\ntesting.(*M).Run(0x4820077ef0, 0x9e99c)\r\n\t/home/work/go-github-64k/src/testing/testing.go:493 +0x84\r\nmain.main()\r\n\tsync/atomic/_test/_testmain.go:140 +0x118\r\n\r\ngoroutine 153 [chan receive]:\r\nsync/atomic_test.TestStoreLoadSeqCst32(0x482014e000)\r\n\t/home/work/go-github-64k/src/sync/atomic/atomic_test.go:1239 +0x314\r\ntesting.tRunner(0x482014e000, 0x2a4c00)\r\n\t/home/work/go-github-64k/src/testing/testing.go:455 +0xbc\r\ncreated by testing.RunTests\r\n\t/home/work/go-github-64k/src/testing/testing.go:560 +0x654\r\nFAIL\tsync/atomic\t120.018s\r\n```\r\n#### 4. other faults\r\n\r\n```\r\npanic: test timed out after 2m0s\r\n\r\ngoroutine 441 [running]:\r\ntesting.startAlarm.func1()\r\n\t/home/work/go-github-64k/src/testing/testing.go:702 +0x12c\r\ncreated by time.goFunc\r\n\t/home/work/go-github-64k/src/time/sleep.go:129 +0x3c\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.RunTests(0xa711d8, 0xc0e700, 0x7e, 0x7e, 0xa75601)\r\n\t/home/work/go-github-64k/src/testing/testing.go:581 +0x8a0\r\ntesting.(*M).Run(0x482066fef0, 0x6)\r\n\t/home/work/go-github-64k/src/testing/testing.go:493 +0x84\r\ncmd/go_test.TestMain(0x482066fef0)\r\n\t/home/work/go-github-64k/src/cmd/go/go_test.go:89 +0x5f8\r\nmain.main()\r\n\tcmd/go/_test/_testmain.go:304 +0x114\r\n\r\ngoroutine 17 [syscall, 1 minutes, locked to thread]:\r\nruntime.goexit()\r\n\t/home/work/go-github-64k/src/runtime/asm_arm64.s:1012 +0x4\r\n\r\ngoroutine 20 [syscall, 1 minutes]:\r\nos/signal.loop()\r\n\t/home/work/go-github-64k/src/os/signal/signal_unix.go:22 +0x18\r\ncreated by os/signal.init.1\r\n\t/home/work/go-github-64k/src/os/signal/signal_unix.go:28 +0x3c\r\n\r\ngoroutine 157 [syscall]:\r\nsyscall.Syscall6(0x104, 0x4a66, 0x4820325948, 0x0, 0x48201a6000, 0x0, 0x0, 0x4820325928, 0x457ac0, 0x3ffb16b04b8)\r\n\t/home/work/go-github-64k/src/syscall/asm_linux_arm64.s:36 +0x8\r\nsyscall.wait4(0x4a66, 0x4820325948, 0x0, 0x48201a6000, 0x90, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/zsyscall_linux_arm64.go:172 +0x60\r\nsyscall.Wait4(0x4a66, 0x4820325990, 0x0, 0x48201a6000, 0x1, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/syscall_linux.go:256 +0x54\r\nos.(*Process).wait(0x482000e5a0, 0x482033e000, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/exec_unix.go:22 +0xe0\r\nos.(*Process).Wait(0x482000e5a0, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/doc.go:45 +0x2c\r\nos/exec.(*Cmd).Wait(0x48206bc140, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:379 +0x1e4\r\nos/exec.(*Cmd).Run(0x48206bc140, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:257 +0x5c\r\ncmd/go_test.(*testgoData).doRun(0x482026c8c0, 0x482000e280, 0x2, 0x2, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/cmd/go/go_test.go:255 +0x660\r\ncmd/go_test.(*testgoData).run(0x482026c8c0, 0x482000e280, 0x2, 0x2)\r\n\t/home/work/go-github-64k/src/cmd/go/go_test.go:270 +0x38\r\ncmd/go_test.TestInstalls(0x4820276480)\r\n\t/home/work/go-github-64k/src/cmd/go/go_test.go:1243 +0x8f4\r\ntesting.tRunner(0x4820276480, 0xc0ebf8)\r\n\t/home/work/go-github-64k/src/testing/testing.go:455 +0xbc\r\ncreated by testing.RunTests\r\n\t/home/work/go-github-64k/src/testing/testing.go:560 +0x654\r\n\r\ngoroutine 158 [chan receive, 1 minutes]:\r\ntesting.RunTests.func1(0x48200a8660, 0x4820276480)\r\n\t/home/work/go-github-64k/src/testing/testing.go:564 +0x40\r\ncreated by testing.RunTests\r\n\t/home/work/go-github-64k/src/testing/testing.go:565 +0x6d0\r\n\r\ngoroutine 563 [syscall]:\r\nsyscall.Syscall(0x3f, 0x6, 0x48206d0000, 0x200, 0x0, 0x48200f1001, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/asm_linux_arm64.s:10 +0x8\r\nsyscall.read(0x6, 0x48206d0000, 0x200, 0x200, 0x9675c0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/zsyscall_linux_arm64.go:783 +0x68\r\nsyscall.Read(0x6, 0x48206d0000, 0x200, 0x200, 0xc28e60, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/syscall_unix.go:160 +0x48\r\nos.(*File).read(0x48200ca048, 0x48206d0000, 0x200, 0x200, 0xa70501, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/file_unix.go:211 +0x50\r\nos.(*File).Read(0x48200ca048, 0x48206d0000, 0x200, 0x200, 0x482026d040, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/file.go:95 +0x84\r\nbytes.(*Buffer).ReadFrom(0x482026c990, 0x3ffaf2f4550, 0x48200ca048, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/bytes/buffer.go:173 +0x200\r\nio.copyBuffer(0x3ffaeab0298, 0x482026c990, 0x3ffaf2f4550, 0x48200ca048, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/io/io.go:375 +0x120\r\nio.Copy(0x3ffaeab0298, 0x482026c990, 0x3ffaf2f4550, 0x48200ca048, 0x310b8, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/io/io.go:351 +0x54\r\nos/exec.(*Cmd).writerDescriptor.func1(0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:232 +0xa4\r\nos/exec.(*Cmd).Start.func1(0x482000e340, 0x48206bc140)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:339 +0x20\r\ncreated by os/exec.(*Cmd).Start\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:340 +0x8a4\r\n\r\ngoroutine 562 [syscall]:\r\nsyscall.Syscall(0x3f, 0x4, 0x4820786000, 0x600, 0x0, 0x4820784000, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/asm_linux_arm64.s:10 +0x8\r\nsyscall.read(0x4, 0x4820786000, 0x600, 0x600, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/zsyscall_linux_arm64.go:783 +0x68\r\nsyscall.Read(0x4, 0x4820786000, 0x600, 0x600, 0xc28e60, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/syscall/syscall_unix.go:160 +0x48\r\nos.(*File).read(0x48200ca030, 0x4820786000, 0x600, 0x600, 0x1, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/file_unix.go:211 +0x50\r\nos.(*File).Read(0x48200ca030, 0x4820786000, 0x600, 0x600, 0x1, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/file.go:95 +0x84\r\nbytes.(*Buffer).ReadFrom(0x482026c920, 0x3ffaf2f4550, 0x48200ca030, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/bytes/buffer.go:173 +0x200\r\nio.copyBuffer(0x3ffaeab0298, 0x482026c920, 0x3ffaf2f4550, 0x48200ca030, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/io/io.go:375 +0x120\r\nio.Copy(0x3ffaeab0298, 0x482026c920, 0x3ffaf2f4550, 0x48200ca030, 0x0, 0x0, 0x0)\r\n\t/home/work/go-github-64k/src/io/io.go:351 +0x54\r\nos/exec.(*Cmd).writerDescriptor.func1(0x0, 0x0)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:232 +0xa4\r\nos/exec.(*Cmd).Start.func1(0x482000e300, 0x48206bc140)\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:339 +0x20\r\ncreated by os/exec.(*Cmd).Start\r\n\t/home/work/go-github-64k/src/os/exec/exec.go:340 +0x8a4\r\nFAIL\tcmd/go\t132.422s\r\n```",
	"user": {
		"login": "jefby",
		"id": 3838512,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 13,
	"closed_at": "2015-07-30T19:04:33Z",
	"created_at": "2015-07-30T07:39:01Z",
	"updated_at": "2016-08-05T16:11:41Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
