{
	"id": 165646954,
	"body": "hi @rsc ,\r\n\r\nFor the sake of a conveniency debuging, I pushed the code into my experiments repository on github.\r\n\r\n```\r\ngithub.com/bigwhite/experiments/go15-internal-issue-12217]$tree\r\n.\r\n├── mypkg\r\n│   ├── internal\r\n│   │   └── foo\r\n│   │       └── foo.go\r\n│   ├── main.go\r\n│   └── pkg1\r\n│       └── main.go\r\n└── otherpkg\r\n    └── main.go\r\n\r\n5 directories, 4 files\r\n```\r\n I ran the example again on both Mac and ubuntu，the problem can still be reproduceable. the steps are like below:\r\n\r\n```\r\non Darwin(Darwin TonydeMacBook-Air-2.local 13.1.0 Darwin Kernel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014; root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64), go 1.5.1\r\n\r\n$go get github.com/bigwhite/experiments/go15-internal-issue-12217\r\n$cd $GOPATH/src/github.com/bigwhite/experiments/go15-internal-issue-12217\r\n$cd mypkg\r\n$go run main.go\r\nFoo in github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo  // it is ok\r\n$cd pkg1\r\n$ go run main.go\r\nFoo in github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo //it is ok\r\n$ cd $GOPATH/src/github.com/bigwhite/experiments/go15-internal-issue-12217/otherpkg\r\n$go run main.go\r\nFoo in github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo //it is unexpected result\r\n$go list -json\r\n\r\n{\r\n\t\"Dir\": \"/Users/tony/Test/GoToolsProjects/src/github.com/bigwhite/experiments/go15-internal-issue-12217/otherpkg\",\r\n\t\"ImportPath\": \"github.com/bigwhite/experiments/go15-internal-issue-12217/otherpkg\",\r\n\t\"Name\": \"main\",\r\n\t\"Target\": \"/Users/tony/.bin/go151/bin/otherpkg\",\r\n\t\"Stale\": true,\r\n\t\"Root\": \"/Users/tony/Test/GoToolsProjects\",\r\n\t\"GoFiles\": [\r\n\t\t\"main.go\"\r\n\t],\r\n\t\"Imports\": [\r\n\t\t\"github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo\"\r\n\t],\r\n\t\"Deps\": [\r\n\t\t\"errors\",\r\n\t\t\"fmt\",\r\n\t\t\"github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo\",\r\n\t\t\"io\",\r\n\t\t\"math\",\r\n\t\t\"os\",\r\n\t\t\"reflect\",\r\n\t\t\"runtime\",\r\n\t\t\"strconv\",\r\n\t\t\"sync\",\r\n\t\t\"sync/atomic\",\r\n\t\t\"syscall\",\r\n\t\t\"time\",\r\n\t\t\"unicode/utf8\",\r\n\t\t\"unsafe\"\r\n\t],\r\n\t\"Incomplete\": true,\r\n\t\"DepsErrors\": [\r\n\t\t{\r\n\t\t\t\"ImportStack\": [\r\n\t\t\t\t\"github.com/bigwhite/experiments/go15-internal-issue-12217/otherpkg\",\r\n\t\t\t\t\"github.com/bigwhite/experiments/go15-internal-issue-12217/mypkg/internal/foo\"\r\n\t\t\t],\r\n\t\t\t\"Pos\": \"\",\r\n\t\t\t\"Err\": \"use of internal package not allowed\"\r\n\t\t}\r\n\t]\r\n}\r\n\r\n```\r\n\r\nOn linux ( 3.13.0-32-generic #57-Ubuntu SMP Tue Jul 15 03:51:08 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux) go 1.5.2，I got the same result after executing the same steps above.",
	"user": {
		"login": "bigwhite",
		"id": 419088,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-12-18T02:13:48Z",
	"updated_at": "2015-12-21T06:44:37Z"
}
