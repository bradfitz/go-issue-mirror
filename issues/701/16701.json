{
	"id": 171182811,
	"number": 16701,
	"state": "open",
	"title": "cmd/go: go test -i -compiler=gccgo does not work if gc standard packages are not installed",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\n`go version go1.7rc3 gccgo (GCC) 7.0.0 20160812 (experimental) linux/amd64`\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\n ```\r\n GOARCH=\"amd64\"\r\n GOBIN=\"\"\r\n GOEXE=\"\"\r\n GOHOSTARCH=\"amd64\"\r\n GOHOSTOS=\"linux\"\r\n GOOS=\"linux\"\r\n GOPATH=\"/home/tamird/go\"\r\n GORACE=\"\"\r\n GOROOT=\"/opt/gccgo\"\r\n GOTOOLDIR=\"/opt/gccgo/libexec/gcc/x86_64-pc-linux-gnu/7.0.0\"\r\n CC=\"/opt/gccgo/bin/gcc\"\r\n GOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build700605346=/tmp/go-build -gno-record-gcc-switches\"\r\n CXX=\"/opt/gccgo/bin/g++\"\r\n CGO_ENABLED=\"1\"\r\n```\r\n\r\n3. What did you do?\r\n`go test -i github.com/cockroachdb/cockroach/...`\r\n\r\n4. What did you expect to see?\r\nNothing, exit code 0.\r\n\r\n5. What did you see instead?\r\n```\r\ntamird@go:~/go/src/github.com/cockroachdb/cockroach$ gccgo go test -i github.com/cockroachdb/cockroach/...\r\ncan't load package: cli/user.go:20:2: cannot find package \"bufio\" in any of:\r\n\t/opt/gccgo/src/bufio (from $GOROOT)\r\n\t/home/tamird/go/src/bufio (from $GOPATH)\r\ncan't load package: cli/debug.go:21:2: cannot find package \"bytes\" in any of:\r\n\t/opt/gccgo/src/bytes (from $GOROOT)\r\n\t/home/tamird/go/src/bytes (from $GOPATH)\r\ncan't load package: package cmd/cgo: open /opt/gccgo/src/cmd/cgo: no such file or directory\r\ncan't load package: ../../../google.golang.org/grpc/rpc_util.go:38:2: cannot find package \"compress/gzip\" in any of:\r\n\t/opt/gccgo/src/compress/gzip (from $GOROOT)\r\n\t/home/tamird/go/src/compress/gzip (from $GOPATH)\r\ncan't load package: sql/sort.go:21:2: cannot find package \"container/heap\" in any of:\r\n\t/opt/gccgo/src/container/heap (from $GOROOT)\r\n\t/home/tamird/go/src/container/heap (from $GOPATH)\r\ncan't load package: ../../chzyer/readline/debug.go:4:2: cannot find package \"container/list\" in any of:\r\n\t/opt/gccgo/src/container/list (from $GOROOT)\r\n\t/home/tamird/go/src/container/list (from $GOPATH)\r\ncan't load package: security/certs.go:20:2: cannot find package \"crypto\" in any of:\r\n\t/opt/gccgo/src/crypto (from $GOROOT)\r\n\t/home/tamird/go/src/crypto (from $GOPATH)\r\ncan't load package: security/x509.go:21:2: cannot find package \"crypto/ecdsa\" in any of:\r\n\t/opt/gccgo/src/crypto/ecdsa (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/ecdsa (from $GOPATH)\r\ncan't load package: ../../satori/go.uuid/uuid.go:29:2: cannot find package \"crypto/md5\" in any of:\r\n\t/opt/gccgo/src/crypto/md5 (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/md5 (from $GOPATH)\r\ncan't load package: security/x509.go:22:2: cannot find package \"crypto/rand\" in any of:\r\n\t/opt/gccgo/src/crypto/rand (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/rand (from $GOPATH)\r\ncan't load package: security/x509.go:23:2: cannot find package \"crypto/rsa\" in any of:\r\n\t/opt/gccgo/src/crypto/rsa (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/rsa (from $GOPATH)\r\ncan't load package: ../../satori/go.uuid/uuid.go:31:2: cannot find package \"crypto/sha1\" in any of:\r\n\t/opt/gccgo/src/crypto/sha1 (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/sha1 (from $GOPATH)\r\ncan't load package: sql/parser/builtins.go:23:2: cannot find package \"crypto/sha256\" in any of:\r\n\t/opt/gccgo/src/crypto/sha256 (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/sha256 (from $GOPATH)\r\ncan't load package: storage/replica_command.go:24:2: cannot find package \"crypto/sha512\" in any of:\r\n\t/opt/gccgo/src/crypto/sha512 (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/sha512 (from $GOPATH)\r\ncan't load package: base/context.go:20:2: cannot find package \"crypto/tls\" in any of:\r\n\t/opt/gccgo/src/crypto/tls (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/tls (from $GOPATH)\r\ncan't load package: security/certs.go:22:2: cannot find package \"crypto/x509\" in any of:\r\n\t/opt/gccgo/src/crypto/x509 (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/x509 (from $GOPATH)\r\ncan't load package: security/x509.go:25:2: cannot find package \"crypto/x509/pkix\" in any of:\r\n\t/opt/gccgo/src/crypto/x509/pkix (from $GOROOT)\r\n\t/home/tamird/go/src/crypto/x509/pkix (from $GOPATH)\r\ncan't load package: ../pq/conn.go:8:2: cannot find package \"database/sql\" in any of:\r\n\t/opt/gccgo/src/database/sql (from $GOROOT)\r\n\t/home/tamird/go/src/database/sql (from $GOPATH)\r\ncan't load package: cli/dump.go:21:2: cannot find package \"database/sql/driver\" in any of:\r\n\t/opt/gccgo/src/database/sql/driver (from $GOROOT)\r\n\t/home/tamird/go/src/database/sql/driver (from $GOPATH)\r\ncan't load package: ../../chzyer/readline/remote.go:6:2: cannot find package \"encoding/binary\" in any of:\r\n\t/opt/gccgo/src/encoding/binary (from $GOROOT)\r\n\t/home/tamird/go/src/encoding/binary (from $GOPATH)\r\ncan't load package: util/tracing/tracer.go:21:2: cannot find package \"encoding/gob\" in any of:\r\n\t/opt/gccgo/src/encoding/gob (from $GOROOT)\r\n\t/home/tamird/go/src/encoding/gob (from $GOPATH)\r\ncan't load package: roachpb/data.go:22:2: cannot find package \"encoding/hex\" in any of:\r\n\t/opt/gccgo/src/encoding/hex (from $GOROOT)\r\n\t/home/tamird/go/src/encoding/hex (from $GOPATH)\r\ncan't load package: ../../gogo/protobuf/proto/lib.go:268:2: cannot find package \"encoding/json\" in any of:\r\n\t/opt/gccgo/src/encoding/json (from $GOROOT)\r\n\t/home/tamird/go/src/encoding/json (from $GOPATH)\r\ncan't load package: security/certs.go:23:2: cannot find package \"encoding/pem\" in any of:\r\n\t/opt/gccgo/src/encoding/pem (from $GOROOT)\r\n\t/home/tamird/go/src/encoding/pem (from $GOPATH)\r\ncan't load package: cli/debug.go:22:2: cannot find package \"errors\" in any of:\r\n\t/opt/gccgo/src/errors (from $GOROOT)\r\n\t/home/tamird/go/src/errors (from $GOPATH)\r\ncan't load package: cli/flags.go:20:2: cannot find package \"flag\" in any of:\r\n\t/opt/gccgo/src/flag (from $GOROOT)\r\n\t/home/tamird/go/src/flag (from $GOPATH)\r\ncan't load package: main.go:22:2: cannot find package \"fmt\" in any of:\r\n\t/opt/gccgo/src/fmt (from $GOROOT)\r\n\t/home/tamird/go/src/fmt (from $GOPATH)\r\ncan't load package: testutils/buildutil/build.go:20:2: cannot find package \"go/build\" in any of:\r\n\t/opt/gccgo/src/go/build (from $GOROOT)\r\n\t/home/tamird/go/src/go/build (from $GOPATH)\r\ncan't load package: sql/parser/constant.go:23:2: cannot find package \"go/constant\" in any of:\r\n\t/opt/gccgo/src/go/constant (from $GOROOT)\r\n\t/home/tamird/go/src/go/constant (from $GOPATH)\r\ncan't load package: sql/parser/constant.go:24:2: cannot find package \"go/token\" in any of:\r\n\t/opt/gccgo/src/go/token (from $GOROOT)\r\n\t/home/tamird/go/src/go/token (from $GOPATH)\r\ncan't load package: ../../satori/go.uuid/uuid.go:36:2: cannot find package \"hash\" in any of:\r\n\t/opt/gccgo/src/hash (from $GOROOT)\r\n\t/home/tamird/go/src/hash (from $GOPATH)\r\ncan't load package: roachpb/data.go:25:2: cannot find package \"hash/crc32\" in any of:\r\n\t/opt/gccgo/src/hash/crc32 (from $GOROOT)\r\n\t/home/tamird/go/src/hash/crc32 (from $GOPATH)\r\ncan't load package: package hash/fnv: cannot find package \"hash/fnv\" in any of:\r\n\t/opt/gccgo/src/hash/fnv (from $GOROOT)\r\n\t/home/tamird/go/src/hash/fnv (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:9:2: cannot find package \"io\" in any of:\r\n\t/opt/gccgo/src/io (from $GOROOT)\r\n\t/home/tamird/go/src/io (from $GOPATH)\r\ncan't load package: util/log/file.go:28:2: cannot find package \"io/ioutil\" in any of:\r\n\t/opt/gccgo/src/io/ioutil (from $GOROOT)\r\n\t/home/tamird/go/src/io/ioutil (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:10:2: cannot find package \"log\" in any of:\r\n\t/opt/gccgo/src/log (from $GOROOT)\r\n\t/home/tamird/go/src/log (from $GOPATH)\r\ncan't load package: ../../dustin/go-humanize/bytes.go:5:2: cannot find package \"math\" in any of:\r\n\t/opt/gccgo/src/math (from $GOROOT)\r\n\t/home/tamird/go/src/math (from $GOPATH)\r\ncan't load package: ../../dustin/go-humanize/big.go:4:2: cannot find package \"math/big\" in any of:\r\n\t/opt/gccgo/src/math/big (from $GOROOT)\r\n\t/home/tamird/go/src/math/big (from $GOPATH)\r\ncan't load package: util/retry/retry.go:21:2: cannot find package \"math/rand\" in any of:\r\n\t/opt/gccgo/src/math/rand (from $GOROOT)\r\n\t/home/tamird/go/src/math/rand (from $GOPATH)\r\ncan't load package: ../../chzyer/readline/remote.go:9:2: cannot find package \"net\" in any of:\r\n\t/opt/gccgo/src/net (from $GOROOT)\r\n\t/home/tamird/go/src/net (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:11:2: cannot find package \"net/http\" in any of:\r\n\t/opt/gccgo/src/net/http (from $GOROOT)\r\n\t/home/tamird/go/src/net/http (from $GOPATH)\r\ncan't load package: package net/http/httptest: cannot find package \"net/http/httptest\" in any of:\r\n\t/opt/gccgo/src/net/http/httptest (from $GOROOT)\r\n\t/home/tamird/go/src/net/http/httptest (from $GOPATH)\r\ncan't load package: server/debug.go:31:2: cannot find package \"net/http/pprof\" in any of:\r\n\t/opt/gccgo/src/net/http/pprof (from $GOROOT)\r\n\t/home/tamird/go/src/net/http/pprof (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:12:2: cannot find package \"net/url\" in any of:\r\n\t/opt/gccgo/src/net/url (from $GOROOT)\r\n\t/home/tamird/go/src/net/url (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/bcd.go:13:2: cannot find package \"os\" in any of:\r\n\t/opt/gccgo/src/os (from $GOROOT)\r\n\t/home/tamird/go/src/os (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/bcd.go:14:2: cannot find package \"os/exec\" in any of:\r\n\t/opt/gccgo/src/os/exec (from $GOROOT)\r\n\t/home/tamird/go/src/os/exec (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/bcd.go:15:2: cannot find package \"os/signal\" in any of:\r\n\t/opt/gccgo/src/os/signal (from $GOROOT)\r\n\t/home/tamird/go/src/os/signal (from $GOPATH)\r\ncan't load package: util/log/file.go:30:2: cannot find package \"os/user\" in any of:\r\n\t/opt/gccgo/src/os/user (from $GOROOT)\r\n\t/home/tamird/go/src/os/user (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:15:2: cannot find package \"path/filepath\" in any of:\r\n\t/opt/gccgo/src/path/filepath (from $GOROOT)\r\n\t/home/tamird/go/src/path/filepath (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/bcd.go:16:2: cannot find package \"reflect\" in any of:\r\n\t/opt/gccgo/src/reflect (from $GOROOT)\r\n\t/home/tamird/go/src/reflect (from $GOPATH)\r\ncan't load package: ../../dustin/go-humanize/si.go:6:2: cannot find package \"regexp\" in any of:\r\n\t/opt/gccgo/src/regexp (from $GOROOT)\r\n\t/home/tamird/go/src/regexp (from $GOPATH)\r\ncan't load package: sql/parser/builtins.go:30:2: cannot find package \"regexp/syntax\" in any of:\r\n\t/opt/gccgo/src/regexp/syntax (from $GOROOT)\r\n\t/home/tamird/go/src/regexp/syntax (from $GOPATH)\r\ncan't load package: ../../../golang.org/x/sys/unix/syscall_unix.go:10:2: cannot find package \"runtime\" in any of:\r\n\t/opt/gccgo/src/runtime (from $GOROOT)\r\n\t/home/tamird/go/src/runtime (from $GOPATH)\r\ncan't load package: package runtime/cgo: cannot find package \"runtime/cgo\" in any of:\r\n\t/opt/gccgo/src/runtime/cgo (from $GOROOT)\r\n\t/home/tamird/go/src/runtime/cgo (from $GOPATH)\r\ncan't load package: ../../rcrowley/go-metrics/runtime.go:5:2: cannot find package \"runtime/pprof\" in any of:\r\n\t/opt/gccgo/src/runtime/pprof (from $GOROOT)\r\n\t/home/tamird/go/src/runtime/pprof (from $GOPATH)\r\ncan't load package: ../../dustin/go-humanize/times.go:6:2: cannot find package \"sort\" in any of:\r\n\t/opt/gccgo/src/sort (from $GOROOT)\r\n\t/home/tamird/go/src/sort (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:16:2: cannot find package \"strconv\" in any of:\r\n\t/opt/gccgo/src/strconv (from $GOROOT)\r\n\t/home/tamird/go/src/strconv (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/tracer.go:17:2: cannot find package \"strings\" in any of:\r\n\t/opt/gccgo/src/strings (from $GOROOT)\r\n\t/home/tamird/go/src/strings (from $GOPATH)\r\ncan't load package: ../../../golang.org/x/sys/unix/syscall_unix.go:11:2: cannot find package \"sync\" in any of:\r\n\t/opt/gccgo/src/sync (from $GOROOT)\r\n\t/home/tamird/go/src/sync (from $GOPATH)\r\ncan't load package: ../../chzyer/readline/remote.go:12:2: cannot find package \"sync/atomic\" in any of:\r\n\t/opt/gccgo/src/sync/atomic (from $GOROOT)\r\n\t/home/tamird/go/src/sync/atomic (from $GOPATH)\r\ncan't load package: ../../../golang.org/x/sys/unix/env_unix.go:11:8: cannot find package \"syscall\" in any of:\r\n\t/opt/gccgo/src/syscall (from $GOROOT)\r\n\t/home/tamird/go/src/syscall (from $GOPATH)\r\ncan't load package: acceptance/cluster/cluster.go:21:2: cannot find package \"testing\" in any of:\r\n\t/opt/gccgo/src/testing (from $GOROOT)\r\n\t/home/tamird/go/src/testing (from $GOPATH)\r\ncan't load package: ../../../golang.org/x/net/trace/events.go:20:2: cannot find package \"text/tabwriter\" in any of:\r\n\t/opt/gccgo/src/text/tabwriter (from $GOROOT)\r\n\t/home/tamird/go/src/text/tabwriter (from $GOPATH)\r\ncan't load package: ../../backtrace-labs/go-bcd/bcd.go:19:2: cannot find package \"time\" in any of:\r\n\t/opt/gccgo/src/time (from $GOROOT)\r\n\t/home/tamird/go/src/time (from $GOPATH)\r\ncan't load package: ../../chzyer/readline/runes.go:5:2: cannot find package \"unicode\" in any of:\r\n\t/opt/gccgo/src/unicode (from $GOROOT)\r\n\t/home/tamird/go/src/unicode (from $GOPATH)\r\ncan't load package: ../../gogo/protobuf/proto/text_parser.go:49:2: cannot find package \"unicode/utf8\" in any of:\r\n\t/opt/gccgo/src/unicode/utf8 (from $GOROOT)\r\n\t/home/tamird/go/src/unicode/utf8 (from $GOPATH)\r\ntamird@go:~/go/src/github.com/cockroachdb/cockroach$\r\n```\r\n\r\n@ianlancetaylor \r\n\r\n",
	"user": {
		"login": "tamird",
		"id": 1535036,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "ianlancetaylor",
		"id": 3194333,
		"type": "User",
		"site_admin": false
	},
	"comments": 6,
	"created_at": "2016-08-15T14:35:34Z",
	"updated_at": "2016-08-15T18:07:58Z",
	"milestone": {
		"id": 1055141,
		"number": 6,
		"title": "Unplanned"
	}
}
