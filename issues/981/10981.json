{
	"id": 82144780,
	"number": 10981,
	"state": "open",
	"title": "cmd/compile: reconsider zeroing thresholds for arm64",
	"body": "This might be working as intended, but this doesn't smell right to me. Maybe we should use DUFFZERO or something similar here?\r\n\r\n```\r\npackage p\r\n\r\nfunc g() int {\r\n\tn := [100]int{}\r\n\t_ = n\r\n\treturn 3\r\n}\r\n```\r\n\r\nAssembles to:\r\n\r\n```\r\n\"\".g t=1 size=464 value=0 args=0x8 locals=0x328 leaf\r\n\t0x0000 00000 (/Users/jbleechersnyder/sg.go:9)\tTEXT\t\"\".g(SB), $808-8\r\n\t0x0000 00000 (/Users/jbleechersnyder/sg.go:9)\tMOVD\t16(g), R1\r\n\t0x0004 00004 (/Users/jbleechersnyder/sg.go:9)\tSUB\t$816, RSP, R2\r\n\t0x0008 00008 (/Users/jbleechersnyder/sg.go:9)\tCMP\tR1, R2\r\n\t0x000c 00012 (/Users/jbleechersnyder/sg.go:9)\tBHI\t32\r\n\t0x0010 00016 (/Users/jbleechersnyder/sg.go:9)\tMOVD\tR30, R3\r\n\t0x0014 00020 (/Users/jbleechersnyder/sg.go:9)\tMOVD\t$816, R27\r\n\t0x0018 00024 (/Users/jbleechersnyder/sg.go:9)\tCALL\truntime.morestack_noctxt(SB)\r\n\t0x001c 00028 (/Users/jbleechersnyder/sg.go:9)\tJMP\t0\r\n\t0x0020 00032 (/Users/jbleechersnyder/sg.go:9)\tNOP\r\n\t0x0020 00032 (/Users/jbleechersnyder/sg.go:9)\tSUB\t$816, RSP\r\n\t0x0024 00036 (/Users/jbleechersnyder/sg.go:9)\tFUNCDATA\tZR, gclocals·5184031d3a32a42d85027f073f873668(SB)\r\n\t0x0024 00036 (/Users/jbleechersnyder/sg.go:9)\tFUNCDATA\t$1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)\r\n\t0x0024 00036 (/Users/jbleechersnyder/sg.go:9)\tMOVD\tZR, R0\r\n\t0x0028 00040 (/Users/jbleechersnyder/sg.go:10)\tMOVD\t$\"\".n-800(SP), R16\r\n\t0x002c 00044 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, (R16)\r\n\t0x0030 00048 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 8(R16)\r\n\t0x0034 00052 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 16(R16)\r\n\t0x0038 00056 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 24(R16)\r\n\t0x003c 00060 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 32(R16)\r\n\t0x0040 00064 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 40(R16)\r\n\t0x0044 00068 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 48(R16)\r\n\t0x0048 00072 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 56(R16)\r\n\t0x004c 00076 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 64(R16)\r\n\t0x0050 00080 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 72(R16)\r\n\t0x0054 00084 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 80(R16)\r\n\t0x0058 00088 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 88(R16)\r\n\t0x005c 00092 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 96(R16)\r\n\t0x0060 00096 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 104(R16)\r\n\t0x0064 00100 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 112(R16)\r\n\t0x0068 00104 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 120(R16)\r\n\t0x006c 00108 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 128(R16)\r\n\t0x0070 00112 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 136(R16)\r\n\t0x0074 00116 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 144(R16)\r\n\t0x0078 00120 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 152(R16)\r\n\t0x007c 00124 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 160(R16)\r\n\t0x0080 00128 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 168(R16)\r\n\t0x0084 00132 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 176(R16)\r\n\t0x0088 00136 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 184(R16)\r\n\t0x008c 00140 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 192(R16)\r\n\t0x0090 00144 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 200(R16)\r\n\t0x0094 00148 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 208(R16)\r\n\t0x0098 00152 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 216(R16)\r\n\t0x009c 00156 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 224(R16)\r\n\t0x00a0 00160 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 232(R16)\r\n\t0x00a4 00164 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 240(R16)\r\n\t0x00a8 00168 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 248(R16)\r\n\t0x00ac 00172 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 256(R16)\r\n\t0x00b0 00176 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 264(R16)\r\n\t0x00b4 00180 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 272(R16)\r\n\t0x00b8 00184 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 280(R16)\r\n\t0x00bc 00188 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 288(R16)\r\n\t0x00c0 00192 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 296(R16)\r\n\t0x00c4 00196 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 304(R16)\r\n\t0x00c8 00200 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 312(R16)\r\n\t0x00cc 00204 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 320(R16)\r\n\t0x00d0 00208 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 328(R16)\r\n\t0x00d4 00212 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 336(R16)\r\n\t0x00d8 00216 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 344(R16)\r\n\t0x00dc 00220 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 352(R16)\r\n\t0x00e0 00224 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 360(R16)\r\n\t0x00e4 00228 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 368(R16)\r\n\t0x00e8 00232 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 376(R16)\r\n\t0x00ec 00236 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 384(R16)\r\n\t0x00f0 00240 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 392(R16)\r\n\t0x00f4 00244 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 400(R16)\r\n\t0x00f8 00248 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 408(R16)\r\n\t0x00fc 00252 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 416(R16)\r\n\t0x0100 00256 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 424(R16)\r\n\t0x0104 00260 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 432(R16)\r\n\t0x0108 00264 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 440(R16)\r\n\t0x010c 00268 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 448(R16)\r\n\t0x0110 00272 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 456(R16)\r\n\t0x0114 00276 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 464(R16)\r\n\t0x0118 00280 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 472(R16)\r\n\t0x011c 00284 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 480(R16)\r\n\t0x0120 00288 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 488(R16)\r\n\t0x0124 00292 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 496(R16)\r\n\t0x0128 00296 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 504(R16)\r\n\t0x012c 00300 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 512(R16)\r\n\t0x0130 00304 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 520(R16)\r\n\t0x0134 00308 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 528(R16)\r\n\t0x0138 00312 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 536(R16)\r\n\t0x013c 00316 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 544(R16)\r\n\t0x0140 00320 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 552(R16)\r\n\t0x0144 00324 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 560(R16)\r\n\t0x0148 00328 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 568(R16)\r\n\t0x014c 00332 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 576(R16)\r\n\t0x0150 00336 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 584(R16)\r\n\t0x0154 00340 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 592(R16)\r\n\t0x0158 00344 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 600(R16)\r\n\t0x015c 00348 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 608(R16)\r\n\t0x0160 00352 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 616(R16)\r\n\t0x0164 00356 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 624(R16)\r\n\t0x0168 00360 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 632(R16)\r\n\t0x016c 00364 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 640(R16)\r\n\t0x0170 00368 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 648(R16)\r\n\t0x0174 00372 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 656(R16)\r\n\t0x0178 00376 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 664(R16)\r\n\t0x017c 00380 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 672(R16)\r\n\t0x0180 00384 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 680(R16)\r\n\t0x0184 00388 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 688(R16)\r\n\t0x0188 00392 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 696(R16)\r\n\t0x018c 00396 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 704(R16)\r\n\t0x0190 00400 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 712(R16)\r\n\t0x0194 00404 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 720(R16)\r\n\t0x0198 00408 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 728(R16)\r\n\t0x019c 00412 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 736(R16)\r\n\t0x01a0 00416 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 744(R16)\r\n\t0x01a4 00420 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 752(R16)\r\n\t0x01a8 00424 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 760(R16)\r\n\t0x01ac 00428 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 768(R16)\r\n\t0x01b0 00432 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 776(R16)\r\n\t0x01b4 00436 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 784(R16)\r\n\t0x01b8 00440 (/Users/jbleechersnyder/sg.go:10)\tMOVD\tZR, 792(R16)\r\n\t0x01bc 00444 (/Users/jbleechersnyder/sg.go:12)\tMOVD\t$3, R0\r\n\t0x01c0 00448 (/Users/jbleechersnyder/sg.go:12)\tMOVD\tR0, \"\".~r0(FP)\r\n\t0x01c4 00452 (/Users/jbleechersnyder/sg.go:12)\tADD\t$816, RSP\r\n\t0x01c8 00456 (/Users/jbleechersnyder/sg.go:12)\tRET\t(R30)\r\n\t0x0000 81 0b 40 f9 e2 c3 0c d1 5f 00 01 eb a8 00 00 54  ..@....._......T\r\n\t0x0010 e3 03 1e aa 1b 66 80 d2 00 00 00 94 f9 ff ff 17  .....f..........\r\n\t0x0020 ff c3 0c d1 00 00 80 d2 f0 43 00 91 1f 02 00 f9  .........C......\r\n\t0x0030 1f 06 00 f9 1f 0a 00 f9 1f 0e 00 f9 1f 12 00 f9  ................\r\n\t0x0040 1f 16 00 f9 1f 1a 00 f9 1f 1e 00 f9 1f 22 00 f9  .............\"..\r\n\t0x0050 1f 26 00 f9 1f 2a 00 f9 1f 2e 00 f9 1f 32 00 f9  .\u0026...*.......2..\r\n\t0x0060 1f 36 00 f9 1f 3a 00 f9 1f 3e 00 f9 1f 42 00 f9  .6...:...\u003e...B..\r\n\t0x0070 1f 46 00 f9 1f 4a 00 f9 1f 4e 00 f9 1f 52 00 f9  .F...J...N...R..\r\n\t0x0080 1f 56 00 f9 1f 5a 00 f9 1f 5e 00 f9 1f 62 00 f9  .V...Z...^...b..\r\n\t0x0090 1f 66 00 f9 1f 6a 00 f9 1f 6e 00 f9 1f 72 00 f9  .f...j...n...r..\r\n\t0x00a0 1f 76 00 f9 1f 7a 00 f9 1f 7e 00 f9 1f 82 00 f9  .v...z...~......\r\n\t0x00b0 1f 86 00 f9 1f 8a 00 f9 1f 8e 00 f9 1f 92 00 f9  ................\r\n\t0x00c0 1f 96 00 f9 1f 9a 00 f9 1f 9e 00 f9 1f a2 00 f9  ................\r\n\t0x00d0 1f a6 00 f9 1f aa 00 f9 1f ae 00 f9 1f b2 00 f9  ................\r\n\t0x00e0 1f b6 00 f9 1f ba 00 f9 1f be 00 f9 1f c2 00 f9  ................\r\n\t0x00f0 1f c6 00 f9 1f ca 00 f9 1f ce 00 f9 1f d2 00 f9  ................\r\n\t0x0100 1f d6 00 f9 1f da 00 f9 1f de 00 f9 1f e2 00 f9  ................\r\n\t0x0110 1f e6 00 f9 1f ea 00 f9 1f ee 00 f9 1f f2 00 f9  ................\r\n\t0x0120 1f f6 00 f9 1f fa 00 f9 1f fe 00 f9 1f 02 01 f9  ................\r\n\t0x0130 1f 06 01 f9 1f 0a 01 f9 1f 0e 01 f9 1f 12 01 f9  ................\r\n\t0x0140 1f 16 01 f9 1f 1a 01 f9 1f 1e 01 f9 1f 22 01 f9  .............\"..\r\n\t0x0150 1f 26 01 f9 1f 2a 01 f9 1f 2e 01 f9 1f 32 01 f9  .\u0026...*.......2..\r\n\t0x0160 1f 36 01 f9 1f 3a 01 f9 1f 3e 01 f9 1f 42 01 f9  .6...:...\u003e...B..\r\n\t0x0170 1f 46 01 f9 1f 4a 01 f9 1f 4e 01 f9 1f 52 01 f9  .F...J...N...R..\r\n\t0x0180 1f 56 01 f9 1f 5a 01 f9 1f 5e 01 f9 1f 62 01 f9  .V...Z...^...b..\r\n\t0x0190 1f 66 01 f9 1f 6a 01 f9 1f 6e 01 f9 1f 72 01 f9  .f...j...n...r..\r\n\t0x01a0 1f 76 01 f9 1f 7a 01 f9 1f 7e 01 f9 1f 82 01 f9  .v...z...~......\r\n\t0x01b0 1f 86 01 f9 1f 8a 01 f9 1f 8e 01 f9 60 00 80 d2  ............`...\r\n\t0x01c0 e0 9f 01 f9 ff c3 0c 91 c0 03 5f d6 00 00 00 00  .........._.....\r\n\trel 24+4 t=7 runtime.morestack_noctxt+2483027968\r\n\trel 456+0 t=8 +0\r\n```",
	"user": {
		"login": "josharian",
		"id": 67496,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "josharian",
		"id": 67496,
		"type": "User",
		"site_admin": false
	},
	"comments": 3,
	"created_at": "2015-05-28T22:07:22Z",
	"updated_at": "2015-11-04T20:52:41Z",
	"milestone": {
		"id": 1055141,
		"number": 6,
		"title": "Unplanned"
	}
}
