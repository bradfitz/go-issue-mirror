{
	"id": 51280226,
	"number": 3181,
	"state": "closed",
	"title": "Simple helloworld binary on windows,darwin and fedora is about 1.2M but on  CentOS 5.7 it is only 223K.",
	"body": "\u003cpre\u003eI was assuming there will be an effort to reduce generated binary size later but I don't\nunderstand why same weekly go src generated go compiler produce smaller binary file on\nCentOS 5.7 ?\n\nWhat steps will reproduce the problem?\n1. helloworld is 1.2M on win 7.\nC:\\goweekly\\gocode\\src\\hello\u0026gt;go build -x helloworld.go\nWORK=C:\\Users\\aty010\\AppData\\Local\\Temp\\go-build072947126\nmkdir -p $WORK\\_\\helloworld\\_obj\\\ncd $GOROOT\\gocode\\src\\hello/.\n$GOROOT\\pkg\\tool\\windows_386\\8g.exe -o $WORK\\_\\helloworld\\_obj\\_go_.8 -p _/hello\nworld -I $WORK $GOROOT\\gocode\\src\\hello\\helloworld.go\n$GOROOT\\pkg\\tool\\windows_386\\pack.exe grc $WORK\\_\\helloworld.a $WORK\\_\\helloworl\nd\\_obj\\_go_.8\n$GOROOT\\pkg\\tool\\windows_386\\8l.exe -o $WORK\\_\\helloworld\\_obj\\a.out.exe -L $WOR\nK $WORK\\_\\helloworld.a\ncp $WORK\\_\\helloworld\\_obj\\a.out.exe helloworld.exe\n\nC:\\goweekly\\gocode\\src\\hello\u0026gt;ls -rt\nhelloworld.go  helloworld.exe\n\nC:\\goweekly\\gocode\\src\\hello\u0026gt;ls -lrt\ntotal 598\n-rw-r--r--    1 ATY010   Administ       75 Feb  3 13:53 helloworld.go\n-rwxr-xr-x    1 ATY010   Administ  1222144 Mar  3 23:01 helloworld.exe\n\nC:\\goweekly\\gocode\\src\\hello\u0026gt;go version\ngo version weekly.2012-02-22 +eb997f446b2e\n\nC:\\goweekly\\gocode\\src\\hello\u0026gt;\n\n\n2. helloworld is 1.2M on fedora 16.\n[weekly@640m hw]$ cat /etc/redhat-release\nFedora release 16 (Verne)\n[weekly@640m hw]$\n\n[weekly@640m hw]$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=/usr/bin/gcc\nCOLLECT_LTO_WRAPPER=/usr/libexec/gcc/i686-redhat-linux/4.6.2/lto-wrapper\nTarget: i686-redhat-linux\nConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man\n--infodir=/usr/share/info --with-bugurl=\u003ca href=\"http://bugzilla.redhat.com/bugzilla\"\u003ehttp://bugzilla.redhat.com/bugzilla\u003c/a\u003e\n--enable-bootstrap --enable-shared --enable-threads=posix --enable-checking=release\n--with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions\n--enable-gnu-unique-object --enable-linker-build-id\n--enable-languages=c,c++,objc,obj-c++,java,fortran,ada,go,lto --enable-plugin\n--enable-java-awt=gtk --disable-dssi\n--with-java-home=/usr/lib/jvm/java-1.5.0-gcj-1.5.0.0/jre --enable-libgcj-multifile\n--enable-java-maintainer-mode --with-ecj-jar=/usr/share/java/eclipse-ecj.jar\n--disable-libjava-multilib --with-ppl --with-cloog --with-tune=generic --with-arch=i686\n--build=i686-redhat-linux\nThread model: posix\ngcc version 4.6.2 20111027 (Red Hat 4.6.2-1) (GCC)\n[weekly@640m hw]$ ls -l hw*\n-rwxrwxr-x  1 weekly weekly 1261540 Mar  3 22:41 hw\n-rw-rw-r--. 1 weekly weekly      81 Feb  7 17:29 hw.go\n[weekly@640m hw]$ pwd\n/home/weekly/gocode/src/hw\n[weekly@640m hw]$\n\nWhat is the expected output?\n\n\n\n[root@learn hw]# go build -x helloworld.go\nWORK=/tmp/go-build828264604\nmkdir -p $WORK/_/helloworld/_obj/\ncd $GOROOTcode/src/hw/.\n$GOROOT/pkg/tool/linux_386/8g -o $WORK/_/helloworld/_obj/_go_.8 -p _/helloworld -I $WORK\n$GOROOTcode/src/hw/helloworld.go\n$GOROOT/pkg/tool/linux_386/pack grc $WORK/_/helloworld.a $WORK/_/helloworld/_obj/_go_.8\n$GOROOT/pkg/tool/linux_386/8l -o $WORK/_/helloworld/_obj/a.out -L $WORK\n$WORK/_/helloworld.a\ncp $WORK/_/helloworld/_obj/a.out helloworld\n[root@learn hw]# ls -lrt\ntotal 232\n-rw-r--r-- 1 root root    272 Mar  3 20:39 helloworld.go\n-rwxr-xr-x 1 root root 227865 Mar  3 20:51 helloworld\n[root@learn hw]# ./helloworld\nhello, world\n[root@learn hw]# pwd\n/root/gocode/src/hw\n[root@learn hw]# pwd\n/root/gocode/src/hw\n[root@learn hw]# go version\ngo version weekly.2012-02-22 +96bd78e7d35e\n[root@learn hw]# cat /etc/redhat-release\nCentOS release 5.7 (Final)\n[root@learn hw]# gcc -v\nUsing built-in specs.\nTarget: i386-redhat-linux\nConfigured with: ../configure --prefix=/usr --mandir=/usr/share/man\n--infodir=/usr/share/info --enable-shared --enable-threads=posix\n--enable-checking=release --with-system-zlib --enable-__cxa_atexit\n--disable-libunwind-exceptions --enable-libgcj-multifile\n--enable-languages=c,c++,objc,obj-c++,java,fortran,ada --enable-java-awt=gtk\n--disable-dssi --disable-plugin --with-java-home=/usr/lib/jvm/java-1.4.2-gcj-1.4.2.0/jre\n--with-cpu=generic --host=i386-redhat-linux\nThread model: posix\ngcc version 4.1.2 20080704 (Red Hat 4.1.2-51)\n[root@learn hw]#\n\n3. helloworld binary on Darwin is 1.3M.\n\nimac:hello weekly$ go build -x helloworld.go\nWORK=/tmp/go-build930742753\nmkdir -p $WORK/_/helloworld/_obj/\ncd $GOROOTcode/src/hello/.\n$GOROOT/pkg/tool/darwin_amd64/6g -o $WORK/_/helloworld/_obj/_go_.6 -p _/helloworld -I\n$WORK $GOROOTcode/src/hello/helloworld.go\n$GOROOT/pkg/tool/darwin_amd64/pack grc $WORK/_/helloworld.a\n$WORK/_/helloworld/_obj/_go_.6\n$GOROOT/pkg/tool/darwin_amd64/6l -o $WORK/_/helloworld/_obj/a.out -L $WORK\n$WORK/_/helloworld.a\ncp $WORK/_/helloworld/_obj/a.out helloworld\nimac:hello weekly$ ls -lrt\ntotal 2520\n-rw-r--r--  1 weekly  staff       82 Mar  3 23:11 helloworld.go\n-rwxr-xr-x  1 weekly  staff  1282064 Mar  3 23:11 helloworld\nimac:hello weekly$ go version\ngo version weekly.2012-02-22 +96bd78e7d35e\nimac:hello weekly$\n\nWhat do you see instead?\n\n\nWhich compiler are you using (5g, 6g, 8g, gccgo)?\n\n\nWhich operating system are you using?\n\n\nWhich revision are you using?  (hg identify)\n\n\nPlease provide any additional information below.\u003c/pre\u003e",
	"user": {
		"login": "tjyang",
		"id": 378638,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		},
		{
			"name": "Performance"
		},
		{
			"name": "Unfortunate"
		}
	],
	"comments": 3,
	"closed_at": "2014-12-08T10:16:31Z",
	"created_at": "2012-03-04T05:20:00Z",
	"updated_at": "2016-06-24T21:29:26Z"
}
