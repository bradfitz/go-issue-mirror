{
	"id": 135938298,
	"body": "I am getting this bug, without using go-fuzz.\r\n```\r\ngo version devel +805e56e Sat Aug 29 02:43:57 2015 +0000 darwin/amd64\r\n\r\nDarwin Kernel Version 14.4.0 (rsc's pprof patch applied)\r\n```\r\n\r\nTo reproduce:\r\n\r\n1) pull latest golang.org/x/exp (commit 574adff1580fca7a18de551f4102549e9e2ba3f4)\r\n2) make the following changes:\r\n```\r\n$ git diff\r\ndiff --git a/shiny/example/goban/main.go b/shiny/example/goban/main.go\r\nindex d4a1df8..bac3ec1 100644\r\n--- a/shiny/example/goban/main.go\r\n+++ b/shiny/example/goban/main.go\r\n@@ -20,6 +20,8 @@ import (\r\n        stdDraw \"image/draw\"\r\n        \"log\"\r\n        \"math/rand\"\r\n+       \"os\"\r\n+       \"runtime/pprof\"\r\n        \"time\"\r\n \r\n        \"golang.org/x/exp/shiny/driver\"\r\n@@ -41,6 +43,16 @@ func main() {\r\n        rand.Seed(int64(time.Now().Nanosecond()))\r\n        board := NewBoard(9, *scale)\r\n \r\n+       f, _ := os.Create(\"prof.out\")\r\n+       if err := pprof.StartCPUProfile(f); err == nil {\r\n+               go func() {\r\n+                       time.Sleep(1 * time.Minute)\r\n+                       pprof.StopCPUProfile()\r\n+                       os.Exit(0)\r\n+               }()\r\n+       } else {\r\n+               log.Fatal(err)\r\n+       }\r\n        driver.Main(func(s screen.Screen) {\r\n                w, err := s.NewWindow(nil)\r\n                if err != nil {\r\n```\r\n3) run:\r\n```\r\n$ go run board.go main.go xy.go \r\n2015/08/29 13:03:41 sendLifecycle: StageAlive\r\n2015/08/29 13:03:41 sendLifecycle: StageVisible\r\n2015/08/29 13:03:41 sendLifecycle: StageFocused\r\n2015/08/29 13:03:51 sendLifecycle: StageVisible\r\nruntime: newstack called from g=0xc820000300\r\n\tm=0xc82002e000 m-\u003ecurg=0xc820000600 m-\u003eg0=0xc820000480 m-\u003egsignal=0xc820000300\r\nruntime.sigtrampgo(0x4044ac0, 0x1b0000001e, 0xb06b7970, 0xb06b79d8)\r\n\t/Users/jnj/src/go/src/runtime/signal_darwin.go:68 +0xc1\r\nruntime.sigtramp(0x0, 0x0, 0x0, 0x200003500000085, 0x114c32000, 0x0, 0xb06b7aa8, 0xb06b7a90, 0x0, 0xb06b7aa8, ...)\r\n\t/Users/jnj/src/go/src/runtime/sys_darwin_amd64.s:237 +0x23\r\nfatal error: runtime: wrong goroutine in newstack\r\n\r\nruntime stack:\r\nruntime.throw(0x420cfe0, 0x24)\r\n\t/Users/jnj/src/go/src/runtime/panic.go:527 +0x90\r\nruntime.newstack()\r\n\t/Users/jnj/src/go/src/runtime/stack1.go:676 +0x260\r\nruntime.morestack()\r\n\t/Users/jnj/src/go/src/runtime/asm_amd64.s:330 +0x7f\r\n\r\ngoroutine 17 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/Users/jnj/src/go/src/runtime/asm_amd64.s:1739 +0x1 fp=0xc82003cfb8 sp=0xc82003cfb0\r\n\r\ngoroutine 1 [syscall, locked to thread]:\r\ngolang.org/x/exp/shiny/driver/gldriver._Cfunc_startDriver()\r\n\tgolang.org/x/exp/shiny/driver/gldriver/_obj/_cgo_gotypes.go:140 +0x31\r\ngolang.org/x/exp/shiny/driver/gldriver.main(0xc821edaf50, 0x0, 0x0)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/cocoa.go:72 +0x193\r\ngolang.org/x/exp/shiny/driver/gldriver.Main(0xc821edaf50)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/gldriver.go:26 +0x30\r\ngolang.org/x/exp/shiny/driver.main(0xc821edaf50)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/driver_darwin.go:15 +0x21\r\ngolang.org/x/exp/shiny/driver.Main(0xc821edaf50)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/driver.go:24 +0x21\r\nmain.main()\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/example/goban/main.go:122 +0x14e\r\n\r\ngoroutine 34 [syscall]:\r\nruntime.CPUProfile(0x0, 0x0, 0x0)\r\n\t/Users/jnj/src/go/src/runtime/cpuprof.go:418 +0x34\r\nruntime/pprof.profileWriter(0x47a4210, 0xc820090070)\r\n\t/Users/jnj/src/go/src/runtime/pprof/pprof.go:599 +0x1c\r\ncreated by runtime/pprof.StartCPUProfile\r\n\t/Users/jnj/src/go/src/runtime/pprof/pprof.go:593 +0x145\r\n\r\ngoroutine 35 [sleep]:\r\ntime.Sleep(0xdf8475800)\r\n\t/Users/jnj/src/go/src/runtime/time.go:59 +0xf9\r\nmain.main.func1()\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/example/goban/main.go:49 +0x26\r\ncreated by main.main\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/example/goban/main.go:52 +0x10f\r\n\r\ngoroutine 36 [chan receive]:\r\nmain.main.func2(0x59108d0, 0x42c9360)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/example/goban/main.go:74 +0x35e\r\ngolang.org/x/exp/shiny/driver/gldriver.driverStarted.func1()\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/cocoa.go:79 +0x47\r\ncreated by golang.org/x/exp/shiny/driver/gldriver.driverStarted\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/cocoa.go:81 +0x2b\r\n\r\ngoroutine 4 [select]:\r\ngolang.org/x/exp/shiny/driver/internal/pump.(*Pump).run(0xc82000e1a0)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/internal/pump/pump.go:62 +0x4df\r\ncreated by golang.org/x/exp/shiny/driver/internal/pump.Make\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/internal/pump/pump.go:15 +0x116\r\n\r\ngoroutine 5 [select, locked to thread]:\r\ngolang.org/x/exp/shiny/driver/gldriver.drawLoop(0xc82006c0e0, 0x4402a60)\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/cocoa.go:124 +0x2a6\r\ncreated by golang.org/x/exp/shiny/driver/gldriver.(*screenImpl).NewWindow\r\n\t/Users/jnj/src/golang.org/x/exp/shiny/driver/gldriver/screen.go:103 +0x28e\r\n\r\ngoroutine 50 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/Users/jnj/src/go/src/runtime/asm_amd64.s:1739 +0x1\r\n\r\ngoroutine 51 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/Users/jnj/src/go/src/runtime/asm_amd64.s:1739 +0x1\r\nexit status 2\r\n```\r\nIt seems to take a random amount of time for the bug to manifest (up to 10 seconds).",
	"user": {
		"login": "jnjackins",
		"id": 449232,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-08-29T04:07:43Z",
	"updated_at": "2015-08-29T04:07:43Z"
}
