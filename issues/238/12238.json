{
	"id": 102221655,
	"number": 12238,
	"state": "closed",
	"title": "runtime: panic on system stack during cgo callback",
	"body": "I upgraded from 1.4 to 1.5 to have #11907 fixed. And every several minutes I get \"panic during panic\". That's all that I can see. It always occurs on cgo callback. \r\nPlease, let me know which information could be useful, I'll provide it.\r\n```\r\npanic: runtime error: index out of range\r\nfatal error: panic on system stack\r\n\r\nruntime stack:\r\nruntime.throw(0x81b8f0, 0x15)\r\n        /usr/local/go/src/runtime/panic.go:527 +0x90 fp=0x7f133d7f6f38 sp=0x7f133d7f6f20\r\nruntime.gopanic(0x7653c0, 0xc820010030)\r\n        /usr/local/go/src/runtime/panic.go:354 +0xb6 fp=0x7f133d7f6fb8 sp=0x7f133d7f6f38\r\nruntime.panicindex()\r\n        /usr/local/go/src/runtime/panic.go:12 +0x49 fp=0x7f133d7f6fe0 sp=0x7f133d7f6fb8\r\nruntime.gentraceback(0x44801f, 0xc820034a58, 0x0, 0xc820000600, 0x0, 0xc820034a98, 0x20, 0x0, 0x0, 0x0, ...)\r\n        /usr/local/go/src/runtime/traceback.go:255 +0x1206 fp=0x7f133d7f7110 sp=0x7f133d7f6fe0\r\nruntime.callers.func1()\r\n        /usr/local/go/src/runtime/traceback.go:566 +0xa2 fp=0x7f133d7f7190 sp=0x7f133d7f7110\r\nruntime.systemstack(0x7f133d7f7198)\r\n        /usr/local/go/src/runtime/asm_amd64.s:262 +0x79 fp=0x7f133d7f7198 sp=0x7f133d7f7190\r\nruntime.mstart()\r\n        /usr/local/go/src/runtime/proc1.go:674 fp=0x7f133d7f71a0 sp=0x7f133d7f7198\r\n\r\ngoroutine 17 [running, locked to thread]:\r\nruntime.systemstack_switch()\r\n        /usr/local/go/src/runtime/asm_amd64.s:216 fp=0xc8200349e8 sp=0xc8200349e0\r\nruntime.callers(0x4, 0xc820034a98, 0x20, 0x20, 0x4736b0)\r\n        /usr/local/go/src/runtime/traceback.go:567 +0xb0 fp=0xc820034a58 sp=0xc8200349e8\r\nruntime.mProf_Malloc(0xc820e96000, 0x96000)\r\n        /usr/local/go/src/runtime/mprof.go:235 +0x7f fp=0xc820034bd8 sp=0xc820034a58\r\nruntime.profilealloc(0xc820026000, 0xc820e96000, 0x96000)\r\n        /usr/local/go/src/runtime/malloc.go:811 +0x98 fp=0xc820034c00 sp=0xc820034bd8\r\nruntime.mallocgc(0x96000, 0x0, 0x3, 0xc820652140)\r\n        /usr/local/go/src/runtime/malloc.go:699 +0x5d3 fp=0xc820034cd0 sp=0xc820034c00\r\nruntime.rawstring(0x94fd0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /usr/local/go/src/runtime/string.go:264 +0x70 fp=0xc820034d18 sp=0xc820034cd0\r\nruntime.gostringn(0x7f13101325e8, 0x94fd0, 0x0, 0x0)\r\n        /usr/local/go/src/runtime/string.go:330 +0x48 fp=0xc820034d78 sp=0xc820034d18\r\ngithub.com/bioothod/elliptics-go/elliptics._Cfunc_GoStringN(0x7f13101325e8, 0xc800094fd0, 0x0, 0x0)\r\n        ??:0 +0x37 fp=0xc820034da0 sp=0xc820034d78\r\ngithub.com/bioothod/elliptics-go/elliptics.go_stat_callback(0x7f133d7f72a0, 0x380)\r\n        /root/go/src/github.com/bioothod/elliptics-go/elliptics/stat.go:450 +0x240 fp=0xc820034ee0 sp=0xc820034da0\r\nruntime.call32(0x0, 0x7f133d7f71c8, 0x7f133d7f7250, 0x10)\r\n        /usr/local/go/src/runtime/asm_amd64.s:437 +0x3e fp=0xc820034f08 sp=0xc820034ee0\r\nruntime.cgocallbackg1()\r\n        /usr/local/go/src/runtime/cgocall.go:252 +0x10c fp=0xc820034f40 sp=0xc820034f08\r\nruntime.cgocallbackg()\r\n        /usr/local/go/src/runtime/cgocall.go:177 +0xd7 fp=0xc820034fa0 sp=0xc820034f40\r\npanic: runtime error: index out of range\r\nfatal error: panic on system stack\r\npanic during panic\r\n\r\nruntime stack:\r\nruntime.startpanic_m()\r\n        /usr/local/go/src/runtime/panic1.go:67 +0x141 fp=0x7f133d7f6b58 sp=0x7f133d7f6b30\r\nruntime.systemstack(0x877230)\r\n        /usr/local/go/src/runtime/asm_amd64.s:278 +0xab fp=0x7f133d7f6b60 sp=0x7f133d7f6b58\r\nruntime.startpanic()\r\n        /usr/local/go/src/runtime/panic.go:505 +0x14 fp=0x7f133d7f6b70 sp=0x7f133d7f6b60\r\nruntime.throw(0x81b8f0, 0x15)\r\n        /usr/local/go/src/runtime/panic.go:526 +0x83 fp=0x7f133d7f6b88 sp=0x7f133d7f6b70\r\nruntime.gopanic(0x7653c0, 0xc820010030)\r\n        /usr/local/go/src/runtime/panic.go:354 +0xb6 fp=0x7f133d7f6c08 sp=0x7f133d7f6b88\r\nruntime.panicindex()\r\n        /usr/local/go/src/runtime/panic.go:12 +0x49 fp=0x7f133d7f6c30 sp=0x7f133d7f6c08\r\nruntime.gentraceback(0x47ee70, 0xc8200349e0, 0x0, 0xc820000600, 0x0, 0x0, 0x64, 0x0, 0x0, 0x0, ...)\r\n        /usr/local/go/src/runtime/traceback.go:255 +0x1206 fp=0x7f133d7f6d60 sp=0x7f133d7f6c30\r\nruntime.traceback1(0xffffffffffffffff, 0xffffffffffffffff, 0x0, 0xc820000600, 0x0)\r\n        /usr/local/go/src/runtime/traceback.go:550 +0xc8 fp=0x7f133d7f6dc0 sp=0x7f133d7f6d60\r\nruntime.traceback(0xffffffffffffffff, 0xffffffffffffffff, 0x0, 0xc820000600)\r\n        /usr/local/go/src/runtime/traceback.go:527 +0x48 fp=0x7f133d7f6df0 sp=0x7f133d7f6dc0\r\nruntime.tracebackothers(0xc820000480)\r\n        /usr/local/go/src/runtime/traceback.go:664 +0xda fp=0x7f133d7f6e68 sp=0x7f133d7f6df0\r\nruntime.dopanic_m(0xc820000480, 0x44f370, 0x7f133d7f6f20)\r\n        /usr/local/go/src/runtime/panic1.go:104 +0x1f9 fp=0x7f133d7f6eb8 sp=0x7f133d7f6e68\r\nruntime.dopanic.func1()\r\n        /usr/local/go/src/runtime/panic.go:514 +0x32 fp=0x7f133d7f6ed8 sp=0x7f133d7f6eb8\r\nruntime.systemstack(0x7f133d7f6ef8)\r\n        /usr/local/go/src/runtime/asm_amd64.s:278 +0xab fp=0x7f133d7f6ee0 sp=0x7f133d7f6ed8\r\nruntime.dopanic(0x0)\r\n        /usr/local/go/src/runtime/panic.go:515 +0x61 fp=0x7f133d7f6f20 sp=0x7f133d7f6ee0\r\nruntime.throw(0x81b8f0, 0x15)\r\n        /usr/local/go/src/runtime/panic.go:527 +0x90 fp=0x7f133d7f6f38 sp=0x7f133d7f6f20\r\nruntime.gopanic(0x7653c0, 0xc820010030)\r\n        /usr/local/go/src/runtime/panic.go:354 +0xb6 fp=0x7f133d7f6fb8 sp=0x7f133d7f6f38\r\nruntime.panicindex()\r\n        /usr/local/go/src/runtime/panic.go:12 +0x49 fp=0x7f133d7f6fe0 sp=0x7f133d7f6fb8\r\nruntime.gentraceback(0x44801f, 0xc820034a58, 0x0, 0xc820000600, 0x0, 0xc820034a98, 0x20, 0x0, 0x0, 0x0, ...)\r\n        /usr/local/go/src/runtime/traceback.go:255 +0x1206 fp=0x7f133d7f7110 sp=0x7f133d7f6fe0\r\nruntime.callers.func1()\r\n        /usr/local/go/src/runtime/traceback.go:566 +0xa2 fp=0x7f133d7f7190 sp=0x7f133d7f7110\r\nruntime.systemstack(0x7f133d7f7198)\r\n        /usr/local/go/src/runtime/asm_amd64.s:262 +0x79 fp=0x7f133d7f7198 sp=0x7f133d7f7190\r\nruntime.mstart()\r\n        /usr/local/go/src/runtime/proc1.go:674 fp=0x7f133d7f71a0 sp=0x7f133d7f7198\r\n```",
	"user": {
		"login": "noxiouz",
		"id": 664573,
		"type": "User",
		"site_admin": false
	},
	"comments": 28,
	"closed_at": "2015-08-30T16:07:00Z",
	"created_at": "2015-08-20T19:49:04Z",
	"updated_at": "2015-09-11T00:42:22Z",
	"milestone": {
		"id": 1263435,
		"number": 26,
		"title": "Go1.5.1"
	}
}
