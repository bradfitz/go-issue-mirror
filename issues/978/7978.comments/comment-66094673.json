{
	"id": 66094673,
	"body": "\u003ca id=\"c9\"\u003e\u003c/a\u003eComment 9 by **hector@marcansoft.com**:\n\n\u003cpre\u003eWe're seeing this too, on linux-amd64, again on cgo code with callbacks back into go (in\nthis case, a libjpeg wrapper). I don't have a good test case yet though. I've\nabbreviated the dump; this happened during load testing of a server so there are lots of\ngoroutines alive.\n\nruntime: unexpected return pc for runtime.cgocallbackg called from 0x0\nfatal error: unknown caller pc\n\nruntime stack:\nruntime.throw(0xa695d1)\n    /usr/local/go/src/pkg/runtime/panic.c:520 +0x69 fp=0x7fe4d5642b60 sp=0x7fe4d5642b48\nruntime.gentraceback(0x406f0c, 0xc20821d7a8, 0x0, 0xc20833e6c0, 0x7fe400000000, 0x0,\n0x7fffffff, 0x40b4c0, 0x7fe4d5642d48, 0x2ac0ffe4da1ce000)\n    /usr/local/go/src/pkg/runtime/traceback_x86.c:180 +0xba9 fp=0x7fe4d5642c48 sp=0x7fe4d5642b60\naddstackroots(0xc20833e6c0, 0x7fe4d5642d48)\n    /usr/local/go/src/pkg/runtime/mgc0.c:1692 +0x168 fp=0x7fe4d5642cd8 sp=0x7fe4d5642c48\nmarkroot(0xc208018480, 0x89)\n    /usr/local/go/src/pkg/runtime/mgc0.c:1321 +0xbe fp=0x7fe4d5642d58 sp=0x7fe4d5642cd8\nruntime.parfordo(0xc208018480)\n    /usr/local/go/src/pkg/runtime/parfor.c:103 +0x128 fp=0x7fe4d5642dd0 sp=0x7fe4d5642d58\nruntime.gchelper()\n    /usr/local/go/src/pkg/runtime/mgc0.c:2118 +0x3f fp=0x7fe4d5642df0 sp=0x7fe4d5642dd0\nstopm()\n    /usr/local/go/src/pkg/runtime/proc.c:957 +0x111 fp=0x7fe4d5642e08 sp=0x7fe4d5642df0\ngcstopm()\n    /usr/local/go/src/pkg/runtime/proc.c:1122 +0xc4 fp=0x7fe4d5642e28 sp=0x7fe4d5642e08\nschedule()\n    /usr/local/go/src/pkg/runtime/proc.c:1321 +0x4a fp=0x7fe4d5642e50 sp=0x7fe4d5642e28\npark0(0xc20833e6c0)\n    /usr/local/go/src/pkg/runtime/proc.c:1410 +0xfe fp=0x7fe4d5642e70 sp=0x7fe4d5642e50\nruntime.mcall(0x402a94)\n    /usr/local/go/src/pkg/runtime/asm_amd64.s:181 +0x4b fp=0x7fe4d5642e80 sp=0x7fe4d5642e70\n[...]\ngoroutine 9629 [runnable]:\nruntime.cgocallbackg()\n    /usr/local/go/src/pkg/runtime/cgocall.c:244 +0x4c fp=0xc2087117b8 sp=0xc2087117a8\nruntime.cgocallback_gofunc(0x406d92, 0x402660, 0xc208711830)\n    /usr/local/go/src/pkg/runtime/asm_amd64.s:785 +0x67 fp=0xc2087117c8 sp=0xc2087117b8\nexitsyscall0(0x402660)\n    /usr/local/go/src/pkg/runtime/proc.c:1674 fp=0xc2087117d0 sp=0xc2087117c8\nruntime.cgocall(0x402660, 0xc208711830)\n    /usr/local/go/src/pkg/runtime/cgocall.c:144 +0x102 fp=0xc208711818 sp=0xc2087117d0\ngithub.com/pixiv/go-thumber/jpeg._Cfunc_jpeg_read_raw_data(0xc2080bf8c0, 0xc20800e720,\n0x4, 0xc200000002)\n    github.com/pixiv/go-thumber/jpeg/_obj/_cgo_defun.c:172 +0x31 fp=0xc208711830 sp=0xc208711818\n[...]\ngoroutine 9665 [runnable]:\nruntime: unexpected return pc for runtime.cgocallbackg called from 0x0\nruntime.cgocallbackg()\n    /usr/local/go/src/pkg/runtime/cgocall.c:244 +0x4c fp=0xc20821d7b8 sp=0xc20821d7a8\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/pkg/net/http/server.go:1721 +0x313\n[...]\n\nNote how a stacktrace of goroutine 9629 seems to work, while 9665 fails even though they\nboth seem to be in the same or a very similar code path (the low bits of SP match...).\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2014-08-13T06:37:38Z",
	"updated_at": "2014-12-08T10:44:11Z"
}
