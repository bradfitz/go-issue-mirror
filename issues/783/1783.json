{
	"id": 51278297,
	"number": 1783,
	"state": "closed",
	"title": "mypackage_test.go passes with CPU profiling but barfs somewhere in testing, otherwise.",
	"body": "by **shutej**:\n\n\u003cpre\u003eThis affects release-branch.r57 w/GOOS=linux,GOARCH=amd64.  As you can see, the\nbacktrace does not include any of my code, just the autogenerated stuff.\n\nI have a cgo package that I'm unit testing w/gotest.  As you can see below, everything\nis fine if I ask for a CPU profile:\n\n$ gotest -cpuprofile=/tmp/cpuprofile.txt \u0026gt;/dev/null\nPASS\n\n...but if I don't, I get a backtrace in the testing package:\n\n$ gotest \u0026gt;/dev/null\nunexpected fault address 0x0\nthrow: fault\n\n[signal 0xb code=0x80 addr=0x0 pc=0x401f0c]\n\nruntime.throw+0x40 /home/shutej/go/src/pkg/runtime/runtime.c:102\n\truntime.throw(0x4eebbe, 0x0)\nruntime.sigpanic+0xe7 /home/shutej/go/src/pkg/runtime/linux/thread.c:294\n\truntime.sigpanic()\nruntime.cas+0xd /home/shutej/go/src/pkg/runtime/amd64/asm.s:339\n\truntime.cas()\ndequeue+0x5c /home/shutej/go/src/pkg/runtime/chan.c:1158\n\tdequeue(0xf84000c980, 0xf84000c960, 0x414e19, 0xf84000fbd0)\nruntime.chansend+0x280 /home/shutej/go/src/pkg/runtime/chan.c:195\n\truntime.chansend(0xf84000c960, 0x7f6ba5c17f98, 0x0, 0x0, 0xf84000fb10, ...)\nruntime.chansend1+0x5b /home/shutej/go/src/pkg/runtime/chan.c:410\n\truntime.chansend1(0xf84000c960, 0xf84001a7a0)\ntesting.tRunner+0x42 /home/shutej/go/src/pkg/testing/testing.go:153\n\ttesting.tRunner(0xf84001a7a0, 0xf84001a540, 0x0, 0x0)\nruntime.goexit /home/shutej/go/src/pkg/runtime/proc.c:178\n\truntime.goexit()\n----- goroutine created by -----\ntesting.RunTests+0x277 /home/shutej/go/src/pkg/testing/testing.go:189\n\ngoroutine 1 [4]:\nruntime.gosched+0x5c /home/shutej/go/src/pkg/runtime/proc.c:603\n\truntime.gosched()\nruntime.chanrecv+0x458 /home/shutej/go/src/pkg/runtime/chan.c:329\n\truntime.chanrecv(0xf84000c960, 0x7f6ba5c16ed0, 0x0, 0x0, 0x402595, ...)\nruntime.chanrecv1+0x4a /home/shutej/go/src/pkg/runtime/chan.c:424\n\truntime.chanrecv1(0xf84000c960, 0xf84001a540)\ntesting.RunTests+0x28b /home/shutej/go/src/pkg/testing/testing.go:190\n\ttesting.RunTests(0x400c00, 0xf84001a540, 0x100000001, 0x400db6)\ntesting.Main+0x4f /home/shutej/go/src/pkg/testing/testing.go:163\n\ttesting.Main(0x400c00, 0xf84001a540, 0x100000001, 0xf840000098, 0x0, ...)\nmain.main+0x6d /home/shutej/mypackage/_testmain.go:29\n\tmain.main()\nruntime.mainstart+0xf /home/shutej/go/src/pkg/runtime/amd64/asm.s:77\n\truntime.mainstart()\nruntime.goexit /home/shutej/go/src/pkg/runtime/proc.c:178\n\truntime.goexit()\n----- goroutine created by -----\n_rt0_amd64+0x8e /home/shutej/go/src/pkg/runtime/amd64/asm.s:64\ngotest: \u0026quot;./6.out\u0026quot; failed: exit status 2\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 3,
	"closed_at": "2014-12-08T10:09:53Z",
	"created_at": "2011-05-06T20:12:01Z",
	"updated_at": "2016-06-24T19:28:38Z"
}
