{
	"id": 51277047,
	"number": 875,
	"state": "closed",
	"title": "All go compiled binaries crash on freebsd_386: invalid args for mmap syscall",
	"body": "\u003cpre\u003eSee also issue #871\n\nScript started on Sun Jun 20 13:58:55 2010\n$ uname -a\nFreeBSD Bench.otdel-1.org 8.1-PRERELEASE FreeBSD 8.1-PRERELEASE #14: Fri Jun 18 12:09:23\nMSD 2010     nms@Bench.otdel-1.org:/usr/obj/usr/src/sys/BENCH  i386\n$ cd /go\n$ hg pull -u\npulling from \u003ca href=\"https://go.googlecode.com/hg/\"\u003ehttps://go.googlecode.com/hg/\u003c/a\u003e\nsearching for changes\nno changes found\n$ hg identify\nc15f6313f19e+ tip\n$ cd ~/tmp\n$ cat tg.go\npackage main\n\nfunc main() {\n        println(\u0026quot;hi\u0026quot;)\n}\n$ 8g tg.go\n$ 8l tg.8\n$ truss ./8.out\n__sysctl(0xbfbfe5d4,0x2,0xbfbfe5dc,0xbfbfe5e0,0x0,0x0) = 0 (0x0)\nmmap(0x0,328,PROT_READ|PROT_WRITE,MAP_ANON,-1,0x0) = -1190936576 (0xb903c000)\nmunmap(0xb903c000,328)\t\t\t\t = 0 (0x0)\n__sysctl(0xbfbfe638,0x2,0xb9032e3c,0xbfbfe640,0x0,0x0) = 0 (0x0)\nmmap(0x0,32768,PROT_READ|PROT_WRITE,MAP_PRIVATE|MAP_ANON,-1,0x0) = -1190936576\n(0xb903c000)\nissetugid(0xb902b8a7,0xbfbfeafc,0x104,0x0,0x0,0x0) = 0 (0x0)\nopen(\u0026quot;/etc/libmap.conf\u0026quot;,O_RDONLY,0666)\t\t ERR#2 'No such file or directory'\nsysarch(0xa,0xbfbfe6a0,0xb900237b,0xb90312f8,0xb9014dd9,0xb90312f8) = 0 (0x0)\nmmap(0x0,8,PROT_READ|PROT_WRITE,MAP_ANON,-1,0x0) = -1190903808 (0xb9044000)\nmunmap(0xb9044000,8)\t\t\t\t = 0 (0x0)\nsigprocmask(SIG_BLOCK,SIGHUP|SIGINT|SIGQUIT|SIGKILL|SIGPIPE|SIGALRM|SIGTERM|SIGURG|SIGSTOP|SIGTSTP|SIGCONT|SIGCHLD|SIGTTIN|SIGTTOU|SIGIO|SIGXCPU|SIGXFSZ|SIGVTALRM|SIGPROF|SIGWINCH|SIGINFO|SIGUSR1|SIGUSR2,0x0)\n= 0 (0x0)\nsigprocmask(SIG_SETMASK,0x0,0x0)\t\t = 0 (0x0)\nsysarch(0x1,0xbfbfebc8,0x0,0x804e478,0xffffffff,0xbfbfebd8) = 17 (0x11)\nsigaction(SIGHUP,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGINT,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGQUIT,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGILL,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGTRAP,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGABRT,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGEMT,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGFPE,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGBUS,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGSEGV,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGSYS,{ 0x804e3b9 SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGPIPE,{ 0x804f58d SA_ONSTACK|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGALRM,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGTERM,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGURG,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGTSTP,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGCHLD,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGTTIN,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGTTOU,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGIO,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGXCPU,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGXFSZ,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGVTALRM,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGPROF,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGWINCH,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGINFO,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGUSR1,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(SIGUSR2,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nsigaction(32,{ 0x804e3b9 SA_ONSTACK|SA_RESTART|SA_SIGINFO ss_t },0x0) = 0 (0x0)\nmmap(0x0,131072,PROT_READ|PROT_WRITE|PROT_EXEC,MAP_PRIVATE|MAP_ANON,-1,0x8051a1600000000)\nERR#22 'Invalid argument'\nSIGNAL 11 (SIGSEGV)\nSIGNAL 11 (SIGSEGV)\nprocess exit, rval = 0\n$ exit\n\nScript done on Sun Jun 20 14:00:05 2010\u003c/pre\u003e",
	"user": {
		"login": "nms42",
		"id": 3739370,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 2,
	"closed_at": "2014-12-08T10:06:10Z",
	"created_at": "2010-06-20T10:05:14Z",
	"updated_at": "2016-06-24T19:17:08Z"
}
