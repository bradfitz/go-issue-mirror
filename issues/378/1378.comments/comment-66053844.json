{
	"id": 66053844,
	"body": "\u003ca id=\"c1\"\u003e\u003c/a\u003eComment 1:\n\n\u003cpre\u003eMy goplayer program, that uses http.ServeFile to stream music, also suffers from this\nissue. It usually happens when I request more than one file at once. \n\n\u003ca href=\"https://github.com/nf/goplayer\"\u003ehttps://github.com/nf/goplayer\u003c/a\u003e\n\nHere's a sample crash:\n\n$ ./goplayer \nthrow: split stack overflow\n\npanic PC=0x80080a3d8\nruntime.throw+0x3b /usr/home/nf/go/src/pkg/runtime/runtime.c:73\n\truntime.throw(0x674027, 0x800d19e60)\nruntime.newstack+0x77 /usr/home/nf/go/src/pkg/runtime/proc.c:758\n\truntime.newstack()\nruntime.morestack+0x50 /usr/home/nf/go/src/pkg/runtime/amd64/asm.s:167\n\truntime.morestack()\n\ngoroutine 8 [3]:\nruntime.entersyscall+0x28 /usr/home/nf/go/src/pkg/runtime/proc.c:572\n\truntime.entersyscall()\nsyscall.Syscall+0x5 /usr/home/nf/go/src/pkg/syscall/asm_freebsd_amd64.s:14\n\tsyscall.Syscall()\nsyscall.Write+0x66 /usr/home/nf/go/src/pkg/syscall/zsyscall_freebsd_amd64.go:875\n\tsyscall.Write(0x800000008, 0x80087dda0, 0x226000002260, 0x23ffffffff, 0x800c99000, ...)\nnet.*netFD·Write+0x1e9 /usr/home/nf/go/src/pkg/net/fd.go:460\n\tnet.*netFD·Write(0x800d19000, 0x800878ff8, 0x700800007008, 0x0, 0x0, ...)\nnet.*TCPConn·Write+0x95 /usr/home/nf/go/src/pkg/net/tcpsock.go:102\n\tnet.*TCPConn·Write(0x8007ba9c8, 0x800878ff8, 0x700800007008, 0x800000000ff8, 0x0, ...)\nbufio.*Writer·Write+0x18b /usr/home/nf/go/src/pkg/bufio/bufio.go:428\n\tbufio.*Writer·Write(0x800c8a740, 0x800878ff8, 0x700800007008, 0xff8, 0x0, ...)\nhttp.*response·Write+0x376 /usr/home/nf/go/src/pkg/http/server.go:284\n\thttp.*response·Write(0x800d18b40, 0x800878000, 0x800000008000, 0x800008000, 0x0, ...)\nio.Copyn+0x2be /usr/home/nf/go/src/pkg/io/io.go:219\n\tio.Copyn(0x8007f2690, 0x800d18b40, 0x8007f26c0, 0x800d18b70, 0x5f8f78, ...)\nhttp.serveFile+0xab7 /usr/home/nf/go/src/pkg/http/fs.go:177\n\thttp.serveFile(0x800877120, 0x800d18b40, 0x800d13d80, 0x8007d5c00, 0x80000003f, ...)\nhttp.ServeFile+0x54 /usr/home/nf/go/src/pkg/http/fs.go:182\n\thttp.ServeFile(0x800877120, 0x800d18b40, 0x800d13d80, 0x8007d5c00, 0x3f, ...)\nmain.File+0x177 /usr/home/nf/code/goplayer/player.go:41\n\tmain.File(0x800877120, 0x800d18b40, 0x800d13d80, 0x41bf0c, 0x400cd1, ...)\nhttp.HandlerFunc·ServeHTTP+0x3d /usr/home/nf/go/src/pkg/http/server.go:433\n\thttp.HandlerFunc·ServeHTTP(0x400cd1, 0x800877120, 0x800d18b40, 0x800d13d80, 0x400c01, ...)\nhttp.*ServeMux·ServeHTTP+0x244 /usr/home/nf/go/src/pkg/http/server.go:615\n\thttp.*ServeMux·ServeHTTP(0x8007ba0a8, 0x800877120, 0x800d18b40, 0x800d13d80, 0x800d18b40, ...)\nhttp.*conn·serve+0xca /usr/home/nf/go/src/pkg/http/server.go:400\n\thttp.*conn·serve(0x800c8a7c0, 0x0)\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\n\ngoroutine 7 [4]:\nruntime.gosched+0x77 /usr/home/nf/go/src/pkg/runtime/proc.c:553\n\truntime.gosched()\nrunfinq+0x50 /usr/home/nf/go/src/pkg/runtime/mgc0.c:413\n\trunfinq()\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\n\ngoroutine 10 [4]:\nruntime.gosched+0x77 /usr/home/nf/go/src/pkg/runtime/proc.c:553\n\truntime.gosched()\nruntime.chanrecv+0x18b /usr/home/nf/go/src/pkg/runtime/chan.c:364\n\truntime.chanrecv(0x8007ebd80, 0x8007c0e78, 0x0, 0x0, 0x0, ...)\nruntime.chanrecv1+0x41 /usr/home/nf/go/src/pkg/runtime/chan.c:444\n\truntime.chanrecv1(0x8007ebd80, 0x800d19280)\nnet.*pollServer·WaitRead+0x52 /usr/home/nf/go/src/pkg/net/fd.go:247\n\tnet.*pollServer·WaitRead(0x8007d5780, 0x800d19280, 0x100000001000, 0x23ffffffff)\nnet.*netFD·Read+0x1a4 /usr/home/nf/go/src/pkg/net/fd.go:354\n\tnet.*netFD·Read(0x800d19280, 0x800c98000, 0x100000001000, 0x0, 0x0, ...)\nnet.*TCPConn·Read+0x95 /usr/home/nf/go/src/pkg/net/tcpsock.go:94\n\tnet.*TCPConn·Read(0x8007ba148, 0x800c98000, 0x100000001000, 0xe5000000000, 0x0, ...)\nbufio.*Reader·fill+0x154 /usr/home/nf/go/src/pkg/bufio/bufio.go:97\n\tbufio.*Reader·fill(0x800c8a680, 0xe5000000000)\nbufio.*Reader·ReadSlice+0x295 /usr/home/nf/go/src/pkg/bufio/bufio.go:267\n\tbufio.*Reader·ReadSlice(0x800c8a680, 0x406e0a, 0x0, 0x0, 0x0, ...)\nhttp.readLineBytes+0x58 /usr/home/nf/go/src/pkg/http/request.go:247\n\thttp.readLineBytes(0x800c8a680, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.readLine+0x4b /usr/home/nf/go/src/pkg/http/request.go:273\n\thttp.readLine(0x800c8a680, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.ReadRequest+0x64 /usr/home/nf/go/src/pkg/http/request.go:493\n\thttp.ReadRequest(0x800c8a680, 0x8007f0e40, 0x0, 0x0, 0x8007e4690, ...)\nhttp.*conn·readRequest+0x73 /usr/home/nf/go/src/pkg/http/server.go:165\n\thttp.*conn·readRequest(0x800c8a6c0, 0x800877120, 0x0, 0x0, 0x800d18bd0, ...)\nhttp.*conn·serve+0x25 /usr/home/nf/go/src/pkg/http/server.go:391\n\thttp.*conn·serve(0x800c8a6c0, 0x0)\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\n\ngoroutine 9 [4]:\nruntime.gosched+0x77 /usr/home/nf/go/src/pkg/runtime/proc.c:553\n\truntime.gosched()\nruntime.chanrecv+0x18b /usr/home/nf/go/src/pkg/runtime/chan.c:364\n\truntime.chanrecv(0x800877cc0, 0x8007bfb10, 0x0, 0x0, 0x0, ...)\nruntime.chanrecv1+0x41 /usr/home/nf/go/src/pkg/runtime/chan.c:444\n\truntime.chanrecv1(0x800877cc0, 0x800876aa0)\nnet.*pollServer·WaitWrite+0x53 /usr/home/nf/go/src/pkg/net/fd.go:253\n\tnet.*pollServer·WaitWrite(0x8007d5780, 0x800876aa0, 0x381800003818, 0x23ffffffff)\nnet.*netFD·Write+0x323 /usr/home/nf/go/src/pkg/net/fd.go:468\n\tnet.*netFD·Write(0x800876aa0, 0x800c80ff8, 0x700800007008, 0x0, 0x0, ...)\nnet.*TCPConn·Write+0x95 /usr/home/nf/go/src/pkg/net/tcpsock.go:102\n\tnet.*TCPConn·Write(0x8007ba208, 0x800c80ff8, 0x700800007008, 0x800000000ff8, 0x0, ...)\nbufio.*Writer·Write+0x18b /usr/home/nf/go/src/pkg/bufio/bufio.go:428\n\tbufio.*Writer·Write(0x8007d5800, 0x800c80ff8, 0x700800007008, 0xff8, 0x0, ...)\nhttp.*response·Write+0x376 /usr/home/nf/go/src/pkg/http/server.go:284\n\thttp.*response·Write(0x8008a8420, 0x800c80000, 0x800000008000, 0x800008000, 0x0, ...)\nio.Copyn+0x2be /usr/home/nf/go/src/pkg/io/io.go:219\n\tio.Copyn(0x8007f2690, 0x8008a8420, 0x8007f26c0, 0x8008a84e0, 0x542e53, ...)\nhttp.serveFile+0xab7 /usr/home/nf/go/src/pkg/http/fs.go:177\n\thttp.serveFile(0x800877120, 0x8008a8420, 0x8007f0600, 0x800d05940, 0x800000039, ...)\nhttp.ServeFile+0x54 /usr/home/nf/go/src/pkg/http/fs.go:182\n\thttp.ServeFile(0x800877120, 0x8008a8420, 0x8007f0600, 0x800d05940, 0x39, ...)\nmain.File+0x177 /usr/home/nf/code/goplayer/player.go:41\n\tmain.File(0x800877120, 0x8008a8420, 0x8007f0600, 0x41bf0c, 0x400cd1, ...)\nhttp.HandlerFunc·ServeHTTP+0x3d /usr/home/nf/go/src/pkg/http/server.go:433\n\thttp.HandlerFunc·ServeHTTP(0x400cd1, 0x800877120, 0x8008a8420, 0x8007f0600, 0x400c01, ...)\nhttp.*ServeMux·ServeHTTP+0x244 /usr/home/nf/go/src/pkg/http/server.go:615\n\thttp.*ServeMux·ServeHTTP(0x8007ba0a8, 0x800877120, 0x8008a8420, 0x8007f0600, 0x8008a8420, ...)\nhttp.*conn·serve+0xca /usr/home/nf/go/src/pkg/http/server.go:400\n\thttp.*conn·serve(0x8007d5700, 0x0)\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\n\ngoroutine 2 [3]:\nruntime.entersyscall+0x28 /usr/home/nf/go/src/pkg/runtime/proc.c:572\n\truntime.entersyscall()\nsyscall.Syscall6+0x5 /usr/home/nf/go/src/pkg/syscall/asm_freebsd_amd64.s:37\n\tsyscall.Syscall6()\nsyscall.kevent+0x76 /usr/home/nf/go/src/pkg/syscall/zsyscall_freebsd_amd64.go:146\n\tsyscall.kevent(0x800000006, 0x0, 0x0, 0x8007bcdc8, 0x10000000a, ...)\nsyscall.Kevent+0x97 /usr/home/nf/go/src/pkg/syscall/syscall_bsd.go:391\n\tsyscall.Kevent(0x800000006, 0x0, 0x0, 0x8007bcdc8, 0xa0000000a, ...)\nnet.*pollster·WaitFD+0x126 /usr/home/nf/go/src/pkg/net/fd_freebsd.go:83\n\tnet.*pollster·WaitFD(0x8007bcdc0, 0x0, 0x800000077, 0x0, 0x0, ...)\nnet.*pollServer·Run+0xa3 /usr/home/nf/go/src/pkg/net/fd.go:207\n\tnet.*pollServer·Run(0x8007d5780, 0x0)\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\n\ngoroutine 1 [4]:\nruntime.gosched+0x77 /usr/home/nf/go/src/pkg/runtime/proc.c:553\n\truntime.gosched()\nruntime.chanrecv+0x18b /usr/home/nf/go/src/pkg/runtime/chan.c:364\n\truntime.chanrecv(0x8007ebea0, 0x8007bee78, 0x0, 0x0, 0x0, ...)\nruntime.chanrecv1+0x41 /usr/home/nf/go/src/pkg/runtime/chan.c:444\n\truntime.chanrecv1(0x8007ebea0, 0x8007bd3c0)\nnet.*pollServer·WaitRead+0x52 /usr/home/nf/go/src/pkg/net/fd.go:247\n\tnet.*pollServer·WaitRead(0x8007d5780, 0x8007bd3c0, 0x0, 0x0)\nnet.*netFD·accept+0x39a /usr/home/nf/go/src/pkg/net/fd.go:579\n\tnet.*netFD·accept(0x8007bd3c0, 0x45e840, 0x0, 0x0, 0x0, ...)\nnet.*TCPListener·AcceptTCP+0x71 /usr/home/nf/go/src/pkg/net/tcpsock.go:261\n\tnet.*TCPListener·AcceptTCP(0x8007ba188, 0x40d0be, 0x0, 0x0, 0x8, ...)\nnet.*TCPListener·Accept+0x49 /usr/home/nf/go/src/pkg/net/tcpsock.go:271\n\tnet.*TCPListener·Accept(0x8007ba188, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.Serve+0x7a /usr/home/nf/go/src/pkg/http/server.go:658\n\thttp.Serve(0x8007d5bc0, 0x8007ba188, 0x8007f6300, 0x8007ba0a8, 0x8007d5bc0, ...)\nhttp.ListenAndServe+0xcb /usr/home/nf/go/src/pkg/http/server.go:703\n\thttp.ListenAndServe(0x4b6f7c, 0x5, 0x0, 0x0, 0x6774f8, ...)\nmain.main+0x7b /usr/home/nf/code/goplayer/player.go:24\n\tmain.main()\nruntime.mainstart+0xf /usr/home/nf/go/src/pkg/runtime/amd64/asm.s:77\n\truntime.mainstart()\nruntime.goexit /usr/home/nf/go/src/pkg/runtime/proc.c:148\n\truntime.goexit()\u003c/pre\u003e\n\n_Labels changed: added **freebsd**._\n\n_Owner changed to **r...@golang.org**._\n\n_Status changed to **Accepted**._",
	"user": {
		"login": "adg",
		"id": 8446613,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2011-01-05T05:46:42Z",
	"updated_at": "2014-12-08T10:08:03Z"
}
