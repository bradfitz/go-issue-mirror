{
	"id": 170284800,
	"number": 16651,
	"state": "open",
	"title": "cmd/cgo: permit missing dynamic symbol section",
	"body": "1. What version of Go are you using (`go version`)?\r\n\r\ngo version go1.6.3 linux/amd64\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\n\r\nLinux ubuntu 3.13.0-91-generic #138-Ubuntu SMP Fri Jun 24 17:00:34 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\r\n\r\n3. What did you do?\r\nMy goal is to crosscompile lxd for a ppc64 Embedded target.\r\n\r\nCC=\"/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc\"\r\n CGO_CFLAGS=\"-I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64\"\r\nCGO_ENABLED=\"1\"\r\nCGO_LDFLAGS=\" --static -L/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux\"\r\nGOARCH=\"ppc64\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/gcordon/Downloads/GIT/XL/lxd/.gopath\"\r\nPATH=\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/loca/go/bin:/usr/local/go/bin:/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include/linux:/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include/asm:/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64\"\r\n\r\n4. What did you expect to see?\r\ngo get -t -v -d ./...\r\ngo get -t -v -d ./...\r\ngo get -t -v -d ./...\r\ngo install -v ./...\r\n#go build -v ./...\r\nLXD built successfully\r\n\r\n5. What did you see instead?\r\n\r\n# Must a few times due to go get race\r\ngo get -t -v -d ./...\r\ngo get -t -v -d ./...\r\ngo get -t -v -d ./...\r\ngo install -v  ./...\r\nruntime/cgo\r\n# runtime/cgo\r\ncannot load imported symbols from ELF file $WORK/runtime/cgo/_obj/_cgo_.o: no symbol section\r\nmake: *** [default] Error 2\r\n\r\n\r\n\r\n\r\nOUTPUT OF: \"go install -x runtime/cgo\" Suggested by  Ian Lance Taylor \u003ciant@golang.org\u003e\r\n\r\n\r\n go install -x runtime/cgo\r\nWORK=/tmp/go-build268603861\r\nmkdir -p $WORK/runtime/cgo/_obj/\r\nmkdir -p $WORK/runtime/\r\ncd /usr/local/go/src/runtime/cgo\r\nCGO_LDFLAGS=\"--static\" \"-L/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64\" \"--sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux\" \"-lpthread\" /usr/local/go/pkg/tool/linux_amd64/cgo -objdir $WORK/runtime/cgo/_obj/ -importpath runtime/cgo -import_runtime_cgo=false -import_syscall=false -- -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror cgo.go\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/_cgo_main.o -c $WORK/runtime/cgo/_obj/_cgo_main.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/_cgo_export.o -c $WORK/runtime/cgo/_obj/_cgo_export.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/cgo.cgo2.o -c $WORK/runtime/cgo/_obj/cgo.cgo2.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_fatalf.o -c ./gcc_fatalf.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_libinit_linux_ppc64x.o -c ./gcc_libinit_linux_ppc64x.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_linux_ppc64x.o -c ./gcc_linux_ppc64x.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_setenv.o -c ./gcc_setenv.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_util.o -c ./gcc_util.c\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -I $WORK/runtime/cgo/_obj/ -I/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/include --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 -Wall -Werror -o $WORK/runtime/cgo/_obj/gcc_ppc64x.o -c ./gcc_ppc64x.S\r\n/opt/fsl-qoriq/2.0/sysroots/x86_64-fslsdk-linux/usr/bin/powerpc64-fsl-linux/powerpc64-fsl-linux-gcc -I . -fPIC -pthread -fmessage-length=0 -o $WORK/runtime/cgo/_obj/_cgo_.o $WORK/runtime/cgo/_obj/_cgo_main.o $WORK/runtime/cgo/_obj/_cgo_export.o $WORK/runtime/cgo/_obj/cgo.cgo2.o $WORK/runtime/cgo/_obj/gcc_fatalf.o $WORK/runtime/cgo/_obj/gcc_libinit_linux_ppc64x.o $WORK/runtime/cgo/_obj/gcc_linux_ppc64x.o $WORK/runtime/cgo/_obj/gcc_setenv.o $WORK/runtime/cgo/_obj/gcc_util.o $WORK/runtime/cgo/_obj/gcc_ppc64x.o --static -L/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux/usr/lib64 --sysroot=/opt/fsl-qoriq/2.0/sysroots/ppc64e6500-fsl-linux -lpthread\r\n/usr/local/go/pkg/tool/linux_amd64/cgo -objdir $WORK/runtime/cgo/_obj/ -dynpackage cgo -dynimport $WORK/runtime/cgo/_obj/_cgo_.o -dynout $WORK/runtime/cgo/_obj/_cgo_import.go -dynlinker\r\n# runtime/cgo\r\ncannot load imported symbols from ELF file $WORK/runtime/cgo/_obj/_cgo_.o: no symbol sectio\r\n",
	"user": {
		"login": "cordong2956",
		"id": 20913648,
		"type": "User",
		"site_admin": false
	},
	"comments": 5,
	"created_at": "2016-08-09T22:18:34Z",
	"updated_at": "2016-08-10T13:40:42Z",
	"milestone": {
		"id": 1709363,
		"number": 38,
		"title": "Go1.8"
	}
}
