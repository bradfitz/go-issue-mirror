{
	"id": 51278098,
	"number": 1639,
	"state": "closed",
	"title": "Error in http/cgi.test",
	"body": "by **royger**:\n\n\u003cpre\u003eWhat steps will reproduce the problem?\n\nUpdate to latest release or tip (31d7feb9281b), run ./all.bash\n\nWhat is the expected output?\n\nInstall process finishes correctly\n\nWhat do you see instead?\n\nmake -C http/cgi test\ngotest\nrm -f _test/http/cgi.a\n6g -o _gotest_.6 child.go host.go  child_test.go host_test.go matryoshka_test.go\nrm -f _test/http/cgi.a\ngopack grc _test/http/cgi.a _gotest_.6 \n--- FAIL: cgi.TestCGIBasicGet (0.0 seconds)\n        Unexpected 1 parts from invalid line number 20: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO: env-REQUEST_URI:/test.cgi?foo=bar\u0026amp;a=b env-QUERY_STRING:foo=bar\u0026amp;a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 param-foo:bar env-HTTP_HOST:example.com env-SCRIPT_NAME:/test.cgi test:Hello CGI param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestCGIBasicGetAbsPath (0.1 seconds)\n        Unexpected 1 parts from invalid line number 20: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO: env-REQUEST_URI:/test.cgi?foo=bar\u0026amp;a=b env-QUERY_STRING:foo=bar\u0026amp;a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 param-foo:bar env-HTTP_HOST:example.com env-SCRIPT_NAME:/test.cgi test:Hello CGI param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:/Users/royger/go/src/pkg/http/cgi/testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestPathInfo (0.1 seconds)\n        Unexpected 1 parts from invalid line number 19: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO:/extrapath env-REQUEST_URI:/test.cgi/extrapath?a=b env-QUERY_STRING:a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 env-HTTP_HOST:example.com env-SCRIPT_NAME:/test.cgi test:Hello CGI param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestPathInfoDirRoot (0.1 seconds)\n        Unexpected 1 parts from invalid line number 19: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO:bar env-REQUEST_URI:/myscript/bar?a=b env-QUERY_STRING:a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 env-HTTP_HOST:example.com env-SCRIPT_NAME:/myscript/ test:Hello CGI param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestDupHeaders (0.1 seconds)\n        Unexpected 1 parts from invalid line number 21: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO:/myscript/bar env-REQUEST_URI:/myscript/bar?a=b env-QUERY_STRING:a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 env-HTTP_HOST:example.com env-SCRIPT_NAME:/ env-HTTP_X_FOO:val1, val2 test:Hello CGI env-HTTP_COOKIE:nom=NOM; yum=YUM param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestPathInfoNoRoot (0.1 seconds)\n        Unexpected 1 parts from invalid line number 19: \u0026quot;\\n\u0026quot;; existing map=map[env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO:/bar env-REQUEST_URI:/bar?a=b env-QUERY_STRING:a=b env-SERVER_SOFTWARE:go env-REMOTE_HOST:1.2.3.4 env-HTTP_HOST:example.com env-SCRIPT_NAME:/ test:Hello CGI param-a:b env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-REQUEST_METHOD:GET]\n--- FAIL: cgi.TestCGIBasicPost (0.1 seconds)\n        Unexpected 1 parts from invalid line number 23: \u0026quot;\\n\u0026quot;; existing map=map[param-postfoo:postbar env-CONTENT_TYPE:application/x-www-form-urlencoded env-__CF_USER_TEXT_ENCODING:0x1F5:0:86 env-PATH_INFO: env-REQUEST_URI:/test.cgi?a=b env-QUERY_STRING:a=b env-SERVER_SOFTWARE:go env-CONTENT_LENGTH:15 env-REMOTE_HOST:1.2.3.4 env-HTTP_HOST:example.com env-SCRIPT_NAME:/test.cgi test:Hello CGI env-HTTP_CONTENT_LENGTH:15 env-REMOTE_ADDR:1.2.3.4 env-VERSIONER_PERL_VERSION:5.10.0 env-VERSIONER_PERL_PREFER_32_BIT:no env-GATEWAY_INTERFACE:CGI/1.1 env-SERVER_PORT:80 env-SERVER_NAME:example.com env-SCRIPT_FILENAME:testdata/test.cgi env-HTTP_CONTENT_TYPE:application/x-www-form-urlencoded env-REQUEST_METHOD:POST]\nFAIL\nmake[1]: *** [test] Error 1\nmake: *** [http/cgi.test] Error 2\n\nWhich operating system are you using?\n\nMac OS X 10.6.7, gcc version 4.2.1 (Apple Inc. build 5666) (dot 3), perl v5.10.0 built\nfor darwin-thread-multi-2level (bundled in current Mac OS X release).\n\nGOARCH=amd64\nGOOS=darwin\n\nWhich revision are you using?  (hg identify)\n\n31d7feb9281b tip\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 1,
	"closed_at": "2014-12-08T10:09:12Z",
	"created_at": "2011-03-24T14:53:21Z",
	"updated_at": "2016-06-24T19:26:53Z"
}
