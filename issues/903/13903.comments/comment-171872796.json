{
	"id": 171872796,
	"body": "I can reproduce this crash. I also made change to cmd/compile so I can see all system allocations.\r\n\r\n```\r\nC:\\dev\\go\\src\u003egit diff\r\ndiff --git a/src/runtime/mem_windows.go b/src/runtime/mem_windows.go\r\nindex 71be0e6..5d66db5 100644\r\n--- a/src/runtime/mem_windows.go\r\n+++ b/src/runtime/mem_windows.go\r\n@@ -22,6 +22,7 @@ const (\r\n // which prevents us from allocating more stack.\r\n //go:nosplit\r\n func sysAlloc(n uintptr, sysStat *uint64) unsafe.Pointer {\r\n+\tprint(\"sysAlloc: n=\", hex(n), \"\\n\")\r\n \tmSysStatInc(sysStat, n)\r\n \treturn unsafe.Pointer(stdcall4(_VirtualAlloc, 0, n, _MEM_COMMIT|_MEM_RESERVE, _PAGE_READWRITE))\r\n }\r\n@@ -96,6 +97,7 @@ func sysFault(v unsafe.Pointer, n uintptr) {\r\n }\r\n \r\n func sysReserve(v unsafe.Pointer, n uintptr, reserved *bool) unsafe.Pointer {\r\n+\tprint(\"sysReserve: n=\", hex(n), \"\\n\")\r\n \t*reserved = true\r\n \t// v is just a hint.\r\n \t// First try at v.\r\nC:\\dev\\go\\src\u003ego install -v github.com/visualfc/goqt/ui\r\ngithub.com/visualfc/goqt/ui\r\n# github.com/visualfc/goqt/ui\r\nsysReserve: n=0x30102000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x10000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0xafc7c\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x18000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x24000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x36000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x51000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysReserve: n=0x10000000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x79800\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysReserve: n=0x10000000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0x40000\r\nsysAlloc: n=0xb6400\r\nsysAlloc: n=0x40000\r\nsysReserve: n=0x10000000\r\nfatal error: out of memory\r\n\r\nruntime stack:\r\nruntime.throw(0x7b3f00, 0xd)\r\n        c:/dev/go/src/runtime/panic.go:530 +0x7f\r\nruntime.(*mcache).refill(0x2d0000, 0x16, 0x31a2b8f0)\r\n        c:/dev/go/src/runtime/mcache.go:121 +0xce\r\nruntime.mallocgc.func2()\r\n        c:/dev/go/src/runtime/malloc.go:638 +0x2b\r\nruntime.systemstack(0xbed740)\r\n        c:/dev/go/src/runtime/asm_386.s:313 +0x5e\r\nruntime.mstart()\r\n        c:/dev/go/src/runtime/proc.go:1048\r\n\r\ngoroutine 1 [running]:\r\nruntime.systemstack_switch()\r\n        c:/dev/go/src/runtime/asm_386.s:267 fp=0x513b714c sp=0x513b7148\r\nruntime.mallocgc(0x1a0, 0x7893a0, 0x0, 0x0)\r\n        c:/dev/go/src/runtime/malloc.go:639 +0x6ca fp=0x513b71b8 sp=0x513b714c\r\nruntime.newarray(0x7893a0, 0x8, 0x3c383b00)\r\n        c:/dev/go/src/runtime/malloc.go:794 +0xbc fp=0x513b71dc sp=0x513b71b8\r\nruntime.makeslice(0x7406c0, 0x8, 0x0, 0x8, 0x0, 0x0, 0x0, 0x0)\r\n        c:/dev/go/src/runtime/slice.go:32 +0x16c fp=0x513b7210 sp=0x513b71dc\r\ncmd/compile/internal/gc.Flowstart(0x51e19110, 0x0, 0x3a62d2a0)\r\n        c:/dev/go/src/cmd/compile/internal/gc/popt.go:271 +0x225 fp=0x513b72a0 sp=0x513b7210\r\ncmd/compile/internal/x86.peep(0x51e19110)\r\n        c:/dev/go/src/cmd/compile/internal/x86/peep.go:83 +0x2d fp=0x513b72c8 sp=0x513b72a0\r\ncmd/compile/internal/gc.regopt(0x51e19110)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reg.go:1389 +0x2e46 fp=0x513b75bc sp=0x513b72c8\r\ncmd/compile/internal/gc.compile(0x2c04cb40)\r\n        c:/dev/go/src/cmd/compile/internal/gc/pgen.go:521 +0xc94 fp=0x513b76f8 sp=0x513b75bc\r\ncmd/compile/internal/gc.funccompile(0x2c04cb40)\r\n        c:/dev/go/src/cmd/compile/internal/gc/dcl.go:1450 +0x198 fp=0x513b7734 sp=0x513b76f8\r\ncmd/compile/internal/gc.genwrapper(0x3d66cfc0, 0x3d6675f0, 0x51e1a200, 0x1)\r\n        c:/dev/go/src/cmd/compile/internal/gc/subr.go:2404 +0xc51 fp=0x513b7838 sp=0x513b7734\r\ncmd/compile/internal/gc.methods(0x3d66cfc0, 0x0, 0x0, 0x0)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:345 +0x726 fp=0x513b78e4 sp=0x513b7838\r\ncmd/compile/internal/gc.dextratype(0x2ae5fd80, 0x28, 0x3d66cfc0, 0x1c, 0x28)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:479 +0x25 fp=0x513b7934 sp=0x513b78e4\r\ncmd/compile/internal/gc.dtypesym(0x3d66cfc0, 0x3d66cfc0)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:1197 +0x303 fp=0x513b7a08 sp=0x513b7934\r\ncmd/compile/internal/gc.dcommontype(0x2ae5fb00, 0x0, 0x177e3ef0, 0x0)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:707 +0x741 fp=0x513b7ac8 sp=0x513b7a08\r\ncmd/compile/internal/gc.dtypesym(0x177e3ef0, 0x2adb40c0)\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:1167 +0xb28 fp=0x513b7b9c sp=0x513b7ac8\r\ncmd/compile/internal/gc.dumptypestructs()\r\n        c:/dev/go/src/cmd/compile/internal/gc/reflect.go:1250 +0x40f fp=0x513b7bfc sp=0x513b7b9c\r\ncmd/compile/internal/gc.dumpobj()\r\n        c:/dev/go/src/cmd/compile/internal/gc/obj.go:76 +0xb6c fp=0x513b7d24 sp=0x513b7bfc\r\ncmd/compile/internal/gc.Main()\r\n        c:/dev/go/src/cmd/compile/internal/gc/lex.go:495 +0x1ce0 fp=0x513b7eb8 sp=0x513b7d24\r\ncmd/compile/internal/x86.Main()\r\n        c:/dev/go/src/cmd/compile/internal/x86/galign.go:108 +0x53e fp=0x513b7f24 sp=0x513b7eb8\r\nmain.main()\r\n        c:/dev/go/src/cmd/compile/main.go:30 +0x117 fp=0x513b7f90 sp=0x513b7f24\r\nruntime.main()\r\n        c:/dev/go/src/runtime/proc.go:188 +0x234 fp=0x513b7fb8 sp=0x513b7f90\r\nruntime.goexit()\r\n        c:/dev/go/src/runtime/asm_386.s:1585 +0x1 fp=0x513b7fbc sp=0x513b7fb8\r\n\r\nC:\\dev\\go\\src\u003e\r\n```\r\n\r\nI must agree with Dave. You program is too complicated for cmd/compile to fit everything it needs in memory that is available on Windows 32-bit OS. It does not matter how much memory you have in your computer. The problem is that \"memory address space\" on Windows 32-bit is limited to 2GB, all shared by your program and all DLLs your program use.\r\n\r\nAlex",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-01-15T05:04:07Z",
	"updated_at": "2016-01-15T05:04:07Z"
}
