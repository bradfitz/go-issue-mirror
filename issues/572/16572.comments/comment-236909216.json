{
	"id": 236909216,
	"body": "@icing Hmm, let me add some detail to this. Running the same version of Go on a different OS (`go version` gives `go version go1.7rc4 linux/amd64`), and hitting `https://shootout.lukasa.co.uk/.well-known/h2interop/state`, I get the following debug output:\r\n\r\n```\r\nroot@72cc5ec48c33:/usr/src/myapp# env GODEBUG=http2debug=2 go run main.go\r\n2016/08/02 13:44:36 http2: Transport failed to get client conn for shootout.lukasa.co.uk:443: http2: no cached connection was available\r\n2016/08/02 13:44:36 http2: Transport creating client conn to 139.59.179.124:443\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: wrote SETTINGS len=18, settings: ENABLE_PUSH=0, INITIAL_WINDOW_SIZE=4194304, MAX_HEADER_LIST_SIZE=10485760\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: wrote WINDOW_UPDATE len=4 (conn) incr=1073741824\r\n2016/08/02 13:44:36 http2: Transport encoding header \":authority\" = \"shootout.lukasa.co.uk\"\r\n2016/08/02 13:44:36 http2: Transport encoding header \":method\" = \"GET\"\r\n2016/08/02 13:44:36 http2: Transport encoding header \":path\" = \"/.well-known/h2interop/state\"\r\n2016/08/02 13:44:36 http2: Transport encoding header \":scheme\" = \"https\"\r\n2016/08/02 13:44:36 http2: Transport encoding header \"accept-encoding\" = \"gzip\"\r\n2016/08/02 13:44:36 http2: Transport encoding header \"user-agent\" = \"Go-http-client/2.0\"\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: wrote HEADERS flags=END_STREAM|END_HEADERS stream=1 len=61\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: read SETTINGS len=30, settings: HEADER_TABLE_SIZE=4096, ENABLE_PUSH=0, INITIAL_WINDOW_SIZE=65535, MAX_FRAME_SIZE=16384, MAX_CONCURRENT_STREAMS=100\r\n2016/08/02 13:44:36 http2: Transport received SETTINGS len=30, settings: HEADER_TABLE_SIZE=4096, ENABLE_PUSH=0, INITIAL_WINDOW_SIZE=65535, MAX_FRAME_SIZE=16384, MAX_CONCURRENT_STREAMS=100\r\n2016/08/02 13:44:36 Unhandled Setting: [HEADER_TABLE_SIZE = 4096]\r\n2016/08/02 13:44:36 Unhandled Setting: [ENABLE_PUSH = 0]\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: wrote SETTINGS flags=ACK len=0\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: read SETTINGS flags=ACK len=0\r\n2016/08/02 13:44:36 http2: Transport received SETTINGS flags=ACK len=0\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: read HEADERS flags=END_HEADERS stream=1 len=98\r\n2016/08/02 13:44:36 http2: Transport received HEADERS flags=END_HEADERS stream=1 len=98\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: read DATA stream=1 len=1370 data=\"{\\n    \\\"threads\\\": 1, \\n    \\\"settings\\\": {\\n        \\\"SETTINGS_HEADER_TABLE_SIZE\\\": 4096, \\n        \\\"SETTINGS_ENABLE_PUSH\\\": 0, \\n        \\\"SETTINGS_INITIAL_WINDOW_SIZE\\\": 65535, \\n        \\\"SETTINGS_MAX_FRAME_SIZE\\\": 16384, \\n        \\\"SETTINGS_MAX_CONCURRENT_STREAMS\\\": 10\" (1114 bytes omitted)\r\n2016/08/02 13:44:36 http2: Transport received DATA stream=1 len=1370 data=\"{\\n    \\\"threads\\\": 1, \\n    \\\"settings\\\": {\\n        \\\"SETTINGS_HEADER_TABLE_SIZE\\\": 4096, \\n        \\\"SETTINGS_ENABLE_PUSH\\\": 0, \\n        \\\"SETTINGS_INITIAL_WINDOW_SIZE\\\": 65535, \\n        \\\"SETTINGS_MAX_FRAME_SIZE\\\": 16384, \\n        \\\"SETTINGS_MAX_CONCURRENT_STREAMS\\\": 10\" (1114 bytes omitted)\r\n2016/08/02 13:44:36 http2: Framer 0xc420300e40: read DATA flags=END_STREAM stream=1 len=0 data=\"\"\r\n2016/08/02 13:44:36 http2: Transport received DATA flags=END_STREAM stream=1 len=0 data=\"\"\r\n{\r\n    \"threads\": 1, \r\n    \"settings\": {\r\n        \"SETTINGS_HEADER_TABLE_SIZE\": 4096, \r\n        \"SETTINGS_ENABLE_PUSH\": 0, \r\n        \"SETTINGS_INITIAL_WINDOW_SIZE\": 65535, \r\n        \"SETTINGS_MAX_FRAME_SIZE\": 16384, \r\n        \"SETTINGS_MAX_CONCURRENT_STREAMS\": 100\r\n    }, \r\n    \"peerSettings\": {\r\n        \"SETTINGS_HEADER_TABLE_SIZE\": 4096, \r\n        \"SETTINGS_ENABLE_PUSH\": 0, \r\n        \"SETTINGS_INITIAL_WINDOW_SIZE\": 4194304, \r\n        \"SETTINGS_MAX_FRAME_SIZE\": 16384, \r\n        \"SETTINGS_MAX_CONCURRENT_STREAMS\": 4294967297\r\n    }, \r\n    \"sentGoAway\": false, \r\n    \"connFlowOut\": 1073807359, \r\n    \"connFlowIn\": 65535, \r\n    \"maxSeenStreamID\": 1, \r\n    \"streams\": {\r\n        \"1\": {\r\n            \"state\": \"HALF_CLOSED_REMOTE\", \r\n            \"flowIn\": 65535, \r\n            \"flowOut\": 4194304\r\n        }\r\n    }, \r\n    \"hpack\": {\r\n        \"inbound_table_size\": 239, \r\n        \"inbound_dynamic_header_table\": [\r\n            [\r\n                \"user-agent\", \r\n                \"Go-http-client/2.0\"\r\n            ], \r\n            [\r\n                \"accept-encoding\", \r\n                \"gzip\"\r\n            ], \r\n            [\r\n                \":path\", \r\n                \"/.well-known/h2interop/state\"\r\n            ], \r\n            [\r\n                \":authority\", \r\n                \"shootout.lukasa.co.uk\"\r\n            ]\r\n        ], \r\n        \"outbound_table_size\": 0, \r\n        \"outbound_dynamic_header_table\": []\r\n    }\r\n```\r\n\r\nThis output shows Go receiving an END_STREAM on a empty DATA frame and producing the output regardless.\r\n\r\nDo you have the output with the `GODEBUG=http2debug=2` environment variable set?",
	"user": {
		"login": "Lukasa",
		"id": 1382556,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-08-02T13:47:51Z",
	"updated_at": "2016-08-02T13:47:51Z"
}
