{
	"id": 100773857,
	"number": 12132,
	"state": "closed",
	"title": "cmd/go, runtime: strace shows futex failing with EAGAIN",
	"body": "Hello Gophers!\r\n\r\nHere is a (partial) strace (the file stringer.go is just for the test and comes from the tour.golang.org)\r\n\r\naurelien@iceberg:~/go/src/github.com/4ur3l13n/go/test$ strace go run stringer.go\r\nexecve(\"/usr/bin/go\", [\"go\", \"run\", \"stringer.go\"], [/* 35 vars */]) = 0\r\nbrk(0)                                  = 0x1ebe000\r\naccess(\"/etc/ld.so.preload\", R_OK)      = -1 ENOENT (No such file or directory)\r\nopen(\"/etc/ld.so.cache\", O_RDONLY|O_CLOEXEC) = 3\r\n\r\nThe code run fine, but the strace give that error\r\n\r\n+ (many times)\r\n\r\nfutex(0xc2080207d8, FUTEX_WAKE, 1)      = 1\r\nfutex(0xa8fb98, FUTEX_WAIT, 0, NULL)    = -1 EAGAIN (Resource temporarily unavailable)\r\nfutex(0xc2080207d8, FUTEX_WAKE, 1)      = 1\r\n\r\n+ \r\n\r\nfutex(0xc2080207d8, FUTEX_WAKE, 1)      = 1\r\nstat(\"/home/aurelien/go/bin/gccgo\", 0xc208072090) = -1 ENOENT (No such file or directory)\r\nstat(\"/home/aurelien/go/bin/gccgo\", 0xc208072120) = -1 ENOENT (No such file or directory)\r\nstat(\"/home/aurelien/go/bin/gccgo\", 0xc2080721b0) = -1 ENOENT (No such file or directory)\r\nstat(\"/home/aurelien/go/bin/gccgo\", 0xc208072240) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/local/sbin/gccgo\", 0xc2080722d0) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/local/bin/gccgo\", 0xc208072360) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/bin/gccgo\", 0xc2080723f0)    = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/lib/jvm/default/bin/gccgo\", 0xc208072480) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/bin/site_perl/gccgo\", 0xc208072510) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/bin/vendor_perl/gccgo\", 0xc2080725a0) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/bin/core_perl/gccgo\", 0xc208072630) = -1 ENOENT (No such file or directory)\r\nstat(\"/usr/lib/go\", {st_mode=S_IFDIR|0755, st_size=4096, ...}) = 0\r\n\r\nBut the codes run\r\n\r\nunlink(\"/tmp/go-build761553309/command-line-arguments/_obj\") = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309/command-line-arguments/_obj\") = -1 ENOTEMPTY (Directory not empty)\r\nlstat(\"/tmp/go-build761553309/command-line-arguments/_obj\", {st_mode=S_IFDIR|0755, st_size=60, ...}) = 0\r\nopen(\"/tmp/go-build761553309/command-line-arguments/_obj\", O_RDONLY|O_CLOEXEC) = 5\r\ngetdents64(5, /* 3 entries */, 4096)    = 72\r\ngetdents64(5, /* 0 entries */, 4096)    = 0\r\nunlink(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\") = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\") = -1 ENOTEMPTY (Directory not empty)\r\nlstat(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\", {st_mode=S_IFDIR|0755, st_size=60, ...}) = 0\r\nopen(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\", O_RDONLY|O_CLOEXEC) = 6\r\ngetdents64(6, /* 3 entries */, 4096)    = 80\r\ngetdents64(6, /* 0 entries */, 4096)    = 0\r\nunlink(\"/tmp/go-build761553309/command-line-arguments/_obj/exe/stringer\") = 0\r\ngetdents64(6, /* 0 entries */, 4096)    = 0\r\nclose(6)                                = 0\r\nunlink(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\") = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309/command-line-arguments/_obj/exe\") = 0\r\ngetdents64(5, /* 0 entries */, 4096)    = 0\r\nclose(5)                                = 0\r\nunlink(\"/tmp/go-build761553309/command-line-arguments/_obj\") = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309/command-line-arguments/_obj\") = 0\r\ngetdents64(4, /* 0 entries */, 4096)    = 0\r\nclose(4)                                = 0\r\nunlink(\"/tmp/go-build761553309/command-line-arguments\") = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309/command-line-arguments\") = 0\r\ngetdents64(3, /* 0 entries */, 4096)    = 0\r\nclose(3)                                = 0\r\nunlink(\"/tmp/go-build761553309\")        = -1 EISDIR (Is a directory)\r\nrmdir(\"/tmp/go-build761553309\")         = 0\r\nexit_group(0)                           = ?\r\n+++ exited with 0 +++\r\naurelien@iceberg:~/go/src/github.com/4ur3l13n/go/test$ go run stringer.go\r\nArthur Dent (42 years) Zaphod Beeblebrox (9001 years)\r\n\r\nA last point a: $ gdb go run stringer.go\r\n\r\ngive :\r\n\r\nLine number 724 out of range; /usr/lib/go/src/cmd/go/main.go has 723 lines\r\n\r\nThe point is that, every time I make a gdb on a (working) code it give me back that, any reason?\r\n\r\n\r\n\r\n\r\nAD",
	"user": {
		"login": "aurelien-git",
		"id": 5598565,
		"type": "User",
		"site_admin": false
	},
	"comments": 2,
	"closed_at": "2015-08-13T16:06:31Z",
	"created_at": "2015-08-13T13:50:40Z",
	"updated_at": "2015-08-13T23:26:56Z"
}
