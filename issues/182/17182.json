{
	"id": 178439500,
	"number": 17182,
	"state": "closed",
	"title": "compile: can't build go distribution",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n### What version of Go are you using (`go version`)?\r\ngo version go1.7.1 darwin/amd64\r\n\r\n### What operating system and processor architecture are you using (`go env`)?\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"darwin\"\r\nGOOS=\"darwin\"\r\nGOPATH=\"/Users/albert/go\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/local/opt/go/libexec\"\r\nGOTOOLDIR=\"/usr/local/opt/go/libexec/pkg/tool/darwin_amd64\"\r\nCC=\"clang\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/wp/sytm29yd1d1dclmf01xgvqbw0000gn/T/go-build971136125=/tmp/go-build -gno-record-gcc-switches -fno-common\"\r\nCXX=\"clang++\"\r\nCGO_ENABLED=\"1\"\r\n\r\n**Just updated to macOS Sierra, if it makes sense**\r\n\r\n### What did you do?\r\nIf possible, provide a recipe for reproducing the error.\r\nA complete runnable program is good.\r\nA link on play.golang.org is best.\r\nTrying to build go distribution\r\n```bash\r\ngit clone https://go.googlesource.com/go godev\r\ncd godev/src\r\n./all.bash\r\n```\r\n### What did you expect to see?\r\n```\r\nALL TESTS PASSED\r\n```\r\n\r\n### What did you see instead?\r\n```\r\n##### Building Go bootstrap tool.\r\ncmd/dist\r\n\r\n##### Building Go toolchain using /Users/albert/.go1.4.\r\nbootstrap/internal/dwarf\r\nbootstrap/internal/sys\r\nbootstrap/asm/internal/flags\r\nbootstrap/internal/bio\r\nbootstrap/compile/internal/big\r\nbootstrap/internal/obj\r\nbootstrap/compile/internal/syntax\r\nbootstrap/internal/gcprog\r\nbootstrap/internal/obj/arm\r\nbootstrap/internal/obj/arm64\r\nbootstrap/internal/obj/mips\r\nbootstrap/internal/obj/ppc64\r\nbootstrap/internal/obj/s390x\r\nbootstrap/internal/obj/x86\r\nbootstrap/asm/internal/lex\r\nbootstrap/link/internal/ld\r\nbootstrap/asm/internal/arch\r\nbootstrap/compile/internal/ssa\r\nbootstrap/asm/internal/asm\r\nbootstrap/asm\r\nbootstrap/link/internal/amd64\r\nbootstrap/link/internal/arm\r\nbootstrap/link/internal/arm64\r\nbootstrap/link/internal/mips64\r\nbootstrap/link/internal/ppc64\r\nbootstrap/link/internal/s390x\r\nbootstrap/link/internal/x86\r\nbootstrap/link\r\nbootstrap/compile/internal/gc\r\nbootstrap/compile/internal/amd64\r\nbootstrap/compile/internal/arm\r\nbootstrap/compile/internal/arm64\r\nbootstrap/compile/internal/mips64\r\nbootstrap/compile/internal/ppc64\r\nbootstrap/compile/internal/s390x\r\nbootstrap/compile/internal/x86\r\nbootstrap/compile\r\n\r\n##### Building go_bootstrap for host, darwin/amd64.\r\nruntime/internal/sys\r\nruntime/internal/atomic\r\nruntime\r\nencoding\r\nerrors\r\ninternal/race\r\ninternal/syscall/windows/sysdll\r\nmath\r\nsort\r\nsync/atomic\r\nunicode\r\nunicode/utf16\r\nunicode/utf8\r\ncontainer/heap\r\nsync\r\ninternal/singleflight\r\nio\r\nsyscall\r\nhash\r\nbytes\r\nstrings\r\nhash/adler32\r\nbufio\r\nstrconv\r\npath\r\nreflect\r\nencoding/base64\r\ncrypto\r\nregexp/syntax\r\ncrypto/sha1\r\ninternal/syscall/windows\r\ninternal/syscall/windows/registry\r\ntime\r\nregexp\r\nos\r\nos/signal\r\npath/filepath\r\nio/ioutil\r\nencoding/binary\r\nfmt\r\ncontext\r\nflag\r\ngo/token\r\nlog\r\nnet/url\r\ntext/template/parse\r\ncompress/flate\r\nencoding/json\r\ndebug/dwarf\r\nos/exec\r\ngo/scanner\r\ngo/ast\r\ncompress/zlib\r\ntext/template\r\ndebug/macho\r\ndebug/elf\r\nunexpected fault address 0xf161c606c38\r\nfatal error: fault\r\n[signal 0xb code=0x1 addr=0xf161c606c38 pc=0x24ef15]\r\n\r\ngoroutine 1 [running]:\r\nruntime.gothrow(0x780320, 0x5)\r\n\t/usr/local/go/src/runtime/panic.go:503 +0x8e fp=0xc2085b1ea8 sp=0xc2085b1e90\r\nruntime.sigpanic()\r\n\t/usr/local/go/src/runtime/sigpanic_unix.go:29 +0x261 fp=0xc2085b1ef8 sp=0xc2085b1ea8\r\nbootstrap/compile/internal/ssa.(*Config).Log(0xf161c606bd0, 0x0)\r\n\t/Users/albert/godev/src/cmd/compile/internal/ssa/config.go:288 +0x25 fp=0xc2085b1f20 sp=0xc2085b1ef8\r\nbootstrap/compile/internal/ssa.(*Func).Log(0xc208cdde60, 0xc200000000)\r\n\t/Users/albert/godev/src/cmd/compile/internal/ssa/func.go:411 +0x2b fp=0xc2085b1f38 sp=0xc2085b1f20\r\nbootstrap/compile/internal/ssa.Compile(0xc208cdde60)\r\n\t/Users/albert/godev/src/cmd/compile/internal/ssa/compile.go:68 +0x54d fp=0xc2085b5638 sp=0xc2085b1f38\r\nbootstrap/compile/internal/gc.buildssa(0xc208704480, 0x0)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/ssa.go:169 +0x1490 fp=0xc2085b5970 sp=0xc2085b5638\r\nbootstrap/compile/internal/gc.compile(0xc208704480)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/pgen.go:370 +0x6f5 fp=0xc2085b5b78 sp=0xc2085b5970\r\nbootstrap/compile/internal/gc.funccompile(0xc208704480)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/dcl.go:1260 +0x1be fp=0xc2085b5bf0 sp=0xc2085b5b78\r\nbootstrap/compile/internal/gc.Main()\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/main.go:472 +0x2a3c fp=0xc2085b5ee0 sp=0xc2085b5bf0\r\nmain.main()\r\n\t/Users/albert/godev/src/cmd/compile/main.go:47 +0x12f fp=0xc2085b5f98 sp=0xc2085b5ee0\r\nruntime.main()\r\n\t/usr/local/go/src/runtime/proc.go:63 +0xf3 fp=0xc2085b5fe0 sp=0xc2085b5f98\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc2085b5fe8 sp=0xc2085b5fe0\r\ngo tool dist: FAILED: /Users/albert/godev/pkg/tool/darwin_amd64/compile -pack -o /var/folders/wp/sytm29yd1d1dclmf01xgvqbw0000gn/T/go-tool-dist-871135730/text/template/_go_.a -p text/template /Users/albert/godev/src/text/template/doc.go /Users/albert/godev/src/text/template/exec.go /Users/albert/godev/src/text/template/funcs.go /Users/albert/godev/src/text/template/helper.go /Users/albert/godev/src/text/template/option.go /Users/albert/godev/src/text/template/template.go: exit status 2\r\nfailed MSpanList_Insert 0xc01050 0xf161d920d74 0x0\r\nfatal error: MSpanList_Insert\r\n\r\nruntime stack:\r\nruntime.MSpanList_Insert(0xb19d90, 0xc01050)\r\n\t/usr/local/go/src/runtime/mheap.c:692 +0x8f\r\nruntime.MHeap_Free(0xb19d20, 0xc01050, 0x0)\r\n\t/usr/local/go/src/runtime/mheap.c:500 +0x5b\r\nruntime.MCentral_FreeSpan(0xb236b8, 0xc01050, 0x2, 0xc20848e000, 0xc20848f000, 0x0, 0x64)\r\n\t/usr/local/go/src/runtime/mcentral.c:181 +0x1bb\r\nruntime.MSpan_Sweep(0xc01050, 0xf00000000, 0x1)\r\n\t/usr/local/go/src/runtime/mgc0.c:1099 +0x477\r\nruntime.MHeap_Alloc(0xb19d20, 0x1, 0x10000000008, 0xd589)\r\n\t/usr/local/go/src/runtime/mheap.c:240 +0x66\r\nruntime.MCentral_CacheSpan(0xb20f58, 0xc00e48)\r\n\t/usr/local/go/src/runtime/mcentral.c:85 +0x167\r\nruntime.MCache_Refill(0xbeb000, 0x8, 0xc00e48)\r\n\t/usr/local/go/src/runtime/mcache.c:90 +0xa0\r\n\r\ngoroutine 1 [running]:\r\nruntime.switchtoM()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:198 fp=0xc2089d11d8 sp=0xc2089d11d0\r\nruntime.mallocgc(0x70, 0x7313c0, 0xc200000000, 0xc2087cb738)\r\n\t/usr/local/go/src/runtime/malloc.go:178 +0x849 fp=0xc2089d1288 sp=0xc2089d11d8\r\nruntime.newobject(0x7313c0, 0xc200000da2)\r\n\t/usr/local/go/src/runtime/malloc.go:353 +0x49 fp=0xc2089d12b0 sp=0xc2089d1288\r\nbootstrap/compile/internal/ssa.(*Func).newValue(0xc2088dbd40, 0x5ba, 0xc0c200, 0xc20804c050, 0xc2087ad5e8, 0x17e, 0xc208489f80)\r\n\t/Users/albert/godev/src/cmd/compile/internal/ssa/func.go:92 +0x2ab fp=0xc2089d1338 sp=0xc2089d12b0\r\nbootstrap/compile/internal/ssa.(*Block).NewValue0A(0xc2087ad5e8, 0x5ba0000017e, 0xc0c200, 0xc20804c050, 0x74d040, 0xc208936630, 0xc208489f80)\r\n\t/Users/albert/godev/src/cmd/compile/internal/ssa/func.go:211 +0x1fb fp=0xc2089d13c8 sp=0xc2089d1338\r\nbootstrap/compile/internal/gc.(*state).lookupVarOutgoing(0xc2088edb00, 0xc2087ad5e8, 0xc0c200, 0xc20804c050, 0xc208936630, 0xc20000017e, 0xc208489f80)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/ssa.go:4087 +0x130 fp=0xc2089d1498 sp=0xc2089d13c8\r\nbootstrap/compile/internal/gc.(*state).resolveFwdRef(0xc2088edb00, 0xc208489f80, 0x0)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/ssa.go:4043 +0x858 fp=0xc2089d1600 sp=0xc2089d1498\r\nbootstrap/compile/internal/gc.(*state).linkForwardReferences(0xc2088edb00, 0x0)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/ssa.go:3997 +0xb8 fp=0xc2089d1638 sp=0xc2089d1600\r\nbootstrap/compile/internal/gc.buildssa(0xc208533a70, 0x0)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/ssa.go:158 +0x102d fp=0xc2089d1970 sp=0xc2089d1638\r\nbootstrap/compile/internal/gc.compile(0xc208533a70)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/pgen.go:370 +0x6f5 fp=0xc2089d1b78 sp=0xc2089d1970\r\nbootstrap/compile/internal/gc.funccompile(0xc208533a70)\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/dcl.go:1260 +0x1be fp=0xc2089d1bf0 sp=0xc2089d1b78\r\nbootstrap/compile/internal/gc.Main()\r\n\t/Users/albert/godev/src/cmd/compile/internal/gc/main.go:472 +0x2a3c fp=0xc2089d1ee0 sp=0xc2089d1bf0\r\nmain.main()\r\n\t/Users/albert/godev/src/cmd/compile/main.go:47 +0x12f fp=0xc2089d1f98 sp=0xc2089d1ee0\r\nruntime.main()\r\n\t/usr/local/go/src/runtime/proc.go:63 +0xf3 fp=0xc2089d1fe0 sp=0xc2089d1f98\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc2089d1fe8 sp=0xc2089d1fe0\r\ncan't create /var/folders/wp/sytm29yd1d1dclmf01xgvqbw0000gn/T/go-tool-dist-871135730/debug/elf/_go_.a: open /var/folders/wp/sytm29yd1d1dclmf01xgvqbw0000gn/T/go-tool-dist-871135730/debug/elf/_go_.a: no such file or directory\r\n```\r\n\r\n",
	"user": {
		"login": "bogem",
		"id": 13235519,
		"type": "User",
		"site_admin": false
	},
	"comments": 11,
	"closed_at": "2016-09-22T06:37:38Z",
	"created_at": "2016-09-21T19:22:58Z",
	"updated_at": "2016-09-22T06:37:38Z"
}
