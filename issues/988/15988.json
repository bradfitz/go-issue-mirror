{
	"id": 158947478,
	"number": 15988,
	"state": "closed",
	"title": "cmd/compile: internal compiler error: append not lowered when building kubernetes on ppc64le tip",
	"body": "Please answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\ngo version devel +2f08888 Tue Jun 7 06:04:23 2016 +0000 linux/ppc64le\r\nDoes not happen on go1.6\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\nppc64le Ubuntu 16.04\r\n\r\n3. What did you do?\r\nIf possible, provide a recipe for reproducing the error.\r\nA complete runnable program is good.\r\nA link on play.golang.org is best.\r\nBuilt golang on ppc64le from latest master, used it to build latest from kubernetes with a few minor modifications to golang.sh.\r\n\r\ngit clone https://github.com/kubernetes/kubernetes.git\r\ncd kubernetes\r\nApply this patch\r\n[kub.txt](https://github.com/golang/go/files/302904/kub.txt)\r\n\r\nmake\r\n\r\n4. What did you expect to see?\r\nThere are linker errors that occur on ppc64le which I am trying to debug, but this error is hit first.\r\n\r\n5. What did you see instead?\r\n```\r\n/home/boger/golang/upstream/go/pkg/tool/linux_ppc64le/compile -o $WORK/k8s.io/kubernetes/test/integration/framework.a -trimpath $WORK -p k8s.io/kubernetes/test/integration/framework -complete -buildid 55d44bb75e77b40e73e639b0ab0f1a4588e7ff96 -importmap github.com/coreos/etcd/client=k8s.io/kubernetes/vendor/github.com/coreos/etcd/client -importmap github.com/golang/glog=k8s.io/kubernetes/vendor/github.com/golang/glog -importmap golang.org/x/net/context=k8s.io/kubernetes/vendor/golang.org/x/net/context -D _/home/boger/kubnew/kubernetes/_output/local/go/src/k8s.io/kubernetes/test/integration/framework -I $WORK -I /home/boger/kubnew/kubernetes/_output/local/go/pkg/linux_ppc64le -pack ./etcd_utils.go ./master_utils.go ./serializer.go                  \r\n//# k8s.io/kubernetes/test/e2e/framework                                                                      \r\ncgen_append-n [0xc42bbab050]                                                                                \r\n.   APPEND l(6491) tc(1) SLICE-[]*extensions.ReplicaSet                                                     \r\n.   APPEND-list                                                                                             \r\n.   .   IND u(2) l(6491) tc(1) SLICE-[]*extensions.ReplicaSet                                               \r\n.   .   .   NAME-framework.\u0026oldRSs u(1) a(true) l(6472) x(0+0) class(PAUTO) tc(1) assigned used(true) PTR64-*[]*extensions.ReplicaSet                                                                                   \r\n\r\n.   .   NAME-framework.autotmp_7249 u(1) a(true) l(6491) x(0+0) class(PAUTO) esc(N) tc(1) assigned used(true) PTR64-*extensions.ReplicaSet                                                                              \r\ncgen_append-res [0xc43173be60]                                                                              \r\n.   IND u(2) l(6491) tc(1) SLICE-[]*extensions.ReplicaSet                                                   \r\n.   .   NAME-framework.\u0026allRSs u(1) a(true) l(6472) x(0+0) class(PAUTO) tc(1) assigned used(true) PTR64-*[]*extensions.ReplicaSet                                                                                       \r\ntest/e2e/framework/util.go:2858: internal compiler error: append not lowered                                \r\ngoroutine 1 [running]:\r\nruntime/debug.Stack(0x0, 0x0, 0x0)\r\n        /home/boger/golang/upstream/go/src/runtime/debug/stack.go:24 +0x7c\r\ncmd/compile/internal/gc.Fatalf(0x65c616, 0x12, 0x0, 0x0, 0x0)             \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/subr.go:165 +0x270\r\ncmd/compile/internal/gc.cgen_append(0xc42bbab050, 0xc43173be60)                      \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/cgen.go:2861 +0x17c\r\ncmd/compile/internal/gc.cgen_wb(0xc42bbab050, 0xc43173be60, 0x0)                      \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/cgen.go:65 +0x1e0  \r\ncmd/compile/internal/gc.Cgen_as_wb(0xc43173be60, 0xc42bbab050, 0x1900)                \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/gen.go:1015 +0x1a0 \r\ncmd/compile/internal/gc.Cgen_as(0xc43173be60, 0xc42bbab050)                           \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/gen.go:971 +0x3c   \r\ncmd/compile/internal/gc.gen(0xc42bbab0e0)                                             \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/gen.go:918 +0x220  \r\ncmd/compile/internal/gc.Genlist(0xc43171ad00)                                         \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/gen.go:303 +0x8c   \r\ncmd/compile/internal/gc.genlegacy(0xc420150278, 0xc43173c7e0, 0xc43173c850)           \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/pgen.go:498 +0x84  \r\ncmd/compile/internal/gc.compile(0xc42b3ce900)                                         \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/pgen.go:485 +0x1268\r\ncmd/compile/internal/gc.funccompile(0xc42b3ce900)                                     \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/dcl.go:1287 +0x1a8 \r\ncmd/compile/internal/gc.Main()                                                        \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/gc/main.go:467 +0x2370\r\ncmd/compile/internal/ppc64.Main()                                                     \r\n        /home/boger/golang/upstream/go/src/cmd/compile/internal/ppc64/galign.go:72 +0x348\r\nmain.main()                                                                              \r\n        /home/boger/golang/upstream/go/src/cmd/compile/main.go:41 +0x4e8                 \r\n```\r\n\r\nThis error does not occur on x86.\r\n\r\n\r\n",
	"user": {
		"login": "laboger",
		"id": 9433228,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "randall77",
		"id": 6889504,
		"type": "User",
		"site_admin": false
	},
	"comments": 3,
	"closed_at": "2016-06-08T00:01:49Z",
	"created_at": "2016-06-07T15:07:24Z",
	"updated_at": "2016-06-08T00:01:49Z",
	"milestone": {
		"id": 1414133,
		"number": 31,
		"title": "Go1.7"
	}
}
