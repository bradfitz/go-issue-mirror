{
	"id": 134573825,
	"number": 14380,
	"state": "closed",
	"title": "go 1.6: Huge increase in build time",
	"body": "I noticed huge increase in build time going from go 1.5.3 to 1.6\r\n\r\nI'm on Archlinux x86_64, using the go [package](https://www.archlinux.org/packages/community/x86_64/go/) provided by Archlinux.\r\n\r\nHere is a project where I see huge increase in build time: https://github.com/mikkeloscar/maze/tree/f21b53cad5624744b49bbb3ab280a3eebf2d2376\r\n\r\nBuild time with go 1.5.3:\r\n\r\n```\r\n$ go version\r\ngo version go1.5.3 linux/amd64\r\n$ time go build -v\r\ngithub.com/drone/drone/shared/server\r\ngithub.com/mikkeloscar/maze/model\r\ngithub.com/mikkeloscar/maze/common/pkgconfig\r\ngithub.com/mikkeloscar/gopkgbuild\r\ngithub.com/mikkeloscar/maze/common/util\r\ngithub.com/mikkeloscar/maze/remote/github\r\ngithub.com/mikkeloscar/aur\r\ngithub.com/mikkeloscar/maze/store\r\ngithub.com/drone/drone/shared/crypto\r\ngithub.com/mikkeloscar/maze/store/datastore\r\ngithub.com/mikkeloscar/maze/remote\r\ngithub.com/mikkeloscar/maze/repo\r\ngithub.com/mikkeloscar/maze/router/middleware/context\r\ngithub.com/mikkeloscar/maze/source\r\ngithub.com/mikkeloscar/maze/router/middleware/session\r\ngithub.com/mikkeloscar/maze/source/aur\r\ngithub.com/mikkeloscar/maze/checker\r\ngithub.com/mikkeloscar/maze/controller\r\ngithub.com/mikkeloscar/maze/router\r\ngithub.com/mikkeloscar/maze\r\ngo build -v  4.27s user 0.25s system 160% cpu 2.816 total\r\n```\r\n\r\nBuild time with go 1.6:\r\n\r\n```\r\n$ go version\r\ngo version go1.6 linux/amd64\r\n$ time go build -v\r\ngithub.com/Sirupsen/logrus\r\ngithub.com/drone/drone/shared/envconfig\r\ngithub.com/drone/drone/vendor/github.com/Sirupsen/logrus\r\ngithub.com/golang/protobuf/proto\r\ngopkg.in/go-playground/validator.v8\r\ngithub.com/drone/drone/shared/server\r\ngithub.com/gin-gonic/gin/render\r\ngithub.com/manucorporat/sse\r\ngolang.org/x/net/context\r\ngithub.com/mikkeloscar/maze/model\r\ngopkg.in/yaml.v2\r\ngithub.com/drone/drone/shared/httputil\r\ngithub.com/google/go-querystring/query\r\ngithub.com/google/go-github/github\r\ngithub.com/gorilla/securecookie\r\ngithub.com/gin-gonic/gin/binding\r\ngolang.org/x/oauth2/internal\r\ngithub.com/gin-gonic/gin\r\ngolang.org/x/oauth2\r\ngithub.com/mikkeloscar/maze/common/pkgconfig\r\ngithub.com/mikkeloscar/gopkgbuild\r\ngithub.com/mikkeloscar/maze/common/util\r\ngithub.com/mikkeloscar/aur\r\ngithub.com/mikkeloscar/maze/store\r\ngithub.com/mikkeloscar/maze/repo\r\ngithub.com/drone/drone/vendor/code.google.com/p/go.crypto/ssh\r\ngithub.com/drone/drone/vendor/github.com/square/go-jose/cipher\r\ngithub.com/mikkeloscar/maze/remote/github\r\ngithub.com/drone/drone/vendor/github.com/square/go-jose\r\ngithub.com/mikkeloscar/maze/source\r\ngithub.com/mikkeloscar/maze/source/aur\r\ngithub.com/drone/drone/vendor/github.com/dgrijalva/jwt-go\r\ngithub.com/mikkeloscar/maze/remote\r\ngithub.com/mikkeloscar/maze/checker\r\ngithub.com/drone/drone/shared/token\r\ngithub.com/satori/go.uuid\r\ngithub.com/mikkeloscar/maze/router/middleware/session\r\ngithub.com/mikkeloscar/maze/router/middleware/context\r\ngithub.com/mattn/go-sqlite3\r\ngithub.com/rubenv/sql-migrate/sqlparse\r\ngopkg.in/gorp.v1\r\ngithub.com/russross/meddler\r\ngithub.com/drone/drone/shared/crypto\r\ngithub.com/mikkeloscar/maze/controller\r\ngithub.com/rubenv/sql-migrate\r\ngithub.com/mikkeloscar/maze/router\r\ngithub.com/mikkeloscar/maze/store/datastore\r\ngithub.com/mikkeloscar/maze\r\ngo build -v  32.38s user 0.76s system 131% cpu 25.262 total\r\n```\r\n\r\nIt looks like go 1.6 is visiting a lot more packages, but I guess that's just the output that has changed.\r\nI suspect it's related to the blank import [here](https://github.com/mikkeloscar/maze/blob/f21b53cad5624744b49bbb3ab280a3eebf2d2376/store/datastore/store.go#L10) since `go build -v` seems to stay on `github.com/mikkeloscar/maze/store/datastore` for a long time.\r\n",
	"user": {
		"login": "mikkeloscar",
		"id": 128566,
		"type": "User",
		"site_admin": false
	},
	"comments": 2,
	"closed_at": "2016-02-18T13:40:37Z",
	"created_at": "2016-02-18T12:55:06Z",
	"updated_at": "2016-04-13T13:55:58Z"
}
