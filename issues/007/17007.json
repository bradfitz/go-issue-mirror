{
	"id": 175362943,
	"number": 17007,
	"state": "open",
	"title": "runtime: fatal error: bad g-\u003estatus in ready",
	"body": "Seen on a number of trybot runs in the past few weeks:\r\n\r\nhttps://storage.googleapis.com/go-build-log/02de4ef8/windows-amd64-gce_80a1a98e.log\r\n\r\n```\r\nok  \tnet\t22.767s\r\nruntime: gp: gp=0xc0422dcb60, goid=2299, gp-\u003eatomicstatus=8\r\nruntime:  g:  g=0xa5cfe0, goid=0,  g-\u003eatomicstatus=0\r\nfatal error: bad g-\u003estatus in ready\r\n\r\nruntime stack:\r\nruntime.throw(0x867c02, 0x16)\r\n\tC:/workdir/go/src/runtime/panic.go:566 +0x9c\r\nruntime.ready(0xc0422dcb60, 0x3, 0xc04237f501)\r\n\tC:/workdir/go/src/runtime/proc.go:540 +0x14b\r\nruntime.goready.func1()\r\n\tC:/workdir/go/src/runtime/proc.go:270 +0x3f\r\nruntime.systemstack(0xa5d020)\r\n\tC:/workdir/go/src/runtime/asm_amd64.s:298 +0x7e\r\nruntime.mstart()\r\n\tC:/workdir/go/src/runtime/proc.go:1079\r\n\r\ngoroutine 2304 [running]:\r\nruntime.systemstack_switch()\r\n\tC:/workdir/go/src/runtime/asm_amd64.s:252 fp=0xc0420eba08 sp=0xc0420eba00\r\nruntime.goready(0xc0422dcb60, 0x3)\r\n\tC:/workdir/go/src/runtime/proc.go:271 +0x52 fp=0xc0420eba38 sp=0xc0420eba08\r\nruntime.closechan(0xc04233b800)\r\n\tC:/workdir/go/src/runtime/chan.go:371 +0x1c5 fp=0xc0420ebab8 sp=0xc0420eba38\r\nnet/http.(*persistConn).closeLocked(0xc04233c6c0, 0xa2e460, 0xc0420f0010)\r\n\tC:/workdir/go/src/net/http/transport.go:1933 +0xb1 fp=0xc0420ebb00 sp=0xc0420ebab8\r\nnet/http.(*persistConn).close(0xc04233c6c0, 0xa2e460, 0xc0420f0010)\r\n\tC:/workdir/go/src/net/http/transport.go:1913 +0x8c fp=0xc0420ebb30 sp=0xc0420ebb00\r\nnet/http.(*persistConn).readLoop.func1(0xc04233c6c0, 0xc0420ebc40)\r\n\tC:/workdir/go/src/net/http/transport.go:1397 +0x48 fp=0xc0420ebb58 sp=0xc0420ebb30\r\nnet/http.(*persistConn).readLoop(0xc04233c6c0)\r\n\tC:/workdir/go/src/net/http/transport.go:1470 +0x11d7 fp=0xc0420ebf98 sp=0xc0420ebb58\r\nruntime.goexit()\r\n\tC:/workdir/go/src/runtime/asm_amd64.s:2104 +0x1 fp=0xc0420ebfa0 sp=0xc0420ebf98\r\ncreated by net/http.(*Transport).dialConn\r\n\tC:/workdir/go/src/net/http/transport.go:1072 +0x4f2\r\n\r\ngoroutine 1 [chan receive]:\r\ntesting.(*T).Run(0xc04205a0c0, 0x8653e3, 0x13, 0x881ac8, 0xc04206dc01)\r\n\tC:/workdir/go/src/testing/testing.go:647 +0x31c\r\ntesting.RunTests.func1(0xc04205a0c0)\r\n\tC:/workdir/go/src/testing/testing.go:793 +0x6e\r\ntesting.tRunner(0xc04205a0c0, 0xc0420ede00)\r\n\tC:/workdir/go/src/testing/testing.go:610 +0x88\r\ntesting.RunTests(0x880f40, 0xa58660, 0x188, 0x188, 0x64)\r\n\tC:/workdir/go/src/testing/testing.go:799 +0x2fc\r\ntesting.(*M).Run(0xc0420edee8, 0x404212)\r\n\tC:/workdir/go/src/testing/testing.go:743 +0x8c\r\nnet/http_test.TestMain(0xc0420edee8)\r\n\tC:/workdir/go/src/net/http/main_test.go:19 +0x32\r\nmain.main()\r\n\tnet/http/_test/_testmain.go:880 +0xcd\r\n\r\ngoroutine 1837 [chan receive]:\r\ntesting.(*T).Parallel(0xc0424460c0)\r\n\tC:/workdir/go/src/testing/testing.go:552 +0x156\r\nnet/http_test.setParallel(0xc0424460c0)\r\n\tC:/workdir/go/src/net/http/main_test.go:87 +0x4a\r\nnet/http_test.TestServerTimeouts(0xc0424460c0)\r\n\tC:/workdir/go/src/net/http/serve_test.go:462 +0xa8\r\ntesting.tRunner(0xc0424460c0, 0x8820e0)\r\n\tC:/workdir/go/src/testing/testing.go:610 +0x88\r\ncreated by testing.(*T).Run\r\n\tC:/workdir/go/src/testing/testing.go:646 +0x2f2\r\n\r\ngoroutine 2138 [runnable]:\r\ntime.Sleep(0xf4240)\r\n\tC:/workdir/go/src/runtime/time.go:59 +0xef\r\nnet/http_test.TestTimeoutHandlerRace.func1(0xa31720, 0xc04225d400, 0xc0421325a0)\r\n\tC:/workdir/go/src/net/http/serve_test.go:1888 +0xe0\r\nnet/http.HandlerFunc.ServeHTTP(0x8821d8, 0xa31720, 0xc04225d400, 0xc0421325a0)\r\n\tC:/workdir/go/src/net/http/server.go:1726 +0x4b\r\nnet/http.(*timeoutHandler).ServeHTTP.func1(0xc042303080, 0xc04225d400, 0xc0421325a0, 0xc04221b620)\r\n\tC:/workdir/go/src/net/http/server.go:2531 +0x5a\r\ncreated by net/http.(*timeoutHandler).ServeHTTP\r\n\tC:/workdir/go/src/net/http/server.go:2533 +0x174\r\n\r\ngoroutine 2140 [runnable]:\r\ntime.Sleep(0xf4240)\r\n\tC:/workdir/go/src/runtime/time.go:59 +0xef\r\nnet/http_test.TestTimeoutHandlerRace.func1(0xa31720, 0xc04225d540, 0xc042132870)\r\n\tC:/workdir/go/src/net/http/serve_test.go:1888 +0xe0\r\nnet/http.HandlerFunc.ServeHTTP(0x8821d8, 0xa31720, 0xc04225d540, 0xc042132870)\r\n\tC:/workdir/go/src/net/http/server.go:1726 +0x4b\r\nnet/http.(*timeoutHandler).ServeHTTP.func1(0xc042303080, 0xc04225d540, 0xc042132870, 0xc04221b860)\r\n\tC:/workdir/go/src/net/http/server.go:2531 +0x5a\r\ncreated by net/http.(*timeoutHandler).ServeHTTP\r\n\tC:/workdir/go/src/net/http/server.go:2533 +0x174\r\n\r\ngoroutine 2305 [select]:\r\nnet/http.(*persistConn).writeLoop(0xc04233c6c0)\r\n\tC:/workdir/go/src/net/http/transport.go:1659 +0x3c4\r\ncreated by net/http.(*Transport).dialConn\r\n\tC:/workdir/go/src/net/http/transport.go:1073 +0x517\r\n\r\ngoroutine 2300 [IO wait]:\r\nnet.runtime_pollWait(0x223bc28, 0x72, 0xc0420f0848)\r\n\tC:/workdir/go/src/runtime/netpoll.go:160 +0x60\r\nnet.(*pollDesc).wait(0xc04237f4f0, 0x72, 0xc0420f0848, 0x0)\r\n\tC:/workdir/go/src/net/fd_poll_runtime.go:75 +0x3f\r\nnet.(*ioSrv).ExecIO(0xc042022020, 0xc04237f3e0, 0x85ea59, 0x8, 0xc04233f120, 0xc042352c00, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/fd_windows.go:171 +0x18a\r\nnet.(*netFD).acceptOne(0xc04237f380, 0xc0422d1180, 0x2, 0x2, 0xc04237f3e0, 0xc04217d050, 0xc0420bde40, 0xc0420bddc0)\r\n\tC:/workdir/go/src/net/fd_windows.go:529 +0x1f8\r\nnet.(*netFD).accept(0xc04237f380, 0x0, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/fd_windows.go:559 +0x131\r\nnet.(*TCPListener).accept(0xc042022368, 0x434c8e, 0xc0420bde70, 0x4c1a24)\r\n\tC:/workdir/go/src/net/tcpsock_posix.go:132 +0x35\r\nnet.(*TCPListener).Accept(0xc042022368, 0x881158, 0xc04202ab00, 0xa32060, 0xc04217cfc0)\r\n\tC:/workdir/go/src/net/tcpsock.go:225 +0x50\r\nnet/http.(*Server).Serve(0xc042417880, 0xa31520, 0xc042022368, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/http/server.go:2273 +0x1d5\r\nnet/http/httptest.(*Server).goServe.func1(0xc04233b5c0)\r\n\tC:/workdir/go/src/net/http/httptest/server.go:236 +0x74\r\ncreated by net/http/httptest.(*Server).goServe\r\n\tC:/workdir/go/src/net/http/httptest/server.go:237 +0x63\r\n\r\ngoroutine 2122 [runnable]:\r\ntime.Sleep(0xf4240)\r\n\tC:/workdir/go/src/runtime/time.go:59 +0xef\r\nnet/http_test.TestTimeoutHandlerRace.func1(0xa31720, 0xc04204b9a0, 0xc04225aa50)\r\n\tC:/workdir/go/src/net/http/serve_test.go:1888 +0xe0\r\nnet/http.HandlerFunc.ServeHTTP(0x8821d8, 0xa31720, 0xc04204b9a0, 0xc04225aa50)\r\n\tC:/workdir/go/src/net/http/server.go:1726 +0x4b\r\nnet/http.(*timeoutHandler).ServeHTTP.func1(0xc042303080, 0xc04204b9a0, 0xc04225aa50, 0xc04213ec60)\r\n\tC:/workdir/go/src/net/http/server.go:2531 +0x5a\r\ncreated by net/http.(*timeoutHandler).ServeHTTP\r\n\tC:/workdir/go/src/net/http/server.go:2533 +0x174\r\n\r\ngoroutine 2299 [semacquire]:\r\nsync.runtime_Semacquire(0xc04233c794)\r\n\tC:/workdir/go/src/runtime/sema.go:47 +0x37\r\nsync.(*Mutex).Lock(0xc04233c790)\r\n\tC:/workdir/go/src/sync/mutex.go:85 +0xa3\r\nnet/http.(*persistConn).canceled(0xc04233c6c0, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/http/transport.go:1290 +0x56\r\nnet/http.(*persistConn).mapRoundTripErrorAfterClosed(0xc04233c6c0, 0x0, 0x0, 0x85d801)\r\n\tC:/workdir/go/src/net/http/transport.go:1369 +0x36\r\nnet/http.(*persistConn).roundTrip(0xc04233c6c0, 0xc04230a5a0, 0x0, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/http/transport.go:1869 +0xa41\r\nnet/http.(*Transport).RoundTrip(0xc04221d2c0, 0xc04221d3b0, 0xc04221d2c0, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/http/transport.go:381 +0x4f5\r\nnet/http.send(0xc04221d3b0, 0xa2c760, 0xc04221d2c0, 0x0, 0x0, 0x0, 0x8, 0xc0422e1c38, 0xc042022380)\r\n\tC:/workdir/go/src/net/http/client.go:256 +0x166\r\nnet/http.(*Client).send(0xc042145080, 0xc04221d3b0, 0x0, 0x0, 0x0, 0xc042022380, 0x0, 0x1)\r\n\tC:/workdir/go/src/net/http/client.go:146 +0x109\r\nnet/http.(*Client).doFollowingRedirects(0xc042145080, 0xc04221d3b0, 0x8814e0, 0x16, 0x0, 0x0)\r\n\tC:/workdir/go/src/net/http/client.go:529 +0x5e8\r\nnet/http.(*Client).Get(0xc042145080, 0xc04230a4e0, 0x16, 0xc04205b080, 0xc04239a9a0, 0x0)\r\n\tC:/workdir/go/src/net/http/client.go:419 +0x9a\r\nnet/http_test.testHandlerPanic(0xc04205b080, 0xc0422e0000, 0x7d8260, 0xc042283c40)\r\n\tC:/workdir/go/src/net/http/serve_test.go:2238 +0x304\r\nnet/http_test.TestHandlerPanic_h1(0xc04205b080)\r\n\tC:/workdir/go/src/net/http/serve_test.go:2178 +0x85\r\ntesting.tRunner(0xc04205b080, 0x881ac8)\r\n\tC:/workdir/go/src/testing/testing.go:610 +0x88\r\ncreated by testing.(*T).Run\r\n\tC:/workdir/go/src/testing/testing.go:646 +0x2f2\r\n\r\ngoroutine 2136 [runnable]:\r\ntime.Sleep(0xf4240)\r\n\tC:/workdir/go/src/runtime/time.go:59 +0xef\r\nnet/http_test.TestTimeoutHandlerRace.func1(0xa31720, 0xc04225d360, 0xc0421324b0)\r\n\tC:/workdir/go/src/net/http/serve_test.go:1888 +0xe0\r\nnet/http.HandlerFunc.ServeHTTP(0x8821d8, 0xa31720, 0xc04225d360, 0xc0421324b0)\r\n\tC:/workdir/go/src/net/http/server.go:1726 +0x4b\r\nnet/http.(*timeoutHandler).ServeHTTP.func1(0xc042303080, 0xc04225d360, 0xc0421324b0, 0xc04221b3e0)\r\n\tC:/workdir/go/src/net/http/server.go:2531 +0x5a\r\ncreated by net/http.(*timeoutHandler).ServeHTTP\r\n\tC:/workdir/go/src/net/http/server.go:2533 +0x174\r\n\r\ngoroutine 1971 [chan receive]:\r\ntesting.(*T).Parallel(0xc04205bc80)\r\n\tC:/workdir/go/src/testing/testing.go:552 +0x156\r\nnet/http_test.setParallel(0xc04205bc80)\r\n\tC:/workdir/go/src/net/http/main_test.go:87 +0x4a\r\nnet/http_test.TestTLSHandshakeTimeout(0xc04205bc80)\r\n\tC:/workdir/go/src/net/http/serve_test.go:1026 +0x5d\r\ntesting.tRunner(0xc04205bc80, 0x8821a8)\r\n\tC:/workdir/go/src/testing/testing.go:610 +0x88\r\ncreated by testing.(*T).Run\r\n\tC:/workdir/go/src/testing/testing.go:646 +0x2f2\r\nFAIL\tnet/http\t3.258s\r\n2016/09/06 21:33:51 Failed: exit status 1\r\n```\r\n",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "aclements",
		"id": 2688315,
		"type": "User",
		"site_admin": false
	},
	"comments": 1,
	"created_at": "2016-09-06T22:02:48Z",
	"updated_at": "2016-09-06T22:03:05Z",
	"milestone": {
		"id": 1709363,
		"number": 38,
		"title": "Go1.8"
	}
}
