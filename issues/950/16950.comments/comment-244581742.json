{
	"id": 244581742,
	"body": "@aclements thanks, in src/run.bash, core dump disabled by default(https://github.com/golang/go/blob/master/src/run.bash#L20), enabled core dump and got core dump file(https://smith.cool/temp/corefiles.tar.gz too big to upload).\r\n\u003cpre\u003e\r\nrhinofly@x86ul30:~/sandspace/386coredump/corefiles$ gdb ./compile ./compile.core\r\nGNU gdb 6.1.1 [FreeBSD]\r\nCopyright 2004 Free Software Foundation, Inc.\r\n...\r\nThis GDB was configured as \"i386-marcel-freebsd\"...\r\nCore was generated by `compile'.\r\nProgram terminated with signal 5, Trace/breakpoint trap.\r\n\r\n#0  runtime.i386_set_ldt () at /home/rhinofly/home/sandspace/official-go/src/runtime/sys_freebsd_386.s:323\r\n323\t\tRET\r\n(gdb) \r\nCurrent language:  auto; currently minimal\r\n(gdb) backtrace\r\n#0  runtime.i386_set_ldt () at /home/rhinofly/home/sandspace/official-go/src/runtime/sys_freebsd_386.s:323\r\n#1  0x00000000 in ?? ()\r\n(gdb)\r\n\u003c/pre\u003e\r\n\r\nAccording to core-dump, signal 5/Trace/breakpoint trap triggered by runtime·i386_set_ldt \u003c- runtime·setldt \u003c- runtime·thr_start \u003c- newosproc\r\n\r\nnewosproc: https://github.com/golang/go/blob/master/src/runtime/os_freebsd.go#L104\r\nruntime·thr_start: https://github.com/golang/go/blob/master/src/runtime/sys_freebsd_386.s#L24\r\nruntime·setldt: https://github.com/golang/go/blob/master/src/runtime/sys_freebsd_386.s#L281\r\nruntime·i386_set_ldt: https://github.com/golang/go/blob/master/src/runtime/sys_freebsd_386.s#L314\r\n\r\nIn practice, signal 5 always raised during \"##### ../test\"(https://github.com/golang/go/blob/master/src/cmd/dist/test.go#L544), invoked many test jobs concurrently.\r\n\r\nBecause the signal 5 triggered by runtime·thr_start, so trying to switch threads.max_threads_per_proc from 1500(default value of FreeBSD/386) to 15000(sysctl -w kern.threads.max_threads_per_proc=150000) and all test passed(Dirty workaround?).\r\n\r\n\t\r\nAll of the above test was under default ulimit configuration:\r\nFreeBSD x86ul30.localdomain 11.0-RC2 FreeBSD 11.0-RC2 #0 r304729: Wed Aug 24 08:46:45 UTC 2016     root@releng2.nyi.freebsd.org:/usr/obj/usr/src/sys/GENERIC  i386\r\n\u003cpre\u003e\r\ncpu time               (seconds, -t)  unlimited\r\nfile size           (512-blocks, -f)  unlimited\r\ndata seg size           (kbytes, -d)  524288\r\nstack size              (kbytes, -s)  65536\r\ncore file size      (512-blocks, -c)  unlimited\r\nmax memory size         (kbytes, -m)  unlimited\r\nlocked memory           (kbytes, -l)  64\r\nmax user processes              (-u)  5547\r\nopen files                      (-n)  86544\r\nvirtual mem size        (kbytes, -v)  unlimited\r\nswap limit              (kbytes, -w)  unlimited\r\nsocket buffer size       (bytes, -b)  unlimited\r\npseudo-terminals                (-p)  unlimited\r\nkqueues                         (-k)  unlimited\r\numtx shared locks               (-o)  unlimited\r\n\u003c/pre\u003e",
	"user": {
		"login": "wheelcomplex",
		"id": 1411633,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-09-04T03:10:28Z",
	"updated_at": "2016-09-04T03:10:28Z"
}
