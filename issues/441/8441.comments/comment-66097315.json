{
	"id": 66097315,
	"body": "\u003ca id=\"c3\"\u003e\u003c/a\u003eComment 3:\n\n\u003cpre\u003eThe issue here seems to be that cgo indeterminately writes _Ctype_struct_outer_t's \"a\"\nfield as having either type \"*_Ctype_inner\" or \"*_Ctype_struct___0\", whereas \"func\ndoSomething(inner *C.inner)\" is always being rewritten as \"func doSomething(inner\n*_Ctype_struct___0)\".\n\nThe indeterminism seems to originate from GCC: over several runs of \"go tool cgo\nmain.go\", when I get a different _cgo_gotypes.go file, I also get a different _cgo_.o\nfile with slightly different DWARF debugging info.\n\nAttached the two _cgo_.o files, and here's the diff -u of their respective readelf\n--debug-dump=info outputs:\n\n--- _cgo_inner.o.dump\t2014-08-04 14:32:45.067470563 -0700\n+++ _cgo_type_struct___0.o.dump\t2014-08-04 14:32:56.067652807 -0700\n@@ -103,31 +103,31 @@\n     \u0026lt;be\u0026gt;   DW_AT_name        : (indirect string, offset: 0x65): __cgo__0\t\n     \u0026lt;c2\u0026gt;   DW_AT_decl_file   : 1\t\n     \u0026lt;c3\u0026gt;   DW_AT_decl_line   : 30\t\n-    \u0026lt;c4\u0026gt;   DW_AT_type        : \u0026lt;0x63\u0026gt;\t\n+    \u0026lt;c4\u0026gt;   DW_AT_type        : \u0026lt;0xd3\u0026gt;\t\n     \u0026lt;c8\u0026gt;   DW_AT_external    : 1\t\n     \u0026lt;c9\u0026gt;   DW_AT_location    : 9 byte block: 3 8 0 0 0 0 0 0 0 \t(DW_OP_addr: 8)\n- \u0026lt;1\u0026gt;\u0026lt;d3\u0026gt;: Abbrev Number: 9 (DW_TAG_variable)\n-    \u0026lt;d4\u0026gt;   DW_AT_name        : (indirect string, offset: 0x6e): __cgo__1\t\n-    \u0026lt;d8\u0026gt;   DW_AT_decl_file   : 1\t\n-    \u0026lt;d9\u0026gt;   DW_AT_decl_line   : 31\t\n-    \u0026lt;da\u0026gt;   DW_AT_type        : \u0026lt;0xe9\u0026gt;\t\n-    \u0026lt;de\u0026gt;   DW_AT_external    : 1\t\n-    \u0026lt;df\u0026gt;   DW_AT_location    : 9 byte block: 3 8 0 0 0 0 0 0 0 \t(DW_OP_addr: 8)\n- \u0026lt;1\u0026gt;\u0026lt;e9\u0026gt;: Abbrev Number: 6 (DW_TAG_pointer_type)\n-    \u0026lt;ea\u0026gt;   DW_AT_byte_size   : 8\t\n-    \u0026lt;eb\u0026gt;   DW_AT_type        : \u0026lt;0x19\u0026gt;\t\n+ \u0026lt;1\u0026gt;\u0026lt;d3\u0026gt;: Abbrev Number: 6 (DW_TAG_pointer_type)\n+    \u0026lt;d4\u0026gt;   DW_AT_byte_size   : 8\t\n+    \u0026lt;d5\u0026gt;   DW_AT_type        : \u0026lt;0x19\u0026gt;\t\n+ \u0026lt;1\u0026gt;\u0026lt;d9\u0026gt;: Abbrev Number: 9 (DW_TAG_variable)\n+    \u0026lt;da\u0026gt;   DW_AT_name        : (indirect string, offset: 0x6e): __cgo__1\t\n+    \u0026lt;de\u0026gt;   DW_AT_decl_file   : 1\t\n+    \u0026lt;df\u0026gt;   DW_AT_decl_line   : 31\t\n+    \u0026lt;e0\u0026gt;   DW_AT_type        : \u0026lt;0x63\u0026gt;\t\n+    \u0026lt;e4\u0026gt;   DW_AT_external    : 1\t\n+    \u0026lt;e5\u0026gt;   DW_AT_location    : 9 byte block: 3 8 0 0 0 0 0 0 0 \t(DW_OP_addr: 8)\n  \u0026lt;1\u0026gt;\u0026lt;ef\u0026gt;: Abbrev Number: 9 (DW_TAG_variable)\n     \u0026lt;f0\u0026gt;   DW_AT_name        : (indirect string, offset: 0x77): __cgo__2\t\n     \u0026lt;f4\u0026gt;   DW_AT_decl_file   : 1\t\n     \u0026lt;f5\u0026gt;   DW_AT_decl_line   : 32\t\n-    \u0026lt;f6\u0026gt;   DW_AT_type        : \u0026lt;0x63\u0026gt;\t\n+    \u0026lt;f6\u0026gt;   DW_AT_type        : \u0026lt;0xd3\u0026gt;\t\n     \u0026lt;fa\u0026gt;   DW_AT_external    : 1\t\n     \u0026lt;fb\u0026gt;   DW_AT_location    : 9 byte block: 3 8 0 0 0 0 0 0 0 \t(DW_OP_addr: 8)\n  \u0026lt;1\u0026gt;\u0026lt;105\u0026gt;: Abbrev Number: 9 (DW_TAG_variable)\n     \u0026lt;106\u0026gt;   DW_AT_name        : (indirect string, offset: 0x80): __cgo__3\t\n     \u0026lt;10a\u0026gt;   DW_AT_decl_file   : 1\t\n     \u0026lt;10b\u0026gt;   DW_AT_decl_line   : 33\t\n-    \u0026lt;10c\u0026gt;   DW_AT_type        : \u0026lt;0xe9\u0026gt;\t\n+    \u0026lt;10c\u0026gt;   DW_AT_type        : \u0026lt;0x63\u0026gt;\t\n     \u0026lt;110\u0026gt;   DW_AT_external    : 1\t\n     \u0026lt;111\u0026gt;   DW_AT_location    : 9 byte block: 3 8 0 0 0 0 0 0 0 \t(DW_OP_addr: 8)\n  \u0026lt;1\u0026gt;\u0026lt;11b\u0026gt;: Abbrev Number: 10 (DW_TAG_array_type)\u003c/pre\u003e\n\n\n\n\n\nAttachments:\n\n1. \u003ca href=\"https://storage.googleapis.com/go-attachment/8441/3/_cgo_inner.o\"\u003e_cgo_inner.o\u003c/a\u003e (3376 bytes)\n1. \u003ca href=\"https://storage.googleapis.com/go-attachment/8441/3/_cgo_type_struct___0.o\"\u003e_cgo_type_struct___0.o\u003c/a\u003e (3376 bytes)",
	"user": {
		"login": "mdempsky",
		"id": 38349,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2014-08-04T21:33:24Z",
	"updated_at": "2014-12-22T06:36:31Z"
}
