{
	"id": 52857729,
	"number": 9441,
	"state": "closed",
	"title": "runtime: Garbage collector 10x slower in 1.4 (tip)",
	"body": "**What version of Go are you using (go version)?**\r\nTip: go version devel +c7eb966 Wed Dec 24 07:30:28 2014 +0000 linux/amd64\r\n\r\n**What operating system and processor architecture are you using?**\r\nUbuntu 14.04 x64\r\n\r\n**What did you do?**\r\nThis program: http://play.golang.org/p/S11jdxsbcK fills a data structure with 4 strings and then calls the garbage collector 10 times. \r\nRun in with Go 1.3 and tip\r\n\r\n**What did you expect to see?**\r\nSimilar garbage collector times.\r\n\r\n**What did you see instead?**\r\nGarbage collector in 1.4 runs 10x slower.\r\n\r\n*Go 1.3*\r\ngc4(1): 2+1+36646+1 us, 85 -\u003e 127 MB, 2800074 (2800087-13) objects, 5498/1/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc5(1): 2+1+37378+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc6(1): 1+1+37230+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc7(1): 2+1+36929+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc8(1): 1+1+37184+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc9(1): 2+3+37141+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc10(1): 1+1+37324+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc11(1): 2+1+37094+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc12(1): 2+1+37145+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc13(1): 3+1+37200+1 us, 127 -\u003e 127 MB, 2800071 (2800087-16) objects, 10918/0/10917 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\nGC time:  548.679965ms\r\n\r\n*Go tip*\r\nFinished creating data\r\ngc9(1): 141+31+97989+2 us, 76 -\u003e 140 MB, 3638137 (5600093-1961956) objects, 4 goroutines, 12556/1/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc10(1): 121682+2+316145+3 us, 140 -\u003e 140 MB, 3638137 (5600093-1961956) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc11(1): 268+35+97374+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12550 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc12(1): 121174+4+310646+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc13(1): 264+36+97529+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc14(1): 121329+3+310720+2 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc15(1): 260+38+97381+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc16(1): 121165+4+311184+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc17(1): 232+37+97377+3 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc18(1): 121115+3+310686+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc19(1): 234+35+97324+2 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc20(1): 121161+4+311044+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc21(1): 267+36+97352+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc22(1): 121141+4+310624+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc23(1): 273+36+97464+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc24(1): 121231+2+310704+2 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc25(1): 290+38+97415+2 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc26(1): 121219+2+310661+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc27(1): 260+35+97305+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/12547 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\ngc28(1): 121098+2+310833+1 us, 127 -\u003e 127 MB, 2800063 (5600093-2800030) objects, 4 goroutines, 12556/0/0 sweeps, 0(0) handoff, 0(0) steal, 0/0/0 yields\r\nGC time:  4.858439959s\r\n\r\nI understand that calling GC() is not the intended use. I noticed this behaviour in a bigger program, I saw a slowdown due to garbage collecting times using GODEBUG=gctrace=1 and then I made this smaller testing code.\r\n\r\nI also see that calling GC() on tip runs two garbage collections with different timing, but this behaviour is similar if the program just wait at the end and I see the debug traces.\r\n\r\nThanks!",
	"user": {
		"login": "siritinga",
		"id": 3969105,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 3,
	"closed_at": "2014-12-26T18:34:40Z",
	"created_at": "2014-12-25T10:16:24Z",
	"updated_at": "2016-06-25T01:57:16Z"
}
