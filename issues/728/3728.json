{
	"id": 51281059,
	"number": 3728,
	"state": "closed",
	"title": "build: all.bash failed at  test step on raspberrypi",
	"body": "\u003cpre\u003eWhat steps will reproduce the problem?\n\n1. export GOARM=5\n2. cd go/src;./all.bash\n3. compilation went fine but test step failed and hang the console.\n4. Looks like a memory issue.\n5. How do I build without \u0026quot;testing\u0026quot; step ?\n\n\nWhat is the expected output?\n\ntest completed\n\nWhat do you see instead?\n\n# Testing packages.\nok      cmd/api 0.256s\n?       cmd/cgo [no test files]\nok      cmd/fix 28.627s\nok      cmd/go  0.340s\n?       cmd/godoc       [no test files]\nok      cmd/gofmt       1.066s\n?       cmd/vet [no test files]\n?       cmd/yacc        [no test files]\nok      archive/tar     0.130s\nok      archive/zip     1.061s\nok      bufio   3.589s\nok      bytes   1.719s\nok      compress/bzip2  1.250s\nok      compress/flate  14.258s\nok      compress/gzip   0.328s\nok      compress/lzw    2.137s\nok      compress/zlib   26.907s\nok      container/heap  0.119s\nok      container/list  0.115s\nok      container/ring  0.376s\n?       crypto  [no test files]\nok      crypto/aes      0.325s\nok      crypto/cipher   0.126s\nok      crypto/des      0.655s\nok      crypto/dsa      0.447s\nok      crypto/ecdsa    0.681s\nok      crypto/elliptic 0.297s\nok      crypto/hmac     0.142s\nok      crypto/md5      0.163s\nok      crypto/rand     0.534s\nok      crypto/rc4      0.113s\nok      crypto/rsa      6.847s\nok      crypto/sha1     0.164s\nok      crypto/sha256   0.178s\nok      crypto/sha512   0.202s\nok      crypto/subtle   0.277s\nok      crypto/tls      5.551s\nok      crypto/x509     30.485s\n?       crypto/x509/pkix        [no test files]\nok      database/sql    0.322s\nok      database/sql/driver     0.113s\nok      debug/dwarf     0.281s\nok      debug/elf       0.306s\nok      debug/gosym     0.122s\nok      debug/macho     0.151s\nok      debug/pe        0.139s\nok      encoding/ascii85        0.168s\nok      encoding/asn1   0.163s\nok      encoding/base32 0.163s\nok      encoding/base64 0.163s\nok      encoding/binary 0.172s\nok      encoding/csv    0.164s\nthrow: runtime: out of memory\n\ngoroutine 25 [running]:\nencoding/gob.(*Decoder).readMessage(0x107b2820, 0x1000cf66, 0x1078f3f0)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/decoder.go:92 +0x70\nencoding/gob.(*Decoder).recvMessage(0x107b2820, 0x2527c, 0x10757000)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/decoder.go:84 +0x130\nencoding/gob.(*Decoder).decodeTypeSequence(0x107b2820, 0x107a1300, 0x160, 0x0)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/decoder.go:142 +0x68\nencoding/gob.(*Decoder).DecodeValue(0x107b2820, 0x113028, 0x107a13a0, 0x160, 0x0, ...)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/decoder.go:206 +0x174\nencoding/gob.(*Decoder).Decode(0x107b2820, 0x113020, 0x107a13a0, 0x107a13a0, 0x107afba0,\n...)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/decoder.go:185 +0x27c\nencoding/gob.encFuzzDec(0x10799fb0, 0x112d60, 0x10799f88, 0x107273e0, 0x107331b0, ...)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/codec_test.go:1429 +0x358\nencoding/gob.testFuzz(0x1079f140, 0x994c53f0, 0x126fc084, 0x64, 0x40047fa4, ...)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/codec_test.go:1468 +0x294\nencoding/gob.TestFuzzRegressions(0x1079f140, 0xe)\n        /usbpub/home/gobuild/go/src/pkg/encoding/gob/codec_test.go:1457 +0xd4\ntesting.tRunner(0x1079f140, 0x1ffb2c, 0x0)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:273 +0xac\ncreated by testing.RunTests\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:349 +0x764\n\ngoroutine 1 [chan receive]:\ntesting.RunTests(0x10c00, 0x1ffa30, 0x4a, 0x4a, 0x31501, ...)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:350 +0x784\ntesting.Main(0x10c00, 0x1ffa30, 0x4a, 0x4a, 0x1fc5e0, ...)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:285 +0x70\nmain.main()\n        /tmp/go-build294647749/encoding/gob/_test/_testmain.go:193 +0x88\n\ngoroutine 2 [syscall]:\ncreated by runtime.main\n        /usbpub/home/gobuild/go/src/pkg/runtime/proc.c:221\n\ngoroutine 3 [syscall]:\ncreated by addtimer\n        /usbpub/home/gobuild/go/src/pkg/runtime/ztime_linux_arm.c:72\nFAIL    encoding/gob    0.389s\nok      encoding/hex    0.119s\nok      encoding/json   2.598s\nok      encoding/pem    0.196s\nok      encoding/xml    0.404s\nok      errors  0.117s\nok      exp/ebnf        0.121s\nok      exp/ebnflint    0.258s\nok      exp/gotype      10.777s\nok      exp/html        4.590s\nok      exp/html/atom   0.113s\nok      exp/inotify     1.154s\nok      exp/locale/collate      0.669s\nok      exp/locale/collate/build        0.190s\nok      exp/norm        26.455s\nok      exp/proxy       0.144s\nok      exp/types       4.242s\nok      exp/utf8string  0.121s\nok      expvar  0.193s\nok      flag    0.121s\nok      fmt     0.907s\nok      go/ast  0.164s\nok      go/build        6.339s\nok      go/doc  1.732s\nok      go/parser       1.066s\nok      go/printer      8.551s\nok      go/scanner      0.186s\nok      go/token        1.327s\n?       hash    [no test files]\nok      hash/adler32    0.633s\nok      hash/crc32      0.221s\nok      hash/crc64      0.111s\nok      hash/fnv        0.114s\nok      html    0.122s\nok      html/template   1.119s\nok      image   1.830s\nok      image/color     0.203s\nok      image/draw      0.890s\n?       image/gif       [no test files]\nok      image/jpeg      1.386s\nok      image/png       1.234s\nok      index/suffixarray       0.346s\nok      io      0.173s\nok      io/ioutil       0.121s\nok      log     0.174s\nok      log/syslog      0.353s\nok      math    0.991s\nok      math/big        5.878s\nok      math/cmplx      0.253s\npanic: test timed out\n\ngoroutine 7 [running]:\ntesting.alarm()\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:436 +0x5c\ncreated by time.goFunc\n        /usbpub/home/gobuild/go/src/pkg/time/sleep.go:94 +0x5c\n\ngoroutine 1 [chan receive]:\ntesting.RunTests(0x10c00, 0x17a850, 0x6, 0x6, 0x31001, ...)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:350 +0x784\ntesting.Main(0x10c00, 0x17a850, 0x6, 0x6, 0x17a790, ...)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:285 +0x70\nmain.main()\n        /tmp/go-build294647749/math/rand/_test/_testmain.go:63 +0x88\n\ngoroutine 2 [syscall]:\ncreated by runtime.main\n        /usbpub/home/gobuild/go/src/pkg/runtime/proc.c:221\n\ngoroutine 3 [timer goroutine (idle)]:\ncreated by addtimer\n        /usbpub/home/gobuild/go/src/pkg/runtime/ztime_linux_arm.c:72\n\ngoroutine 8 [runnable]:\ntesting.tRunner(0x10632f40, 0x17a874, 0x0)\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:256\ncreated by testing.RunTests\n        /usbpub/home/gobuild/go/src/pkg/testing/testing.go:349 +0x764\nFAIL    math/rand       130.702s\nok      mime    0.130s\nok      mime/multipart  1.993s\n\n\n\nWhich compiler are you using (5g, 6g, 8g, gccgo)?\n\n\ngobuild@raspberrypi:~/go/bin$ gcc -v\nUsing built-in specs.\nTarget: arm-linux-gnueabi\nConfigured with: ../src/configure -v --with-pkgversion='Debian 4.4.5-8'\n--with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs\n--enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4\n--enable-shared --enable-multiarch --enable-linker-build-id --with-system-zlib\n--libexecdir=/usr/lib --without-included-gettext --enable-threads=posix\n--with-gxx-include-dir=/usr/include/c++/4.4 --libdir=/usr/lib --enable-nls\n--enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --disable-sjlj-exceptions\n--enable-checking=release --build=arm-linux-gnueabi --host=arm-linux-gnueabi\n--target=arm-linux-gnueabi\nThread model: posix\ngcc version 4.4.5 (Debian 4.4.5-8)\ngobuild@raspberrypi:~/go/bin$\n\nWhich operating system are you using?\ngobuild@raspberrypi:~/go/bin$ uname -a\nLinux raspberrypi 3.1.9+ #90 Wed Apr 18 18:23:05 BST 2012 armv6l GNU/Linux\ngobuild@raspberrypi:~/go/bin$\n\n\nWhich version are you using?  (run 'go version')\ngobuild@raspberrypi:~/go/bin$ ./go version\ngo version weekly.2012-03-27 +7021c8a8a25a\ngobuild@raspberrypi:~/go/bin$\n\n\n\nPlease provide any additional information below.\n\ngobuild@raspberrypi:~/go/bin$ hg id\n7021c8a8a25a tip\ngobuild@raspberrypi:~/go/bin$\n\ngobuild@raspberrypi:~/go/bin$ head -1  /proc/meminfo\nMemTotal:         190836 kB\ngobuild@raspberrypi:~/go/bin$\u003c/pre\u003e",
	"user": {
		"login": "tjyang",
		"id": 378638,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 11,
	"closed_at": "2014-12-08T10:19:39Z",
	"created_at": "2012-06-12T19:25:17Z",
	"updated_at": "2016-06-24T22:20:18Z"
}
