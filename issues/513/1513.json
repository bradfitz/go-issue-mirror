{
	"id": 51277910,
	"number": 1513,
	"state": "closed",
	"title": "arm: fix ARMv5 build",
	"body": "by **m@capitanio.org**:\n\n\u003cpre\u003eA follow-up of the \u003ca href=\"https://golang.org/issue/1508\"\u003eissue #1508\u003c/a\u003e\n\nSame host, the target is now the latest android virtual device.\n\nImage: android 2.3.3, api level 10\nThe emulation supports only the ARMv5TE architecture.\nGOARCH=arm\nGOARM=5\nGORUN=..../go/misc/arm/a\nI modified a bit the Kay's adb script, the patch is attached. I didn't\nwanted to spam the bugtracker, also if needed, please fill new issues.\n\nA lot of in the circles running electrons and he testsuite *passes*\nall tests by excludig:\n\n\tgo/parser\\\n\thttp\\\n\tio/ioutil\\\n\tmath\\\n\tmime\\\n\tnet\\\n\tos\\\n\tos/inotify\\\n\tpath\\\n\truntime/debug\\\n\tstrconv\\\n\tsyslog\\\n\ttemplate\\\n\ttime\\\n\n\n----\n\nIt would make the pushing of testdata much easier, if all tests followed some\nconvention, e.g. storing all testdata in a testdata directory:\n\n** os/inotify\nnotify_linux_test.go: const testFile string = \u0026quot;_obj/TestInotifyEvents.testfile\u0026quot;\n--- FAIL: inotify.TestInotifyEvents (0.2 seconds)\n\tWatcher.Watch() failed: inotify_add_watch: no such file or directory\n\n** go/parser\n--- FAIL: parser.TestParse3 (0.0 seconds)\n\tParseFile(parser.go): open parser.go: no such file or directory\n\tParseFile(parser_test.go): open parser_test.go: no such file or directory\n--- FAIL: parser.TestParse4 (0.0 seconds)\n\tincorrect number of packages: 0\n\tpackage \u0026quot;parser\u0026quot; not found\n--- FAIL: parser.TestParse3 (3.7 seconds)\n\tParseFile(parser_test.go): open parser_test.go: no such file or directory\n\n** io/ioutil\n--- FAIL: ioutil_test.TestReadFile (0.2 seconds)\n\tReadFile ioutil_test.go: open ioutil_test.go: no such file or directory\n--- FAIL: ioutil_test.TestWriteFile (0.0 seconds)\n\tWriteFile _test/rumpelstilzchen: open _test/rumpelstilzchen: no such file or directory\n--- FAIL: ioutil_test.TestReadDir (0.0 seconds)\n\tReadDir .: test file not found\n--- FAIL: ioutil_test.TestTempFile (0.0 seconds)\n\tTempFile(dir, `ioutil_test`) = \u0026lt;nil\u0026gt;, open /tmp/ioutil_test610738363: no such file or directory\n\n** os\n--- FAIL: os_test.TestChmod (0.0 seconds)\n\topen TestChmod: open /tmp/_Go_TestChmod953588146: no such file or directory\n--- FAIL: os_test.TestChown (0.0 seconds)\n\topen TestChown: open /tmp/_Go_TestChown942413161: no such file or directory\n--- FAIL: os_test.TestTruncate (0.0 seconds)\n\topen TestTruncate: open /tmp/_Go_TestTruncate108897716: no such file or directory\n--- FAIL: os_test.TestChtimes (0.0 seconds)\n\topen TestChtimes: open /tmp/_Go_TestChtimes479836035: no such file or directory\n--- FAIL: os_test.TestChdirAndGetwd (0.0 seconds)\n\tChdir /bin: chdir /bin: no such file or directory\n--- FAIL: os_test.TestSeek (0.0 seconds)\n\topen TestSeek: open /tmp/_Go_TestSeek590298374: no such file or directory\n--- FAIL: os_test.TestOpenError (0.0 seconds)\n\tOpen(\u0026quot;/etc/group/no-such-file\u0026quot;, 1) = _, \u0026quot;no such file or directory\u0026quot;; want \u0026quot;not a directory\u0026quot;\n--- FAIL: os_test.TestHostname (0.0 seconds)\n\tfork/exec /bin/hostname: no such file or directory\n--- FAIL: os_test.TestReadAt (0.0 seconds)\n\topen TestReadAt: open /tmp/_Go_TestReadAt451613357: no such file or directory\n--- FAIL: os_test.TestWriteAt (0.0 seconds)\n\topen TestWriteAt: open /tmp/_Go_TestWriteAt589484072: no such file or directory\n\t\n** strconv\n--- FAIL: strconv_test.TestFp (0.0 seconds)\n\ttestfp: open testfp.txt: open testfp.txt: no such file or directory\n\n** template\n--- FAIL: template.TestAll (1.0 seconds)\n\tunexpected write error: open _test/test.tmpl: no such file or directory\n\tunexpected parse error:  open _test/test.tmpl: no such file or directory\n\n** path\n--- FAIL: path.TestGlob (0.0 seconds)\n\tGlob(`match.go`) = []string{} want match.go\n\tGlob(`mat?h.go`) = []string{} want match.go\n\tGlob(`*`) = []string{\u0026quot;5.out\u0026quot;, \u0026quot;retval\u0026quot;} want match.go\n\tGlob(`../*/match.go`) = []string{} want ../path/match.go\n--------------------------------------------------------------------------------\n\n** http\n--- FAIL: http.TestClient (0.6 seconds)\n\tGet \u003ca href=\"http://www.google.com/robots.txt\"\u003ehttp://www.google.com/robots.txt\u003c/a\u003e: dial tcp www.google.com:http: error reading DNS config: open /etc/resolv.conf: no such file or directory\n--- FAIL: http.TestClientHead (0.0 seconds)\n\tdial tcp www.google.com:http: error reading DNS config: open /etc/resolv.conf: no such file or directory\n--- FAIL: http.TestRedirect (0.0 seconds)\n\tGet \u003ca href=\"http://google.com/\"\u003ehttp://google.com/\u003c/a\u003e: dial tcp google.com:http: error reading DNS config: open /etc/resolv.conf: no such file or directory\n--- FAIL: http.TestServerTimeouts (0.0 seconds)\n\thttp Get #1: Get \u003ca href=\"http://localhost:45872/\"\u003ehttp://localhost:45872/\u003c/a\u003e: dial tcp localhost:45872: error reading DNS config: open /etc/resolv.conf: no such file or directory\nFAIL\n\n----\n\n** mime\n5g -o _gotest_.5 grammar.go mediatype.go type.go  mediatype_test.go mime_test.go\nrm -f _test/mime.a\ngopack grc _test/mime.a _gotest_.5 \nmake[2]: Leaving directory `/data4/soft/go/go/src/pkg/mime'\nadb push ./5.out /data/local/tmp/./5.out\n--- FAIL: mime.TestType (0.0 seconds)\n\tTypeByExtension(\u0026quot;.t1\u0026quot;) = \u0026quot;\u0026quot;, want \u0026quot;application/test\u0026quot;\n\tTypeByExtension(\u0026quot;.t2\u0026quot;) = \u0026quot;\u0026quot;, want \u0026quot;text/test; charset=utf-8\u0026quot;\n\n----\n\n** net\n--- FAIL: net.TestDialGoogle (0.2 seconds)\n\tlookup www.google.com: error reading DNS config: open /etc/resolv.conf: no such file or directory\n--- FAIL: net.TestLookupStaticHost (0.0 seconds)\n\t# of hosts = 0; want 3\n--- FAIL: net.TestICMP (0.0 seconds)\n\tnet.ResolveIPAddr(\u0026quot;localhost\u0026quot;) = \u0026lt;nil\u0026gt;, error reading DNS config: open /etc/resolv.conf: no such file or directory\n--- FAIL: net.TestReadLine (0.0 seconds)\n\topen /etc/services: open /etc/services: no such file or directory\n--- FAIL: net.TestLookupPort (0.0 seconds)\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;echo\u0026quot;) = 0, unknown port tcp/echo; want 7\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;discard\u0026quot;) = 0, unknown port tcp/discard; want 9\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;systat\u0026quot;) = 0, unknown port tcp/systat; want 11\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;daytime\u0026quot;) = 0, unknown port tcp/daytime; want 13\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;chargen\u0026quot;) = 0, unknown port tcp/chargen; want 19\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;ftp-data\u0026quot;) = 0, unknown port tcp/ftp-data; want 20\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;ftp\u0026quot;) = 0, unknown port tcp/ftp; want 21\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;telnet\u0026quot;) = 0, unknown port tcp/telnet; want 23\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;smtp\u0026quot;) = 0, unknown port tcp/smtp; want 25\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;time\u0026quot;) = 0, unknown port tcp/time; want 37\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;domain\u0026quot;) = 0, unknown port tcp/domain; want 53\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;gopher\u0026quot;) = 0, unknown port tcp/gopher; want 70\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;finger\u0026quot;) = 0, unknown port tcp/finger; want 79\n\tLookupPort(\u0026quot;tcp\u0026quot;, \u0026quot;http\u0026quot;) = 0, unknown port tcp/http; want 80\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;echo\u0026quot;) = 0, unknown port udp/echo; want 7\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;tftp\u0026quot;) = 0, unknown port udp/tftp; want 69\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;bootpc\u0026quot;) = 0, unknown port udp/bootpc; want 68\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;bootps\u0026quot;) = 0, unknown port udp/bootps; want 67\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;domain\u0026quot;) = 0, unknown port udp/domain; want 53\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;ntp\u0026quot;) = 0, unknown port udp/ntp; want 123\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;snmp\u0026quot;) = 0, unknown port udp/snmp; want 161\n\tLookupPort(\u0026quot;udp\u0026quot;, \u0026quot;syslog\u0026quot;) = 0, unknown port udp/syslog; want 514\n--- FAIL: net.TestUnixServer (0.0 seconds)\n\tTest unix /tmp/gotest.net /tmp/gotest.net\n\tnet.Listen(\u0026quot;unix\u0026quot;, \u0026quot;/tmp/gotest.net\u0026quot;) = _, listen unix /tmp/gotest.net: no such file or directory\n--- FAIL: net.TestUnixDatagramServer (0.0 seconds)\n\tTestPacket unixgram /tmp/gotest1.net /tmp/gotest1.net\n\tnet.ListenPacket(\u0026quot;unixgram\u0026quot;, \u0026quot;/tmp/gotest1.net\u0026quot;) = _, dial unixgram \u0026lt;nil\u0026gt;: no such file or directory\n--- FAIL: net.TestGoogleSRV (0.0 seconds)\n\tfailed: error reading DNS config: open /etc/resolv.conf: no such file or directory\n\tno results\n\n----\n\n** os\n--- FAIL: os_test.TestStat (0.0 seconds)\n\tstat failed: stat /etc/group: no such file or directory\n--- FAIL: os_test.TestFstat (0.0 seconds)\n\topen failed: open /etc/group: no such file or directory\n--- FAIL: os_test.TestLstat (0.0 seconds)\n\tlstat failed: lstat /etc/group: no such file or directory\n--- FAIL: os_test.TestReaddirnames (0.0 seconds)\n\tcould not find dir_darwin.go\n\tcould not find dir_linux.go\n\tcould not find env_unix.go\n\tcould not find error.go\n\tcould not find file.go\n\tcould not find os_test.go\n\tcould not find time.go\n\tcould not find types.go\n\tcould not find stat_darwin.go\n\tcould not find stat_linux.go\n\tcould not find group\n\tcould not find passwd\n--- FAIL: os_test.TestReaddir (0.0 seconds)\n\tcould not find dir_darwin.go\n\tcould not find dir_linux.go\n\tcould not find env_unix.go\n\tcould not find error.go\n\tcould not find file.go\n\tcould not find os_test.go\n\tcould not find time.go\n\tcould not find types.go\n\tcould not find stat_darwin.go\n\tcould not find stat_linux.go\n\tcould not find group\n\tcould not find passwd\n--- FAIL: os_test.TestReaddirnamesOneAtATime (0.0 seconds)\n\topen \u0026quot;/usr/bin\u0026quot; failed: open /usr/bin: no such file or directory\n--- FAIL: os_test.TestForkExec (0.0 seconds)\n\tStartProcess: fork/exec /bin/pwd: no such file or directory\n...\n\n----\n\n** math\nUnsupported floating point instruction\npanic: runtime error: invalid memory address or nil pointer dereference\n\n[signal 0xb code=0x1 addr=0x0 pc=0xd704]\n\nruntime.panic+0x84 /data4/soft/go/go/src/pkg/runtime/proc.c:1023\n\truntime.panic(0x133094, 0x50000228)\nruntime.panicstring+0x98 /data4/soft/go/go/src/pkg/runtime/runtime.c:92\n\truntime.panicstring(0x14c6cf, 0x5003c384)\nruntime.sigpanic+0x120 /data4/soft/go/go/src/pkg/runtime/linux/thread.c:291\n\truntime.sigpanic()\nruntime.abort+0x4 /data4/soft/go/go/src/pkg/runtime/arm/asm.s:271\n\truntime.abort()\nruntime._sfloat2+0x2c /data4/soft/go/go/src/pkg/runtime/arm/softfloat.c:493\n\truntime._sfloat2(0x0, 0x46618, 0x46618)\nruntime._sfloat2+0x2c /data4/soft/go/go/src/pkg/runtime/arm/softfloat.c:493\n\truntime._sfloat2(0x30, 0x80000000, 0x80000000)\nmake[1]: *** [test] Error 2\nmake[1]: Leaving directory `/data4/soft/go/go/src/pkg/math'\nmake: *** [math.test] Error 2\n\n----\n\n** syslog\n--- FAIL: syslog.TestNew (0.0 seconds)\n\tNew() failed: Unix syslog delivery error\n--- FAIL: syslog.TestNewLogger (0.0 seconds)\n\tNewLogger() failed\n--- FAIL: syslog.TestDial (0.0 seconds)\n\tDial() failed: Unix syslog delivery error\n\n----\n\n** time\n--- FAIL: time_test.TestAfterQueuing (0.1 seconds)\n\tafter queue slot 0 arrived at 3.5683e+07, expected [-2.5e+07,2.5e+07]\n--- FAIL: time_test.TestSecondsToLocalTime (0.0 seconds)\n\tSecondsToLocalTime(0):\n\t  want={Year:1969 Month:12 Day:31 Hour:16 Minute:0 Second:0 Weekday:3 ZoneOffset:-28800 Zone:PST}\n\t  have={Year:1970 Month:1 Day:1 Hour:0 Minute:0 Second:0 Weekday:4 ZoneOffset:0 Zone:UTC}\n\tSecondsToLocalTime(1221681866):\n\t  want={Year:2008 Month:9 Day:17 Hour:13 Minute:4 Second:26 Weekday:3 ZoneOffset:-25200 Zone:PDT}\n\t  have={Year:2008 Month:9 Day:17 Hour:20 Minute:4 Second:26 Weekday:3 ZoneOffset:0 Zone:UTC}\n--- FAIL: time_test.TestFormat (0.0 seconds)\n\tANSIC expected \u0026quot;Thu Feb  4 21:00:57 2010\u0026quot; got \u0026quot;Fri Feb  5 05:00:57 2010\u0026quot;\n\tUnixDate expected \u0026quot;Thu Feb  4 21:00:57 PST 2010\u0026quot; got \u0026quot;Fri Feb  5 05:00:57 UTC 2010\u0026quot;\n\tRubyDate expected \u0026quot;Thu Feb 04 21:00:57 -0800 2010\u0026quot; got \u0026quot;Fri Feb 05 05:00:57 +0000 2010\u0026quot;\n\tRFC822 expected \u0026quot;04 Feb 10 2100 PST\u0026quot; got \u0026quot;05 Feb 10 0500 UTC\u0026quot;\n\tRFC850 expected \u0026quot;Thursday, 04-Feb-10 21:00:57 PST\u0026quot; got \u0026quot;Friday, 05-Feb-10 05:00:57 UTC\u0026quot;\n\tRFC1123 expected \u0026quot;Thu, 04 Feb 2010 21:00:57 PST\u0026quot; got \u0026quot;Fri, 05 Feb 2010 05:00:57 UTC\u0026quot;\n\tRFC3339 expected \u0026quot;2010-02-04T21:00:57-08:00\u0026quot; got \u0026quot;2010-02-05T05:00:57Z\u0026quot;\n\tKitchen expected \u0026quot;9:00PM\u0026quot; got \u0026quot;5:00AM\u0026quot;\n\tam/pm expected \u0026quot;9pm\u0026quot; got \u0026quot;5am\u0026quot;\n\tAM/PM expected \u0026quot;9PM\u0026quot; got \u0026quot;5AM\u0026quot;\n--- FAIL: time_test.TestParse (0.0 seconds)\n\tUnixDate: bad tz offset: 0 not -28800\n\tRFC850: bad tz offset: 0 not -28800\n\tRFC1123: bad tz offset: 0 not -28800\n\n----\n\n** runtime/debug\n--- FAIL: debug.TestStack (0.1 seconds)\n\ttoo few lines\u003c/pre\u003e\n\n\n\n\n\nAttachments:\n\n1. \u003ca href=\"https://storage.googleapis.com/go-attachment/1513/0/android-adb-script.patch\"\u003eandroid-adb-script.patch\u003c/a\u003e (1106 bytes)",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "rsc",
		"id": 104030,
		"type": "User",
		"site_admin": false
	},
	"comments": 7,
	"closed_at": "2014-12-08T10:08:40Z",
	"created_at": "2011-02-14T15:28:21Z",
	"updated_at": "2016-06-24T19:25:19Z"
}
