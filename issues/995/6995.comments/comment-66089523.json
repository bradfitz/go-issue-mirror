{
	"id": 66089523,
	"body": "\u003ca id=\"c6\"\u003e\u003c/a\u003eComment 6:\n\n\u003cpre\u003eDave, thanks for taking a look.\n\nUnfortunately, in this case Dmitry is right. Locking around that particular field\n(closed) simply pushes the race to another shared field. The problem is more fundamental.\n\n==================\nWARNING: DATA RACE\nRead by goroutine 263:\n  io.(*LimitedReader).Read()\n      /home/caleb/apps/go/src/pkg/io/io.go:392 +0x51\n  net/http.(*body).Read()\n      /home/caleb/apps/go/src/pkg/net/http/transfer.go:535 +0xe4\n  io.(*LimitedReader).Read()\n      /home/caleb/apps/go/src/pkg/io/io.go:398 +0x13e\n  io/ioutil.devNull.ReadFrom()\n      /home/caleb/apps/go/src/pkg/io/ioutil/ioutil.go:151 +0xd3\n  io.Copy()\n      /home/caleb/apps/go/src/pkg/io/io.go:348 +0x139\n  io.CopyN()\n      /home/caleb/apps/go/src/pkg/io/io.go:317 +0x10b\n  net/http.(*chunkWriter).writeHeader()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:783 +0x1b6c\n  net/http.(*chunkWriter).Write()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:246 +0xb2\n  bufio.(*Writer).flush()\n      /home/caleb/apps/go/src/pkg/bufio/bufio.go:494 +0x17a\n  bufio.(*Writer).Flush()\n      /home/caleb/apps/go/src/pkg/bufio/bufio.go:483 +0x34\n  net/http.(*response).finishRequest()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:995 +0x9d\n  net/http.(*conn).serve()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:1167 +0xc67\n\nPrevious write by goroutine 409:\n  io.(*LimitedReader).Read()\n      /home/caleb/apps/go/src/pkg/io/io.go:399 +0x170\n  net/http.(*body).Read()\n      /home/caleb/apps/go/src/pkg/net/http/transfer.go:535 +0xe4\n  io.(*LimitedReader).Read()\n      /home/caleb/apps/go/src/pkg/io/io.go:398 +0x13e\n  bufio.(*Writer).ReadFrom()\n      /home/caleb/apps/go/src/pkg/bufio/bufio.go:622 +0x271\n  io.Copy()\n      /home/caleb/apps/go/src/pkg/io/io.go:348 +0x139\n  net/http.(*transferWriter).WriteBody()\n      /home/caleb/apps/go/src/pkg/net/http/transfer.go:197 +0x838\n  net/http.(*Request).write()\n      /home/caleb/apps/go/src/pkg/net/http/request.go:401 +0xa9c\n  net/http.(*persistConn).writeLoop()\n      /home/caleb/apps/go/src/pkg/net/http/transport.go:797 +0x255\n\nGoroutine 263 (running) created at:\n  net/http.(*Server).Serve()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:1640 +0x2d1\n  net/http.(*Server).ListenAndServe()\n      /home/caleb/apps/go/src/pkg/net/http/server.go:1608 +0xc0\n  main.main()\n      /tmp/f4352a11bac5cced9458/cespare-race-repro/proxy.go:77 +0x25c\n\nGoroutine 409 (running) created at:\n  net/http.(*Transport).dialConn()\n      /home/caleb/apps/go/src/pkg/net/http/transport.go:529 +0x967\n  net/http.funcÂ·015()\n      /home/caleb/apps/go/src/pkg/net/http/transport.go:419 +0x76\n==================\u003c/pre\u003e",
	"user": {
		"login": "cespare",
		"id": 318501,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-12-27T06:49:50Z",
	"updated_at": "2014-12-08T10:38:58Z"
}
