{
	"id": 66085545,
	"body": "\u003ca id=\"c26\"\u003e\u003c/a\u003eComment 26 by **valyala**:\n\n\u003cpre\u003eUnfortunately it didn't fix the problem.\nI did the following in order to build patched go:\ncd go-sources\nput your patch into 1.diff\nhg pull \u0026\u0026 hg up default\nhg patch 1.diff\ncd src\n./all.bash\n\nThen I went to ybc sources and run\nmake go-perftests-bindings\n\nIt has been crashed with:\n$ make go-perftests-bindings\nGOMAXPROCS=4 go test -a -tags release -test.bench=\".*\" ./bindings/go/ybc\nPASS\nBenchmarkCache_GetHit_1-4 5000000       601 ns/op\nBenchmarkCache_GetHit_2-4 2000000       544 ns/op\nBenchmarkCache_GetHit_4-4 5000000       537 ns/op\nBenchmarkCache_GetHit_8-4 --- FAIL: BenchmarkCache_GetHit_8-4\nperf_test.go:113: Cannot find item with key=[12345]: [ybc: the item is not\nfound in the cache]\nBenchmarkCache_GetHit_16-4 SIGSEGV: segmentation violation\nPC=0x4050d3\nsignal arrived during cgo execution\n\nruntime.cgocall(0x402b20, 0x2ad4fc78de20)\n/home/avalyalkin/workspace/go/src/pkg/runtime/cgocall.c:149 +0x11b\nfp=0x2ad4fc78de08\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc._Cfunc_go_get_item_and_value(0xc210147000,\n0xc2100c9e10, 0xc2100c7a98, 0xc210155fa0, 0xc2100a7400)\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc/_test/_cgo_defun.c:69 +0x31\nfp=0x2ad4fc78de20\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100c7a80, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:563 +0xed\nfp=0x2ad4fc78de50\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\nfp=0x2ad4fc78de98\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\nfp=0x2ad4fc78df48\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\nfp=0x2ad4fc78dfa0\nruntime.goexit()\n/home/avalyalkin/workspace/go/src/pkg/runtime/proc.c:1396 fp=0x2ad4fc78dfa8\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 1 [chan receive]:\ntesting.(*B).run(0xc210078f00, 0x3, 0x2ad4f0982d80, 0x1, 0x1, ...)\n/home/avalyalkin/workspace/go/src/pkg/testing/benchmark.go:171 +0x4b\ntesting.RunBenchmarks(0x579838, 0x8921a0, 0x1e, 0x1e)\n/home/avalyalkin/workspace/go/src/pkg/testing/benchmark.go:303 +0x549\ntesting.Main(0x579838, 0x892c00, 0x2e, 0x2e, 0x8921a0, ...)\n/home/avalyalkin/workspace/go/src/pkg/testing/testing.go:409 +0x1b5\nmain.main()\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc/_test/_testmain.go:197 +0x9c\n\ngoroutine 3 [syscall]:\nruntime.goexit()\n/home/avalyalkin/workspace/go/src/pkg/runtime/proc.c:1396\n\ngoroutine 123 [semacquire]:\nsync.runtime_Semacquire(0xc210146020)\n/home/avalyalkin/workspace/go/src/pkg/runtime/sema.goc:199 +0x30\nsync.(*WaitGroup).Wait(0xc21000a200)\n/home/avalyalkin/workspace/go/src/pkg/sync/waitgroup.go:127 +0x14b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark(0x515e00,\n0x2ad4f098fed0, 0xc21000a040, 0x10, 0xc210078f00)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:59 +0x3f0\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.benchmarkCache_GetHit(0xc210078f00,\n0x10, 0x8a0800)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:117 +0x1c1\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.BenchmarkCache_GetHit_16(0xc210078f00)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:78 +0x35\ntesting.(*B).runN(0xc210078f00, 0x7a120)\n/home/avalyalkin/workspace/go/src/pkg/testing/benchmark.go:119 +0x88\ntesting.(*B).launch(0xc210078f00)\n/home/avalyalkin/workspace/go/src/pkg/testing/benchmark.go:207 +0x148\ncreated by testing.(*B).run\n/home/avalyalkin/workspace/go/src/pkg/testing/benchmark.go:170 +0x2e\n\ngoroutine 176 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 175 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 172 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc._Cfunc_go_get_item_and_value(0xc210147000,\n0xc2100cdea0, 0xc21007ea58, 0xc2101276a0, 0xc200000001)\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc/_test/_cgo_defun.c:69 +0x31\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc21007ea40, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:563 +0xed\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 174 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc._Cfunc_GoBytes(0x2ad4fc68f00d,\n0xc200000005, 0xc21007ef58, 0xc2101ddd40, 0xc200000001)\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc/_test/_cgo_defun.c:25 +0x3d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Item).Value(0xc21007ef40,\n0xc210146008, 0x5, 0x5)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:813 +0x3e\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:472 +0xba\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 177 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc._Cfunc_go_get_item_and_value(0xc210147000,\n0xc2100d9240, 0xc2100d6a58, 0xc2100886e0, 0xc200000001)\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc/_test/_cgo_defun.c:69 +0x31\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100d6a40, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:563 +0xed\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 173 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100ad980, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:561 +0x5a\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 184 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 183 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 181 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100c5780, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:561 +0x5a\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 180 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 179 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Item).Close(0xc21005cbc0,\n0xc2100f5000, 0x5)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:796\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100f5000, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:475 +0xe6\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 178 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc21005c680, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:561 +0x5a\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 185 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 186 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).GetItem(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0xc2100a7180, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:561 +0x5a\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.(*Cache).Get(0xc21000a1c0,\n0xc210146008, 0x5, 0x5, 0x0, ...)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/ybc.go:468 +0x7d\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·003(0x2ad4f0943648,\n0xc21000a1c0)\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:112 +0x5b\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:49 +0xba\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\ngoroutine 187 [runnable]:\n_/home/avalyalkin/workspace/ybc/bindings/go/ybc.func·001()\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:45\ncreated by _/home/avalyalkin/workspace/ybc/bindings/go/ybc.runBenchmark\n/home/avalyalkin/workspace/ybc/bindings/go/ybc/perf_test.go:57 +0x3d3\n\nrax     0xc905f85b416260e0\nrbx     0x2ad4fc78de20\nrcx     0x1aa050\nrdx     0xc210155fa0\nrdi     0xc210147000\nrsi     0xc2100c9e10\nrbp     0xc2100c9e10\nrsp     0x2ad4f1d7dde0\nr8      0xc905f85b416260e0\nr9      0xdeaddeaddeaddead\nr10     0xc210155fb0\nr11     0x100000001b3\nr12     0xc2100c7a98\nr13     0x3e\nr14     0xc210180c60\nr15     0x10\nrip     0x4050d3\nrflags  0x10217\ncs      0x33\nfs      0x0\ngs      0x0\nexit status 2\nFAIL _/home/avalyalkin/workspace/ybc/bindings/go/ybc 10.541s\nmake: *** [go-perftests-bindings] Error 1\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-09-23T15:54:06Z",
	"updated_at": "2014-12-08T10:35:13Z"
}
