{
	"id": 196682973,
	"body": "@nadiasvertex I confirm that TestShadowingLogic is broken if your GOROOT has space in it:\r\n```\r\n# pwd                                                \r\n/root/hello world/src/cmd/go                                \r\n# go test -v -run=TestShadowingLogic\r\n=== RUN   TestShadowingLogic\r\n--- FAIL: TestShadowingLogic (0.15s)\r\n\tgo_test.go:244: running testgo [list -f ({{.ImportPath}}) ({{.ConflictDir}}) ./testdata/shadow/root1/src/math]\r\n\tgo_test.go:259: standard output:\r\n\tgo_test.go:260: (_/root/hello_world/src/cmd/go/testdata/shadow/root1/src/math) (/root/hello world/src/math)\r\n\t\t\r\n\tgo_test.go:1876: shadowed math is not shadowed; looking for (_/root/hello world/src/cmd/go/testdata/shadow/root1/src/math) (/root/hello world/src/math)\r\n\tgo_test.go:244: running testgo [list -f ({{.ImportPath}}) ({{.ConflictDir}}) ./testdata/shadow/root1/src/foo]\r\n\tgo_test.go:259: standard output:\r\n\tgo_test.go:260: (foo) ()\r\n\t\t\r\n\tgo_test.go:244: running testgo [list -f ({{.ImportPath}}) ({{.ConflictDir}}) ./testdata/shadow/root2/src/foo]\r\n\tgo_test.go:259: standard output:\r\n\tgo_test.go:260: (_/root/hello_world/src/cmd/go/testdata/shadow/root2/src/foo) (/root/hello world/src/cmd/go/testdata/shadow/root1/src/foo)\r\n\t\t\r\n\tgo_test.go:1889: shadowed foo is not shadowed; looking for (_/root/hello world/src/cmd/go/testdata/shadow/root2/src/foo) (/root/hello world/src/cmd/go/testdata/shadow/root1/src/foo)\r\n\tgo_test.go:244: running testgo [install ./testdata/shadow/root2/src/foo]\r\n\tgo_test.go:263: standard error:\r\n\tgo_test.go:264: go install: no install location for /root/hello world/src/cmd/go/testdata/shadow/root2/src/foo: hidden by /root/hello world/src/cmd/go/testdata/shadow/root1/src/foo\r\n\t\t\r\n\tgo_test.go:283: testgo failed as expected: exit status 1\r\nFAIL\r\nexit status 1\r\nFAIL\tcmd/go\t4.465s\r\n#                                                    \r\n```\r\n\r\nand changing space into underscore fixes the test:\r\n```\r\n# git diff\r\ndiff --git a/src/cmd/go/go_test.go b/src/cmd/go/go_test.go\r\nindex 5526aec..056daf7 100644\r\n--- a/src/cmd/go/go_test.go\r\n+++ b/src/cmd/go/go_test.go\r\n@@ -1871,6 +1871,7 @@ func TestShadowingLogic(t *testing.T) {\r\n \t// The output will have makeImportValid applies, but we only\r\n \t// bother to deal with characters we might reasonably see.\r\n \tpwdForwardSlash = strings.Replace(pwdForwardSlash, \":\", \"_\", -1)\r\n+\tpwdForwardSlash = strings.Replace(pwdForwardSlash, \" \", \"_\", -1)\r\n \twant := \"(_\" + pwdForwardSlash + \"/testdata/shadow/root1/src/math) (\" + filepath.Join(runtime.GOROOT(), \"src\", \"math\") + \")\"\r\n \tif strings.TrimSpace(tg.getStdout()) != want {\r\n \t\tt.Error(\"shadowed math is not shadowed; looking for\", want)\r\n# go test -run=TestShadowingLogic\r\nPASS                                    \r\nok      cmd/go  4.494s                  \r\n#                                \r\n```\r\n\r\nI think we want to change the test as per your suggestion. Feel free to send a CL.\r\n\r\nAlex",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-03-15T06:28:18Z",
	"updated_at": "2016-03-15T06:28:18Z"
}
