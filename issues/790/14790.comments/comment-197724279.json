{
	"id": 197724279,
	"body": "\u003e What's the value of GOMAXPROCS? If it is 1, try to set it to 4.\r\n\r\n```\r\nC:\\dev\\src\\issues\\issue14790\u003eset GOMAXPROCS=1\r\n\r\nC:\\dev\\src\\issues\\issue14790\u003ego test -bench=.\r\ntesting: warning: no tests to run\r\nBenchmarkDefaultResolution                    50          31260200 ns/op\r\nBenchmark1ms                                1000           1956730 ns/op\r\nBenchmarkNoChannelDefaultResolution       300000              5053 ns/op\r\nBenchmarkNoChannel1ms                     300000              4259 ns/op\r\nBenchmarkOnlyChannelDefaultResolution    3000000               479 ns/op\r\nBenchmarkOnlyChannel1ms                  3000000               472 ns/op\r\nPASS\r\nok      issues/issue14790       11.139s\r\n\r\nC:\\dev\\src\\issues\\issue14790\u003eset GOMAXPROCS=4\r\n\r\nC:\\dev\\src\\issues\\issue14790\u003ego test -bench=.\r\ntesting: warning: no tests to run\r\nBenchmarkDefaultResolution-4                 100          15630100 ns/op\r\nBenchmark1ms-4                              2000            981784 ns/op\r\nBenchmarkNoChannelDefaultResolution-4     200000              5001 ns/op\r\nBenchmarkNoChannel1ms-4                   300000              4894 ns/op\r\nBenchmarkOnlyChannelDefaultResolution-4  3000000               484 ns/op\r\nBenchmarkOnlyChannel1ms-4                3000000               478 ns/op\r\nPASS\r\nok      issues/issue14790       10.216s\r\n\r\nC:\\dev\\src\\issues\\issue14790\u003e\r\n```\r\n\r\nGOMAXPROCS=4 makes both BenchmarkDefaultResolution and Benchmark1ms twice as fast, but still a lot slower than BenchmarkNoChannelDefaultResolution.\r\n\r\n\u003e Try the following patch:\r\n\r\n```\r\nC:\\dev\\src\\issues\\issue14790\u003ego test -bench=.\r\ntesting: warning: no tests to run\r\nBenchmarkDefaultResolution                    50          31268200 ns/op\r\nBenchmark1ms                                1000           1956154 ns/op\r\nBenchmarkNoChannelDefaultResolution       300000              5002 ns/op\r\nBenchmarkNoChannel1ms                     300000              4712 ns/op\r\nBenchmarkOnlyChannelDefaultResolution    3000000               500 ns/op\r\nBenchmarkOnlyChannel1ms                  3000000               492 ns/op\r\nPASS\r\nok      issues/issue14790       11.407s\r\n\r\nC:\\dev\\src\\issues\\issue14790\u003e\r\n```\r\n\r\nNo change in performance as far as I can tell.\r\n\r\nAlex",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-03-17T06:13:13Z",
	"updated_at": "2016-03-17T06:13:13Z"
}
