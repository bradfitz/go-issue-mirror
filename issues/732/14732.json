{
	"id": 139623838,
	"number": 14732,
	"state": "open",
	"title": "runtime: TestCgoCCodeSIGPROF fails on RHEL7.2 7.2 3.10.0-313.el7.ppc64le",
	"body": "I'm seeing this build failure only on RHEL 7.2 3.10.0-313.el7.ppc64le.  I've successfully built on another RHEL7.2 with a later kernel as well as other distros without the error.  I know there was a restriction on certain Linux kernel versions but couldn't find where that is documented.\r\n\r\nPlease answer these questions before submitting your issue. Thanks!\r\n\r\n1. What version of Go are you using (`go version`)?\r\nFailure starts with this commit and continues to happen with latest\r\n go version devel +1716162 Fri Mar 4 21:06:31 2016 +0000 linux/ppc64le\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\nRHEL 7.2 ppc64le \r\n3.10.0-313.el7.ppc64le #1 SMP Tue Sep 1 00:35:49 EDT 2015 ppc64le ppc64le ppc64le GNU/Linux\r\nNote that I am only seeing this failure on this system.  I've built on various Ubuntu systems, a SLES12 and even another RHEL 7.2 system with a different Linux version without the failure.  \r\n3. What did you do?\r\nPulled the golang master source from this commit and tried to build using src/all.bash.\r\n\r\n4. What did you expect to see?\r\nEverything building and all tests finished, ending with:\r\nALL TESTS PASSED\r\n\r\n5. What did you see instead?\r\npanic: test timed out after 3m0s                      \r\n\r\n```\r\ngoroutine 22506 [running]:\r\npanic(0x264b00, 0xc820422030)\r\n        /home/boger/golang/plain/go/src/runtime/panic.go:500 +0x3a8 fp=0xc820033ef0 sp=0xc820033e58\r\ntesting.startAlarm.func1()                                                                         \r\n        /home/boger/golang/plain/go/src/testing/testing.go:724 +0x14c fp=0xc820033f90 sp=0xc820033ef0\r\nruntime.goexit()                                                                                     \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820033f90 sp=0xc820033f90\r\ncreated by time.goFunc                                                                                \r\n        /home/boger/golang/plain/go/src/time/sleep.go:129 +0x4c                                       \r\n\r\ngoroutine 1 [chan receive, 2 minutes, locked to thread]:\r\nruntime.gopark(0x366720, 0xc8201633d8, 0x335a93, 0xc, 0x17, 0x3)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc8200459f8 sp=0xc8200459b8\r\nruntime.goparkunlock(0xc8201633d8, 0x335a93, 0xc, 0x3fffb7d20017, 0x3)                            \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:268 +0x58 fp=0xc820045a48 sp=0xc8200459f8 \r\nruntime.chanrecv(0x2594c0, 0xc820163380, 0xc820045c80, 0xc820045b01, 0x90000)                     \r\n        /home/boger/golang/plain/go/src/runtime/chan.go:474 +0x560 fp=0xc820045ae8 sp=0xc820045a48\r\nruntime.chanrecv1(0x2594c0, 0xc820163380, 0xc820045c80)                                           \r\n        /home/boger/golang/plain/go/src/runtime/chan.go:357 +0x30 fp=0xc820045b30 sp=0xc820045ae8 \r\ntesting.RunTests(0x366108, 0x468ac0, 0xb4, 0xb4, 0xdf101)                                         \r\n        /home/boger/golang/plain/go/src/testing/testing.go:582 +0x828 fp=0xc820045cd0 sp=0xc820045b30\r\ntesting.(*M).Run(0xc820045ec8, 0xd56e8)                                                              \r\n        /home/boger/golang/plain/go/src/testing/testing.go:515 +0xb4 fp=0xc820045d78 sp=0xc820045cd0 \r\nruntime_test.TestMain(0xc820045ec8)                                                                  \r\n        /home/boger/golang/plain/go/src/runtime/crash_test.go:24 +0x30 fp=0xc820045e10 sp=0xc820045d78\r\nmain.main()                                                                                           \r\n        runtime/_test/_testmain.go:960 +0x104 fp=0xc820045f18 sp=0xc820045e10                         \r\nruntime.main()                                                                                        \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:188 +0x314 fp=0xc820045f80 sp=0xc820045f18    \r\nruntime.goexit()                                                                                      \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820045f80 sp=0xc820045f80\r\n\r\ngoroutine 17 [syscall, 2 minutes, locked to thread]:\r\nruntime.goexit()                                    \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820034fb0 sp=0xc820034fb0\r\n\r\ngoroutine 2 [force gc (idle), 2 minutes]:\r\nruntime.gopark(0x366720, 0x46bf00, 0x32eeaa, 0xf, 0x14, 0x1)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc820020708 sp=0xc8200206c8\r\nruntime.goparkunlock(0x46bf00, 0x32eeaa, 0xf, 0xc820000114, 0x1)                                  \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:268 +0x58 fp=0xc820020758 sp=0xc820020708 \r\nruntime.forcegchelper()                                                                           \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:229 +0xdc fp=0xc8200207a0 sp=0xc820020758 \r\nruntime.goexit()                                                                                  \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc8200207a0 sp=0xc8200207a0\r\ncreated by runtime.init.4                                                                             \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:218 +0x38                                     \r\n\r\ngoroutine 3 [GC sweep wait]:\r\nruntime.gopark(0x366720, 0x46c140, 0x32d79a, 0xd, 0x72e14, 0x1)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc820020ef8 sp=0xc820020eb8\r\nruntime.goparkunlock(0x46c140, 0x32d79a, 0xd, 0x14, 0x1)                                          \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:268 +0x58 fp=0xc820020f48 sp=0xc820020ef8 \r\nruntime.bgsweep(0xc820048000)                                                                     \r\n        /home/boger/golang/plain/go/src/runtime/mgcsweep.go:79 +0x19c fp=0xc820020f98 sp=0xc820020f48\r\nruntime.goexit()                                                                                     \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820020f98 sp=0xc820020f98\r\ncreated by runtime.gcenable                                                                           \r\n        /home/boger/golang/plain/go/src/runtime/mgc.go:191 +0x5c                                      \r\n\r\ngoroutine 4 [finalizer wait]:\r\nruntime.gopark(0x366720, 0x4875d0, 0x32e44f, 0xe, 0x14, 0x1)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc8200216c8 sp=0xc820021688\r\nruntime.goparkunlock(0x4875d0, 0x32e44f, 0xe, 0x2000000014, 0x1)                                  \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:268 +0x58 fp=0xc820021718 sp=0xc8200216c8 \r\nruntime.runfinq()                                                                                 \r\n        /home/boger/golang/plain/go/src/runtime/mfinal.go:158 +0xc0 fp=0xc8200217a0 sp=0xc820021718\r\nruntime.goexit()                                                                                   \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc8200217a0 sp=0xc8200217a0\r\ncreated by runtime.createfing                                                                         \r\n        /home/boger/golang/plain/go/src/runtime/mfinal.go:139 +0x84                                   \r\n\r\ngoroutine 5 [timer goroutine (idle)]:\r\nruntime.gopark(0x366720, 0x46c240, 0x3354d8, 0x16, 0x367b14, 0x1)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc820021eb0 sp=0xc820021e70\r\nruntime.goparkunlock(0x46c240, 0x3354d8, 0x16, 0x14, 0x1)                                         \r\n        /home/boger/golang/plain/go/src/runtime/proc.go:268 +0x58 fp=0xc820021f00 sp=0xc820021eb0 \r\nruntime.timerproc()                                                                               \r\n        /home/boger/golang/plain/go/src/runtime/time.go:202 +0x150 fp=0xc820021fa0 sp=0xc820021f00\r\nruntime.goexit()                                                                                  \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820021fa0 sp=0xc820021fa0\r\ncreated by runtime.addtimerLocked                                                                     \r\n        /home/boger/golang/plain/go/src/runtime/time.go:116 +0x1cc                                    \r\n\r\ngoroutine 22504 [syscall, 2 minutes]:\r\nsyscall.Syscall6(0x72, 0xc33e, 0xc8203c0a78, 0x0, 0xc820071050, 0x0, 0x0, 0x0, 0xc8201633e0, 0x16c044)\r\n        /home/boger/golang/plain/go/src/syscall/asm_linux_ppc64x.s:41 +0xc fp=0xc8203c09a0 sp=0xc8203c0980\r\nsyscall.wait4(0xc33e, 0xc8203c0a78, 0x0, 0xc820071050, 0x90, 0x0, 0x0)                                    \r\n        /home/boger/golang/plain/go/src/syscall/zsyscall_linux_ppc64le.go:172 +0x70 fp=0xc8203c0a20 sp=0xc8203c09a0                                                                                                         \r\nsyscall.Wait4(0xc33e, 0xc8203c0ad8, 0x0, 0xc820071050, 0xc820424da0, 0x0, 0x0)                                \r\n        /home/boger/golang/plain/go/src/syscall/syscall_linux.go:256 +0x54 fp=0xc8203c0a80 sp=0xc8203c0a20    \r\nos.(*Process).wait(0xc820424da0, 0x2, 0x0, 0x0)                                                               \r\n        /home/boger/golang/plain/go/src/os/exec_unix.go:22 +0xe8 fp=0xc8203c0b48 sp=0xc8203c0a80              \r\nos.(*Process).Wait(0xc820424da0, 0x0, 0x0, 0x0)                                                               \r\n        /home/boger/golang/plain/go/src/os/doc.go:49 +0x34 fp=0xc8203c0b88 sp=0xc8203c0b48                    \r\nos/exec.(*Cmd).Wait(0xc82016b180, 0x0, 0x0)                                                                   \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:396 +0x208 fp=0xc8203c0c70 sp=0xc8203c0b88            \r\nos/exec.(*Cmd).Run(0xc82016b180, 0x0, 0x0)                                                                    \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:262 +0x70 fp=0xc8203c0cb8 sp=0xc8203c0c70             \r\nos/exec.(*Cmd).CombinedOutput(0xc82016b180, 0x0, 0x0, 0x0, 0x0, 0x0)                                          \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:453 +0x330 fp=0xc8203c0d60 sp=0xc8203c0cb8            \r\nruntime_test.runTestProg(0xc820070fc0, 0x32ca31, 0xb, 0x331b41, 0xf, 0x0, 0x0)                                \r\n        /home/boger/golang/plain/go/src/runtime/crash_test.go:68 +0x1b8 fp=0xc8203c0e50 sp=0xc8203c0d60       \r\nruntime_test.TestCgoCCodeSIGPROF(0xc820070fc0)                                                                \r\n        /home/boger/golang/plain/go/src/runtime/crash_cgo_test.go:206 +0x58 fp=0xc8203c0f30 sp=0xc8203c0e50   \r\ntesting.tRunner(0xc820070fc0, 0x468d78)                                                                       \r\n        /home/boger/golang/plain/go/src/testing/testing.go:473 +0xdc fp=0xc8203c0f80 sp=0xc8203c0f30          \r\nruntime.goexit()                                                                                              \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc8203c0f80 sp=0xc8203c0f80        \r\ncreated by testing.RunTests                                                                                   \r\n        /home/boger/golang/plain/go/src/testing/testing.go:581 +0x7fc                                         \r\n\r\ngoroutine 157 [GC worker (idle)]:\r\nruntime.gopark(0xc820422000, 0xc8200d0f88, 0x32f56c, 0x10, 0x265714, 0x0)\r\n        /home/boger/golang/plain/go/src/runtime/proc.go:262 +0x19c fp=0xc8200d0f00 sp=0xc8200d0ec0\r\nruntime.gcBgMarkWorker(0xc820018000)                                                              \r\n        /home/boger/golang/plain/go/src/runtime/mgc.go:1403 +0xec fp=0xc8200d0f98 sp=0xc8200d0f00 \r\nruntime.goexit()                                                                                  \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc8200d0f98 sp=0xc8200d0f98\r\ncreated by runtime.gcBgMarkStartWorkers                                                               \r\n        /home/boger/golang/plain/go/src/runtime/mgc.go:1330 +0xa0                                     \r\n\r\ngoroutine 22505 [syscall, 2 minutes]:\r\nsyscall.Syscall(0x3, 0x4, 0xc82017d600, 0x200, 0x0, 0xc82042814b, 0x5f1e4)\r\n        /home/boger/golang/plain/go/src/syscall/asm_linux_ppc64x.s:17 +0xc fp=0xc820032b18 sp=0xc820032af8\r\nsyscall.read(0x4, 0xc82017d600, 0x200, 0x200, 0xc8204236b0, 0x0, 0x0)                                     \r\n        /home/boger/golang/plain/go/src/syscall/zsyscall_linux_ppc64le.go:783 +0x70 fp=0xc820032b70 sp=0xc820032b18                                                                                                         \r\nsyscall.Read(0x4, 0xc82017d600, 0x200, 0x200, 0x0, 0x0, 0x0)                                                  \r\n        /home/boger/golang/plain/go/src/syscall/syscall_unix.go:161 +0x4c fp=0xc820032bc8 sp=0xc820032b70     \r\nos.(*File).read(0xc820024260, 0xc82017d600, 0x200, 0x200, 0xc82017d600, 0x0, 0x0)                             \r\n        /home/boger/golang/plain/go/src/os/file_unix.go:228 +0x54 fp=0xc820032c20 sp=0xc820032bc8             \r\nos.(*File).Read(0xc820024260, 0xc82017d600, 0x200, 0x200, 0x25c9a0, 0x0, 0x0)                                 \r\n        /home/boger/golang/plain/go/src/os/file.go:95 +0x84 fp=0xc820032c90 sp=0xc820032c20                   \r\nbytes.(*Buffer).ReadFrom(0xc8200488c0, 0x3fffb74e4518, 0xc820024260, 0x0, 0x0, 0x0)                           \r\n        /home/boger/golang/plain/go/src/bytes/buffer.go:176 +0x23c fp=0xc820032d58 sp=0xc820032c90            \r\nio.copyBuffer(0x3fffb74e46e0, 0xc8200488c0, 0x3fffb74e4518, 0xc820024260, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)       \r\n        /home/boger/golang/plain/go/src/io/io.go:374 +0x138 fp=0xc820032e30 sp=0xc820032d58                   \r\nio.Copy(0x3fffb74e46e0, 0xc8200488c0, 0x3fffb74e4518, 0xc820024260, 0xc82001ff10, 0x0, 0x0)                   \r\n        /home/boger/golang/plain/go/src/io/io.go:350 +0x5c fp=0xc820032ea0 sp=0xc820032e30                    \r\nos/exec.(*Cmd).writerDescriptor.func1(0x0, 0x0)                                                               \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:236 +0xbc fp=0xc820032f38 sp=0xc820032ea0             \r\nos/exec.(*Cmd).Start.func1(0xc82016b180, 0xc820424b60)                                                        \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:344 +0x34 fp=0xc820032f80 sp=0xc820032f38             \r\nruntime.goexit()                                                                                              \r\n        /home/boger/golang/plain/go/src/runtime/asm_ppc64x.s:1056 +0x4 fp=0xc820032f80 sp=0xc820032f80        \r\ncreated by os/exec.(*Cmd).Start                                                                               \r\n        /home/boger/golang/plain/go/src/os/exec/exec.go:345 +0x8b4                         \r\n```\r\n",
	"user": {
		"login": "laboger",
		"id": 9433228,
		"type": "User",
		"site_admin": false
	},
	"comments": 18,
	"created_at": "2016-03-09T16:19:03Z",
	"updated_at": "2016-07-20T13:43:56Z",
	"milestone": {
		"id": 1709364,
		"number": 39,
		"title": "Go1.8Early"
	}
}
