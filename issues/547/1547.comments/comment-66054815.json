{
	"id": 66054815,
	"body": "\u003ca id=\"c1\"\u003e\u003c/a\u003eComment 1:\n\n\u003cpre\u003eThis problem was introduced with revision 73af7584f8d9\t (\n\u003ca href=\"https://code.google.com/p/go/source/detail?r=73af7584f8d9ce0059ddec999e67212347a37917\"\u003ehttps://code.google.com/p/go/source/detail?r=73af7584f8d9ce0059ddec999e67212347a37917\u003c/a\u003e ).\n\nWhen reverting to the revision immediately before (cb891e2935c8), the file parses and\ngofmts just fine.\n\nThe issue looks like some kind of deadlock. Here's a traceback after kill -ABRT pid to a\nrunning gofmt:\n\nSIGABRT: abort\npc: 0x16737\n\nruntime.mach_semaphore_wait+0xb /home/gri/go3/src/pkg/runtime/darwin/amd64/sys.s:240\n\truntime.mach_semaphore_wait()\nruntime.mach_semacquire+0x23 /home/gri/go3/src/pkg/runtime/darwin/thread.c:439\n\truntime.mach_semacquire(0xa03, 0x1)\nruntime.lock+0x91 /home/gri/go3/src/pkg/runtime/darwin/thread.c:65\n\truntime.lock(0x1b0138, 0x2209000)\nruntime.stackfree+0x4d /home/gri/go3/src/pkg/runtime/malloc.c:336\n\truntime.stackfree(0x2209000, 0x1000, 0x10, 0x7fff5fbff678)\nruntime.oldstack+0xa6 /home/gri/go3/src/pkg/runtime/proc.c:705\n\truntime.oldstack()\nruntime.lessstack+0x22 /home/gri/go3/src/pkg/runtime/amd64/asm.s:224\n\truntime.lessstack()\n\ngoroutine 7 [4]:\nruntime.gosched+0x77 /home/gri/go3/src/pkg/runtime/proc.c:559\n\truntime.gosched()\nrunfinq+0x50 /home/gri/go3/src/pkg/runtime/mgc0.c:643\n\trunfinq()\nruntime.goexit /home/gri/go3/src/pkg/runtime/proc.c:150\n\truntime.goexit()\n\ngoroutine 2 [2]:\nruntime.gosched+0x77 /home/gri/go3/src/pkg/runtime/proc.c:559\n\truntime.gosched()\n\ngoroutine 1 [4]:\nruntime.gosched+0x77 /home/gri/go3/src/pkg/runtime/proc.c:559\n\truntime.gosched()\nruntime.chanrecv+0x403 /home/gri/go3/src/pkg/runtime/chan.c:324\n\truntime.chanrecv(0xf840024ae0, 0x2206d48, 0x0, 0x0, 0x40, ...)\nruntime.chanrecv1+0x4a /home/gri/go3/src/pkg/runtime/chan.c:416\n\truntime.chanrecv1(0xf840024ae0, 0x4c392)\ngo/printer.*Config·Fprint+0x20c /home/gri/go3/src/pkg/go/printer/printer.go:1068\n\tgo/printer.*Config·Fprint(0xf8400531f0, 0xf84004e270, 0xf840029e40, 0xf84000f7e0, 0x9bd60, ...)\nmain.processFile+0x325 /home/gri/go3/src/cmd/gofmt/gofmt.go:117\n\tmain.processFile(0xf84000fb70, 0x2f, 0x0, 0xf84000fb70)\nmain.processFileByName+0xc2 /home/gri/go3/src/cmd/gofmt/gofmt.go:150\n\tmain.processFileByName(0x7fff5fbff8c0, 0x7fff0000002f, 0x0, 0x0, 0x0, ...)\nmain.main+0x25e /home/gri/go3/src/cmd/gofmt/gofmt.go:214\n\tmain.main()\nruntime.mainstart+0xf /home/gri/go3/src/pkg/runtime/amd64/asm.s:77\n\truntime.mainstart()\nruntime.goexit /home/gri/go3/src/pkg/runtime/proc.c:150\n\truntime.goexit()\nrax     0xe\nrbx     0x1b013c\nrcx     0x7fff5fbff5b0\nrdx     0x7fff5fbff580\nrdi     0xa03\nrsi     0x3\nrbp     0x1b0138\nrsp     0x7fff5fbff5b0\nr8      0x907\nr9      0x0\nr10     0x30\nr11     0x216\nr12     0x4d\nr13     0xc\nr14     0x0\nr15     0x0\nrip     0x16737\nrflags  0x216\ncs      0x2f\nfs      0x10\ngs      0x48\nError (silent mode test): test.sh /home/gri/go3/test/fixedbugs/bug248.dir/bug3.go\u003c/pre\u003e\n\n\n_Owner changed to **r...@golang.org**._",
	"user": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2011-02-23T01:35:30Z",
	"updated_at": "2014-12-08T10:08:50Z"
}
