{
	"id": 152872670,
	"number": 15530,
	"state": "closed",
	"title": "cmd/compile: panic: interface conversion: interface is nil, not gc.SliceType",
	"body": "\u003e What version of Go are you using (`go version`)?\r\n\r\n```\r\n$ go version\r\ngo version devel +15f7a66 Tue May 3 14:57:06 2016 +0000 darwin/amd64\r\n```\r\n\r\n\u003e What did you do?\r\n\r\n`go build -o /tmp/command ./cmd/command`\r\n\r\n\u003e What did you expect to see?\r\n\r\nI expected the package to compile and link successfully, as it does with go1.5.4 and go1.6.2.\r\n\r\n\u003e What did you see instead?\r\n\r\ncmd/compile panicked. Within my (closed-source) project, there are two packages that cause a panic in compile. One of them is a main package, the other a non-main package.\r\n\r\nI eliminated lines in those two packages until the panic went away—the critical lines in both packages were a call to functions in a third (non-main) package that 1) successfully compiles, and 2) contains other functions with similar signatures that are called from elsewhere in the project without causing compiler panics.\r\n\r\nI bisected the Go toolchain, which indicated 7538b1db8ec0d82a623847fe5987f1988fe16448—enabling the binary export format—as the first commit with this bug. Adding `-gcflags=\"-newexport=0\"` to the command line when compiling with 15f7a66 results in a successful build.\r\n\r\nIt's not (yet) much to go on, particularly since I'm not able to share the code. What information would be most useful for debugging?\r\n```\r\npanic: interface conversion: interface is nil, not gc.SliceType\r\n\r\ngoroutine 1 [running]:\r\npanic(0x47ac80, 0x820f32c40)\r\n        /usr/local/go/src/runtime/panic.go:500 +0x18c\r\ncmd/compile/internal/gc.(*Type).Elem(0x820f3aa50, 0x820e6d090)\r\n        /usr/local/go/src/cmd/compile/internal/gc/type.go:737 +0x1c4\r\ncmd/compile/internal/gc.eqtype1(0x820e6d180, 0x820f3aa50, 0x820d59978, 0x0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/subr.go:715 +0x758\r\ncmd/compile/internal/gc.eqtype1(0x820e6dae0, 0x820f3b400, 0x820d59978, 0x2)\r\n        /usr/local/go/src/cmd/compile/internal/gc/subr.go:688 +0x2bc\r\ncmd/compile/internal/gc.eqtype1(0x820e6d130, 0x820f3aaa0, 0x820d59978, 0xfffffffffffffff2)\r\n        /usr/local/go/src/cmd/compile/internal/gc/subr.go:669 +0x558\r\ncmd/compile/internal/gc.Eqtype(0x820e6d130, 0x820f3aaa0, 0x820e44c10)\r\n        /usr/local/go/src/cmd/compile/internal/gc/subr.go:629 +0x34\r\ncmd/compile/internal/gc.importtype(0x820e6d090, 0x820f3aaa0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/export.go:570 +0x25c\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0xffffffffffffff14)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:342 +0x15b\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x8207c3338)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:397 +0xaf1\r\ncmd/compile/internal/gc.(*importer).param(0x820d8ac60, 0x0, 0x1)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:553 +0x30\r\ncmd/compile/internal/gc.(*importer).paramList(0x820d8ac60, 0x0, 0x0, 0x0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:546 +0xa0\r\ncmd/compile/internal/gc.(*importer).method(0x820d8ac60, 0x820f3c630)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:509 +0x86\r\ncmd/compile/internal/gc.(*importer).methodList(0x820d8ac60, 0x0, 0x820f110e0, 0x820d829a0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:498 +0x85\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820e76870)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:423 +0xf73\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820efaf50)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:341 +0x138\r\ncmd/compile/internal/gc.(*importer).field(0x820d8ac60, 0x2)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:469 +0x4b\r\ncmd/compile/internal/gc.(*importer).fieldList(0x820d8ac60, 0xffffffffffffff16, 0x820f11040, 0x6)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:459 +0x85\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f10fa0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:406 +0xb74\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0xffffffffffffff12)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:341 +0x138\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0xffffffffffffff14)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:410 +0xedb\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f10e10)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:397 +0xaf1\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f122a0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:429 +0xcc3\r\ncmd/compile/internal/gc.(*importer).field(0x820d8ac60, 0x1)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:469 +0x4b\r\ncmd/compile/internal/gc.(*importer).fieldList(0x820d8ac60, 0xffffffffffffff16, 0x820f10cd0, 0x20)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:459 +0x85\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f10c30)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:406 +0xb74\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f121c0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:341 +0x138\r\ncmd/compile/internal/gc.(*importer).field(0x820d8ac60, 0x3)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:469 +0x4b\r\ncmd/compile/internal/gc.(*importer).fieldList(0x820d8ac60, 0xffffffffffffff16, 0x820f10be0, 0x6)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:459 +0x85\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x820f10b40)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:406 +0xb74\r\ncmd/compile/internal/gc.(*importer).typ(0x820d8ac60, 0x8207a7c70)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:341 +0x138\r\ncmd/compile/internal/gc.(*importer).obj(0x820d8ac60, 0xfffffffffffffffd)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:250 +0x903\r\ncmd/compile/internal/gc.Import(0x8207aa2a0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/bimport.go:88 +0x338\r\ncmd/compile/internal/gc.importfile(0x820bae800, 0x0, 0x0, 0x0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/main.go:825 +0x902\r\ncmd/compile/internal/gc.(*parser).importdcl(0x820bae7e0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/parser.go:341 +0x160\r\ncmd/compile/internal/gc.(*parser).import_(0x820bae7e0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/parser.go:300 +0x67\r\ncmd/compile/internal/gc.(*parser).file(0x820bae7e0)\r\n        /usr/local/go/src/cmd/compile/internal/gc/parser.go:268 +0x54\r\ncmd/compile/internal/gc.parse_file(0x8207aa240)\r\n        /usr/local/go/src/cmd/compile/internal/gc/parser.go:31 +0x4a\r\ncmd/compile/internal/gc.Main()\r\n        /usr/local/go/src/cmd/compile/internal/gc/main.go:331 +0x144e\r\ncmd/compile/internal/amd64.Main()\r\n        /usr/local/go/src/cmd/compile/internal/amd64/galign.go:96 +0x381\r\nmain.main()\r\n        /usr/local/go/src/cmd/compile/main.go:33 +0x286\r\n```",
	"user": {
		"login": "rhysh",
		"id": 230685,
		"type": "User",
		"site_admin": false
	},
	"assignee": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"closed_at": "2016-05-06T06:24:50Z",
	"created_at": "2016-05-03T20:57:54Z",
	"updated_at": "2016-05-06T06:35:47Z",
	"milestone": {
		"id": 1414133,
		"number": 31,
		"title": "Go1.7"
	}
}
