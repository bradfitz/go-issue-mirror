{
	"id": 163988134,
	"body": "I made some simple C code, which looks like this:\r\n```\r\n$ cat const_2.c\r\nvoid do_this_first() __attribute__((constructor));\r\n\r\nvoid do_this_first() {\r\n  for(int i=0; i\u003c100; ++i) {}\r\n}\r\n```\r\n\r\nCompiled on Linux it looks like this:\r\n\r\n```\r\n$ objdump -h const_2_u.o\r\n\r\nconst_2_u.o:     file format elf64-x86-64\r\n\r\nSections:\r\n\r\nIdx Name          Size      VMA               LMA               File off Algn\r\n\r\n  0 .text         0000001a  0000000000000000  0000000000000000  00000040 2**0\r\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\r\n\r\n  1 .data         00000000  0000000000000000  0000000000000000  0000005a 2**0\r\n                  CONTENTS, ALLOC, LOAD, DATA\r\n\r\n  2 .bss          00000000  0000000000000000  0000000000000000  0000005a 2**0\r\n                  ALLOC\r\n\r\n  3 .init_array   00000008  0000000000000000  0000000000000000  00000060 2**3\r\n                  CONTENTS, ALLOC, LOAD, RELOC, DATA\r\n\r\n  4 .comment      0000002e  0000000000000000  0000000000000000  00000068 2**0\r\n                  CONTENTS, READONLY\r\n\r\n  5 .note.GNU-stack 00000000  0000000000000000  0000000000000000  00000096 2**0\r\n                  CONTENTS, READONLY\r\n\r\n  6 .eh_frame     00000038  0000000000000000  0000000000000000  00000098 2**3\r\n\r\n$ objdump -s const_2_u.o\r\n\r\nconst_2_u.o:     file format elf64-x86-64\r\n\r\nContents of section .text:\r\n\r\n 0000 554889e5 c745fc00 000000eb 048345fc  UH...E........E.\r\n 0010 01837dfc 637ef690 5dc3               ..}.c~..].\r\n\r\nContents of section .init_array:\r\n 0000 00000000 00000000                    ........\r\n\r\nContents of section .comment:\r\n 0000 00474343 3a202855 62756e74 7520352e  .GCC: (Ubuntu 5.\r\n 0010 322e312d 32327562 756e7475 32292035  2.1-22ubuntu2) 5\r\n 0020 2e322e31 20323031 35313031 3000      .2.1 20151010.\r\n\r\nContents of section .eh_frame:\r\n\r\n 0000 14000000 00000000 017a5200 01781001  .........zR..x..\r\n 0010 1b0c0708 90010000 1c000000 1c000000  ................\r\n 0020 00000000 1a000000 00410e10 8602430d  .........A....C.\r\n 0030 06550c07 08000000                    .U......\r\n```\r\n\r\nAnd on Windows it looks like this:\r\n\r\n```\r\n$ objdump -h const_2.o\r\n\r\nconst_2.o:     file format pe-x86-64\r\n\r\nSections:\r\n\r\nIdx Name          Size      VMA               LMA               File off Algn\r\n\r\n  0 .text         00000030  0000000000000000  0000000000000000  0000012c 2**4\r\n                  CONTENTS, ALLOC, LOAD, READONLY, CODE\r\n\r\n  1 .data         00000000  0000000000000000  0000000000000000  00000000 2**4\r\n                  ALLOC, LOAD, DATA\r\n\r\n  2 .bss          00000000  0000000000000000  0000000000000000  00000000 2**4\r\n                  ALLOC\r\n\r\n  3 .xdata        0000000c  0000000000000000  0000000000000000  0000015c 2**2\r\n                  CONTENTS, ALLOC, LOAD, READONLY, DATA\r\n\r\n  4 .pdata        0000000c  0000000000000000  0000000000000000  00000168 2**2\r\n                  CONTENTS, ALLOC, LOAD, RELOC, READONLY, DATA\r\n\r\n  5 .ctors        00000008  0000000000000000  0000000000000000  00000174 2**3\r\n                  CONTENTS, ALLOC, LOAD, RELOC, DATA\r\n\r\n  6 .rdata$zzz    00000020  0000000000000000  0000000000000000  0000017c 2**4\r\n\r\n$ objdump -s const_2.o\r\n\r\nconst_2.o:     file format pe-x86-64\r\n\r\nContents of section .text:\r\n\r\n 0000 554889e5 4883ec10 c745fc00 000000eb  UH..H....E......\r\n 0010 048345fc 01837dfc 637ef690 4883c410  ..E...}.c~..H...\r\n 0020 5dc39090 90909090 90909090 90909090  ]...............\r\n\r\nContents of section .xdata:\r\n\r\n 0000 01080305 08120403 01500000           .........P..\r\n\r\nContents of section .pdata:\r\n\r\n 0000 00000000 22000000 00000000           ....\".......\r\n\r\nContents of section .ctors:\r\n\r\n 0000 00000000 00000000                    ........\r\n\r\nContents of section .rdata$zzz:\r\n\r\n 0000 4743433a 20287464 6d36342d 31292035  GCC: (tdm64-1) 5\r\n 0010 2e312e30 00000000 00000000 00000000  .1.0............\r\n```\r\n\r\nThat may not be conclusive, but it strongly suggests to me that in this\r\nfairly simple case, if I take the data that is in .init_array on ELF, and\r\nwrite it to .ctors on PE, it will probably work.\r\n",
	"user": {
		"login": "nadiasvertex",
		"id": 2034108,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-12-11T16:50:02Z",
	"updated_at": "2015-12-11T16:50:02Z"
}
