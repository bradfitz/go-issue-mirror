{
	"id": 168665473,
	"body": "The go linker generates the .dll with the name a.out. then renames it. This\ndoesn't work on windows. I will fix that, but for now you have to also copy\ntest.dll to a.out. I forgot to mention that in the instructions.\n\nOn Sun, Jan 3, 2016, 9:30 PM Alex Brainman \u003cnotifications@github.com\u003e wrote:\n\n\u003e I had to modify your C program sligtly (my gcc cannot handle for() loops),\n\u003e and everything builds now:\n\u003e\n\u003e c:\\dev\\src\\issues\\issue11058\u003edir\n\u003e  Volume in drive C has no label.\n\u003e  Volume Serial Number is D2A1-D2A1\n\u003e\n\u003e  Directory of c:\\dev\\src\\issues\\issue11058\n\u003e\n\u003e 04/01/2016  12:50 PM    \u003cDIR\u003e          .\n\u003e 04/01/2016  12:50 PM    \u003cDIR\u003e          ..\n\u003e 04/01/2016  12:45 PM    \u003cDIR\u003e          .hg\n\u003e 04/01/2016  12:45 PM               115 test.go\n\u003e 04/01/2016  12:47 PM               246 test_driver.c\n\u003e                2 File(s)            361 bytes\n\u003e                3 Dir(s)   3,758,317,568 bytes free\n\u003e\n\u003e c:\\dev\\src\\issues\\issue11058\u003etype test.go\n\u003e package main\n\u003e\n\u003e import \"C\"\n\u003e\n\u003e\n\u003e //export Sum\n\u003e func Sum(x, y int) int {\n\u003e         return x+y\n\u003e }\n\u003e\n\u003e func main() {\n\u003e\n\u003e }\n\u003e c:\\dev\\src\\issues\\issue11058\u003etype test_driver.c\n\u003e #include \"test.h\"\n\u003e #include \u003cstdlib.h\u003e\n\u003e #include \u003cstdio.h\u003e\n\u003e\n\u003e int main(int argc, char **argv) {\n\u003e         int i=2, j=3;\n\u003e         GoInt v1 = Sum(i,j);\n\u003e         GoInt v2 = i+j;\n\u003e\n\u003e         printf(\"Sum=%lld expect %lld\\n\", v1, v2);\n\u003e\n\u003e         if (v1!=v2) {\n\u003e         abort();\n\u003e         }\n\u003e         return 0;\n\u003e }\n\u003e c:\\dev\\src\\issues\\issue11058\u003ego build -buildmode=c-shared -o test.dll test.go\n\u003e\n\u003e c:\\dev\\src\\issues\\issue11058\u003egcc -c -o test_driver.o test_driver.c\n\u003e\n\u003e c:\\dev\\src\\issues\\issue11058\u003egcc -o test-lib test_driver.o test.dll -lws2_32 -lntdll\n\u003e\n\u003e c:\\dev\\src\\issues\\issue11058\u003e\n\u003e\n\u003e But when I run test-lib.exe, I get this error\n\u003e https://gist.github.com/alexbrainman/72057484f5a42821ca86#file-cgoerror-jpg\n\u003e .\n\u003e\n\u003e Alex\n\u003e\n\u003e â€”\n\u003e Reply to this email directly or view it on GitHub\n\u003e \u003chttps://github.com/golang/go/issues/11058#issuecomment-168567443\u003e.\n\u003e\n",
	"user": {
		"login": "nadiasvertex",
		"id": 2034108,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-01-04T12:22:58Z",
	"updated_at": "2016-01-04T12:22:58Z"
}
