{
	"id": 169834157,
	"body": "This is working as intended, even if unexpected. An analysis follows below.\r\n\r\nSimplifying the constant operations to the 2 values in question, we get the two expressions:\r\n```\r\n    2800*(1.0/6) - (280.0/6 + 420)\r\n    2800/6.0 - (280.0/6 + 420)\r\n```\r\nwhich are identical mathematically, but produce the observed error if computed with limited precisions:\r\n```\r\npackage main\r\n\r\nfunc main() {\r\n    const a = 2800*(1.0/6) - (280.0/6 + 420)\r\n    const b = 2800/6.0 - (280.0/6 + 420)\r\n    println(a, b, a == b)\r\n}\r\n```\r\nThe results are:\r\n```\r\n+3.818670e-152 +0.000000e+000 false\r\n```\r\nIn other words, x/3.0 is not the same as x*(1/3.0):\r\n```\r\npackage main\r\n\r\nfunc main() {\r\n    const a = 1400*(1/3.0)\r\n    const b = 1400/3.0\r\n    println(a, b, a-b, a == b)\r\n}\r\n```\r\nThe difference is:\r\n```\r\n+4.666667e+002 +4.666667e+002 +3.818670e-152 false\r\n```\r\nDoing the constant evaluation as done by the compiler explicitly confirms the result:\r\nhttp://play.golang.org/p/nR2dfat3A0\r\n```\r\n466.6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666667\r\n466.66666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666665\r\n3.8186704543745058525649742415170221247367534257154083298670173866016145331559005721273215438850190353210939408669880839441473167847553549621689163927511474e-152\r\n1\r\n```\r\nLooking at the bits:\r\n```\r\npackage main\r\n\r\nimport (\r\n\t\"fmt\"\r\n\t\"math/big\"\r\n)\r\n\r\nfunc newf(x int64) *big.Float {\r\n\treturn new(big.Float).SetPrec(512).SetInt64(x)\r\n}\r\n\r\nfunc main() {\r\n\tc := newf(1400)\r\n\tone := newf(1)\r\n\tthree := newf(3)\r\n\r\n\ta := newf(0).Mul(c, newf(0).Quo(one, three))\r\n\tb := newf(0).Quo(c, three)\r\n\r\n\tfmt.Println(a.Text('p', 0))\r\n\tfmt.Println(b.Text('p', 0))\r\n\tfmt.Println(newf(0).Sub(a, b).Text('p', 0))\r\n\tfmt.Println(a.Cmp(b))\r\n}\r\n```\r\nshows an error:\r\n```\r\n0x.e9555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555556p+9\r\n0x.e9555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555p+9\r\n0x.8p-502\r\n1\r\n```\r\n",
	"user": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-01-07T22:59:52Z",
	"updated_at": "2016-01-07T22:59:52Z"
}
