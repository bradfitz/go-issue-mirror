{
	"id": 66055700,
	"body": "\u003ca id=\"c5\"\u003e\u003c/a\u003eComment 5:\n\n\u003cpre\u003eHi Russ, thanks for your suggestions.\n\n\nBreakpoint 1, 0x40015fb0 in close () from /lib/ld-linux.so.3\n(gdb) disas ftruncate64\nDump of assembler code for function ftruncate64:\n0x000083a0 \u0026lt;ftruncate64+0\u0026gt;:\tadd\tr12, pc, #0\t; 0x0\n0x000083a4 \u0026lt;ftruncate64+4\u0026gt;:\tadd\tr12, r12, #32768\t; 0x8000\n0x000083a8 \u0026lt;ftruncate64+8\u0026gt;:\tldr\tpc, [r12, #828]!\nEnd of assembler dump.\n(gdb)  disas main\nDump of assembler code for function main:\n0x00008460 \u0026lt;main+0\u0026gt;:\tpush\t{r4, r11, lr}\n0x00008464 \u0026lt;main+4\u0026gt;:\tadd\tr11, sp, #8\t; 0x8\n0x00008468 \u0026lt;main+8\u0026gt;:\tsub\tsp, sp, #28\t; 0x1c\n0x0000846c \u0026lt;main+12\u0026gt;:\tstr\tr0, [r11, #-32]\n0x00008470 \u0026lt;main+16\u0026gt;:\tstr\tr1, [r11, #-36]\n0x00008474 \u0026lt;main+20\u0026gt;:\tldr\tr3, [pc, #132]\t; 0x8500 \u0026lt;main+160\u0026gt;\n0x00008478 \u0026lt;main+24\u0026gt;:\tstr\tr3, [r11, #-28]\n0x0000847c \u0026lt;main+28\u0026gt;:\tldr\tr0, [pc, #128]\t; 0x8504 \u0026lt;main+164\u0026gt;\n0x00008480 \u0026lt;main+32\u0026gt;:\tldr\tr1, [pc, #128]\t; 0x8508 \u0026lt;main+168\u0026gt;\n0x00008484 \u0026lt;main+36\u0026gt;:\tbl\t0x834c \u0026lt;creat\u0026gt;\n0x00008488 \u0026lt;main+40\u0026gt;:\tmov\tr3, r0\n0x0000848c \u0026lt;main+44\u0026gt;:\tstr\tr3, [r11, #-24]\n0x00008490 \u0026lt;main+48\u0026gt;:\tldr\tr3, [r11, #-24]\n0x00008494 \u0026lt;main+52\u0026gt;:\tcmp\tr3, #0\t; 0x0\n0x00008498 \u0026lt;main+56\u0026gt;:\tbge\t0x84a4 \u0026lt;main+68\u0026gt;\n0x0000849c \u0026lt;main+60\u0026gt;:\tmov\tr0, #1\t; 0x1\n0x000084a0 \u0026lt;main+64\u0026gt;:\tbl\t0x83ac \u0026lt;exit\u0026gt;\n0x000084a4 \u0026lt;main+68\u0026gt;:\tldr\tr0, [r11, #-24]\n0x000084a8 \u0026lt;main+72\u0026gt;:\tldr\tr1, [r11, #-28]\n0x000084ac \u0026lt;main+76\u0026gt;:\tmov\tr2, #13\t; 0xd\n0x000084b0 \u0026lt;main+80\u0026gt;:\tbl\t0x837c \u0026lt;write\u0026gt;\n0x000084b4 \u0026lt;main+84\u0026gt;:\tmov\tr3, #10\t; 0xa\n---Type \u0026lt;return\u0026gt; to continue, or q \u0026lt;return\u0026gt; to quit--- \n0x000084b8 \u0026lt;main+88\u0026gt;:\tmov\tr4, #0\t; 0x0\n0x000084bc \u0026lt;main+92\u0026gt;:\tstr\tr3, [r11, #-20]\n0x000084c0 \u0026lt;main+96\u0026gt;:\tstr\tr4, [r11, #-16]\n0x000084c4 \u0026lt;main+100\u0026gt;:\tldr\tr0, [r11, #-24]\n0x000084c8 \u0026lt;main+104\u0026gt;:\tsub\tr2, r11, #20\t; 0x14\n0x000084cc \u0026lt;main+108\u0026gt;:\tldm\tr2, {r2, r3}\n0x000084d0 \u0026lt;main+112\u0026gt;:\tbl\t0x83a0 \u0026lt;ftruncate64\u0026gt;\n0x000084d4 \u0026lt;main+116\u0026gt;:\tmov\tr3, r0\n0x000084d8 \u0026lt;main+120\u0026gt;:\tcmp\tr3, #0\t; 0x0\n0x000084dc \u0026lt;main+124\u0026gt;:\tbeq\t0x84f0 \u0026lt;main+144\u0026gt;\n0x000084e0 \u0026lt;main+128\u0026gt;:\tldr\tr0, [pc, #36]\t; 0x850c \u0026lt;main+172\u0026gt;\n0x000084e4 \u0026lt;main+132\u0026gt;:\tbl\t0x8394 \u0026lt;puts\u0026gt;\n0x000084e8 \u0026lt;main+136\u0026gt;:\tmov\tr0, #1\t; 0x1\n0x000084ec \u0026lt;main+140\u0026gt;:\tbl\t0x83ac \u0026lt;exit\u0026gt;\n0x000084f0 \u0026lt;main+144\u0026gt;:\tldr\tr0, [r11, #-24]\n0x000084f4 \u0026lt;main+148\u0026gt;:\tbl\t0x8388 \u0026lt;close\u0026gt;\n0x000084f8 \u0026lt;main+152\u0026gt;:\tsub\tsp, r11, #8\t; 0x8\n0x000084fc \u0026lt;main+156\u0026gt;:\tpop\t{r4, r11, pc}\n0x00008500 \u0026lt;main+160\u0026gt;:\tandeq\tr8, r0, r8, lsl #11\n0x00008504 \u0026lt;main+164\u0026gt;:\tmuleq\tr0, r8, r5\n0x00008508 \u0026lt;main+168\u0026gt;:\tstrheq\tr0, [r0], -r6\n0x0000850c \u0026lt;main+172\u0026gt;:\tandeq\tr8, r0, r8, lsr #11\nEnd of assembler dump.\n\nI'll recompile truncate.c again with -static but it'll take me a little time as this\nplatform is pretty cut down and currently complaining \n\naxentraserver(~/devel) % gcc -static truncate.c \n/opt/lib/gcc/arm-none-linux-gnueabi/4.2.3/../../../../arm-none-linux-gnueabi/bin/ld:\ncannot find -lc\n\nas there is no libc.a, on libc.so on this host.\u003c/pre\u003e",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2011-04-19T21:49:31Z",
	"updated_at": "2014-12-22T05:55:18Z"
}
