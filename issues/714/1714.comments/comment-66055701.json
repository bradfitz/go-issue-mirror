{
	"id": 66055701,
	"body": "\u003ca id=\"c6\"\u003e\u003c/a\u003eComment 6:\n\n\u003cpre\u003eHi Russ,\n\nI recompiled truncate.c statically on inside qemu host on another machine using images\nfound here\n\n\u003ca href=\"http://people.debian.org/~aurel32/qemu/armel/\"\u003ehttp://people.debian.org/~aurel32/qemu/armel/\u003c/a\u003e\n\nThe resulting binary works as expected on my arm5 system, here is the output from gdb\n\naxentraserver(~/devel) % gdb ./truncate-static \nGNU gdb 6.8\nCopyright (C) 2008 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later \u0026lt;\u003ca href=\"http://gnu.org/licenses/gpl.html\u0026gt\"\u003ehttp://gnu.org/licenses/gpl.html\u0026gt\u003c/a\u003e;\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"arm-none-linux-gnueabi\"...\n(gdb) b close\nBreakpoint 1 at 0x11d30\n(gdb) r\nStarting program: /home/dfc/devel/truncate-static \n\nBreakpoint 1, 0x00011d30 in close ()\nCurrent language:  auto; currently asm\n(gdb) disas ftruncate64\nDump of assembler code for function ftruncate64:\n0x00012128 \u0026lt;ftruncate64+0\u0026gt;:\tpush\t{r7, lr}\n0x0001212c \u0026lt;ftruncate64+4\u0026gt;:\tmov\tr1, #0\t; 0x0\n0x00012130 \u0026lt;ftruncate64+8\u0026gt;:\tmov\tr7, #194\t; 0xc2\n0x00012134 \u0026lt;ftruncate64+12\u0026gt;:\tsvc\t0x00000000\n0x00012138 \u0026lt;ftruncate64+16\u0026gt;:\tcmn\tr0, #4096\t; 0x1000\n0x0001213c \u0026lt;ftruncate64+20\u0026gt;:\tmov\tr2, r0\n0x00012140 \u0026lt;ftruncate64+24\u0026gt;:\tmovls\tr0, r0\n0x00012144 \u0026lt;ftruncate64+28\u0026gt;:\tbhi\t0x12150 \u0026lt;ftruncate64+40\u0026gt;\n0x00012148 \u0026lt;ftruncate64+32\u0026gt;:\tpop\t{r7, lr}\n0x0001214c \u0026lt;ftruncate64+36\u0026gt;:\tbx\tlr\n0x00012150 \u0026lt;ftruncate64+40\u0026gt;:\tldr\tr3, [pc, #20]\t; 0x1216c \u0026lt;ftruncate64+68\u0026gt;\n0x00012154 \u0026lt;ftruncate64+44\u0026gt;:\tbl\t0x8b50 \u0026lt;__aeabi_read_tp\u0026gt;\n0x00012158 \u0026lt;ftruncate64+48\u0026gt;:\tldr\tr3, [pc, r3]\n0x0001215c \u0026lt;ftruncate64+52\u0026gt;:\trsb\tr2, r2, #0\t; 0x0\n0x00012160 \u0026lt;ftruncate64+56\u0026gt;:\tstr\tr2, [r0, r3]\n0x00012164 \u0026lt;ftruncate64+60\u0026gt;:\tmvn\tr0, #0\t; 0x0\n0x00012168 \u0026lt;ftruncate64+64\u0026gt;:\tb\t0x12148 \u0026lt;ftruncate64+32\u0026gt;\n0x0001216c \u0026lt;ftruncate64+68\u0026gt;:\tandeq\tpc, r6, r0, ror #7\nEnd of assembler dump.\n(gdb) disas main\nDump of assembler code for function main:\n0x00008238 \u0026lt;main+0\u0026gt;:\tmov\tr12, sp\n0x0000823c \u0026lt;main+4\u0026gt;:\tpush\t{r4, r11, r12, lr, pc}\n0x00008240 \u0026lt;main+8\u0026gt;:\tsub\tr11, r12, #4\t; 0x4\n0x00008244 \u0026lt;main+12\u0026gt;:\tsub\tsp, sp, #36\t; 0x24\n0x00008248 \u0026lt;main+16\u0026gt;:\tstr\tr0, [r11, #-40]\n0x0000824c \u0026lt;main+20\u0026gt;:\tstr\tr1, [r11, #-44]\n0x00008250 \u0026lt;main+24\u0026gt;:\tldr\tr3, [pc, #136]\t; 0x82e0 \u0026lt;main+168\u0026gt;\n0x00008254 \u0026lt;main+28\u0026gt;:\tstr\tr3, [r11, #-36]\n0x00008258 \u0026lt;main+32\u0026gt;:\tldr\tr0, [pc, #132]\t; 0x82e4 \u0026lt;main+172\u0026gt;\n0x0000825c \u0026lt;main+36\u0026gt;:\tldr\tr1, [pc, #132]\t; 0x82e8 \u0026lt;main+176\u0026gt;\n0x00008260 \u0026lt;main+40\u0026gt;:\tbl\t0x12020 \u0026lt;creat\u0026gt;\n0x00008264 \u0026lt;main+44\u0026gt;:\tmov\tr3, r0\n0x00008268 \u0026lt;main+48\u0026gt;:\tstr\tr3, [r11, #-32]\n0x0000826c \u0026lt;main+52\u0026gt;:\tldr\tr3, [r11, #-32]\n0x00008270 \u0026lt;main+56\u0026gt;:\tcmp\tr3, #0\t; 0x0\n0x00008274 \u0026lt;main+60\u0026gt;:\tbge\t0x8280 \u0026lt;main+72\u0026gt;\n0x00008278 \u0026lt;main+64\u0026gt;:\tmov\tr0, #1\t; 0x1\n0x0000827c \u0026lt;main+68\u0026gt;:\tbl\t0x8de4 \u0026lt;exit\u0026gt;\n0x00008280 \u0026lt;main+72\u0026gt;:\tldr\tr0, [r11, #-32]\n0x00008284 \u0026lt;main+76\u0026gt;:\tldr\tr1, [r11, #-36]\n0x00008288 \u0026lt;main+80\u0026gt;:\tmov\tr2, #13\t; 0xd\n0x0000828c \u0026lt;main+84\u0026gt;:\tbl\t0x11e50 \u0026lt;write\u0026gt;\n0x00008290 \u0026lt;main+88\u0026gt;:\tmov\tr3, #10\t; 0xa\n0x00008294 \u0026lt;main+92\u0026gt;:\tmov\tr4, #0\t; 0x0\n0x00008298 \u0026lt;main+96\u0026gt;:\tstr\tr3, [r11, #-28]\n0x0000829c \u0026lt;main+100\u0026gt;:\tstr\tr4, [r11, #-24]\n0x000082a0 \u0026lt;main+104\u0026gt;:\tldr\tr0, [r11, #-32]\n0x000082a4 \u0026lt;main+108\u0026gt;:\tsub\tr2, r11, #28\t; 0x1c\n0x000082a8 \u0026lt;main+112\u0026gt;:\tldm\tr2, {r2, r3}\n0x000082ac \u0026lt;main+116\u0026gt;:\tbl\t0x12128 \u0026lt;ftruncate64\u0026gt;\n0x000082b0 \u0026lt;main+120\u0026gt;:\tmov\tr3, r0\n0x000082b4 \u0026lt;main+124\u0026gt;:\tcmp\tr3, #0\t; 0x0\n0x000082b8 \u0026lt;main+128\u0026gt;:\tbeq\t0x82cc \u0026lt;main+148\u0026gt;\n0x000082bc \u0026lt;main+132\u0026gt;:\tldr\tr0, [pc, #40]\t; 0x82ec \u0026lt;main+180\u0026gt;\n0x000082c0 \u0026lt;main+136\u0026gt;:\tbl\t0x9100 \u0026lt;puts\u0026gt;\n0x000082c4 \u0026lt;main+140\u0026gt;:\tmov\tr0, #1\t; 0x1\n0x000082c8 \u0026lt;main+144\u0026gt;:\tbl\t0x8de4 \u0026lt;exit\u0026gt;\n0x000082cc \u0026lt;main+148\u0026gt;:\tldr\tr0, [r11, #-32]\n0x000082d0 \u0026lt;main+152\u0026gt;:\tbl\t0x11d30 \u0026lt;close\u0026gt;\n0x000082d4 \u0026lt;main+156\u0026gt;:\tsub\tsp, r11, #16\t; 0x10\n0x000082d8 \u0026lt;main+160\u0026gt;:\tldm\tsp, {r4, r11, sp, lr}\n0x000082dc \u0026lt;main+164\u0026gt;:\tbx\tlr\n0x000082e0 \u0026lt;main+168\u0026gt;:\tmuleq\tr6, r12, r3\n0x000082e4 \u0026lt;main+172\u0026gt;:\tandeq\tr4, r6, r12, lsr #7\n0x000082e8 \u0026lt;main+176\u0026gt;:\tstrheq\tr0, [r0], -r6\n0x000082ec \u0026lt;main+180\u0026gt;:\tstrheq\tr4, [r6], -r12\nEnd of assembler dump.\u003c/pre\u003e",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2011-04-20T00:12:48Z",
	"updated_at": "2014-12-22T05:55:19Z"
}
