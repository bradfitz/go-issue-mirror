{
	"id": 240272315,
	"body": "I played around with it a bit, and found that I can make the problem appear more frequently by making the compiler compile more pkgs of the stdlib.\r\n\r\nThat being said, even with the instructions below, it sometimes wouldn't crash, and I had to `Ctrl+C` and restart the loop in order to see it crash.\r\n\r\n```\r\nmkdir bar\r\ncd bar\r\necho 'package bar; import _ \"net/http\"' \u003e bar.go\r\nwhile go build -a . \u0026\u0026 echo built; do :; done;\r\n```\r\n\r\nExample:\r\n\r\n```\r\n$ while go build -a . \u0026\u0026 echo built; do :; done;\r\nbuilt\r\nbuilt\r\nbuilt\r\n# fmt\r\n\u003cautogenerated\u003e:5: internal compiler error: panic during schedule while compiling State.Write:\r\n\r\nruntime error: index out of range\r\n\r\ngoroutine 1 [running]:\r\ncmd/compile/internal/ssa.Compile.func1(0xc421043e00, 0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/compile.go:35 +0xc8\r\npanic(0x4b7320, 0xc420012180)\r\n\t/Users/felix/.gvm/gos/go1.7/src/runtime/panic.go:458 +0x243\r\ncmd/compile/internal/ssa.ValHeap.Less(0xc42108c000, 0x3, 0x4, 0xc4209378f0, 0x2a, 0x2a, 0xc4209378bf, 0x621049bc5f, 0x2a)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/schedule.go:40 +0xd2\r\ncmd/compile/internal/ssa.(*ValHeap).Less(0xc4209378c0, 0xc4209378bf, 0x621049bc5f, 0x2a)\r\n\t\u003cautogenerated\u003e:172 +0x77\r\ncontainer/heap.up(0x6d02e0, 0xc4209378c0, 0xc4209378bf)\r\n\t/Users/felix/.gvm/gos/go1.7/src/container/heap/heap.go:93 +0x64\r\ncontainer/heap.Push(0x6d02e0, 0xc4209378c0, 0x4e2a80, 0xc420985128)\r\n\t/Users/felix/.gvm/gos/go1.7/src/container/heap/heap.go:54 +0x7e\r\ncmd/compile/internal/ssa.schedule(0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/schedule.go:219 +0x77f\r\ncmd/compile/internal/ssa.Compile(0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/compile.go:64 +0x321\r\ncmd/compile/internal/gc.buildssa(0xc42072e5a0, 0x0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/ssa.go:232 +0xc5f\r\ncmd/compile/internal/gc.compile(0xc42072e5a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/pgen.go:405 +0x1377\r\ncmd/compile/internal/gc.funccompile(0xc42072e5a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/dcl.go:1287 +0x186\r\ncmd/compile/internal/gc.genwrapper(0xc4203f3ea0, 0xc4207e3700, 0xc42072c310, 0x0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/subr.go:1916 +0xa62\r\ncmd/compile/internal/gc.imethods(0xc4203f3ea0, 0xc420a34460, 0x0, 0xc420a34564)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:413 +0x2e7\r\ncmd/compile/internal/gc.dtypesym(0xc4203f3ea0, 0xc420cd4fe0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1207 +0x1303\r\ncmd/compile/internal/gc.dtypesym(0xc420cd1cc0, 0xc420768538)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1174 +0x287\r\ncmd/compile/internal/gc.dtypesym(0xc4203c8b40, 0xc420b029a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1210 +0x1344\r\ncmd/compile/internal/gc.dumptypestructs()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1369 +0xcc\r\ncmd/compile/internal/gc.dumpobj1(0x7fff5fbff015, 0x48, 0x3)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/obj.go:133 +0x55f\r\ncmd/compile/internal/gc.dumpobj()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/obj.go:45 +0x52\r\ncmd/compile/internal/gc.Main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/main.go:490 +0x1aa6\r\ncmd/compile/internal/amd64.Main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/amd64/galign.go:93 +0x2fa\r\nmain.main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/main.go:33 +0x2a3\r\n\r\n\r\n\r\ngoroutine 1 [running]:\r\nruntime/debug.Stack(0x0, 0x0, 0x0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/runtime/debug/stack.go:24 +0x79\r\ncmd/compile/internal/gc.Fatalf(0x50a8b2, 0x2c, 0xc420728e40, 0x4, 0x4)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/subr.go:165 +0x15d\r\ncmd/compile/internal/gc.(*ssaExport).Fatalf(0x760786, 0xc4b, 0x50a8b2, 0x2c, 0xc420728e40, 0x4, 0x4)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/ssa.go:4437 +0x74\r\ncmd/compile/internal/ssa.(*Config).Fatalf(0xc420984000, 0xc400000c4b, 0x50a8b2, 0x2c, 0xc420728e40, 0x4, 0x4)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/config.go:200 +0x6e\r\ncmd/compile/internal/ssa.(*Func).Fatalf(0xc420c004b0, 0x50a8b2, 0x2c, 0xc420728e40, 0x4, 0x4)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/func.go:397 +0x6b\r\ncmd/compile/internal/ssa.Compile.func1(0xc421043e00, 0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/compile.go:37 +0x25b\r\npanic(0x4b7320, 0xc420012180)\r\n\t/Users/felix/.gvm/gos/go1.7/src/runtime/panic.go:458 +0x243\r\ncmd/compile/internal/ssa.ValHeap.Less(0xc42108c000, 0x3, 0x4, 0xc4209378f0, 0x2a, 0x2a, 0xc4209378bf, 0x621049bc5f, 0x2a)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/schedule.go:40 +0xd2\r\ncmd/compile/internal/ssa.(*ValHeap).Less(0xc4209378c0, 0xc4209378bf, 0x621049bc5f, 0x2a)\r\n\t\u003cautogenerated\u003e:172 +0x77\r\ncontainer/heap.up(0x6d02e0, 0xc4209378c0, 0xc4209378bf)\r\n\t/Users/felix/.gvm/gos/go1.7/src/container/heap/heap.go:93 +0x64\r\ncontainer/heap.Push(0x6d02e0, 0xc4209378c0, 0x4e2a80, 0xc420985128)\r\n\t/Users/felix/.gvm/gos/go1.7/src/container/heap/heap.go:54 +0x7e\r\ncmd/compile/internal/ssa.schedule(0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/schedule.go:219 +0x77f\r\ncmd/compile/internal/ssa.Compile(0xc420c004b0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/ssa/compile.go:64 +0x321\r\ncmd/compile/internal/gc.buildssa(0xc42072e5a0, 0x0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/ssa.go:232 +0xc5f\r\ncmd/compile/internal/gc.compile(0xc42072e5a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/pgen.go:405 +0x1377\r\ncmd/compile/internal/gc.funccompile(0xc42072e5a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/dcl.go:1287 +0x186\r\ncmd/compile/internal/gc.genwrapper(0xc4203f3ea0, 0xc4207e3700, 0xc42072c310, 0x0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/subr.go:1916 +0xa62\r\ncmd/compile/internal/gc.imethods(0xc4203f3ea0, 0xc420a34460, 0x0, 0xc420a34564)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:413 +0x2e7\r\ncmd/compile/internal/gc.dtypesym(0xc4203f3ea0, 0xc420cd4fe0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1207 +0x1303\r\ncmd/compile/internal/gc.dtypesym(0xc420cd1cc0, 0xc420768538)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1174 +0x287\r\ncmd/compile/internal/gc.dtypesym(0xc4203c8b40, 0xc420b029a0)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1210 +0x1344\r\ncmd/compile/internal/gc.dumptypestructs()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/reflect.go:1369 +0xcc\r\ncmd/compile/internal/gc.dumpobj1(0x7fff5fbff015, 0x48, 0x3)\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/obj.go:133 +0x55f\r\ncmd/compile/internal/gc.dumpobj()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/obj.go:45 +0x52\r\ncmd/compile/internal/gc.Main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/gc/main.go:490 +0x1aa6\r\ncmd/compile/internal/amd64.Main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/internal/amd64/galign.go:93 +0x2fa\r\nmain.main()\r\n\t/Users/felix/.gvm/gos/go1.7/src/cmd/compile/main.go:33 +0x2a3\r\n```\r\n\r\n\u003e Is it possible to build the compiler with -race ? That might show some interesting output.\r\n\r\nNot sure, I tried passing the `-race` flag to `go build`, but that didn't seem to have the desired effect.",
	"user": {
		"login": "felixge",
		"id": 15000,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-08-16T23:39:30Z",
	"updated_at": "2016-08-16T23:39:30Z"
}
