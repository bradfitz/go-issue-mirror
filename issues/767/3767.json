{
	"id": 51281124,
	"number": 3767,
	"state": "closed",
	"title": "syscall: large writes to console fail on Windows",
	"body": "\u003cpre\u003eThis are the steps to reproduce my problem:\n\nC:\\\u0026gt;set GOPATH=C:\\a\\code\n\nC:\\\u0026gt;go get -v -d launchpad.net\\goyaml\nlaunchpad.net/goyaml (download)\n\nC:\\\u0026gt;cd %GOPATH%\\src\\launchpad.net\\goyaml\n\nC:\\a\\code\\src\\launchpad.net\\goyaml\u0026gt;\n\n... make small change to decode.go ...\n\nC:\\a\\code\\src\\launchpad.net\\goyaml\u0026gt;bzr diff\n=== modified file 'decode.go'\n--- decode.go   2012-03-08 21:50:15 +0000\n+++ decode.go   2012-06-22 02:26:31 +0000\n@@ -1,6 +1,6 @@\n package goyaml\n\n-// #cgo LDFLAGS: -lm -lpthread\n+// #cgo LDFLAGS: -lm\n // #cgo CFLAGS: -I. -DHAVE_CONFIG_H=1\n //\n // #include \u0026quot;helpers.h\u0026quot;\n\n\nC:\\a\\code\\src\\launchpad.net\\goyaml\u0026gt;go install -v\nlaunchpad.net/goyaml\n# launchpad.net/goyaml\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_alias':\ndecode.go:34:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_mapping_start':\ndecode.go:44:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_scalar':\ndecode.go:54:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_sequence_start':\ndecode.go:64:7: warning: assignment from incompatible pointer type\n\nC:\\a\\code\\src\\launchpad.net\\goyaml\u0026gt;go install -x\nWORK=C:\\DOCUME~1\\brainman\\LOCALS~1\\Temp\\go-build480094247\nmkdir -p $WORK\\launchpad.net\\goyaml\\_obj\\\ncd C:\\a\\code\\src\\launchpad.net\\goyaml\nc:\\mingw\\go\\pkg\\tool\\windows_386\\cgo.exe -objdir $WORK\\launchpad.net\\goyaml\\_obj\\ -- -I.\n-DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\ decode.go encode.go\nc:\\mingw\\go\\pkg\\tool\\windows_386\\8c.exe -FVw -I $WORK\\launchpad.net\\goyaml\\_obj\\ -I\nc:\\mingw\\go\\pkg\\windows_386 -o $WORK\\launchpad.net\\goyaml\\_obj\\_cgo_defun.8\n-DGOOS_windows -DGOARCH_386 $WORK\\launchpad.net\\goyaml\\_obj\\_cgo_defun.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\_cgo_main.o -c\n$WORK\\launchpad.net\\goyaml\\_obj\\_cgo_main.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\_cgo_export.o -c\n$WORK\\launchpad.net\\goyaml\\_obj\\_cgo_export.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\decode.cgo2.o -c\n$WORK\\launchpad.net\\goyaml\\_obj\\decode.cgo2.c\n# launchpad.net/goyaml\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_alias':\ndecode.go:34:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_mapping_start':\ndecode.go:44:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_scalar':\ndecode.go:54:7: warning: assignment from incompatible pointer type\ndecode.go: In function '_cgo_e6ee69cb7fed_Cfunc_event_sequence_start':\ndecode.go:64:7: warning: assignment from incompatible pointer type\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\encode.cgo2.o -c\n$WORK\\launchpad.net\\goyaml\\_obj\\encode.cgo2.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\api.o -c .\\api.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\emitter.o -c .\\emitter.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\helpers.o -c .\\helpers.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\loader.o -c .\\loader.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\parser.o -c .\\parser.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\reader.o -c .\\reader.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\scanner.o -c .\\scanner.c\ngcc -I . -g -O2 -m32 -mthreads -I. -DHAVE_CONFIG_H=1 -I $WORK\\launchpad.net\\goyaml\\_obj\\\n-o $WORK\\launchpad.net\\goyaml\\_obj\\writer.o -c .\\writer.c\ngcc -I . -g -O2 -m32 -mthreads -o $WORK\\launchpad.net\\goyaml\\_obj\\_cgo_.o\n$WORK\\launchpad.net\\goyaml\\_obj\\_cgo_main.o\n$WORK\\launchpad.net\\goyaml\\_obj\\_cgo_export.o\n$WORK\\launchpad.net\\goyaml\\_obj\\decode.cgo2.o\n$WORK\\launchpad.net\\goyaml\\_obj\\encode.cgo2.o $WORK\\launchpad.net\\goyaml\\_obj\\api.o\n$WORK\\launchpad.net\\goyaml\\_obj\\emitter.o $WORK\\launchpad.net\\goyaml\\_obj\\helpers.o\n$WORK\\launchpad.net\\goyaml\\_obj\\loader.o $WORK\\launchpad.net\\goyaml\\_obj\\parser.o\n$WORK\\launchpad.net\\goyaml\\_obj\\reader.o $WORK\\launchpad.net\\goyaml\\_obj\\scanner.o\n$WORK\\launchpad.net\\goyaml\\_obj\\writer.o -lm\n\nC:\\a\\code\\src\\launchpad.net\\goyaml\u0026gt;\n\nLast gcc link step fails, but it prints no error messages. There are a lot of these\nerror messages and they all written to stdout by Go together in one write. This write\nseems to fail.\n\nWe had this problem reported before: \u003ca href=\"https://golang.org/issue/3376\"\u003ehttps://golang.org/issue/3376\u003c/a\u003e.\nBut Russ hijacked conversation there into something else :-)\n\nI propose we make change in os package. I will find a buffer size that is big enough and\nworks, and we will change stdout and stderr os.write to do multiple writes if buffer is\nbigger then predefined.\n\nAlex\u003c/pre\u003e",
	"user": {
		"login": "alexbrainman",
		"id": 9796621,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 6,
	"closed_at": "2014-12-08T10:19:55Z",
	"created_at": "2012-06-22T03:00:28Z",
	"updated_at": "2016-06-24T22:20:47Z",
	"milestone": {
		"id": 1067199,
		"number": 11,
		"title": "Go1.1"
	}
}
