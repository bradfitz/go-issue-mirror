{
	"id": 51278071,
	"number": 1620,
	"state": "closed",
	"title": "GC crash on 386",
	"body": "\u003cpre\u003eGOARCH=386\n\n$ hg identify\nb950f00ad6f1 tip\n\nchangeset:   7774:b950f00ad6f1\ntag:         tip\nuser:        Russ Cox \u0026lt;rsc@golang.org\u0026gt;\ndate:        Tue Mar 15 22:33:57 2011 -0400\nsummary:     gofix: procattr\n\n\nunexpected fault address 0xb8002000\nthrow: fault\n\n[signal 0xb code=0x1 addr=0xb8002000 pc=0x80525c0]\n\nruntime.throw+0x43 /home/bradfitz/go/src/pkg/runtime/runtime.c:102\n        runtime.throw(0x829d90e, 0xb8002000)\nruntime.sigpanic+0xc7 /home/bradfitz/go/src/pkg/runtime/linux/thread.c:294\n        runtime.sigpanic()\nscanblock+0xe2 /home/bradfitz/go/src/pkg/runtime/mgc0.c:119\n        scanblock(0xb7f8b0ec, 0xffffffbc, 0xffffffff)\nscanstack+0x5c /home/bradfitz/go/src/pkg/runtime/mgc0.c:337\n        scanstack(0x186b5cc0, 0x0)\nmark+0x10a /home/bradfitz/go/src/pkg/runtime/mgc0.c:386\n        mark()\nruntime.gc+0x1db /home/bradfitz/go/src/pkg/runtime/mgc0.c:569\n        runtime.gc(0x1, 0x186eac50)\nrunfinq+0xea /home/bradfitz/go/src/pkg/runtime/mgc0.c:653\n        runfinq()\nruntime.goexit /home/bradfitz/go/src/pkg/runtime/proc.c:180\n        runtime.goexit()\n----- goroutine created by -----\nruntime.gc /home/bradfitz/go/src/pkg/runtime/mgc0.c:515\n\ngoroutine 77 [4]:\nruntime.gosched+0x6d /home/bradfitz/go/src/pkg/runtime/proc.c:594\n        runtime.gosched()\nruntime.chanrecv+0x147 /home/bradfitz/go/src/pkg/runtime/chan.c:359\n        runtime.chanrecv(0x19be8900, 0xb7f8639c, 0x0, 0x0, 0x400, ...)\nruntime.chanrecv1+0x3f /home/bradfitz/go/src/pkg/runtime/chan.c:421\n        runtime.chanrecv1(0x19be8900, 0x19eee580)\nnet.*pollServer·WaitRead+0x50 /home/bradfitz/go/src/pkg/net/fd.go:252\n       net.*pollServer·WaitRead(0x186ec800, 0x19eee580, 0x400)\nnet.*netFD·Read+0x1c1 /home/bradfitz/go/src/pkg/net/fd.go:359\n       net.*netFD·Read(0x19eee580, 0x187bf400, 0x400, 0x400, 0x0, ...)\nnet.*TCPConn·Read+0x6f /home/bradfitz/go/src/pkg/net/tcpsock.go:94\n       net.*TCPConn·Read(0x18740188, 0x187bf400, 0x400, 0x400, 0x64, ...)\ncrypto/tls.*block·readFromUntil+0xc5 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:368\n       crypto/tls.*block·readFromUntil(0x18838d40, 0x186ecb80, 0x18740188, 0x5, 0x18740188, ...)\ncrypto/tls.*Conn·readRecord+0xf0 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:448\n       crypto/tls.*Conn·readRecord(0x1921c140, 0x17, 0x0, 0x6000008)\ncrypto/tls.*Conn·Read+0xca /home/bradfitz/go/src/pkg/crypto/tls/conn.go:712\n       crypto/tls.*Conn·Read(0x1921c140, 0x19209000, 0x1000, 0x1000, 0x0, ...)\nbufio.*Reader·fill+0x152 /home/bradfitz/go/src/pkg/bufio/bufio.go:97\n       bufio.*Reader·fill(0x19be6720, 0x0)\nbufio.*Reader·ReadSlice+0x25a /home/bradfitz/go/src/pkg/bufio/bufio.go:267\n       bufio.*Reader·ReadSlice(0x19be6720, 0x186b2a0a, 0x0, 0x0, 0x0, ...)\nbufio.*Reader·ReadBytes+0x86 /home/bradfitz/go/src/pkg/bufio/bufio.go:300\n       bufio.*Reader·ReadBytes(0x19be6720, 0x82ad40a, 0x0, 0x0, 0x0, ...)\nnet/textproto.*Reader·ReadLineBytes+0x3c\n/home/bradfitz/go/src/pkg/net/textproto/reader.go:43\n       net/textproto.*Reader·ReadLineBytes(0x186b2bf0, 0x80, 0x0)\nnet/textproto.*Reader·ReadLine+0x29 /home/bradfitz/go/src/pkg/net/textproto/reader.go:36\n       net/textproto.*Reader·ReadLine(0x186b2bf0, 0x189e2200, 0x0)\nhttp.ReadRequest+0x7f /home/bradfitz/go/src/pkg/http/request.go:431\n        http.ReadRequest(0x19be6720, 0x189e2200, 0x0, 0x0)\nhttp.*conn·readRequest+0x6e /home/bradfitz/go/src/pkg/http/server.go:171\n        http.*conn·readRequest(0x19be66f0, 0x188897e0, 0x0, 0x0)\nhttp.*conn·serve+0x29 /home/bradfitz/go/src/pkg/http/server.go:447\n        http.*conn·serve(0x19be66f0, 0x8055d3f)\nruntime.goexit /home/bradfitz/go/src/pkg/runtime/proc.c:180\n        runtime.goexit()\n\n----- goroutine created by -----\nhttp.*Server·Serve+0x1cf /home/bradfitz/go/src/pkg/http/server.go:777\n\ngoroutine 81 [3]:\nruntime.entersyscall+0x18 /home/bradfitz/go/src/pkg/runtime/proc.c:614\n        runtime.entersyscall() \nsyscall.Syscall+0x5 /home/bradfitz/go/src/pkg/syscall/asm_linux_386.s:21\n        syscall.Syscall()\nsyscall.Write+0x5c /home/bradfitz/go/src/pkg/syscall/zsyscall_linux_386.go:734\n        syscall.Write(0x5, 0x829ef10, 0x1, 0x1, 0x86aff48, ...)\nos.*File·Write+0x7a /home/bradfitz/go/src/pkg/os/file.go:126\n        os.*File·Write(0x186ec840, 0x829ef10, 0x1, 0x1, 0x0, ...)\nnet.*pollServer·Wakeup+0x8a /home/bradfitz/go/src/pkg/net/fd.go:247\n        net.*pollServer·Wakeup(0x186ec800, 0x18d82f80)\nnet.*pollServer·WaitRead+0x3f /home/bradfitz/go/src/pkg/net/fd.go:251\n        net.*pollServer·WaitRead(0x186ec800, 0x18d82f80, 0x400)\nnet.*netFD·Read+0x1c1 /home/bradfitz/go/src/pkg/net/fd.go:359\n        net.*netFD·Read(0x18d82f80, 0x18a37000, 0x400, 0x400, 0x0, ...)\nnet.*TCPConn·Read+0x6f /home/bradfitz/go/src/pkg/net/tcpsock.go:94\n        net.*TCPConn·Read(0x187400b0, 0x18a37000, 0x400, 0x400, 0x189060f0, ...)\ncrypto/tls.*block·readFromUntil+0xc5 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:368\n        crypto/tls.*block·readFromUntil(0x187a4f40, 0x186ecb80, 0x187400b0, 0x5, 0x187400b0, ...)\ncrypto/tls.*Conn·readRecord+0xf0 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:448\n        crypto/tls.*Conn·readRecord(0x1921c000, 0x813a914, 0x18906300, 0x1898a960)\ncrypto/tls.*Conn·serverHandshake+0x1aec\n/home/bradfitz/go/src/pkg/crypto/tls/handshake_server.go:239\n        crypto/tls.*Conn·serverHandshake(0x1921c000, 0x0, 0x0)\n----- stack segment boundary -----\nsyscall.Syscall+0x53 /home/bradfitz/go/src/pkg/syscall/asm_linux_386.s:33\n        syscall.Syscall()\nsyscall.Write+0x5c /home/bradfitz/go/src/pkg/syscall/zsyscall_linux_386.go:734\n        syscall.Write(0x5, 0x829ef10, 0x1, 0x1, 0x86aff48, ...)\nos.*File·Write+0x7a /home/bradfitz/go/src/pkg/os/file.go:126\n        os.*File·Write(0x186ec840, 0x829ef10, 0x1, 0x1, 0x0, ...)\nnet.*pollServer·Wakeup+0x8a /home/bradfitz/go/src/pkg/net/fd.go:247\n        net.*pollServer·Wakeup(0x186ec800, 0x18d82f80)\nnet.*pollServer·WaitRead+0x3f /home/bradfitz/go/src/pkg/net/fd.go:251\n        net.*pollServer·WaitRead(0x186ec800, 0x18d82f80, 0x400)\nnet.*netFD·Read+0x1c1 /home/bradfitz/go/src/pkg/net/fd.go:359\n        net.*netFD·Read(0x18d82f80, 0x18a37000, 0x400, 0x400, 0x0, ...)\nnet.*TCPConn·Read+0x6f /home/bradfitz/go/src/pkg/net/tcpsock.go:94\n        net.*TCPConn·Read(0x187400b0, 0x18a37000, 0x400, 0x400, 0x189060f0, ...)\ncrypto/tls.*block·readFromUntil+0xc5 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:368\n        crypto/tls.*block·readFromUntil(0x187a4f40, 0x186ecb80, 0x187400b0, 0x5, 0x187400b0, ...)\ncrypto/tls.*Conn·readRecord+0xf0 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:448\n        crypto/tls.*Conn·readRecord(0x1921c000, 0x813a914, 0x18906300, 0x1898a960)\ncrypto/tls.*Conn·serverHandshake+0x1aec\n/home/bradfitz/go/src/pkg/crypto/tls/handshake_server.go:239\n        crypto/tls.*Conn·serverHandshake(0x1921c000, 0x0, 0x0)\n----- stack segment boundary -----\ncrypto/tls.*Conn·Handshake+0xcd /home/bradfitz/go/src/pkg/crypto/tls/conn.go:752\n        crypto/tls.*Conn·Handshake(0x1921c000, 0x0, 0x0)\ncrypto/tls.*Conn·Read+0x43 /home/bradfitz/go/src/pkg/crypto/tls/conn.go:704\n        crypto/tls.*Conn·Read(0x1921c000, 0x18a35000, 0x1000, 0x1000, 0x0, ...)\nbufio.*Reader·fill+0x152 /home/bradfitz/go/src/pkg/bufio/bufio.go:97\n        bufio.*Reader·fill(0x19ec13c0, 0x0)\nbufio.*Reader·ReadSlice+0x25a /home/bradfitz/go/src/pkg/bufio/bufio.go:267\n        bufio.*Reader·ReadSlice(0x19ec13c0, 0xa, 0x0, 0x0, 0x0, ...)\nbufio.*Reader·ReadBytes+0x86 /home/bradfitz/go/src/pkg/bufio/bufio.go:300\n        bufio.*Reader·ReadBytes(0x19ec13c0, 0x86afd0a, 0x0, 0x0, 0x0, ...)\nnet/textproto.*Reader·ReadLineBytes+0x3c\n/home/bradfitz/go/src/pkg/net/textproto/reader.go:43\n        net/textproto.*Reader·ReadLineBytes(0x18740e50, 0x80, 0x0)\n\nnet/textproto.*Reader·ReadLine+0x29 /home/bradfitz/go/src/pkg/net/textproto/reader.go:36\n        net/textproto.*Reader·ReadLine(0x18740e50, 0x18c18300, 0x186ce4c0)\nhttp.ReadRequest+0x7f /home/bradfitz/go/src/pkg/http/request.go:431\n        http.ReadRequest(0x19ec13c0, 0x18c18300, 0x0, 0x0)\nhttp.*conn·readRequest+0x6e /home/bradfitz/go/src/pkg/http/server.go:171\n        http.*conn·readRequest(0x19ec1390, 0x0, 0x0, 0x0)\nhttp.*conn·serve+0x29 /home/bradfitz/go/src/pkg/http/server.go:447\n        http.*conn·serve(0x19ec1390, 0x187620d0)\nruntime.goexit /home/bradfitz/go/src/pkg/runtime/proc.c:180\n        runtime.goexit()\n----- goroutine created by -----\nhttp.*Server·Serve+0x1cf /home/bradfitz/go/src/pkg/http/server.go:777\n\ngoroutine 2 [1]:\nruntime.gosched+0x6d /home/bradfitz/go/src/pkg/runtime/proc.c:594\n        runtime.gosched()\nruntime.exitsyscall+0x6e /home/bradfitz/go/src/pkg/runtime/proc.c:659\n        runtime.exitsyscall()  \nsyscall.Syscall6+0x57 /home/bradfitz/go/src/pkg/syscall/asm_linux_386.s:60\n        syscall.Syscall6()\nsyscall.EpollWait+0x74 /home/bradfitz/go/src/pkg/syscall/zsyscall_linux_386.go:200\n        syscall.EpollWait(0x6, 0x1879ca20, 0x1, 0x1, 0xffffffff, ...)\nnet.*pollster·WaitFD+0x134 /home/bradfitz/go/src/pkg/net/fd_linux.go:116\n        net.*pollster·WaitFD(0x186b25b0, 0x0, 0x0, 0x18d82f80, 0x72, ...)\nnet.*pollServer·Run+0xc8 /home/bradfitz/go/src/pkg/net/fd.go:207\n        net.*pollServer·Run(0x186ec800, 0x0)\nruntime.goexit /home/bradfitz/go/src/pkg/runtime/proc.c:180\n        runtime.goexit()\n----- goroutine created by -----\nnet.newPollServer+0x346 /home/bradfitz/go/src/pkg/net/newpollserver.go:39\n\n\ngoroutine 1 [4]:\nruntime.gosched+0x6d /home/bradfitz/go/src/pkg/runtime/proc.c:594\n        runtime.gosched()\nruntime.chanrecv+0x147 /home/bradfitz/go/src/pkg/runtime/chan.c:359\n        runtime.chanrecv(0x186ccd80, 0xb7f8386c, 0x0, 0x0, 0x82a081c, ...)\nruntime.chanrecv1+0x3f /home/bradfitz/go/src/pkg/runtime/chan.c:421\n        runtime.chanrecv1(0x186ccd80, 0x186e7300)\nnet.*pollServer·WaitRead+0x50 /home/bradfitz/go/src/pkg/net/fd.go:252\n        net.*pollServer·WaitRead(0x186ec800, 0x186e7300, 0x0)\nnet.*netFD·accept+0x2fe /home/bradfitz/go/src/pkg/net/fd.go:584\n        net.*netFD·accept(0x186e7300, 0x80d3b33, 0x0, 0x0, 0x0, ...)\nnet.*TCPListener·AcceptTCP+0x56 /home/bradfitz/go/src/pkg/net/tcpsock.go:261\n        net.*TCPListener·AcceptTCP(0x186b2900, 0x1, 0x0, 0x0)\nnet.*TCPListener·Accept+0x39 /home/bradfitz/go/src/pkg/net/tcpsock.go:271\n        net.*TCPListener·Accept(0x186b2900, 0x0, 0x0, 0x0, 0x0, ...)\ncrypto/tls.*Listener·Accept+0x49 /home/bradfitz/go/src/pkg/crypto/tls/tls.go:44\n        crypto/tls.*Listener·Accept(0x187620d0, 0x0, 0x0, 0x0, 0x0, ...)\nhttp.*Server·Serve+0xb5 /home/bradfitz/go/src/pkg/http/server.go:763\n        http.*Server·Serve(0x186ec980, 0x186ec900, 0x187620d0, 0x0, 0x0, ...)\nhttp.Serve+0x57 /home/bradfitz/go/src/pkg/http/server.go:727\n        http.Serve(0x186ec900, 0x187620d0, 0x186ec920, 0x186ebf80, 0x186ebf80, ...)\ncamli/webserver.*Server·Serve+0x41f\n/home/bradfitz/hack/camlistore/server/go/webserver/webserver.go:117\n        camli/webserver.*Server·Serve(0x186ebf80, 0x8192e1c)\nmain.main+0x412 /home/bradfitz/hack/camlistore/server/go/blobserver/camlistored.go:279\n        main.main()\nruntime.mainstart+0xf /home/bradfitz/go/src/pkg/runtime/386/asm.s:93\n        runtime.mainstart()\nruntime.goexit /home/bradfitz/go/src/pkg/runtime/proc.c:180\n        runtime.goexit()\n----- goroutine created by -----\n_rt0_386+0xc1 /home/bradfitz/go/src/pkg/runtime/386/asm.s:80\u003c/pre\u003e",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "rsc",
		"id": 104030,
		"type": "User",
		"site_admin": false
	},
	"comments": 8,
	"closed_at": "2014-12-08T10:09:08Z",
	"created_at": "2011-03-18T06:22:22Z",
	"updated_at": "2016-06-24T19:26:39Z"
}
