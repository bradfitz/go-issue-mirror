{
	"id": 85318069,
	"body": "I just saw that i also failed on a previous commit on the nacl-amd64p32\nbuilder:\n\nhttp://build.golang.org/log/6bc2419376e65f381076f15802ca1fe10e9098d4\n(it was on commit 08af4c3a798054ec22a6fdac3af2213d6a34d7eb, but that is\nprobably irrelevant for this issue.)\n\nIt has a better stack trace with no elided frames, but it might be caused by\na separate issue:\nfatal error: writebarrierptr_nostore1 called with mp.p == nil\n\nruntime stack:\nruntime.throw(0x28e428, 0x30)\n/tmp/buildlet-scatch909750053/go/src/runtime/panic.go:543 +0x120\nruntime.writebarrierptr_nostore1.func1()\n/tmp/buildlet-scatch909750053/go/src/runtime/mbarrier.go:108 +0x160\nruntime.systemstack(0x109a5e80)\n/tmp/buildlet-scatch909750053/go/src/runtime/asm_amd64p32.s:231 +0x100\nruntime.writebarrierptr_nostore1(0x1091ea34, 0x109ba280)\n/tmp/buildlet-scatch909750053/go/src/runtime/mbarrier.go:112 +0x80\nruntime.writebarrierptr(0x1091ea34, 0x109ba280)\n/tmp/buildlet-scatch909750053/go/src/runtime/mbarrier.go:135 +0xc0\nruntime.newosproc(0x1091ea00, 0x1098c000)\n/tmp/buildlet-scatch909750053/go/src/runtime/os1_nacl.go:75 +0x60\nruntime.newm(0x0, 0x10913400)\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:995 +0x1a0\nruntime.startm(0x10913400, 0x10913d00)\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1058 +0x180\nruntime.handoffp(0x10913400, 0x1)\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1077 +0x2e0\nruntime.stoplockedm()\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1133 +0xe0\nruntime.schedule()\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1417 +0xc0\nruntime.goschedImpl(0x109ba000, 0x8b9)\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1530 +0x180\nruntime.gosched_m(0x109ba000, 0x0)\n/tmp/buildlet-scatch909750053/go/src/runtime/proc1.go:1538 +0x60\nruntime.mcall(0x0)\n/tmp/buildlet-scatch909750053/go/src/runtime/asm_amd64p32.s:162 +0x80\n\ngoroutine 33 [runnable, locked to thread]:\nruntime.Gosched()\n/tmp/buildlet-scatch909750053/go/src/runtime/proc.go:135 +0x20\nfp=0x109c2fb8 sp=0x109c2fa8\nruntime/pprof_test.TestTraceStress.func4(0x1099c580, 0x0)\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:136 +0xa0\nfp=0x109c2fd8 sp=0x109c2fb8\nruntime.goexit()\n/tmp/buildlet-scatch909750053/go/src/runtime/asm_amd64p32.s:1086 +0x1\nfp=0x109c2fe0 sp=0x109c2fd8\ncreated by runtime/pprof_test.TestTraceStress\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:139 +0x4e0\n\ngoroutine 1 [chan receive]:\ntesting.RunTests(0x2a9a24, 0x6b1460, 0x8, 0x8, 0x1, 0x0)\n/tmp/buildlet-scatch909750053/go/src/testing/testing.go:561 +0xba0\ntesting.(*M).Run(0x1093a120, 0x6cb700, 0x0, 0x0)\n/tmp/buildlet-scatch909750053/go/src/testing/testing.go:490 +0x100\nmain.main()\n/tmp/go-build587579621/runtime/pprof/_test/_testmain.go:70 +0x200\n\ngoroutine 15 [runnable]:\nruntime/pprof_test.TestTraceStress(0x10958900, 0x0)\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:144 +0x540\ntesting.tRunner(0x10958900, 0x6b149c)\n/tmp/buildlet-scatch909750053/go/src/testing/testing.go:452 +0x120\ncreated by testing.RunTests\n/tmp/buildlet-scatch909750053/go/src/testing/testing.go:560 +0xb60\n\ngoroutine 16 [chan receive]:\nruntime/pprof_test.TestTraceStress.func1(0x1099c580, 0x1090bbc0)\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:99 +0x60\ncreated by runtime/pprof_test.TestTraceStress\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:101 +0xe0\n\ngoroutine 17 [semacquire]:\nsync.runtime_Syncsemacquire(0x10958970, 0x1)\n/tmp/buildlet-scatch909750053/go/src/runtime/sema.go:237 +0x320\nsync.(*Cond).Wait(0x10958968, 0x10958960)\n/tmp/buildlet-scatch909750053/go/src/sync/cond.go:62 +0x100\nsyscall.(*queue).waitRead(0x10958960, 0x1, 0x0, 0x0, 0x6b65e0, 0x0, 0x0,\n0x8b9)\n/tmp/buildlet-scatch909750053/go/src/syscall/net_nacl.go:263 +0x180\nsyscall.(*byteq).read(0x10958960, 0x109a8a20, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0,\n0x0, 0x0)\n/tmp/buildlet-scatch909750053/go/src/syscall/net_nacl.go:328 +0xe0\nsyscall.(*pipeFile).read(0x1091c4e8, 0x109a8a20, 0x1, 0x1, 0x0, 0x0, 0x0,\n0x0)\n/tmp/buildlet-scatch909750053/go/src/syscall/fd_nacl.go:303 +0x100\nsyscall.Read(0x3, 0x109a8a20, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\n/tmp/buildlet-scatch909750053/go/src/syscall/fd_nacl.go:162 +0xe0\nos.(*File).read(0x1091c4f8, 0x109a8a20, 0x1, 0x1, 0x32460, 0x0, 0x0,\n0x1fc260)\n/tmp/buildlet-scatch909750053/go/src/os/file_unix.go:203 +0x80\nos.(*File).Read(0x1091c4f8, 0x109a8a20, 0x1, 0x1, 0x0, 0x0, 0x0, 0x0)\n/tmp/buildlet-scatch909750053/go/src/os/file.go:95 +0xa0\nruntime/pprof_test.TestTraceStress.func3(0x1091c4f8, 0x1099c580,\n0x1090bbc0, 0x0)\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:115 +0x80\ncreated by runtime/pprof_test.TestTraceStress\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/trace_test.go:118 +0x2e0\n\ngoroutine 18 [trace reader (blocked)]:\nruntime.ReadTrace(0x0, 0x0, 0x0, 0x8)\n/tmp/buildlet-scatch909750053/go/src/runtime/trace.go:313 +0x320\nruntime/pprof.StartTrace.func1(0xfeed09a8, 0x109589c0)\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/pprof.go:629 +0x40\ncreated by runtime/pprof.StartTrace\n/tmp/buildlet-scatch909750053/go/src/runtime/pprof/pprof.go:635 +0xa0\nFAIL runtime/pprof 0.258s\n\n\nIt seems nacl's newosproc should be labeled nowritebarrier?\n",
	"user": {
		"login": "minux",
		"id": 135652,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-03-24T02:58:16Z",
	"updated_at": "2015-03-24T02:58:16Z"
}
