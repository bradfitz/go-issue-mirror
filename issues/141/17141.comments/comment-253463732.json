{
	"id": 253463732,
	"body": "I didn't find that the workaround above worked for me.\r\nWhat *did* work for me was putting the dynamically loaded\r\ncode into a package inside $GOPATH rather than explicitly\r\npassing a Go source file to go build.\r\n\r\nFor me, the unexpected thing here is that the file name of the dynamically loaded module is important.\r\nFor example, if I put my dynamic module into package \"foo\", then build it, creating\r\n\"foo.so\", and load it with plugin.Load(\"foo.so\"), it works. However if I rename\r\n\"foo.so\" to \"bar.so\", the load no longer works.\r\n\r\nThe plugin documentation seems to indicate that the path name is not important,\r\nbut it is. In fact, it doesn't seem to be possible to load two dynamically loaded\r\nmodules that have the same package name. When I tried it with two\r\npackages (with different package paths) but the same name, I got this panic:\r\n\r\n\truntime: impossible type kind 0\r\n\tfatal error: runtime: impossible type kind\r\n\t\r\n\tgoroutine 1 [running]:\r\n\truntime.throw(0x54ab9e, 0x1d)\r\n\t\t/home/rog/go/src/runtime/panic.go:587 +0x95 fp=0xc420051710 sp=0xc4200516f0\r\n\truntime.typesEqual(0x7f2fd74ac1c0, 0x7f2fd77af1e0, 0x7f2fd77af1e0)\r\n\t\t/home/rog/go/src/runtime/type.go:651 +0x91d fp=0xc420051828 sp=0xc420051710\r\n\truntime.typesEqual(0x7f2fd74ae280, 0x7f2fd77b1280, 0xc40e105ecb)\r\n\t\t/home/rog/go/src/runtime/type.go:606 +0x734 fp=0xc420051940 sp=0xc420051828\r\n\truntime.typelinksinit()\r\n\t\t/home/rog/go/src/runtime/type.go:504 +0x3bd fp=0xc420051b30 sp=0xc420051940\r\n\tplugin.lastmoduleinit(0x54c8fb)\r\n\t\t/home/rog/go/src/runtime/plugin.go:39 +0x16a fp=0xc420051bf0 sp=0xc420051b30\r\n\tplugin.open(0x54c91e, 0x3, 0x0, 0x0, 0x0)\r\n\t\t/home/rog/go/src/plugin/plugin_dlopen.go:76 +0x3b8 fp=0xc420051e28 sp=0xc420051bf0\r\n\tplugin.Open(0x54c8fb, 0x29, 0xc420051ee8, 0x1, 0x1)\r\n\t\t/home/rog/go/src/plugin/plugin.go:28 +0x35 fp=0xc420051e60 sp=0xc420051e28\r\n\tmain.test(0x54c8fb, 0x29)\r\n\t\t/home/rog/src/tstplugin.go:13 +0x4d fp=0xc420051f28 sp=0xc420051e60\r\n\tmain.main()\r\n\t\t/home/rog/src/tstplugin.go:9 +0x4f fp=0xc420051f48 sp=0xc420051f28\r\n\truntime.main()\r\n\t\t/home/rog/go/src/runtime/proc.go:185 +0x20a fp=0xc420051fa0 sp=0xc420051f48\r\n\truntime.goexit()\r\n\t\t/home/rog/go/src/runtime/asm_amd64.s:2158 +0x1 fp=0xc420051fa8 sp=0xc420051fa0\r\n\t\r\n\tgoroutine 17 [syscall, locked to thread]:\r\n\truntime.goexit()\r\n\t\t/home/rog/go/src/runtime/asm_amd64.s:2158 +0x1\r\n",
	"user": {
		"login": "rogpeppe",
		"id": 66491,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-10-13T09:33:35Z",
	"updated_at": "2016-10-13T09:33:35Z"
}
