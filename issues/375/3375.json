{
	"id": 51280498,
	"number": 3375,
	"state": "closed",
	"title": "gccgo compilation error on Solaris x86",
	"body": "\u003cpre\u003eWhat steps will reproduce the problem?\n1.get latest gccgo version \n\n\n2. run build.sh which call up gccgo-build.sh\ntjyang@oi151:~$ cat build.sh\n ./gccgo-build.sh 2\u0026gt;\u0026amp;1 | tee build.out.txt\ntjyang@oi151:~$\n\ntjyang@oi151:~$ cat gccgo-build.sh\n#!/bin/sh\n# svn co svn://gcc.gnu.org/svn/gcc/branches/gccgo gccgo-src\nsrcdir=$HOME/gccgo-src\nobjdir=$HOME/gccgo-obj\nprefix=$HOME/gccgo\n\njobs=4\n\nexport PATH=/usr/gcc/gcc4.6/bin:/usr/sfw/bin:/usr/gnu/bin:/usr/bin\nexport LD_OPTIONS='-R$ORIGIN/../lib/ -R/usr/gnu/lib -R/usr/sfw/lib'\n\nlanguages=\u0026quot;--enable-languages=c,c++,go\u0026quot;\nversion=\u0026quot;--with-pkgversion=gccgo branch, October 10, 2011\u0026quot;\noptions=\u0026quot;--with-as=/usr/sfw/bin/gas --with-gnu-as --with-ld=/usr/bin/ld\n--without-gnu-ld --with-gmp=/usr/gnu --with-mpfr=/usr/gnu\n--with-mpc=/usr/gnu --disable-nls --disable-libquadmath --disable-libssp\n--disable-lto --disable-libgomp --with-build-time-tools=/usr/sfw\u0026quot;\nmultilib=\u0026quot;--enable-multilib\u0026quot;\nshared=\u0026quot;--enable-shared\u0026quot;\nstatic=\u0026quot;--enable-static\u0026quot;\n\nif [ ! -d $objdir ]; then\n         mkdir $objdir\nfi\n\ncd $objdir\n$srcdir/configure --prefix=$prefix \u0026quot;$languages\u0026quot; $options $shared $static\n$multilib \u0026quot;$version\u0026quot; \u0026amp;\u0026amp; gmake -j$jobs \u0026amp;\u0026amp; gmake install\ntjyang@oi151:~$\n\n\n\n\n3. above build scripts were able generate gccgo with older version gccgo on gcc svn. See\n\n\u003ca href=\"https://groups.google.com/forum/?hl=en\u0026amp\"\u003ehttps://groups.google.com/forum/?hl=en\u0026amp\u003c/a\u003e;fromgroups#!searchin/golang-nuts/gccgo$20solaris/golang-nuts/DThGoCLi_cU/pT5Mua9BqIsJ\n\n\nWhat is the expected output?\ngenerate gccgo compiler like following\ntjyang@oi151:~$ ls -l gccgo/bin\ntotal 11804\n-rwxr-xr-x 4 tjyang staff 1141736 2012-03-22 15:10 c++\n-rwxr-xr-x 1 tjyang staff 1138848 2012-03-22 15:11 cpp\n-rwxr-xr-x 4 tjyang staff 1141736 2012-03-22 15:10 g++\n-rwxr-xr-x 3 tjyang staff 1136340 2012-03-22 15:11 gcc\n-rwxr-xr-x 2 tjyang staff 1142392 2012-03-22 15:10 gccgo\n-rwxr-xr-x 1 tjyang staff  249140 2012-03-22 15:11 gcov\n-rwxr-xr-x 4 tjyang staff 1141736 2012-03-22 15:10 i386-pc-solaris2.11-c++\n-rwxr-xr-x 4 tjyang staff 1141736 2012-03-22 15:10 i386-pc-solaris2.11-g++\n-rwxr-xr-x 3 tjyang staff 1136340 2012-03-22 15:11 i386-pc-solaris2.11-gcc\n-rwxr-xr-x 3 tjyang staff 1136340 2012-03-22 15:11 i386-pc-solaris2.11-gcc-4.7.0\n-rwxr-xr-x 2 tjyang staff 1142392 2012-03-22 15:10 i386-pc-solaris2.11-gccgo\ntjyang@oi151:~$\n\n\nWhat do you see instead?\n\n\u0026lt;snipped\u0026gt;\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27072: error: (near initialization for\n`bdesc_tm[19].flag')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27072: warning: missing initializer\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27072: warning: (near initialization for\n`bdesc_tm[19].flag')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27072: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27072: error: (near initialization for\n`bdesc_tm[19]')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: error: (near initialization for\n`bdesc_tm[20].flag')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: warning: missing initializer\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: warning: (near initialization for\n`bdesc_tm[20].flag')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27073: error: (near initialization for\n`bdesc_tm[20]')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27075: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27075: error: (near initialization for\n`bdesc_tm[21]')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27076: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27076: error: (near initialization for\n`bdesc_tm[22]')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27077: error: initializer element is not\nconstant\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27077: error: (near initialization for\n`bdesc_tm[23]')\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c: In function `ix86_init_mmx_sse_builtins':\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27386: error:\n`V4DF_FTYPE_V4DF_PCDOUBLE_V8SI_V4DF_INT' undeclared (first use in this function)\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27386: error: (Each undeclared identifier\nis reported only once\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27386: error: for each function it appears\nin.)\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27390: error:\n`V8SF_FTYPE_V8SF_PCFLOAT_V4DI_V8SF_INT' undeclared (first use in this function)\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27394: error:\n`V4DI_FTYPE_V4DI_PCINT64_V8SI_V4DI_INT' undeclared (first use in this function)\n/home/tjyang/gccgo-src/gcc/config/i386/i386.c:27398: error:\n`V8SI_FTYPE_V8SI_PCINT_V4DI_V8SI_INT' undeclared (first use in this function)\ngmake[3]: *** [i386.o] Error 1\ngmake[3]: *** Waiting for unfinished jobs....\nrm gcc.pod\ngmake[3]: Leaving directory `/home/tjyang/gccgo-obj/gcc'\ngmake[2]: *** [all-stage1-gcc] Error 2\ngmake[2]: Leaving directory `/home/tjyang/gccgo-obj'\ngmake[1]: *** [stage1-bubble] Error 2\ngmake[1]: Leaving directory `/home/tjyang/gccgo-obj'\ngmake: *** [all] Error 2\n\n\nWhich compiler are you using (5g, 6g, 8g, gccgo)?\n\n\ntjyang@oi151:~$ gcc -v\nUsing built-in specs.\nCOLLECT_GCC=gcc\nCOLLECT_LTO_WRAPPER=/usr/gcc/4.6/lib/gcc/i386-pc-solaris2.11/4.6.1/lto-wrapper\nTarget: i386-pc-solaris2.11\nConfigured with: ../gcc-4.6.1/configure --prefix=/usr/gcc/4.6 --libdir=/usr/gcc/4.6/lib\n--libexecdir=/usr/gcc/4.6/lib --mandir=/usr/gcc/4.6/share/man\n--infodir=/usr/gcc/4.6/info --with-build-time-tools=/usr/sfw --with-as=/usr/sfw/bin/gas\n--with-gnu-as --with-ld=/opt/dtbld/bin/ld-wrapper --without-gnu-ld\n--enable-languages=c,c++,fortran,objc --enable-shared --disable-static\n--enable-decimal-float --with-gmp=/usr/gnu --with-mpfr=/usr/gnu --with-mpc=/usr/gnu\n--with-libiconv-prefix=/usr/gnu -enable-nls\nThread model: posix\ngcc version 4.6.1 (GCC)\ntjyang@oi151:~$\n\nWhich operating system are you using?\n\n\ntjyang@oi151:~$ cat /etc/release\n                      OpenIndiana Development oi_151a X86\n        Copyright 2010 Oracle and/or its affiliates. All rights reserved.\n                        Use is subject to license terms.\n                           Assembled 01 September 2011\ntjyang@oi151:~$\nWhich revision are you using?  (hg identify)\n\n\ntjyang@oi151:~/gccgo-src$ svn info\nPath: .\nURL: svn://gcc.gnu.org/svn/gcc/branches/gccgo\nRepository Root: svn://gcc.gnu.org/svn/gcc\nRepository UUID: 138bc75d-0d04-0410-961f-82ee72b054a4\nRevision: 185714\nNode Kind: directory\nSchedule: normal\nLast Changed Author: ian\nLast Changed Rev: 185589\nLast Changed Date: 2012-03-20 19:10:59 -0500 (Tue, 20 Mar 2012)\u003c/pre\u003e",
	"user": {
		"login": "tjyang",
		"id": 378638,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 9,
	"closed_at": "2014-12-08T10:17:35Z",
	"created_at": "2012-03-22T22:40:46Z",
	"updated_at": "2016-06-24T22:16:06Z"
}
