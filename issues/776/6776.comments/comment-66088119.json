{
	"id": 66088119,
	"body": "\u003ca id=\"c13\"\u003e\u003c/a\u003eComment 13:\n\n\u003cpre\u003eContinuing the line of exploration from comments #10, #11, #12, the current goal -- in\nfixing this ever-present problem when debugging -- is to understand why the 'n' stepping\nbreakpoint is set at 400c13, and then why it is ignored upon return from\nruntime.morestack.\n\nThe gdb 7.6.2 source file gdb/infrun.c at line 146 contains a debugging flag\n(debug_infrun), which when set to 1 (and make/install gdb again), begins to reveal some\nof what gdb is thinking when it decides that, within the range of the beginning of sub()\nto the first source statement within sub(), i.e. the range 400c00 to 400c19 inclusive.\nThe infrun.c code seems to be selecting 400c13 out of the range 400c00 - 400c19:\n\n infrun: resume (step=1, signal=0), trap_expected=0, current thread [LWP 970] at 0x400c00\ninfrun: wait_for_inferior ()\ninfrun: target_wait (-1, status) =\ninfrun:   970 [LWP 970],\ninfrun:   status-\u003ekind = stopped, signal = SIGTRAP\ninfrun: infwait_normal_state\ninfrun: TARGET_WAITKIND_STOPPED\ninfrun: stop_pc = 0x400c09\ninfrun: stepping inside range [0x400c00-0x400c19]\ninfrun: resume (step=1, signal=0), trap_expected=0, current thread [LWP 970] at 0x400c09\ninfrun: prepare_to_wait\ninfrun: target_wait (-1, status) =\ninfrun:   970 [LWP 970],\ninfrun:   status-\u003ekind = stopped, signal = SIGTRAP\ninfrun: infwait_normal_state\ninfrun: TARGET_WAITKIND_STOPPED\ninfrun: stop_pc = 0x400c0c\ninfrun: stepping inside range [0x400c00-0x400c19]\ninfrun: resume (step=1, signal=0), trap_expected=0, current thread [LWP 970] at 0x400c0c\ninfrun: prepare_to_wait\ninfrun: target_wait (-1, status) =\ninfrun:   970 [LWP 970],\ninfrun:   status-\u003ekind = stopped, signal = SIGTRAP\ninfrun: infwait_normal_state\ninfrun: TARGET_WAITKIND_STOPPED\ninfrun: stop_pc = 0x400c0e\ninfrun: stepping inside range [0x400c00-0x400c19]\ninfrun: resume (step=1, signal=0), trap_expected=0, current thread [LWP 970] at 0x400c0e\ninfrun: prepare_to_wait\ninfrun: target_wait (-1, status) =\ninfrun:   970 [LWP 970],\ninfrun:   status-\u003ekind = stopped, signal = SIGTRAP\ninfrun: infwait_normal_state\ninfrun: TARGET_WAITKIND_STOPPED\ninfrun: stop_pc = 0x420c30\ninfrun: stepped into subroutine\ninfrun: inserting step-resume breakpoint at 0x400c13\n\nafter which, from additional instrumentation, we see that\nbreakpoint.c/insert_bp_location() is called with bl-\u003eaddress: 0x400c13.\n\n(full stack trace of gdb for reference; obtained by running gdb on itself, and halting\nwhen the 0x400c13 breakpoint is inserted):\n\n#0  0x000000000059b005 in target_insert_breakpoint ()\n#1  0x00000000004ef661 in bkpt_insert_location ()\n#2  0x00000000004dc82d in insert_bp_location ()\n#3  0x00000000004dd450 in insert_breakpoint_locations ()\n#4  0x00000000004dd0d4 in insert_breakpoints ()\n#5  0x0000000000555301 in proceed ()\n#6  0x000000000054e2eb in step_once ()\n#7  0x000000000054df4f in step_1 ()\n#8  0x000000000054dd13 in next_command ()\n#9  0x000000000048510b in do_cfunc ()\n#10 0x0000000000488134 in cmd_func ()\n#11 0x000000000066a72d in execute_command ()\n#12 0x0000000000577247 in command_handler ()\n#13 0x000000000057782a in command_line_handler ()\n#14 0x00000000006c31ca in rl_callback_read_char ()\n#15 0x0000000000576d7d in rl_callback_read_char_wrapper ()\n#16 0x000000000057715e in stdin_event_handler ()\n#17 0x0000000000575d02 in handle_file_event ()\n#18 0x00000000005751ab in process_event ()\n#19 0x000000000057524d in gdb_do_one_event ()\n#20 0x00000000005752c3 in start_event_loop ()\n#21 0x0000000000576da7 in cli_command_loop ()\n#22 0x000000000056d21c in current_interp_command_loop ()\n#23 0x000000000056e2d6 in captured_command_loop ()\n#24 0x000000000056bfc6 in catch_errors ()\n#25 0x000000000056f697 in captured_main ()\n#26 0x000000000056bfc6 in catch_errors ()\n#27 0x000000000056f6cd in gdb_main ()\n#28 0x000000000040735a in main ()\u003c/pre\u003e",
	"user": {
		"login": "glycerine",
		"id": 445247,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2014-01-07T21:15:13Z",
	"updated_at": "2014-12-08T10:37:39Z"
}
