{
	"id": 51286965,
	"number": 7612,
	"state": "closed",
	"title": "sync: FAIL: TestPoolGC-10 (1.06 seconds) pool_test.go:97: only 85 out of 100 resources are finalized",
	"body": "by **rounin.urashima**:\n\n\u003cpre\u003eWhat does 'go version' print?\n\ngo version devel +8645daeb2f82 Sat Mar 22 17:40:17 2014 -0700 linux/amd64\n\nWhat steps reproduce the problem?\n\nuser1@debian:~$ pwd\n/home/user1\nuser1@debian:~$ hg clone -u release \u003ca href=\"https://code.google.com/p/go\"\u003ehttps://code.google.com/p/go\u003c/a\u003e\ndestination directory: go\nrequesting all changes\nadding changesets\nadding manifests\nadding file changes\nadded 19526 changesets with 66885 changes to 8712 files (+7 heads)\nupdating to branch release-branch.go1.2\n3817 files updated, 0 files merged, 0 files removed, 0 files unresolved\nuser1@debian:~$ pwd\n/home/user1\nuser1@debian:~$ cd go\nuser1@debian:~/go$ ls -rlt\ntotal 88\n-rw-r--r--  1 user1 user1 19578 Mar 23 01:22 CONTRIBUTORS\n-rw-r--r--  1 user1 user1 13577 Mar 23 01:22 AUTHORS\n-rw-r--r--  1 user1 user1     7 Mar 23 01:22 VERSION\n-rw-r--r--  1 user1 user1  1112 Mar 23 01:22 README\n-rw-r--r--  1 user1 user1  1303 Mar 23 01:22 PATENTS\n-rw-r--r--  1 user1 user1  1479 Mar 23 01:22 LICENSE\ndrwxr-xr-x  2 user1 user1  4096 Mar 23 01:22 api\n-rw-r--r--  1 user1 user1  1150 Mar 23 01:22 favicon.ico\ndrwxr-xr-x  8 user1 user1  4096 Mar 23 01:22 doc\ndrwxr-xr-x  4 user1 user1  4096 Mar 23 01:22 lib\ndrwxr-xr-x  3 user1 user1  4096 Mar 23 01:22 include\n-rw-r--r--  1 user1 user1    26 Mar 23 01:22 robots.txt\ndrwxr-xr-x 21 user1 user1  4096 Mar 23 01:22 misc\ndrwxr-xr-x  7 user1 user1  4096 Mar 23 01:22 src\ndrwxr-xr-x 16 user1 user1  4096 Mar 23 01:22 test\nuser1@debian:~/go$ cd src\nuser1@debian:~/go/src$ hg pull\npulling from \u003ca href=\"https://code.google.com/p/go\"\u003ehttps://code.google.com/p/go\u003c/a\u003e\nsearching for changes\nno changes found\nuser1@debian:~/go/src$ hg update tip\nnote: possible conflict - src/cmd/6l/pass.c was renamed multiple times to:\n src/liblink/obj6.c\n src/liblink/pass.c\n1334 files updated, 0 files merged, 63 files removed, 0 files unresolved\nuser1@debian:~/go/src$ hg identify\n8645daeb2f82 tip\nuser1@debian:~/go/src$ ./all.bash\n# Building C bootstrap tool.\ncmd/dist\n\n# Building compilers and Go bootstrap tool for host, linux/amd64.\nlib9\nlibbio\nlibmach\nliblink\nmisc/pprof\ncmd/objdump\ncmd/prof\ncmd/cc\ncmd/gc\ncmd/6l\ncmd/6a\ncmd/6c\ncmd/6g\npkg/runtime\npkg/errors\npkg/sync/atomic\npkg/sync\npkg/io\npkg/unicode\npkg/unicode/utf8\npkg/unicode/utf16\npkg/bytes\npkg/math\npkg/strings\npkg/strconv\npkg/bufio\npkg/sort\npkg/container/heap\npkg/encoding/base64\npkg/syscall\npkg/time\npkg/os\npkg/reflect\npkg/fmt\npkg/encoding\npkg/encoding/json\npkg/flag\npkg/path/filepath\npkg/path\npkg/io/ioutil\npkg/log\npkg/regexp/syntax\npkg/regexp\npkg/go/token\npkg/go/scanner\npkg/go/ast\npkg/go/parser\npkg/os/exec\npkg/os/signal\npkg/net/url\npkg/text/template/parse\npkg/text/template\npkg/go/doc\npkg/go/build\ncmd/go\n\n# Building packages and commands for linux/amd64.\nruntime\nerrors\nsync/atomic\nunicode\nsync\nio\nunicode/utf8\nmath\nbytes\nbufio\nsyscall\nstrconv\ntime\nreflect\nos\nstrings\nencoding/binary\nfmt\nsort\nhash\ncrypto\ncrypto/md5\npath/filepath\nio/ioutil\ndebug/dwarf\ndebug/gosym\nflag\ndebug/elf\ndebug/macho\ndebug/pe\nlog\ngo/token\ncmd/addr2line\ngo/scanner\ngo/ast\ntext/tabwriter\ngo/parser\ngo/printer\nos/exec\ngo/format\npath\ncmd/cgo\ncmd/fix\ncontainer/heap\nencoding\nencoding/base64\nunicode/utf16\nencoding/json\nencoding/xml\nregexp/syntax\nnet/url\ntext/template/parse\nregexp\ntext/template\ncompress/flate\nhash/crc32\ncompress/gzip\ngo/doc\ncontainer/list\ncrypto/subtle\ncrypto/cipher\ncrypto/aes\ncrypto/des\ngo/build\nmath/rand\ncrypto/hmac\ncrypto/rc4\nmath/big\ncrypto/sha1\ncrypto/sha256\nencoding/hex\nencoding/pem\nruntime/cgo\ncrypto/elliptic\ncrypto/ecdsa\ncrypto/rand\ncrypto/rsa\ncrypto/dsa\nencoding/asn1\nnet\ncrypto/x509/pkix\nmime\nos/signal\nruntime/pprof\ncmd/gofmt\ndebug/goobj\ncmd/link\ncrypto/x509\nnet/textproto\nmime/multipart\ndebug/plan9obj\ncrypto/tls\ncmd/nm\ncmd/pack\nnet/http\ncmd/yacc\ncmd/go\narchive/tar\narchive/zip\ncompress/bzip2\ncompress/lzw\nhash/adler32\ncompress/zlib\ncontainer/ring\ncrypto/sha512\ndatabase/sql/driver\ndatabase/sql\nencoding/ascii85\nencoding/base32\nencoding/csv\nencoding/gob\nexpvar\nhash/crc64\nhash/fnv\nhtml\nhtml/template\nimage/color\nimage\nimage/color/palette\nimage/draw\nimage/jpeg\nimage/gif\nimage/png\nindex/suffixarray\nlog/syslog\nmath/cmplx\nnet/http/cgi\nnet/http/cookiejar\nnet/http/fcgi\nnet/http/httptest\nnet/http/httputil\nnet/http/pprof\nnet/mail\nnet/rpc\nnet/smtp\nos/user\nnet/rpc/jsonrpc\nruntime/debug\nruntime/race\ntesting\ntesting/iotest\ntesting/quick\ntext/scanner\n\n# Testing packages.\n?   \tcmd/addr2line\t[no test files]\n?   \tcmd/cgo\t[no test files]\nok  \tcmd/fix\t0.020s\nok  \tcmd/go\t0.006s\nok  \tcmd/gofmt\t0.027s\nok  \tcmd/link\t0.028s\n?   \tcmd/nm\t[no test files]\nok  \tcmd/pack\t0.272s\n?   \tcmd/yacc\t[no test files]\nok  \tarchive/tar\t0.003s\nok  \tarchive/zip\t0.250s\nok  \tbufio\t0.062s\nok  \tbytes\t0.071s\nok  \tcompress/bzip2\t0.047s\nok  \tcompress/flate\t0.380s\nok  \tcompress/gzip\t0.005s\nok  \tcompress/lzw\t0.059s\nok  \tcompress/zlib\t0.788s\nok  \tcontainer/heap\t0.007s\nok  \tcontainer/list\t0.004s\nok  \tcontainer/ring\t0.028s\n?   \tcrypto\t[no test files]\nok  \tcrypto/aes\t0.030s\nok  \tcrypto/cipher\t0.010s\nok  \tcrypto/des\t0.007s\nok  \tcrypto/dsa\t0.010s\nok  \tcrypto/ecdsa\t0.015s\nok  \tcrypto/elliptic\t0.024s\nok  \tcrypto/hmac\t0.002s\nok  \tcrypto/md5\t0.003s\nok  \tcrypto/rand\t0.015s\nok  \tcrypto/rc4\t0.079s\nok  \tcrypto/rsa\t0.128s\nok  \tcrypto/sha1\t0.011s\nok  \tcrypto/sha256\t0.003s\nok  \tcrypto/sha512\t0.011s\nok  \tcrypto/subtle\t0.004s\nok  \tcrypto/tls\t0.654s\nok  \tcrypto/x509\t0.661s\n?   \tcrypto/x509/pkix\t[no test files]\nok  \tdatabase/sql\t0.058s\nok  \tdatabase/sql/driver\t0.002s\nok  \tdebug/dwarf\t0.011s\nok  \tdebug/elf\t0.006s\nok  \tdebug/goobj\t0.023s\nok  \tdebug/gosym\t0.244s\nok  \tdebug/macho\t0.002s\nok  \tdebug/pe\t0.004s\nok  \tdebug/plan9obj\t0.007s\n?   \tencoding\t[no test files]\nok  \tencoding/ascii85\t0.012s\nok  \tencoding/asn1\t0.003s\nok  \tencoding/base32\t0.002s\nok  \tencoding/base64\t0.011s\nok  \tencoding/binary\t0.009s\nok  \tencoding/csv\t0.002s\nok  \tencoding/gob\t0.028s\nok  \tencoding/hex\t0.025s\nok  \tencoding/json\t0.101s\nok  \tencoding/pem\t0.002s\nok  \tencoding/xml\t0.007s\nok  \terrors\t0.024s\nok  \texpvar\t0.003s\nok  \tflag\t0.003s\nok  \tfmt\t0.046s\nok  \tgo/ast\t0.012s\nok  \tgo/build\t0.064s\nok  \tgo/doc\t0.073s\nok  \tgo/format\t0.005s\nok  \tgo/parser\t0.030s\nok  \tgo/printer\t0.211s\nok  \tgo/scanner\t0.003s\nok  \tgo/token\t0.027s\n?   \thash\t[no test files]\nok  \thash/adler32\t0.054s\nok  \thash/crc32\t0.002s\nok  \thash/crc64\t0.009s\nok  \thash/fnv\t0.016s\nok  \thtml\t0.002s\nok  \thtml/template\t0.087s\nok  \timage\t0.047s\nok  \timage/color\t0.006s\n?   \timage/color/palette\t[no test files]\nok  \timage/draw\t0.042s\nok  \timage/gif\t0.030s\nok  \timage/jpeg\t0.137s\nok  \timage/png\t0.018s\nok  \tindex/suffixarray\t0.015s\nok  \tio\t0.024s\nok  \tio/ioutil\t0.002s\nok  \tlog\t0.008s\nok  \tlog/syslog\t2.129s\nok  \tmath\t0.003s\nok  \tmath/big\t0.136s\nok  \tmath/cmplx\t0.004s\nok  \tmath/rand\t0.209s\nok  \tmime\t0.003s\nok  \tmime/multipart\t0.168s\nok  \tnet\t2.375s\nok  \tnet/http\t2.872s\nok  \tnet/http/cgi\t0.218s\nok  \tnet/http/cookiejar\t0.011s\nok  \tnet/http/fcgi\t0.025s\nok  \tnet/http/httptest\t0.006s\nok  \tnet/http/httputil\t0.008s\n?   \tnet/http/pprof\t[no test files]\nok  \tnet/mail\t0.010s\nok  \tnet/rpc\t0.008s\nok  \tnet/rpc/jsonrpc\t0.005s\nok  \tnet/smtp\t0.019s\nok  \tnet/textproto\t0.008s\nok  \tnet/url\t0.014s\nok  \tos\t0.387s\nok  \tos/exec\t0.209s\nok  \tos/signal\t0.473s\nok  \tos/user\t0.003s\nok  \tpath\t0.002s\nok  \tpath/filepath\t0.009s\nok  \treflect\t0.058s\nok  \tregexp\t0.143s\nok  \tregexp/syntax\t0.395s\nok  \truntime\t9.211s\n?   \truntime/cgo\t[no test files]\nok  \truntime/debug\t0.004s\nok  \truntime/pprof\t6.667s\n?   \truntime/race\t[no test files]\nok  \tsort\t0.069s\nok  \tstrconv\t0.247s\nok  \tstrings\t0.072s\nok  \tsync\t0.055s\nok  \tsync/atomic\t0.047s\nok  \tsyscall\t0.016s\nok  \ttesting\t2.788s\n?   \ttesting/iotest\t[no test files]\nok  \ttesting/quick\t0.039s\nok  \ttext/scanner\t0.018s\nok  \ttext/tabwriter\t0.015s\nok  \ttext/template\t0.033s\nok  \ttext/template/parse\t0.025s\nok  \ttime\t2.530s\nok  \tunicode\t0.012s\nok  \tunicode/utf16\t0.008s\nok  \tunicode/utf8\t0.006s\n?   \tunsafe\t[no test files]\n\nreal\t0m42.377s\nuser\t0m52.167s\nsys\t0m10.585s\n\n# GOMAXPROCS=2 runtime -cpu=1,2,4\nok  \truntime\t22.263s\n\n# sync -cpu=10\n--- FAIL: TestPoolGC-10 (1.06 seconds)\n\tpool_test.go:97: only 85 out of 100 resources are finalized\nFAIL\nFAIL\tsync\t1.090s\nuser1@debian:~/go/src$ go version\nbash: go: command not found\nuser1@debian:~/go/src$ ~/go/bin/go version\ngo version devel +8645daeb2f82 Sat Mar 22 17:40:17 2014 -0700 linux/amd64\n\nWhat happened?\nreal\t0m42.377s\nuser\t0m52.167s\nsys\t0m10.585s\n\n# GOMAXPROCS=2 runtime -cpu=1,2,4\nok  \truntime\t22.263s\n\n# sync -cpu=10\n--- FAIL: TestPoolGC-10 (1.06 seconds)\n\tpool_test.go:97: only 85 out of 100 resources are finalized\nFAIL\nFAIL\tsync\t1.090s\n\nWhat should have happened instead?\n\nALL TESTS PASSED\n\n---\n\nPlease provide any additional information below.\n\nSystem is a Virtual machine, with 1 CPU with 2 cores:\n\nuser1@debian:~/go/src$  uname -a\nLinux debian 3.2.0-4-amd64 #1 SMP Debian 3.2.54-2 x86_64 GNU/Linux\u003c/pre\u003e",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 2,
	"closed_at": "2014-12-08T10:42:18Z",
	"created_at": "2014-03-23T01:31:10Z",
	"updated_at": "2016-06-25T01:30:31Z"
}
