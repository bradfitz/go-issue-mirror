{
	"id": 96730794,
	"number": 11837,
	"state": "closed",
	"title": "net: Dial with specified source address selects wrong scoped destination address",
	"body": "When running TestDialRoutingToBlackhole in golang.org/cl/12561, we see the following on various platforms:\r\n```\r\n# sudo GODEBUG=netdns=go go test -v -run=Blackhole\r\n=== RUN   TestDialRoutingToBlackhole\r\ninstalling [route add -host -inet6 2404:6800:4004:807::1011/128 ::1 -blackhole]\r\ninstalling [route add -host 173.194.117.241/32 127.0.0.1 -blackhole]\r\ninstalling [route add -host 173.194.117.244/32 127.0.0.1 -blackhole]\r\ninstalling [route add -host 173.194.117.242/32 127.0.0.1 -blackhole]\r\ninstalling [route add -host 173.194.117.243/32 127.0.0.1 -blackhole]\r\ninstalling [route add -host 173.194.117.240/32 127.0.0.1 -blackhole]\r\nuninstalling [route add -host -inet6 2404:6800:4004:807::1011/128 ::1 -blackhole]\r\nuninstalling [route add -host 173.194.117.241/32 127.0.0.1 -blackhole]\r\nuninstalling [route add -host 173.194.117.244/32 127.0.0.1 -blackhole]\r\nuninstalling [route add -host 173.194.117.242/32 127.0.0.1 -blackhole]\r\nuninstalling [route add -host 173.194.117.243/32 127.0.0.1 -blackhole]\r\nuninstalling [route add -host 173.194.117.240/32 127.0.0.1 -blackhole]\r\n--- FAIL: TestDialRoutingToBlackhole (9.25s)\r\n\tdial_unix_test.go:58: #0/0: elapsed 504.732193ms for {500ms 0001-01-01 00:00:00 +0000 UTC [240f:6d:1ced:1:815b:276a:fe81:7727]:0 false 0 0}\r\n\tdial_unix_test.go:58: #0/1: elapsed 504.187842ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:66: #0/1: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:58: #0/2: elapsed 505.047238ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:66: #0/2: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:58: #0/3: elapsed 502.103169ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:66: #0/3: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:58: #0/4: elapsed 503.668158ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:66: #0/4: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:58: #0/5: elapsed 502.566501ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:66: #0/5: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 false 0 0}\r\n\tdial_unix_test.go:58: #1/0: elapsed 502.806944ms for {500ms 0001-01-01 00:00:00 +0000 UTC [240f:6d:1ced:1:815b:276a:fe81:7727]:0 true 0 0}\r\n\tdial_unix_test.go:58: #1/1: elapsed 503.798456ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:66: #1/1: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:58: #1/2: elapsed 504.844686ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:66: #1/2: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:58: #1/3: elapsed 505.069618ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:66: #1/3: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:58: #1/4: elapsed 503.374228ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:66: #1/4: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:58: #1/5: elapsed 501.865917ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:66: #1/5: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 0 0}\r\n\tdial_unix_test.go:58: #2/0: elapsed 502.118066ms for {500ms 0001-01-01 00:00:00 +0000 UTC [240f:6d:1ced:1:815b:276a:fe81:7727]:0 true 1ns 0}\r\n\tdial_unix_test.go:58: #2/1: elapsed 502.060709ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:66: #2/1: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:58: #2/2: elapsed 501.901003ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:66: #2/2: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:58: #2/3: elapsed 504.841677ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:66: #2/3: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:58: #2/4: elapsed 504.515092ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:66: #2/4: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:58: #2/5: elapsed 500.103138ms for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\n\tdial_unix_test.go:66: #2/5: dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80: connect: no route to host for {500ms 0001-01-01 00:00:00 +0000 UTC 192.168.0.2:0 true 1ns 0}\r\nFAIL\r\n``` \r\n\"dial tcp 192.168.0.2:0-\u003e[2404:6800:4004:807::1011]:80\" looks clearly wrong.",
	"user": {
		"login": "mikioh",
		"id": 92117,
		"type": "User",
		"site_admin": false
	},
	"comments": 5,
	"closed_at": "2016-03-16T03:18:23Z",
	"created_at": "2015-07-23T05:17:21Z",
	"updated_at": "2016-03-16T03:18:23Z",
	"milestone": {
		"id": 1414133,
		"number": 31,
		"title": "Go1.7"
	}
}
