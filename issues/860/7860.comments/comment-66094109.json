{
	"id": 66094109,
	"body": "\u003ca id=\"c14\"\u003e\u003c/a\u003eComment 14:\n\n\u003cpre\u003eHm. Sorry, but I can't get that to work. I can get coredumps from non-Go processes by\nsending them a SIGABRT (so my coreadm settings etc are OK) but Go binaries don't\ngenerate a core dump even with GOTRACEBACK=crash. I've tried with both this \"real\" crash\nand manually sending SIGABRT and SIGQUIT to no avail.\n\njb@zlogin3:~ $ ls -l /var/cores\ntotal 0\njb@zlogin3:~ $ coreadm\n     global core file pattern: /var/cores/%f.%n.%p.%t.core\n     global core file content: default\n       init core file pattern: /%Z/cores/core.%f.%p\n       init core file content: default\n            global core dumps: enabled\n       per-process core dumps: disabled\n      global setid core dumps: enabled\n per-process setid core dumps: disabled\n     global core dump logging: enabled\njb@zlogin3:~ $ ulimit -a\ncore file size          (blocks, -c) unlimited\ndata seg size           (kbytes, -d) unlimited\nfile size               (blocks, -f) unlimited\nopen files                      (-n) 65536\npipe size            (512 bytes, -p) 10\nstack size              (kbytes, -s) 10240\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 32725\nvirtual memory          (kbytes, -v) unlimited\njb@zlogin3:~ $ sleep 100 \u0026\n[2] 35014\njb@zlogin3:~ $ kill -ABRT %\njb@zlogin3:~ $ \n[2]+  Abort                   (core dumped) sleep 100\njb@zlogin3:~ $ ls -l /var/cores/\ntotal 2569\n-rw------- 1 root root 5527218 Apr 30 17:56 gsleep.zlogin3.35014.1398873368.core\njb@zlogin3:~ $ cat sleep.go \npackage main\n\nimport \"time\"\n\nfunc main() {\n\tfor {\n\t\ttime.Sleep(1*time.Second)\n\t}\n}\n\njb@zlogin3:~ $ go build sleep.go\njb@zlogin3:~ $ GOTRACEBACK=crash ./sleep \u0026\n[2] 35032\njb@zlogin3:~ $ kill -ABRT %\nSIGABRT: used by abort, replace SIGIOT in the future\nPC=0xfffffd7fff2bf5e7\n\ngoroutine 0 [idle]:\n\ngoroutine 17 [syscall]:\nruntime.notetsleepg(0xfffffd7ffefaff68, 0xdf8475800)\n\t/home/jb/go/src/pkg/runtime/lock_sema.c:263 +0x71 fp=0xfffffd7ffefaff40\nruntime.MHeap_Scavenger()\n\t/home/jb/go/src/pkg/runtime/mheap.c:531 +0xa3 fp=0xfffffd7ffefaffa8\nruntime.goexit()\n\t/home/jb/go/src/pkg/runtime/proc.c:1430 fp=0xfffffd7ffefaffb0\ncreated by runtime.main\n\t/home/jb/go/src/pkg/runtime/proc.c:207\n\ngoroutine 16 [sleep]:\ntime.Sleep(0x3b9aca00)\n\t/home/jb/go/src/pkg/runtime/time.goc:39 +0x31\nmain.main()\n\t/home/jb/sleep.go:7 +0x26\n\nrax     0x5b\nrbx     0xfffffd7fff182a40\nrcx     0xfffffd7ffef96000\nrdx     0x0\nrdi     0x0\nrsi     0xfffffd7fffdff970\nrbp     0xfffffd7fffdff960\nrsp     0xfffffd7fffdff8f8\nr8      0xfffffd7ffef88a40\nr9      0x76\nr10     0xfffffd7ffef96000\nr11     0xfffffffffbc05648\nr12     0x494700\nr13     0xfffffd7fff337a00\nr14     0x0\nr15     0xfffffd7fffdff970\nrip     0xfffffd7fff2bf5e7\nrflags  0x247\ncs      0x53\nfs      0x0\ngs      0x0\n[2]+  Exit 2                  GOTRACEBACK=crash ./sleep\njb@zlogin3:~ $ ls -l /var/cores/\ntotal 2569\n-rw------- 1 root root 5527218 Apr 30 17:56 gsleep.zlogin3.35014.1398873368.core\njb@zlogin3:~ $\u003c/pre\u003e",
	"user": {
		"login": "calmh",
		"id": 125426,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2014-04-30T16:00:29Z",
	"updated_at": "2014-12-08T10:43:36Z"
}
