{
	"id": 214965028,
	"body": "I can confirm the behaviour on 14.04 on a KVM with 3 VPUs. go is 1.6.0\n\nThis is the scheduler as the programm begins to spin.\n\n2016/04/27 05:48:11 received\n2016/04/27 05:48:11 sent\nSCHED 1016ms: gomaxprocs=2 idleprocs=0 threads=5 spinningthreads=0\nidlethreads=2 runqueue=0 gcwaiting=1 n\nmidlelocked=0 stopwait=1 sysmonwait=0\n  P0: status=3 schedtick=25 syscalltick=163151 m=4 runqsize=0 gfreecnt=0\n  P1: status=1 schedtick=2 syscalltick=0 m=0 runqsize=0 gfreecnt=0\n  M4: p=0 curg=20 mallocing=0 throwing=0 preemptoff= locks=0 dying=0\nhelpgc=0 spinning=false blocked=fals\ne lockedg=-1\n  M3: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=0 dying=0\nhelpgc=0 spinning=false blocked=false lockedg=-1\n  M2: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=0 dying=0\nhelpgc=0 spinning=false blocked=false lockedg=-1\n  M1: p=-1 curg=-1 mallocing=0 throwing=0 preemptoff= locks=1 dying=0\nhelpgc=0 spinning=false blocked=false lockedg=-1\n  M0: p=1 curg=21 mallocing=0 throwing=0 preemptoff= locks=0 dying=0\nhelpgc=0 spinning=false blocked=false lockedg=-1\n  G1: status=4(select (no cases)) m=-1 lockedm=-1\n  G2: status=4(force gc (idle)) m=-1 lockedm=-1\n  G17: status=4(GC sweep wait) m=-1 lockedm=-1\n  G18: status=4(finalizer wait) m=-1 lockedm=-1\n  G19: status=4(chan send) m=-1 lockedm=-1\n  G20: status=2(chan receive) m=4 lockedm=-1\n  G21: status=2() m=0 lockedm=-1\n  G3: status=4(GC worker (idle)) m=-1 lockedm=-1\n  G4: status=4(GC worker (idle)) m=-1 lockedm=-1\n\n\nOn 26 April 2016 at 22:38, Antonenko Artem \u003cnotifications@github.com\u003e wrote:\n\n\u003e Another interesting find. I was running the program through ssh and it\n\u003e caused program to output more slowly. And process was no longer hanging.\n\u003e Once I ran it in VM terminal itself it did hang. Tried to output to a file\n\u003e instead of the console to remove the bottleneck - hangs within a second. So\n\u003e it looks like execution speed affects this issue.\n\u003e\n\u003e Source\n\u003e\n\u003e package main\n\u003e\n\u003e import (\n\u003e     \"log\"\n\u003e     \"runtime\"\n\u003e )\n\u003e\n\u003e func main() {\n\u003e     runtime.GOMAXPROCS(2)\n\u003e     ch := make(chan bool)\n\u003e\n\u003e     go func() {\n\u003e         for {\n\u003e             ch \u003c- true\n\u003e             log.Println(\"sent\")\n\u003e         }\n\u003e     }()\n\u003e\n\u003e     go func() {\n\u003e         for {\n\u003e             \u003c-ch\n\u003e             log.Println(\"received\")\n\u003e         }\n\u003e     }()\n\u003e\n\u003e     go func() {\n\u003e         for {\n\u003e         }\n\u003e     }()\n\u003e\n\u003e     select {\n\u003e     }\n\u003e }\n\u003e\n\u003e Linux backtrace\n\u003e\n\u003e SIGQUIT: quit\n\u003e PC=0x401310 m=0\n\u003e\n\u003e goroutine 7 [running]:\n\u003e main.main.func3()\n\u003e         /home/uweb/gowork/src/issue/main.go:27 fp=0xc820022fc0 sp=0xc820022fb8\n\u003e runtime.goexit()\n\u003e         /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc820022fc8 sp=0xc820022fc0\n\u003e created by main.main\n\u003e         /home/uweb/gowork/src/issue/main.go:29 +0x9e\n\u003e\n\u003e goroutine 1 [select (no cases)]:\n\u003e main.main()\n\u003e         /home/uweb/gowork/src/issue/main.go:31 +0xa3\n\u003e\n\u003e goroutine 5 [running]:\n\u003e         goroutine running on other thread; stack unavailable\n\u003e created by main.main\n\u003e         /home/uweb/gowork/src/issue/main.go:17 +0x64\n\u003e\n\u003e goroutine 6 [chan receive]:\n\u003e main.main.func2(0xc8200140c0)\n\u003e         /home/uweb/gowork/src/issue/main.go:21 +0x42\n\u003e created by main.main\n\u003e         /home/uweb/gowork/src/issue/main.go:24 +0x86\n\u003e\n\u003e rax    0x0\n\u003e rbx    0x401310\n\u003e rcx    0xc820022800\n\u003e rdx    0x52e288\n\u003e rdi    0x42f690\n\u003e rsi    0x589b60\n\u003e rbp    0x0\n\u003e rsp    0xc820022fb8\n\u003e r8     0x589ea0\n\u003e r9     0x0\n\u003e r10    0x0\n\u003e r11    0x0\n\u003e r12    0x2c\n\u003e r13    0x52d8e4\n\u003e r14    0x0\n\u003e r15    0x8\n\u003e rip    0x401310\n\u003e rflags 0x206\n\u003e cs     0x33\n\u003e fs     0x0\n\u003e gs     0x0\n\u003e exit status 2\n\u003e\n\u003e OS X backtrace\n\u003e\n\u003e SIGQUIT: quit\n\u003e PC=0x2350 m=0\n\u003e\n\u003e goroutine 7 [running]:\n\u003e main.main.func3()\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:27 fp=0xc82002afc0 sp=0xc82002afb8\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc82002afc8 sp=0xc82002afc0\n\u003e created by main.main\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:29 +0x9e\n\u003e\n\u003e goroutine 1 [select (no cases)]:\n\u003e main.main()\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:31 +0xa3\n\u003e\n\u003e goroutine 5 [chan send]:\n\u003e main.main.func1(0xc8200140c0)\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:14 +0x4b\n\u003e created by main.main\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:17 +0x64\n\u003e\n\u003e goroutine 6 [running]:\n\u003e     goroutine running on other thread; stack unavailable\n\u003e created by main.main\n\u003e     /Users/creker/Documents/Projects/go/src/hello/main.go:24 +0x86\n\u003e\n\u003e rax    0x0\n\u003e rbx    0x2350\n\u003e rcx    0xc82002a800\n\u003e rdx    0x12c7b0\n\u003e rdi    0x303f0\n\u003e rsi    0x1875c0\n\u003e rbp    0x0\n\u003e rsp    0xc82002afb8\n\u003e r8     0x187900\n\u003e r9     0x0\n\u003e r10    0x0\n\u003e r11    0x0\n\u003e r12    0x2c\n\u003e r13    0x12be30\n\u003e r14    0x0\n\u003e r15    0x8\n\u003e rip    0x2350\n\u003e rflags 0x206\n\u003e cs     0x2b\n\u003e fs     0x0\n\u003e gs     0x0\n\u003e exit status 2\n\u003e\n\u003e â€”\n\u003e You are receiving this because you are subscribed to this thread.\n\u003e Reply to this email directly or view it on GitHub\n\u003e \u003chttps://github.com/golang/go/issues/15442#issuecomment-214878172\u003e\n\u003e\n",
	"user": {
		"login": "rhedile",
		"id": 4202476,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-04-27T04:08:57Z",
	"updated_at": "2016-04-27T04:08:57Z"
}
