{
	"id": 51277257,
	"number": 1028,
	"state": "closed",
	"title": "gofmt: panic: runtime error: invalid memory address or nil pointer dereference ",
	"body": "by **tianyicui**:\n\n\u003cpre\u003eBefore filing a bug, please check whether it has been fixed since\nthe latest release: run \u0026quot;hg pull -u\u0026quot; and retry what you did to\nreproduce the problem.  Thanks.\n\nWhat steps will reproduce the problem?\n1. $ gofmt -r=\u0026quot;α.Data() -\u0026gt; *α\u0026quot; main.go\n(the related file main.go is attached)\n\nWhat is the expected output?\n\nI want to change things from \u0026quot;range self.pkgs.Data()\u0026quot; to \u0026quot;range\n*self.pkgs\u0026quot; (self.pkgs is vector.StringVector). I'm not sure if I fully understand\nthe usage of -r flag of gofmt, but at least it should not end with a panic.\n\nWhat do you see instead?\n\npanic: runtime error: invalid memory address or nil pointer dereference\n\npanic PC=0x3344f0\nruntime.panic+0xb2 /Users/tianyi/OSS/go/src/pkg/runtime/proc.c:1015\n\truntime.panic(0x0, 0x3226e8)\npanicstring+0x69 /Users/tianyi/OSS/go/src/pkg/runtime/runtime.c:83\n\tpanicstring(0x8ee70, 0x344a60)\nsigpanic+0x148 /Users/tianyi/OSS/go/src/pkg/runtime/darwin/thread.c:460\n\tsigpanic()\nreflect.*PtrValue·PointTo+0x27 /Users/tianyi/OSS/go/src/pkg/reflect/value.go:1062\n\treflect.*PtrValue·PointTo(0x0, 0x4fa09, 0x351be0, 0xb7e01)\nmain.subst+0x338 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:227\n\tmain.subst(0x351c00, 0x0, 0x0, 0x0, 0x0, ...)\nmain.subst+0x5e9 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:221\n\tmain.subst(0x0, 0x346cc0, 0x351be0, 0x0, 0x0, ...)\nmain.subst+0x31c /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:227\n\tmain.subst(0x0, 0x346d20, 0x3519c0, 0x0, 0x0, ...)\nmain.subst+0x446 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:232\n\tmain.subst(0x0, 0x346cc0, 0x351980, 0x0, 0x0, ...)\nmain.subst+0x5e9 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:221\n\tmain.subst(0x0, 0x346de0, 0x351940, 0x0, 0x0, ...)\nmain.subst+0x31c /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:227\n\tmain.subst(0x0, 0x346d20, 0x3518c0, 0x0, 0x0, ...)\nmain.subst+0x178 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:200\n\tmain.subst(0x0, 0x346cc0, 0x351600, 0x0, 0x0, ...)\nmain.subst+0x446 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:232\n\tmain.subst(0x312d20, 0x346cc0, 0x351880, 0x346d20, 0x351760, ...)\nmain.subst+0x5e9 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:221\n\tmain.subst(0x312d20, 0x346de0, 0x351840, 0x346d20, 0x351760, ...)\nmain.subst+0x31c /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:227\n\tmain.subst(0x312d20, 0x346d20, 0x3517a0, 0x346d20, 0x351760, ...)\nmain._func_003+0x20d /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:61\n\tmain._func_003(0x312d20, 0x346cc0, 0x315c60, 0x346d20, 0x351760, ...)\nmain.apply+0x10b /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:98\n\tmain.apply(0x346cc0, 0x338ce0, 0x338ce0, 0x338cc0, 0x338c01, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346de0, 0x338cc0, 0x0, 0x89bb8, ...)\nmain.apply+0x1f4 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:94\n\tmain.apply(0x346de0, 0x338cc0, 0x346de0, 0x338cc0, 0x1, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346cc0, 0x3388a0, 0x353208, 0x1, ...)\nmain.apply+0x10b /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:98\n\tmain.apply(0x346cc0, 0x3388a0, 0x3388a0, 0x338880, 0x338801, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346de0, 0x338880, 0xb9240, 0x34d700, ...)\nmain.apply+0x2cf /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:89\n\tmain.apply(0x346de0, 0x338880, 0x346de0, 0x338880, 0x338201, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346d80, 0x338280, 0x0, 0x77090, ...)\nmain.apply+0x1f4 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:94\n\tmain.apply(0x346d80, 0x338280, 0x346d80, 0x338280, 0x338101, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346cc0, 0x3381a0, 0x0, 0x6ef38, ...)\nmain.apply+0x1f4 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:94\n\tmain.apply(0x346cc0, 0x3381a0, 0x346cc0, 0x3381a0, 0x1, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346cc0, 0x33f260, 0x349a80, 0x1, ...)\nmain.apply+0x10b /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:98\n\tmain.apply(0x346cc0, 0x33f260, 0x33f260, 0x33f240, 0x33f201, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346de0, 0x33f240, 0xb5240, 0x34d700, ...)\nmain.apply+0x2cf /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:89\n\tmain.apply(0x346de0, 0x33f240, 0x346de0, 0x33f240, 0x350001, ...)\nmain._func_003+0xea /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:59\n\tmain._func_003(0x34c4b0, 0x346d80, 0x350080, 0x0, 0x72278, ...)\nmain.apply+0x1f4 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:94\n\tmain.apply(0x346d80, 0x350080, 0x346d80, 0x350080, 0x303d01, ...)\nmain.rewriteFile+0x1a5 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:65\n\tmain.rewriteFile(0x34c4b0, 0x346cc0, 0x315c80, 0x315c80, 0x34e130, ...)\nmain._func_002+0x41 /Users/tianyi/OSS/go/src/cmd/gofmt/rewrite.go:31\n\tmain._func_002(0x300540, 0x323ba0, 0x3004e0, 0x300510, 0x34c460, ...)\nmain.processFile+0x151 /Users/tianyi/OSS/go/src/cmd/gofmt/gofmt.go:101\n\tmain.processFile(0x34c460, 0x7, 0xb2040, 0x332190)\nmain.processFileByName+0xa8 /Users/tianyi/OSS/go/src/cmd/gofmt/gofmt.go:137\n\tmain.processFileByName(0x3004b0, 0x7, 0x0, 0x3004b0, 0x0, ...)\nmain.main+0x226 /Users/tianyi/OSS/go/src/cmd/gofmt/gofmt.go:201\n\tmain.main()\nmainstart+0xf /Users/tianyi/OSS/go/src/pkg/runtime/amd64/asm.s:78\n\tmainstart()\ngoexit /Users/tianyi/OSS/go/src/pkg/runtime/proc.c:145\n\tgoexit()\n\nWhat is your $GOOS?  $GOARCH?\n\nGOOS=darwin\nGOARCH=amd64\n\nWhich revision are you using?  (hg identify)\n\n843a555976df\n\n\nPlease provide any additional information below.\u003c/pre\u003e\n\n\n\n\n\nAttachments:\n\n1. \u003ca href=\"https://storage.googleapis.com/go-attachment/1028/0/main.go\"\u003emain.go\u003c/a\u003e (5072 bytes)",
	"user": {
		"login": "gopherbot",
		"id": 8566911,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"assignee": {
		"login": "griesemer",
		"id": 8528975,
		"type": "User",
		"site_admin": false
	},
	"comments": 6,
	"closed_at": "2014-12-08T10:06:45Z",
	"created_at": "2010-08-14T15:54:34Z",
	"updated_at": "2016-06-24T19:19:08Z"
}
