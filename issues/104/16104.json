{
	"id": 161001348,
	"number": 16104,
	"state": "closed",
	"title": "cmd/go: go get hangs",
	"body": "1. What version of Go are you using (`go version`)?\r\n\r\n```\r\n# go version\r\ngo version go1.6 linux/amd64\r\n```\r\n\r\n2. What operating system and processor architecture are you using (`go env`)?\r\n```\r\n# go env\r\nGOARCH=\"amd64\"\r\nGOBIN=\"/home/phemmer/.go/bin\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"/home/phemmer/.go:/tmp/go\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/lib/go\"\r\nGOTOOLDIR=\"/usr/lib/go/pkg/tool/linux_amd64\"\r\nGO15VENDOREXPERIMENT=\"1\"\r\nCC=\"x86_64-pc-linux-gnu-gcc\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0\"\r\nCXX=\"x86_64-pc-linux-gnu-g++\"\r\nCGO_ENABLED=\"1\"\r\n```\r\n\r\n3. What did you do?\r\n```\r\ngo get -t -d -v github.com/influxdata/telegraf \r\n```\r\n\r\n4. What did you expect to see?\r\n\r\nsuccess\r\n\r\n5. What did you see instead?\r\n\r\n```\r\ngithub.com/influxdata/telegraf (download)\r\n```\r\n\r\nhanging indefinitely\r\n\r\n### Additional info:\r\nThis has been happening to me for years (obviously on older versions of go), but it's mostly just an annoyance as I can usually just retry the `go get` once or twice and it'll succeed. Meaning this doesn't happen every time.\r\n\r\nWhen I send a `SIGQUIT` to the process, this is the output:\r\n\r\n```\r\nSIGQUIT: quit\r\nPC=0x4e9df1 m=0\r\n\r\ngoroutine 0 [idle]:\r\nruntime.futex(0xc8ff08, 0x0, 0x0, 0x0, 0x0, 0xc8f290, 0x0, 0x0, 0x49b294, 0xc8ff08, ...)\r\n\t/usr/lib/go/src/runtime/sys_linux_amd64.s:302 +0x21\r\nruntime.futexsleep(0xc8ff08, 0x0, 0xffffffffffffffff)\r\n\t/usr/lib/go/src/runtime/os1_linux.go:40 +0x53\r\nruntime.notesleep(0xc8ff08)\r\n\t/usr/lib/go/src/runtime/lock_futex.go:145 +0xa4\r\nruntime.stopm()\r\n\t/usr/lib/go/src/runtime/proc.go:1535 +0x10b\r\nruntime.findrunnable(0xc820020a00, 0x0)\r\n\t/usr/lib/go/src/runtime/proc.go:1973 +0x739\r\nruntime.schedule()\r\n\t/usr/lib/go/src/runtime/proc.go:2072 +0x24f\r\nruntime.park_m(0xc820000180)\r\n\t/usr/lib/go/src/runtime/proc.go:2137 +0x18b\r\nruntime.mcall(0x7ffdd42511f0)\r\n\t/usr/lib/go/src/runtime/asm_amd64.s:233 +0x5b\r\n\r\ngoroutine 1 [chan receive]:\r\nos/exec.(*Cmd).Wait(0xc820170640, 0x0, 0x0)\r\n\t/usr/lib/go/src/os/exec/exec.go:401 +0x2c9\r\nos/exec.(*Cmd).Run(0xc820170640, 0x0, 0x0)\r\n\t/usr/lib/go/src/os/exec/exec.go:262 +0x64\r\nmain.(*vcsCmd).run1(0xc89340, 0x9df678, 0x1, 0xa3e0d0, 0x12, 0xc820113370, 0x4, 0x4, 0xc820161501, 0x0, ...)\r\n\t/usr/lib/go/src/cmd/go/vcs.go:365 +0xba0\r\nmain.(*vcsCmd).run(0xc89340, 0x9df678, 0x1, 0xa3e0d0, 0x12, 0xc820113370, 0x4, 0x4, 0x0, 0x0)\r\n\t/usr/lib/go/src/cmd/go/vcs.go:312 +0x97\r\nmain.(*vcsCmd).create(0xc89340, 0xc820165580, 0x34, 0xc8201613b0, 0x26, 0x0, 0x0)\r\n\t/usr/lib/go/src/cmd/go/vcs.go:389 +0x28a\r\nmain.downloadPackage(0xc82017ac00, 0x0, 0x0)\r\n\t/usr/lib/go/src/cmd/go/get.go:436 +0x1231\r\nmain.download(0x7ffdd4252479, 0x1e, 0x0, 0xc820113ba0, 0x2)\r\n\t/usr/lib/go/src/cmd/go/get.go:225 +0xf1a\r\nmain.runGet(0xc881a0, 0xc82000a1d0, 0x1, 0x1)\r\n\t/usr/lib/go/src/cmd/go/get.go:107 +0x1de\r\nmain.main()\r\n\t/usr/lib/go/src/cmd/go/main.go:181 +0x783\r\n\r\ngoroutine 17 [syscall, locked to thread]:\r\nruntime.goexit()\r\n\t/usr/lib/go/src/runtime/asm_amd64.s:1998 +0x1\r\n\r\ngoroutine 5 [syscall]:\r\nos/signal.signal_recv(0x0)\r\n\t/usr/lib/go/src/runtime/sigqueue.go:116 +0x132\r\nos/signal.loop()\r\n\t/usr/lib/go/src/os/signal/signal_unix.go:22 +0x18\r\ncreated by os/signal.init.1\r\n\t/usr/lib/go/src/os/signal/signal_unix.go:28 +0x37\r\n\r\ngoroutine 7 [syscall]:\r\nsyscall.Syscall(0x0, 0x4, 0xc82019c047, 0x5b9, 0x47, 0x200, 0x49cea9)\r\n\t/usr/lib/go/src/syscall/asm_linux_amd64.s:18 +0x5\r\nsyscall.read(0x4, 0xc82019c047, 0x5b9, 0x5b9, 0x47, 0x0, 0x0)\r\n\t/usr/lib/go/src/syscall/zsyscall_linux_amd64.go:783 +0x5f\r\nsyscall.Read(0x4, 0xc82019c047, 0x5b9, 0x5b9, 0x0, 0x0, 0x0)\r\n\t/usr/lib/go/src/syscall/syscall_unix.go:161 +0x4d\r\nos.(*File).read(0xc8200321f0, 0xc82019c047, 0x5b9, 0x5b9, 0xc82019c000, 0x0, 0x0)\r\n\t/usr/lib/go/src/os/file_unix.go:228 +0x53\r\nos.(*File).Read(0xc8200321f0, 0xc82019c047, 0x5b9, 0x5b9, 0x47, 0x0, 0x0)\r\n\t/usr/lib/go/src/os/file.go:95 +0x8a\r\nbytes.(*Buffer).ReadFrom(0xc820182a10, 0x7fea392042d0, 0xc8200321f0, 0x47, 0x0, 0x0)\r\n\t/usr/lib/go/src/bytes/buffer.go:176 +0x23f\r\nio.copyBuffer(0x7fea39208da0, 0xc820182a10, 0x7fea392042d0, 0xc8200321f0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/usr/lib/go/src/io/io.go:374 +0x180\r\nio.Copy(0x7fea39208da0, 0xc820182a10, 0x7fea392042d0, 0xc8200321f0, 0x0, 0x0, 0x0)\r\n\t/usr/lib/go/src/io/io.go:350 +0x64\r\nos/exec.(*Cmd).writerDescriptor.func1(0x0, 0x0)\r\n\t/usr/lib/go/src/os/exec/exec.go:236 +0x8b\r\nos/exec.(*Cmd).Start.func1(0xc820170640, 0xc82016d000)\r\n\t/usr/lib/go/src/os/exec/exec.go:344 +0x1d\r\ncreated by os/exec.(*Cmd).Start\r\n\t/usr/lib/go/src/os/exec/exec.go:345 +0x967\r\n\r\nrax    0xca\r\nrbx    0x0\r\nrcx    0x4e9df3\r\nrdx    0x0\r\nrdi    0xc8ff08\r\nrsi    0x0\r\nrbp    0x1\r\nrsp    0x7ffdd4251050\r\nr8     0x0\r\nr9     0x0\r\nr10    0x0\r\nr11    0x286\r\nr12    0x3\r\nr13    0xad30bb\r\nr14    0x4\r\nr15    0x8\r\nrip    0x4e9df1\r\nrflags 0x286\r\ncs     0x33\r\nfs     0x0\r\ngs     0x0\r\n```\r\n\r\nI also have an `strace` available.",
	"user": {
		"login": "phemmer",
		"id": 1826947,
		"type": "User",
		"site_admin": false
	},
	"comments": 16,
	"closed_at": "2016-06-20T18:52:29Z",
	"created_at": "2016-06-18T01:53:52Z",
	"updated_at": "2016-06-20T18:52:29Z",
	"milestone": {
		"id": 1055141,
		"number": 6,
		"title": "Unplanned"
	}
}
