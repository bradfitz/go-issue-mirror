{
	"id": 226474320,
	"body": "What is a bit strange is that it built earlier, with go1.6.1, but after upgrading to go1.6.2 it no longer builds. What is more strange is that i have downgraded various times and now it no longer build with go 1.6.1 either. I get different error messages with different go versions and different docker versions. All seems to be related memory management.\r\n\r\nbuilding docker 1.11.1 with go-1.6.2:\r\n\r\n````\r\n---\u003e Making bundle: dynbinary (in bundles/1.11.1/dynbinary)\r\nBuilding: bundles/1.11.1/dynbinary/docker-1.11.1\r\n# github.com/ugorji/go/codec\r\nfatal error: addspecial on invalid pointer\r\n\r\nruntime stack:\r\nruntime.throw(0x41d818, 0x1d)\r\n        /usr/lib/go/src/runtime/panic.go:547 +0x78\r\nruntime.addspecial(0x9f07d8c0, 0x6ee245e8, 0x74)\r\n        /usr/lib/go/src/runtime/mheap.go:1004 +0xcc\r\nruntime.setprofilebucket(0x9f07d8c0, 0x6e236960)\r\n        /usr/lib/go/src/runtime/mheap.go:1158 +0xac\r\nruntime.mProf_Malloc.func1()\r\n        /usr/lib/go/src/runtime/mprof.go:249 +0x24\r\nruntime.systemstack(0x7f0b8000)\r\n        /usr/lib/go/src/runtime/asm_arm.s:247 +0x80\r\nruntime.mstart()\r\n        /usr/lib/go/src/runtime/proc.go:1051\r\n\r\ngoroutine 1 [running]:\r\nruntime.systemstack_switch()\r\n        /usr/lib/go/src/runtime/asm_arm.s:192 +0x4 fp=0x936d56a4 sp=0x936d56a0\r\nruntime.mProf_Malloc(0x9f07d8c0, 0xc0)\r\n        /usr/lib/go/src/runtime/mprof.go:250 +0x134 fp=0x936d5764 sp=0x936d56a4\r\nruntime.profilealloc(0x7f0c6500, 0x9f07d8c0, 0xc0)\r\n        /usr/lib/go/src/runtime/malloc.go:794 +0x38 fp=0x936d5770 sp=0x936d5764\r\nruntime.mallocgc(0xc0, 0x3da658, 0x0, 0x18)\r\n        /usr/lib/go/src/runtime/malloc.go:712 +0x640 fp=0x936d57e0 sp=0x936d5770\r\nruntime.newarray(0x3da658, 0x8, 0x2c1738)\r\n        /usr/lib/go/src/runtime/malloc.go:778 +0xe4 fp=0x936d5800 sp=0x936d57e0\r\nruntime.growslice(0x3a7b80, 0x9f079920, 0x4, 0x4, 0x5, 0x0, 0x0, 0x0)\r\n        /usr/lib/go/src/runtime/slice.go:100 +0x2a8 fp=0x936d5838 sp=0x936d5800\r\ncmd/internal/obj/arm.asmout(0x7f0a6300, 0x5e231ad0, 0x538148, 0x936d599c, 0x9, 0x9)\r\n        /usr/lib/go/src/cmd/internal/obj/arm/asm5.go:1642 +0xf3c fp=0x936d593c sp=0x936d5838\r\ncmd/internal/obj/arm.span5(0x7f0a6300, 0x97ebbe00)\r\n        /usr/lib/go/src/cmd/internal/obj/arm/asm5.go:756 +0x85c fp=0x936d5a7c sp=0x936d593c\r\ncmd/internal/obj.Flushplist(0x7f0a6300)\r\n        /usr/lib/go/src/cmd/internal/obj/objfile.go:300 +0x2d8 fp=0x936d5bd8 sp=0x936d5a7c\r\ncmd/internal/obj.Writeobjdirect(0x7f0a6300, 0x935842f0)\r\n        /usr/lib/go/src/cmd/internal/obj/objfile.go:114 +0x1c fp=0x936d5be4 sp=0x936d5bd8\r\ncmd/compile/internal/gc.dumpobj()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/obj.go:88 +0xca8 fp=0x936d5d30 sp=0x936d5be4\r\ncmd/compile/internal/gc.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/lex.go:495 +0x260c fp=0x936d5efc sp=0x936d5d30\r\ncmd/compile/internal/arm.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/arm/galign.go:92 +0x538 fp=0x936d5f08 sp=0x936d5efc\r\nmain.main()\r\n        /usr/lib/go/src/cmd/compile/main.go:34 +0x15c fp=0x936d5f74 sp=0x936d5f08\r\nruntime.main()\r\n        /usr/lib/go/src/runtime/proc.go:188 +0x2b4 fp=0x936d5f9c sp=0x936d5f74\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_arm.s:990 +0x4 fp=0x936d5f9c sp=0x936d5f9c\r\n````\r\n\r\n\r\n\r\nbuidling docker 1.11.1 with go 1.6.1:\r\n````\r\n---\u003e Making bundle: dynbinary (in bundles/1.11.1/dynbinary)\r\nBuilding: bundles/1.11.1/dynbinary/docker-1.11.1\r\n# github.com/ugorji/go/codec\r\nruntime: memory allocated by OS (0x83cbd000) not in usable range [0x94582000,0xffffffff)\r\nfatal error: out of memory\r\n\r\nruntime stack:\r\nruntime.throw(0x40ba28, 0xd)\r\n        /usr/lib/go/src/runtime/panic.go:530 +0x78\r\nruntime.(*mcache).refill(0x84442258, 0x11, 0x83df1948)\r\n        /usr/lib/go/src/runtime/mcache.go:121 +0xfc\r\nruntime.mallocgc.func2()\r\n        /usr/lib/go/src/runtime/malloc.go:642 +0x28\r\nruntime.systemstack(0x945a0a00)\r\n        /usr/lib/go/src/runtime/asm_arm.s:247 +0x80\r\nruntime.mstart()\r\n        /usr/lib/go/src/runtime/proc.go:1048\r\n\r\ngoroutine 1 [running]:\r\nruntime.systemstack_switch()\r\n        /usr/lib/go/src/runtime/asm_arm.s:192 +0x4 fp=0xa887781c sp=0xa8877818\r\nruntime.mallocgc(0x100, 0x0, 0x3, 0x100)\r\n        /usr/lib/go/src/runtime/malloc.go:643 +0x930 fp=0xa887788c sp=0xa887781c\r\nruntime.rawmem(0x100, 0x40)\r\n        /usr/lib/go/src/runtime/malloc.go:809 +0x30 fp=0xa88778a0 sp=0xa887788c\r\nruntime.growslice(0x3a7828, 0xb4500000, 0x80, 0x80, 0x81, 0x0, 0x0, 0x0)\r\n        /usr/lib/go/src/runtime/slice.go:95 +0x230 fp=0xa88778d8 sp=0xa88778a0\r\ncmd/internal/obj.Symgrow(0x9458e300, 0xb273ca80, 0x88, 0x0)\r\n        /usr/lib/go/src/cmd/internal/obj/data.go:50 +0x17c fp=0xa887793c sp=0xa88778d8\r\ncmd/internal/obj/arm.span5(0x9458e300, 0xb273ca80)\r\n        /usr/lib/go/src/cmd/internal/obj/arm/asm5.go:745 +0x758 fp=0xa8877a7c sp=0xa887793c\r\ncmd/internal/obj.Flushplist(0x9458e300)\r\n        /usr/lib/go/src/cmd/internal/obj/objfile.go:300 +0x2d8 fp=0xa8877bd8 sp=0xa8877a7c\r\ncmd/internal/obj.Writeobjdirect(0x9458e300, 0xa86bcb60)\r\n        /usr/lib/go/src/cmd/internal/obj/objfile.go:114 +0x1c fp=0xa8877be4 sp=0xa8877bd8\r\ncmd/compile/internal/gc.dumpobj()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/obj.go:88 +0xca8 fp=0xa8877d30 sp=0xa8877be4\r\ncmd/compile/internal/gc.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/lex.go:495 +0x260c fp=0xa8877efc sp=0xa8877d30\r\ncmd/compile/internal/arm.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/arm/galign.go:92 +0x538 fp=0xa8877f08 sp=0xa8877efc\r\nmain.main()\r\n        /usr/lib/go/src/cmd/compile/main.go:34 +0x15c fp=0xa8877f74 sp=0xa8877f08\r\nruntime.main()\r\n        /usr/lib/go/src/runtime/proc.go:188 +0x2b4 fp=0xa8877f9c sp=0xa8877f74\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_arm.s:990 +0x4 fp=0xa8877f9c sp=0xa8877f9c\r\n                            \r\n````\r\n\r\nbuilding docker-1.11.2 with go-1.6.2:\r\n````\r\n---\u003e Making bundle: dynbinary (in bundles/1.11.2/dynbinary)\r\nBuilding: bundles/1.11.2/dynbinary/docker-1.11.2\r\n# github.com/ugorji/go/codec\r\nfatal error: runtime.SetFinalizer: pointer not in allocated block\r\n\r\ngoroutine 1 [running]:\r\nruntime.throw(0x431868, 0x34)\r\n        /usr/lib/go/src/runtime/panic.go:547 +0x78 fp=0x9c0afa7c sp=0x9c0afa70\r\nruntime.SetFinalizer(0x3cbe68, 0x9bf363c0, 0x0, 0x0)\r\n        /usr/lib/go/src/runtime/mfinal.go:309 +0x204 fp=0x9c0afb7c sp=0x9c0afa7c\r\nos.(*file).close(0x9bf363c0, 0x0, 0x0)\r\n        /usr/lib/go/src/os/file_unix.go:146 +0x158 fp=0x9c0afbbc sp=0x9c0afb7c\r\nos.(*File).Close(0x9bfd21a8, 0x0, 0x0)\r\n        /usr/lib/go/src/os/file_unix.go:132 +0x54 fp=0x9c0afbcc sp=0x9c0afbbc\r\ncmd/internal/obj.Bterm(0x9bf363d0, 0x0, 0x0)\r\n        /usr/lib/go/src/cmd/internal/obj/util.go:181 +0x68 fp=0x9c0afbe4 sp=0x9c0afbcc\r\ncmd/compile/internal/gc.dumpobj()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/obj.go:101 +0xe10 fp=0x9c0afd30 sp=0x9c0afbe4\r\ncmd/compile/internal/gc.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/gc/lex.go:495 +0x260c fp=0x9c0afefc sp=0x9c0afd30\r\ncmd/compile/internal/arm.Main()\r\n        /usr/lib/go/src/cmd/compile/internal/arm/galign.go:92 +0x538 fp=0x9c0aff08 sp=0x9c0afefc\r\nmain.main()\r\n        /usr/lib/go/src/cmd/compile/main.go:34 +0x15c fp=0x9c0aff74 sp=0x9c0aff08\r\nruntime.main()\r\n        /usr/lib/go/src/runtime/proc.go:188 +0x2b4 fp=0x9c0aff9c sp=0x9c0aff74\r\nruntime.goexit()\r\n        /usr/lib/go/src/runtime/asm_arm.s:990 +0x4 fp=0x9c0aff9c sp=0x9c0aff9c\r\n\r\n````",
	"user": {
		"login": "ncopa",
		"id": 66357,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-06-16T12:45:23Z",
	"updated_at": "2016-06-16T12:45:23Z"
}
