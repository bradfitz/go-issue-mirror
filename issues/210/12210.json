{
	"id": 102013762,
	"number": 12210,
	"state": "closed",
	"title": "misc/cgo/test: morestack on g0 on Solaris under \"unlimit stacksize\"",
	"body": "At least on my SmartOS box running joyent_20150514T133314Z:\r\n\r\n    ##### ../misc/cgo/test\r\n    SIGTRAP: trace trap (not reset when caught)\r\n    PC=0x4a8236 m=0\r\n    signal arrived during cgo execution\r\n\r\n    goroutine 25 [running, locked to thread]:\r\n    runtime.morestack()\r\n            /usr/local/go/src/runtime/asm_amd64.s:302 +0x26 fp=0xfffffd7fffdeed88 sp=0xfffffd7fffdeed80\r\n    created by testing.RunTests\r\n            /usr/local/go/src/testing/testing.go:561 +0x86d\r\n\r\n    goroutine 1 [chan receive]:\r\n    runtime.gopark(0x69fe68, 0xc82009e418, 0x6535a0, 0xc, 0x17, 0x3)\r\n            /usr/local/go/src/runtime/proc.go:185 +0x179 fp=0xc820059b28 sp=0xc820059b00\r\n    runtime.goparkunlock(0xc82009e418, 0x6535a0, 0xc, 0x17, 0x3)\r\n            /usr/local/go/src/runtime/proc.go:191 +0x54 fp=0xc820059b60 sp=0xc820059b28\r\n    runtime.chanrecv(0x5bb9a0, 0xc82009e3c0, 0xc820059d78, 0xc820059c01, 0x4c0000)\r\n            /usr/local/go/src/runtime/chan.go:448 +0x47b fp=0xc820059c20 sp=0xc820059b60\r\n    runtime.chanrecv1(0x5bb9a0, 0xc82009e3c0, 0xc820059d78)\r\n            /usr/local/go/src/runtime/chan.go:349 +0x2b fp=0xc820059c50 sp=0xc820059c20\r\n    testing.RunTests(0x69fb08, 0x76ec20, 0x38, 0x38, 0x481401)\r\n            /usr/local/go/src/testing/testing.go:562 +0x8ad fp=0xc820059dd0 sp=0xc820059c50\r\n    testing.(*M).Run(0xc820059ef8, 0xc820014140)\r\n            /usr/local/go/src/testing/testing.go:494 +0x70 fp=0xc820059e58 sp=0xc820059dd0\r\n    main.main()\r\n            _/home/majid/build/go-1.5/misc/cgo/test/_test/_testmain.go:166 +0x116 fp=0xc820059f50 sp=0xc820059e58\r\n    runtime.main()\r\n            /usr/local/go/src/runtime/proc.go:111 +0x2cb fp=0xc820059fa0 sp=0xc820059f50\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc820059fa8 sp=0xc820059fa0\r\n\r\n    goroutine 17 [syscall, locked to thread]:\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc820048fb8 sp=0xc820048fb0\r\n\r\n    goroutine 2 [force gc (idle)]:\r\n    runtime.gopark(0x69fe68, 0x7807f0, 0x653e40, 0xf, 0x14, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:185 +0x179 fp=0xc820034758 sp=0xc820034730\r\n    runtime.goparkunlock(0x7807f0, 0x653e40, 0xf, 0xc820000114, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:191 +0x54 fp=0xc820034790 sp=0xc820034758\r\n    runtime.forcegchelper()\r\n            /usr/local/go/src/runtime/proc.go:152 +0xc1 fp=0xc8200347c0 sp=0xc820034790\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc8200347c8 sp=0xc8200347c0\r\n    created by runtime.init.4\r\n            /usr/local/go/src/runtime/proc.go:141 +0x2b\r\n\r\n    goroutine 3 [GC sweep wait]:\r\n    runtime.gopark(0x69fe68, 0x780980, 0x64c4d0, 0xd, 0x46ac14, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:185 +0x179 fp=0xc820034f48 sp=0xc820034f20\r\n    runtime.goparkunlock(0x780980, 0x64c4d0, 0xd, 0x14, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:191 +0x54 fp=0xc820034f80 sp=0xc820034f48\r\n    runtime.bgsweep(0xc82001e070)\r\n            /usr/local/go/src/runtime/mgcsweep.go:51 +0xba fp=0xc820034fb8 sp=0xc820034f80\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc820034fc0 sp=0xc820034fb8\r\n    created by runtime.gcenable\r\n            /usr/local/go/src/runtime/mgc.go:205 +0x53\r\n\r\n    goroutine 4 [finalizer wait]:\r\n    runtime.gopark(0x69fe68, 0x7a4470, 0x653ab0, 0xe, 0x14, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:185 +0x179 fp=0xc820035718 sp=0xc8200356f0\r\n    runtime.goparkunlock(0x7a4470, 0x653ab0, 0xe, 0x14, 0x1)\r\n            /usr/local/go/src/runtime/proc.go:191 +0x54 fp=0xc820035750 sp=0xc820035718\r\n    runtime.runfinq()\r\n            /usr/local/go/src/runtime/mfinal.go:154 +0xb3 fp=0xc8200357c0 sp=0xc820035750\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc8200357c8 sp=0xc8200357c0\r\n    created by runtime.createfing\r\n            /usr/local/go/src/runtime/mfinal.go:135 +0x60\r\n\r\n    goroutine 5 [syscall]:\r\n    runtime.notetsleepg(0x7a4660, 0xffffffffffffffff, 0x1)\r\n            /usr/local/go/src/runtime/lock_sema.go:264 +0x8f fp=0xc820035f40 sp=0xc820035f00\r\n    runtime.signal_recv(0x0)\r\n            /usr/local/go/src/runtime/sigqueue.go:111 +0x132 fp=0xc820035f78 sp=0xc820035f40\r\n    os/signal.loop()\r\n            /usr/local/go/src/os/signal/signal_unix.go:22 +0x18 fp=0xc820035fc0 sp=0xc820035f78\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc820035fc8 sp=0xc820035fc0\r\n    created by os/signal.init.1\r\n            /usr/local/go/src/os/signal/signal_unix.go:28 +0x37\r\n\r\n    goroutine 6 [syscall, locked to thread]:\r\n    runtime.cgocall(0x44d620, 0xc8200367b0, 0x0)\r\n            /usr/local/go/src/runtime/cgocall.go:120 +0x11d fp=0xc820036778 sp=0xc820036748\r\n    _/home/majid/build/go-1.5/misc/cgo/test._Cfunc_usleep(0xc800002710, 0xc800000000)\r\n            ??:0 +0x35 fp=0xc8200367b0 sp=0xc820036778\r\n    runtime.goexit()\r\n            /usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc8200367b8 sp=0xc8200367b0\r\n    created by _/home/majid/build/go-1.5/misc/cgo/test.lockOSThreadCallback\r\n            /home/majid/build/go-1.5/misc/cgo/test/issue3775.go:35 +0x100\r\n\r\n    rax    0xc8200bc000\r\n    rbx    0x7812e0\r\n    rcx    0xffffdd7fffaa2a40\r\n    rdx    0xc820030588\r\n    rdi    0x49e4c0\r\n    rsi    0x780d80\r\n    rbp    0xc8200305d0\r\n    rsp    0xfffffd7fffdeed80\r\n    r8     0xc8200bc000\r\n    r9     0xc820030668\r\n    r10    0x1\r\n    r11    0xfffffffffbc05648\r\n    r12    0x10\r\n    r13    0x69ab51\r\n    r14    0x1e\r\n    r15    0x8\r\n    rip    0x4a8236\r\n    rflags 0x246\r\n    cs     0x53\r\n    fs     0x0\r\n    gs     0x0\r\n    exit status 2\r\n    FAIL    _/home/majid/build/go-1.5/misc/cgo/test 0.009s\r\n    2015/08/19 15:07:27 Failed: exit status 1\r\n",
	"user": {
		"login": "fazalmajid",
		"id": 331198,
		"type": "User",
		"site_admin": false
	},
	"comments": 53,
	"closed_at": "2015-12-05T03:56:31Z",
	"created_at": "2015-08-19T22:31:11Z",
	"updated_at": "2016-01-07T18:34:26Z",
	"milestone": {
		"id": 1096159,
		"number": 24,
		"title": "Go1.6"
	}
}
