{
	"id": 134728966,
	"body": "Really strange: running the tests manually works:\r\n    env GOPATH=`pwd` go tool dist test -no-rebuild\r\nit's when run under all.bash that it fails.\r\n\r\n@binarycrusader: I am passing those flags to the bootstrap Go 1.4.2. Without them, I get the error below (this is on an OpenIndiana oi151a1 machine, but I get the same results on SmartOS). If you use an older version of GCC than 5.2, you can probably do without. -std=gnu11 is the default for GCC 5.x.\r\nGo 1.5 itself I build using just env CC=gcc, but if I understand correctly, Go 1.5 does not use gcc at all but its own toolchain (written in Go and compiled using the bootstrap.\r\n\r\n    (cd go-1.4.2/src; env GOROOT=`pwd`/go-1.4.2 CC=\"gcc\" ./all.bash)\r\n    # Building C bootstrap tool.\r\n    cmd/dist\r\n\r\n    # Building compilers and Go bootstrap tool for host, solaris/amd64.\r\n    lib9\r\n    In file included from /usr/include/inttypes.h:41:0,\r\n                     from /home/majid/build/go-1.4.2/include/u.h:60,\r\n                     from /home/majid/build/go-1.4.2/src/lib9/await.c:31:\r\n    /usr/local/lib/gcc/x86_64-pc-solaris2.11/5.2.0/include-fixed/sys/feature_tests.h:362:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\r\n     #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications \\\r\n      ^\r\n    In file included from /usr/include/inttypes.h:41:0,\r\n                     from /home/majid/build/go-1.4.2/include/u.h:60,\r\n                     from /home/majid/build/go-1.4.2/src/lib9/_p9dir.c:28:\r\n    /usr/local/lib/gcc/x86_64-pc-solaris2.11/5.2.0/include-fixed/sys/feature_tests.h:362:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\r\n     #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications \\\r\n      ^\r\n    In file included from /usr/include/inttypes.h:41:0,\r\n                     from /home/majid/build/go-1.4.2/include/u.h:60,\r\n                     from /home/majid/build/go-1.4.2/src/lib9/_exits.c:28:\r\n    /usr/local/lib/gcc/x86_64-pc-solaris2.11/5.2.0/include-fixed/sys/feature_tests.h:362:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\r\n     #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications \\\r\n      ^\r\n    In file included from /usr/include/inttypes.h:41:0,\r\n                     from /home/majid/build/go-1.4.2/include/u.h:60,\r\n                     from /home/majid/build/go-1.4.2/src/lib9/atoi.c:28:\r\n    /usr/local/lib/gcc/x86_64-pc-solaris2.11/5.2.0/include-fixed/sys/feature_tests.h:362:2: error: #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications  and pre-2001 POSIX applications\"\r\n     #error \"Compiler or options invalid for pre-UNIX 03 X/Open applications \\\r\n      ^\r\n    go tool dist: FAILED: gcc -Wall -Wstrict-prototypes -Wextra -Wunused -Wno-sign-compare -Wno-missing-braces -Wno-parentheses -Wno-unknown-pragmas -Wno-switch -Wno-comment -Wno-missing-field-initializers -Werror -fno-common -ggdb -pipe -Wuninitialized -O2 -fmessage-length=0 -c -m64 -I /home/majid/build/go-1.4.2/include -DPLAN9PORT -I /home/majid/build/go-1.4.2/src/lib9 -o $WORK/atoi.o /home/majid/build/go-1.4.2/src/lib9/atoi.c\r\n    go tool dist: FAILED: gcc -Wall -Wstrict-prototypes -Wextra -Wunused -Wno-sign-compare -Wno-missing-braces -Wno-parentheses -Wno-unknown-pragmas -Wno-switch -Wno-comment -Wno-missing-field-initializers -Werror -fno-common -ggdb -pipe -Wuninitialized -O2 -fmessage-length=0 -c -m64 -I /home/majid/build/go-1.4.2/include -DPLAN9PORT -I /home/majid/build/go-1.4.2/src/lib9 -o $WORK/_exits.o /home/majid/build/go-1.4.2/src/lib9/_exits.c\r\n    go tool dist: FAILED: gcc -Wall -Wstrict-prototypes -Wextra -Wunused -Wno-sign-compare -Wno-missing-braces -Wno-parentheses -Wno-unknown-pragmas -Wno-switch -Wno-comment -Wno-missing-field-initializers -Werror -fno-common -ggdb -pipe -Wuninitialized -O2 -fmessage-length=0 -c -m64 -I /home/majid/build/go-1.4.2/include -DPLAN9PORT -I /home/majid/build/go-1.4.2/src/lib9 -o $WORK/await.o /home/majid/build/go-1.4.2/src/lib9/await.c\r\n    go tool dist: FAILED: gcc -Wall -Wstrict-prototypes -Wextra -Wunused -Wno-sign-compare -Wno-missing-braces -Wno-parentheses -Wno-unknown-pragmas -Wno-switch -Wno-comment -Wno-missing-field-initializers -Werror -fno-common -ggdb -pipe -Wuninitialized -O2 -fmessage-length=0 -c -m64 -I /home/majid/build/go-1.4.2/include -DPLAN9PORT -I /home/majid/build/go-1.4.2/src/lib9 -o $WORK/_p9dir.o /home/majid/build/go-1.4.2/src/lib9/_p9dir.c\r\n",
	"user": {
		"login": "fazalmajid",
		"id": 331198,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-08-25T20:24:06Z",
	"updated_at": "2015-08-25T20:25:13Z"
}
