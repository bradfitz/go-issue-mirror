{
	"id": 70353205,
	"body": "Hopefully some of this helps, @davecheney: (while @jfrazelle works on that bisect)\r\n```console\r\n$ # in docker/docker, https://github.com/docker/docker/pull/10151 checked out\r\n$ git log -1 --oneline\r\nfa2024b Add ability to set client runtime defaults\r\n$ make shell\r\ndocker build ...\r\n...\r\ndocker run ...\r\nroot@c2af08758a22:/go/src/github.com/docker/docker# git grep -n IAMSTATIC\r\ndockerversion/dockerversion.go:12:\tIAMSTATIC bool   // whether or not Docker itself was compiled statically via ./hack/make.sh binary\r\nproject/make.sh:127:\t-X $DOCKER_PKG/dockerversion.IAMSTATIC true\r\nutils/utils.go:97:\tif dockerversion.IAMSTATIC {\r\nroot@c2af08758a22:/go/src/github.com/docker/docker# bash -x ./hack/make.sh binary\r\n...\r\n++ go build -o /go/src/github.com/docker/docker/bundles/1.4.1-dev/binary/docker-1.4.1-dev -a -tags 'netgo static_build apparmor selinux btrfs_noversion daemon' -ldflags '\r\n\t\t-w \r\n\t-X github.com/docker/docker/dockerversion.GITCOMMIT \"fa2024b\"\r\n\t-X github.com/docker/docker/dockerversion.VERSION \"1.4.1-dev\"\r\n\r\n\t\t\r\n\t-linkmode external\r\n\t-X github.com/docker/docker/dockerversion.IAMSTATIC true\r\n\t-extldflags \"-static -lpthread -Wl,--unresolved-symbols=ignore-in-object-files\"\r\n\r\n\t' ./docker\r\n++ echo 'Created binary: /go/src/github.com/docker/docker/bundles/1.4.1-dev/binary/docker-1.4.1-dev'\r\n...\r\nroot@c2af08758a22:/go/src/github.com/docker/docker# /go/src/github.com/docker/docker/bundles/1.4.1-dev/binary/docker-1.4.1-dev -v\r\nDocker version 1.4.1-dev, build fa2024b\r\nroot@c2af08758a22:/go/src/github.com/docker/docker# /go/src/github.com/docker/docker/bundles/1.4.1-dev/binary/docker-1.4.1-dev -d\r\nINFO[0000] +job serveapi(unix:///var/run/docker.sock)   \r\nINFO[0000] Listening for HTTP on unix (/var/run/docker.sock) \r\nINFO[0000] +job init_networkdriver()                    \r\nINFO[0000] enableIPv6 = false                           \r\nINFO[0000] -job init_networkdriver() = OK (0)           \r\nFATA[0000] Could not locate dockerinit: This usually means docker was built incorrectly. See http://docs.docker.com/contributing/devenvironment for official build instructions. \r\nroot@c2af08758a22:/go/src/github.com/docker/docker# ldd /go/src/github.com/docker/docker/bundles/1.4.1-dev/binary/docker-1.4.1-dev\r\n\tnot a dynamic executable\r\n```\r\n\r\nSo somehow, it's not getting the value of `dockerversion.IAMSTATIC` which is set to `true` via `-ldflags -X` (but it is getting the values of `dockerversion.GITCOMMIT` and `dockerversion.VERSION`, as seen from the `-v` output above).\r\n\r\nIf we do any of a number of small things, the problem goes away and the daemon starts just fine, including things as simple as:\r\n\r\n1. adding `dockerversion.IAMSTATIC` to the `docker -v` output in `docker/docker.go` or to the `dockerinit` error message output in `daemon/daemon.go`\r\n2. adding `func init() { }` (yes, empty) in `dockerversion/dockerversion.go`",
	"user": {
		"login": "tianon",
		"id": 161631,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2015-01-17T03:47:13Z",
	"updated_at": "2015-01-17T03:47:13Z"
}
