{
	"id": 66074289,
	"body": "\u003ca id=\"c1\"\u003e\u003c/a\u003eComment 1:\n\n\u003cpre\u003eFor clarity, the panic isn't that the error string is several hundred gb in length, that\nwas a debugging panic I put in just before this code. \n\nstate.go:294                 return nil, fmt.Errorf(\"cannot add charm %q: %v\", curl, err)\n\nWithout the panic, this is the actual panic we get.\n\nruntime: out of memory: cannot allocate 833227128832-byte block (19922944 in use)\nfatal error: out of memory\n\ngoroutine 832 [running]:\nruntime.throw(0xe5fa05, 0xc20034c)\n        /home/dfc/go/src/pkg/runtime/panic.c:462 +0x67\nruntime.mallocgc(0xc20034b95a, 0x100000001, 0x1, 0xc2003b9a22, 0xc2003ab7e0, ...)\n        /home/dfc/go/src/pkg/runtime/zmalloc_linux_amd64.c:63 +0x30a\nmakeslice1(0x857c78, 0x1a, 0xc20034b95a, 0x7f3f7a866580, 0x40a996, ...)\n        /home/dfc/go/src/pkg/runtime/slice.c:61 +0x89\ngrowslice1(0x857c78, 0xc200547800, 0x1a, 0x400, 0xc20034b95a, ...)\n        /home/dfc/go/src/pkg/runtime/slice.c:201 +0x56\nruntime.appendstr(0x857c78, 0xc200547800, 0x1a, 0x400, 0xc20035ad20, ...)\n        /home/dfc/go/src/pkg/runtime/slice.c:127 +0x79\nfmt.(*fmt).padString(0xc20035c1f8, 0xc20035ad20, 0xc20034b940, 0xc20035ad20)\n        /home/dfc/go/src/pkg/fmt/format.go:129 +0x1ba\nfmt.(*fmt).fmt_s(0xc20035c1f8, 0xc20035ad20, 0xc20034b940, 0xc2004695a0)\n        /home/dfc/go/src/pkg/fmt/format.go:272 +0x5b\nfmt.(*pp).fmtString(0xc20035c1a0, 0xc20035ad20, 0xc20034b940, 0x76, 0xc20034b940, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:533 +0xf3\nfmt.(*pp).printField(0xc20035c1a0, 0x8568e8, 0xc20022e530, 0x76, 0x0, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:798 +0xaee\nfmt.(*pp).catchPanic(0xc20035c1a0, 0x9fe390, 0x7f3f7a890478, 0xc200000071,\n0x7f3f7a866100, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:661 +0x341\n----- stack segment boundary -----\nruntime.panic(0x8568e8, 0xc20022e530)\n        /home/dfc/go/src/pkg/runtime/panic.c:227 +0x101\nlaunchpad.net/juju-core/charm.(*URL).Path(0x7f3f7a890478, 0xc200231cf0, 0xc200547800,\n0x13)\n        /home/dfc/src/launchpad.net/juju-core/charm/url.go:164 +0xa0\nlaunchpad.net/juju-core/charm.(*URL).String(0x7f3f7a890478, 0x9fe390, 0x7f3f7a890478,\n0xc200000071)\n        /home/dfc/src/launchpad.net/juju-core/charm/url.go:176 +0x28\nfmt.(*pp).handleMethods(0xc20035c1a0, 0x71, 0x0, 0x410100, 0x4097c7, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:717 +0x463\nfmt.(*pp).printField(0xc20035c1a0, 0x9fe390, 0x7f3f7a890478, 0x71, 0x0, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:808 +0x3df\nfmt.(*pp).doPrintf(0xc20035c1a0, 0xa94790, 0x17, 0xc2003ab620, 0x2, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:1110 +0x1270\nfmt.Sprintf(0xa94790, 0x17, 0xc2003ab620, 0x2, 0x2, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:228 +0x65\nfmt.Errorf(0xa94790, 0x17, 0xc2003ab620, 0x2, 0x2, ...)\n        /home/dfc/go/src/pkg/fmt/print.go:237 +0x52\n----- stack segment boundary -----\nlaunchpad.net/juju-core/state.(*State).AddCharm(0xc200230180, 0xc20011c980,\n0xc200c0e480, 0x7f3f7a890478, 0xc200b6a1c0, ...)\n        /home/dfc/src/launchpad.net/juju-core/state/state.go:294 +0x2f6\nlaunchpad.net/juju-core/worker/uniter_test.addCharm.step(0xc200c0e480, 0x7f3f7a890478,\n0xc20023a000, 0xc20035ad20, 0x1, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:835 +0x84f\nlaunchpad.net/juju-core/worker/uniter_test.(*addCharm).step(0xc20034b930, 0xc20023a000,\n0xc20035ad20, 0xc20034b940, 0x1, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/context_test.go:0 +0x9b\nlaunchpad.net/juju-core/worker/uniter_test.step(0xc20023a000, 0xc20035ad20,\n0xc2009d05a0, 0xc20034b930, 0x7f3f7a890478, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:780 +0xe1\nlaunchpad.net/juju-core/worker/uniter_test.createCharm.step(0x0, 0x0, 0x0, 0x0, 0x0, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:814 +0x6af\nlaunchpad.net/juju-core/worker/uniter_test.(*createCharm).step(0xc200223ae0,\n0xc20023a000, 0xc20035ad20, 0xc2002d84f0, 0x1, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/context_test.go:0 +0xa1\nlaunchpad.net/juju-core/worker/uniter_test.step(0xc20023a000, 0xc20035ad20,\n0xc200223ab0, 0xc200223ae0, 0x1, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:780 +0xe1\nlaunchpad.net/juju-core/worker/uniter_test.(*context).run(0xc20035ad20, 0xc20023a000,\n0xc2001797d0, 0x5, 0x5, ...)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:118 +0x1e3\nlaunchpad.net/juju-core/worker/uniter_test.(*UniterSuite).TestUniter(0xc20012e000,\n0xc20023a000, 0x7f3f7a890100, 0x7f3f7a890fb8)\n        /home/dfc/src/launchpad.net/juju-core/worker/uniter/uniter_test.go:725 +0x4e4\n----- stack segment boundary -----\nreflect.Value.call(0xa299f8, 0xc20012e000, 0x1538, 0xa524d8, 0x4, ...)\n        /home/dfc/go/src/pkg/reflect/value.go:532 +0x13f3\nreflect.Value.Call(0xa299f8, 0xc20012e000, 0x1538, 0xc2003aeba0, 0x1, ...)\n        /home/dfc/go/src/pkg/reflect/value.go:345 +0x9b\nlaunchpad.net/gocheck.func·006(0xc2002a1128, 0x4d4fe7, 0xc20023a000, 0xc20023a000,\n0x413360, ...)\n        /home/dfc/src/launchpad.net/gocheck/gocheck.go:738 +0x4df\nlaunchpad.net/gocheck.func·004(0xc2002a1138, 0xc2002a1148, 0xc2002a1140, 0x0, 0x0, ...)\n        /home/dfc/src/launchpad.net/gocheck/gocheck.go:633 +0x77\nruntime.goexit()\n        /home/dfc/go/src/pkg/runtime/proc.c:284\ncreated by launchpad.net/gocheck.(*suiteRunner).forkCall\n        /home/dfc/src/launchpad.net/gocheck/gocheck.go:634 +0x23c\u003c/pre\u003e",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2013-02-04T00:50:10Z",
	"updated_at": "2014-12-08T10:25:14Z"
}
