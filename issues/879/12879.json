{
	"id": 110457827,
	"number": 12879,
	"state": "closed",
	"title": "runtime: fatal error: free list corrupted in godoc after hours of idle",
	"body": "MacOS 10.10.5\r\ngo version go1.5 darwin/amd64\r\n\r\nPossible dup of #11411.\r\n\r\nPlease note the two comments marked with `//`.\r\n```\r\n$ulimit -n 999; godoc -analysis=\"type\" -http=:6060\r\n// lots of normal looking output removed. some \"could not import\" and other errors.\r\n2015/10/07 21:14:43 Constructing SSA form...\r\n2015/10/07 21:14:49 SSA construction complete\r\n2015/10/07 21:14:49 Package \"github.com/go-gl/glfw/v3.0/glfw\" has error (*errors.errorString) without position: cgo failed: [go tool cgo -objdir /var/folders/5y/w2d42zkx7rsc43v1pnj080tm0000gn/T/github.com_go-gl_glfw_v3.0_glfw_C258288875 -- -I /var/folders/5y/w2d42zkx7rsc43v1pnj080tm0000gn/T/github.com_go-gl_glfw_v3.0_glfw_C258288875 clipboard.go context.go error.go glfw.go input.go monitor.go native_darwin.go time.go util.go window.go]: exit status 1\r\n2015/10/07 21:14:49 Computing implements relation...\r\n2015/10/07 21:14:50 Extracting type info...\r\n2015/10/07 21:14:57 Visit instructions...\r\n2015/10/07 21:14:59 Visit instructions complete\r\n2015/10/07 21:14:59 Type analysis complete.\r\n// several hours pass\r\nruntime: free list of span 0x6431dd0:\r\n0xc941e5a020 -\u003e 0xc941e5a7c0 -\u003e 0xc941e5a490 -\u003e 0xc941e5a980 -\u003e 0x206567616b636170 (BAD)\r\nfatal error: free list corrupted\r\n\r\nruntime stack:\r\nruntime.throw(0x845d60, 0x13)\r\n\t/usr/local/go/src/runtime/panic.go:527 +0x90\r\nruntime.mSpan_Sweep(0x6431dd0, 0x1dd00000100, 0xc80006d601)\r\n\t/usr/local/go/src/runtime/mgcsweep.go:186 +0x800\r\nruntime.sweepone(0x40c72)\r\n\t/usr/local/go/src/runtime/mgcsweep.go:97 +0x154\r\nruntime.gosweepone.func1()\r\n\t/usr/local/go/src/runtime/mgcsweep.go:109 +0x21\r\nruntime.systemstack(0xc82001d500)\r\n\t/usr/local/go/src/runtime/asm_amd64.s:262 +0x79\r\nruntime.mstart()\r\n\t/usr/local/go/src/runtime/proc1.go:674\r\n\r\ngoroutine 3 [running]:\r\nruntime.systemstack_switch()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:216 fp=0xc82002cf58 sp=0xc82002cf50\r\nruntime.gosweepone(0x0)\r\n\t/usr/local/go/src/runtime/mgcsweep.go:110 +0x3d fp=0xc82002cf80 sp=0xc82002cf58\r\nruntime.bgsweep(0xc820016070)\r\n\t/usr/local/go/src/runtime/mgcsweep.go:54 +0xb6 fp=0xc82002cfb8 sp=0xc82002cf80\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:1696 +0x1 fp=0xc82002cfc0 sp=0xc82002cfb8\r\ncreated by runtime.gcenable\r\n\t/usr/local/go/src/runtime/mgc.go:205 +0x53\r\n\r\ngoroutine 1 [IO wait, 191 minutes]:\r\nnet.runtime_pollWait(0x1917ca0, 0x72, 0xc8200680a0)\r\n\t/usr/local/go/src/runtime/netpoll.go:157 +0x60\r\nnet.(*pollDesc).Wait(0xc82373c680, 0x72, 0x0, 0x0)\r\n\t/usr/local/go/src/net/fd_poll_runtime.go:73 +0x3a\r\nnet.(*pollDesc).WaitRead(0xc82373c680, 0x0, 0x0)\r\n\t/usr/local/go/src/net/fd_poll_runtime.go:78 +0x36\r\nnet.(*netFD).accept(0xc82373c620, 0x0, 0x1961ef0, 0xc974f459c0)\r\n\t/usr/local/go/src/net/fd_unix.go:408 +0x27c\r\nnet.(*TCPListener).AcceptTCP(0xc820072250, 0x5f680, 0x0, 0x0)\r\n\t/usr/local/go/src/net/tcpsock_posix.go:254 +0x4d\r\nnet/http.tcpKeepAliveListener.Accept(0xc820072250, 0x0, 0x0, 0x0, 0x0)\r\n\t/usr/local/go/src/net/http/server.go:2135 +0x41\r\nnet/http.(*Server).Serve(0xc8238463c0, 0x1917d60, 0xc820072250, 0x0, 0x0)\r\n\t/usr/local/go/src/net/http/server.go:1887 +0xb3\r\nnet/http.(*Server).ListenAndServe(0xc8238463c0, 0x0, 0x0)\r\n\t/usr/local/go/src/net/http/server.go:1877 +0x136\r\nnet/http.ListenAndServe(0x7fff5fbffc1b, 0x5, 0x1916cc8, 0xc82006cdb0, 0x0, 0x0)\r\n\t/usr/local/go/src/net/http/server.go:1967 +0x8f\r\nmain.main()\r\n\t/var/folders/q8/bf_4b1ts2zj0l7b0p1dv36lr0000gp/T/workdir/gopath/src/golang.org/x/tools/cmd/godoc/main.go:314 +0x18fd\r\n\r\ngoroutine 17 [syscall, 367 minutes, locked to thread]:\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:1696 +0x1\r\n\r\ngoroutine 1425 [chan receive, 367 minutes]:\r\ngolang.org/x/tools/godoc.(*Corpus).refreshMetadataLoop(0xc8201a4000)\r\n\t/var/folders/q8/bf_4b1ts2zj0l7b0p1dv36lr0000gp/T/workdir/gopath/src/golang.org/x/tools/godoc/meta.go:140 +0x3a\r\ncreated by golang.org/x/tools/godoc.(*Corpus).Init\r\n\t/var/folders/q8/bf_4b1ts2zj0l7b0p1dv36lr0000gp/T/workdir/gopath/src/golang.org/x/tools/godoc/corpus.go:145 +0x8a\r\n```\r\n",
	"user": {
		"login": "thaustad",
		"id": 4432054,
		"type": "User",
		"site_admin": false
	},
	"comments": 25,
	"closed_at": "2016-01-26T22:32:48Z",
	"created_at": "2015-10-08T14:01:38Z",
	"updated_at": "2016-01-26T22:32:48Z",
	"milestone": {
		"id": 1096159,
		"number": 24,
		"title": "Go1.6"
	}
}
