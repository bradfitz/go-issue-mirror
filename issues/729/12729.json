{
	"id": 107963839,
	"number": 12729,
	"state": "closed",
	"title": "runtime: go1.4 \"fatal error: bad pointer\"",
	"body": "I'm aware this is for old-ish version of Go, but thought better to report than not, you can always just close it. Highly non-deterministic, this app usually runs well, but I think I've already seen it crash in a somewhat similar way once over last 1-2 months. No \"import C\", no \"go whatever()\" in code. Generally run as a parser for `go test -v` (got ~20MB file as input this time), tries to split it and pass into text/template. (Actually planning to open-source the particular code soon-ish, but can't just yet.)\r\n\r\n```\r\n $ go version\r\ngo version go1.4 linux/amd64   \r\n $ go env\r\nGOARCH=\"amd64\"\r\nGOBIN=\"\"\r\nGOCHAR=\"6\"\r\nGOEXE=\"\"\r\nGOHOSTARCH=\"amd64\"\r\nGOHOSTOS=\"linux\"\r\nGOOS=\"linux\"\r\nGOPATH=\"[CENSORED]\"\r\nGORACE=\"\"\r\nGOROOT=\"/usr/local/go\"\r\nGOTOOLDIR=\"/usr/local/go/pkg/tool/linux_amd64\"\r\nCC=\"gcc\"\r\nGOGCCFLAGS=\"-fPIC -m64 -pthread -fmessage-length=0\"\r\nCXX=\"g++\"\r\nCGO_ENABLED=\"1\"\r\n```\r\nActual error output:\r\n```\r\nruntime: garbage collector found invalid heap pointer *(0xc20aaadcd0+0x0)=0x1 s=nil\r\nruntime: found *(0xc20ac0b4a0+0x8) = 0xc20aaadcd0+0x0\r\nruntime: found *(0xc20a9eed90+0x18) = 0xc20ac0b4a0+0x0\r\nfatal error: bad pointer\r\n\r\nruntime stack:\r\nruntime.throw(0x6fa0f9)\r\n\t/usr/local/go/src/runtime/panic.go:491 +0xad fp=0xc20802ba90 sp=0xc20802ba60\r\nscanblock(0xc20a9eed90, 0x48, 0x64ea68)\r\n\t/usr/local/go/src/runtime/mgc0.c:412 +0x989 fp=0xc20802bbd0 sp=0xc20802ba90\r\nscanframe(0xc20802bcd8, 0x0, 0x1)\r\n\t/usr/local/go/src/runtime/mgc0.c:740 +0x1c2 fp=0xc20802bc40 sp=0xc20802bbd0\r\nruntime.gentraceback(0x438060, 0xc20a9ee690, 0x0, 0xc208000120, 0x0, 0x0, 0x7fffffff, 0xc20802bd88, 0x0, 0x0, ...)\r\n\t/usr/local/go/src/runtime/traceback.go:311 +0x7a8 fp=0xc20802bd30 sp=0xc20802bc40\r\nscanstack(0xc208000120)\r\n\t/usr/local/go/src/runtime/mgc0.c:777 +0x21c fp=0xc20802bda0 sp=0xc20802bd30\r\nmarkroot(0xc208010000, 0xc200000005)\r\n\t/usr/local/go/src/runtime/mgc0.c:553 +0xe7 fp=0xc20802be00 sp=0xc20802bda0\r\nruntime.parfordo(0xc208010000)\r\n\t/usr/local/go/src/runtime/parfor.c:76 +0xb2 fp=0xc20802be80 sp=0xc20802be00\r\ngc(0xc20802bfb8)\r\n\t/usr/local/go/src/runtime/mgc0.c:1439 +0x25e fp=0xc20802bf98 sp=0xc20802be80\r\nruntime.gc_m()\r\n\t/usr/local/go/src/runtime/mgc0.c:1373 +0xf7 fp=0xc20802bfd0 sp=0xc20802bf98\r\nruntime.onM(0xc208012000)\r\n\t/usr/local/go/src/runtime/asm_amd64.s:257 +0x68 fp=0xc20802bfd8 sp=0xc20802bfd0\r\nruntime.mstart()\r\n\t/usr/local/go/src/runtime/proc.c:818 fp=0xc20802bfe0 sp=0xc20802bfd8\r\n\r\ngoroutine 1 [garbage collection]:\r\nruntime.switchtoM()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:198 fp=0xc20a9ee698 sp=0xc20a9ee690\r\nruntime.gogc(0xc200000000)\r\n\t/usr/local/go/src/runtime/malloc.go:469 +0x1cf fp=0xc20a9ee6d0 sp=0xc20a9ee698\r\nruntime.mallocgc(0x1c000, 0x5dd080, 0x0, 0xc20ada8000)\r\n\t/usr/local/go/src/runtime/malloc.go:341 +0x391 fp=0xc20a9ee780 sp=0xc20a9ee6d0\r\nruntime.newarray(0x5dd080, 0x44e, 0x6ee8)\r\n\t/usr/local/go/src/runtime/malloc.go:365 +0xc1 fp=0xc20a9ee7b8 sp=0xc20a9ee780\r\nruntime.growslice(0x55ce20, 0xc20ada8000, 0x227, 0x227, 0x1, 0x0, 0x0, 0x0)\r\n\t/usr/local/go/src/runtime/slice.go:87 +0x2bb fp=0xc20a9ee818 sp=0xc20a9ee7b8\r\nmain.filterCaseStatus(0x1, 0xc20ad76000, 0x348, 0x627, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n\t/home/akavel/gopath/src/CENSORED/tools/go2xunit2/main.go:162 +0x17e fp=0xc20a9ee990 sp=0xc20a9ee818\r\nruntime.call128(0x65db38, 0xc20abfad20, 0x2000000048)\r\n\t/usr/local/go/src/runtime/asm_amd64.s:404 +0x54 fp=0xc20a9eea18 sp=0xc20a9ee990\r\nreflect.Value.call(0x5aef80, 0x65db38, 0x13, 0x5f9c30, 0x4, 0xc20ac0b4a0, 0x2, 0x2, 0x0, 0x0, ...)\r\n\t/usr/local/go/src/reflect/value.go:419 +0x10e5 fp=0xc20a9eed30 sp=0xc20a9eea18\r\nreflect.Value.Call(0x5aef80, 0x65db38, 0x13, 0xc20ac0b4a0, 0x2, 0x2, 0x0, 0x0, 0x0)\r\n\t/usr/local/go/src/reflect/value.go:296 +0xbc fp=0xc20a9eed90 sp=0xc20a9eed30\r\ntext/template.(*state).evalCall(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0x5aef80, 0x65db38, 0x13, 0x7f4662598030, 0xc20803d230, 0xc20800f2fd, ...)\r\n\t/usr/local/go/src/text/template/exec.go:567 +0xaa4 fp=0xc20a9eef88 sp=0xc20a9eed90\r\ntext/template.(*state).evalFunction(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0xc20803d260, 0x7f4662598030, 0xc20803d230, 0xc20800a4e0, 0x2, 0x2, ...)\r\n\t/usr/local/go/src/text/template/exec.go:459 +0x33b fp=0xc20a9ef0d0 sp=0xc20a9eef88\r\ntext/template.(*state).evalCommand(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0xc20803d230, 0x55ce20, 0xc20ac0b488, 0x57, 0x0, 0x0, ...)\r\n\t/usr/local/go/src/text/template/exec.go:359 +0x210 fp=0xc20a9ef200 sp=0xc20a9ef0d0\r\ntext/template.(*state).evalPipeline(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0xc2080344b0, 0x55ce20, 0xc20ac0b488, 0x57)\r\n\t/usr/local/go/src/text/template/exec.go:332 +0x1a8 fp=0xc20a9ef3a0 sp=0xc20a9ef200\r\ntext/template.(*state).walk(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0x7f466273ad38, 0xc20803d320)\r\n\t/usr/local/go/src/text/template/exec.go:167 +0x145 fp=0xc20a9ef4f0 sp=0xc20a9ef3a0\r\ntext/template.(*state).walk(0xc20ac08a40, 0x56d800, 0xc20ac12020, 0x59, 0x7f4662597fa0, 0xc20803c960)\r\n\t/usr/local/go/src/text/template/exec.go:175 +0x862 fp=0xc20a9ef640 sp=0xc20a9ef4f0\r\ntext/template.(*Template).Execute(0xc208038440, 0x7f4662597f78, 0xc20803e008, 0x56d800, 0xc20ac12020, 0x0, 0x0)\r\n\t/usr/local/go/src/text/template/exec.go:155 +0x3f2 fp=0xc20a9ef848 sp=0xc20a9ef640\r\nmain.run(0x0, 0x0)\r\n\t/home/akavel/gopath/src/CENSORED/tools/go2xunit2/main.go:141 +0xac5 fp=0xc20a9efed0 sp=0xc20a9ef848\r\nmain.main()\r\n\t/home/akavel/gopath/src/CENSORED/tools/go2xunit2/main.go:70 +0x27 fp=0xc20a9eff98 sp=0xc20a9efed0\r\nruntime.main()\r\n\t/usr/local/go/src/runtime/proc.go:63 +0xf3 fp=0xc20a9effe0 sp=0xc20a9eff98\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc20a9effe8 sp=0xc20a9effe0\r\n\r\ngoroutine 2 [force gc (idle)]:\r\nruntime.gopark(0x42fe60, 0x703fc0, 0x60e670, 0xf)\r\n\t/usr/local/go/src/runtime/proc.go:130 +0x105 fp=0xc20801a798 sp=0xc20801a768\r\nruntime.goparkunlock(0x703fc0, 0x60e670, 0xf)\r\n\t/usr/local/go/src/runtime/proc.go:136 +0x48 fp=0xc20801a7c0 sp=0xc20801a798\r\nruntime.forcegchelper()\r\n\t/usr/local/go/src/runtime/proc.go:99 +0xce fp=0xc20801a7e0 sp=0xc20801a7c0\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc20801a7e8 sp=0xc20801a7e0\r\ncreated by runtime.initÂ·4\r\n\t/usr/local/go/src/runtime/proc.go:87 +0x25\r\n\r\ngoroutine 3 [runnable]:\r\nruntime.gopark(0x42fe60, 0x70b7a0, 0x6084f0, 0xd)\r\n\t/usr/local/go/src/runtime/proc.go:130 +0x105 fp=0xc20801df98 sp=0xc20801df68\r\nruntime.goparkunlock(0x70b7a0, 0x6084f0, 0xd)\r\n\t/usr/local/go/src/runtime/proc.go:136 +0x48 fp=0xc20801dfc0 sp=0xc20801df98\r\nruntime.bgsweep()\r\n\t/usr/local/go/src/runtime/mgc0.go:98 +0xbc fp=0xc20801dfe0 sp=0xc20801dfc0\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc20801dfe8 sp=0xc20801dfe0\r\ncreated by gc\r\n\t/usr/local/go/src/runtime/mgc0.c:1383\r\n\r\ngoroutine 4 [finalizer wait]:\r\nruntime.gopark(0x42fe60, 0x70b798, 0x60e010, 0xe)\r\n\t/usr/local/go/src/runtime/proc.go:130 +0x105 fp=0xc208018f30 sp=0xc208018f00\r\nruntime.goparkunlock(0x70b798, 0x60e010, 0xe)\r\n\t/usr/local/go/src/runtime/proc.go:136 +0x48 fp=0xc208018f58 sp=0xc208018f30\r\nruntime.runfinq()\r\n\t/usr/local/go/src/runtime/malloc.go:727 +0xba fp=0xc208018fe0 sp=0xc208018f58\r\nruntime.goexit()\r\n\t/usr/local/go/src/runtime/asm_amd64.s:2232 +0x1 fp=0xc208018fe8 sp=0xc208018fe0\r\ncreated by runtime.createfing\r\n\t/usr/local/go/src/runtime/malloc.go:707 +0x5e\r\n```\r\n",
	"user": {
		"login": "akavel",
		"id": 273837,
		"type": "User",
		"site_admin": false
	},
	"comments": 4,
	"closed_at": "2015-10-01T16:41:44Z",
	"created_at": "2015-09-23T17:05:31Z",
	"updated_at": "2015-10-01T16:41:44Z",
	"milestone": {
		"id": 1096159,
		"number": 24,
		"title": "Go1.6"
	}
}
