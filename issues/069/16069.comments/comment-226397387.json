{
	"id": 226397387,
	"body": "Goroutine 7, your cgo code is the one consuming all the CPU.\n\nOn Thu, 16 Jun 2016, 16:09 Zhiheng Huang \u003cnotifications@github.com\u003e wrote:\n\n\u003e @davecheney \u003chttps://github.com/davecheney\u003e I have pasted above.\n\u003e And I also found that it doesn't always hung. It may fatal.\n\u003e Like this:\n\u003e\n\u003e unexpected fault address 0x10\n\u003e fatal error: fault\n\u003e [signal 0xb code=0xf addr=0x10 pc=0x5321e8]\n\u003e\n\u003e goroutine 7 [running]:\n\u003e runtime.throw(0xc898f8, 0x5)\n\u003e     /usr/local/go/src/runtime/panic.go:547 +0x90 fp=0xc820043600 sp=0xc8200435e8\n\u003e runtime.sigpanic()\n\u003e     /usr/local/go/src/runtime/sigpanic_unix.go:27 +0x2ab fp=0xc820043650 sp=0xc820043600\n\u003e backend/gateway/cloud/driver.(*driverWithMeta).ReadFile(0x0, 0xc82025f5f0, 0x2a, 0xc82026da60, 0x5, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:52 +0x638 fp=0xc820043840 sp=0xc820043650\n\u003e backend/gateway/cloud/driver.(*retryManager).retry.func1(0xc8200f8ee0, 0x0, 0x0)\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:217 +0xcba fp=0xc820043cc0 sp=0xc820043840github.com/boltdb/bolt.(*DB).Update(0xc8200fe380, 0xc820043d50, 0x0, 0x0)\n\u003e     /root/go/src/backend/xvendor/src/github.com/boltdb/bolt/db.go:573 +0xdb fp=0xc820043d28 sp=0xc820043cc0\n\u003e backend/gateway/cloud/driver.(*retryManager).retry(0xc820252640, 0x0, 0x0)\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:237 +0x84 fp=0xc820043d78 sp=0xc820043d28\n\u003e backend/gateway/cloud/driver.(*retryManager).run(0xc820252640)\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:119 +0x30d fp=0xc820043f98 sp=0xc820043d78\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1 fp=0xc820043fa0 sp=0xc820043f98\n\u003e created by backend/gateway/cloud/driver.newRetryManager\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:322 +0x1a2\n\u003e\n\u003e goroutine 1 [IO wait]:\n\u003e net.runtime_pollWait(0x7f5e6f64afe8, 0x72, 0x0)\n\u003e     /usr/local/go/src/runtime/netpoll.go:160 +0x60\n\u003e net.(*pollDesc).Wait(0xc82027d2c0, 0x72, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/fd_poll_runtime.go:73 +0x3a\n\u003e net.(*pollDesc).WaitRead(0xc82027d2c0, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/fd_poll_runtime.go:78 +0x36\n\u003e net.(*netFD).accept(0xc82027d260, 0x0, 0x7f5e6f64b0d0, 0xc82027ac00)\n\u003e     /usr/local/go/src/net/fd_unix.go:426 +0x27c\n\u003e net.(*TCPListener).AcceptTCP(0xc820022248, 0x1, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/tcpsock_posix.go:254 +0x4d\n\u003e net.(*TCPListener).Accept(0xc820022248, 0x0, 0x0, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/tcpsock_posix.go:264 +0x3d\n\u003e net/http.(*Server).Serve(0xc820059a80, 0x7f5e6f64a068, 0xc820022248, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/http/server.go:2117 +0x129github.com/braintree/manners.(*GracefulServer).Serve(0xc820056e10, 0x7f5e6f64a068, 0xc820022248, 0x0, 0x0)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:222 +0x2fd\n\u003e\n\u003e github.com/braintree/manners.(*GracefulServer).ListenAndServe(0xc820056e10, 0x0, 0x0)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:115 +0x124\n\u003e backend/app/cloud.Start()\n\u003e     /root/go/src/backend/app/cloud/application.go:92 +0xa3d\n\u003e main.main()\n\u003e     /root/go/src/backend/cmd/putong-cloud-service/main.go:10 +0x38\n\u003e\n\u003e goroutine 17 [syscall, locked to thread]:\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1\n\u003e\n\u003e goroutine 6 [syscall]:\n\u003e os/signal.signal_recv(0x0)\n\u003e     /usr/local/go/src/runtime/sigqueue.go:116 +0x132\n\u003e os/signal.loop()\n\u003e     /usr/local/go/src/os/signal/signal_unix.go:22 +0x18\n\u003e created by os/signal.init.1\n\u003e     /usr/local/go/src/os/signal/\n\u003e\n\u003e signal_unix.go:28 +0x37\n\u003e\n\u003e goroutine 8 [select, locked to thread]:\n\u003e runtime.gopark(0xdb2ba0, 0xc820020f28, 0xc8d5c0, 0x6, 0x18, 0x2)\n\u003e     /usr/local/go/src/runtime/proc.go:262 +0x163\n\u003e runtime.selectgoImpl(0xc820020f28, 0x0, 0x18)\n\u003e     /usr/local/go/src/runtime/select.go:392 +0xa67\n\u003e runtime.selectgo(0xc820020f28)\n\u003e     /usr/local/go/src/runtime/select.go:215 +0x12\n\u003e runtime.ensureSigM.func1()\n\u003e     /usr/local/go/src/runtime/signal1_unix.go:279 +0x358\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1\n\u003e\n\u003e goroutine 9 [chan receive]:\n\u003e backend/app/cloud.Start.func1(0xc820013500, 0xc820056e10)\n\u003e     /root/go/src/backend/app/cloud/application.go:81 +0x52\n\u003e created by backend/app/cloud.Start\n\u003e     /root/go/src/backend/app/cloud/application.go:84 +0x73b\n\u003e\n\u003e goroutine 10 [chan send]:github.com/braintree/manners.(*GracefulServer).Serve.func1(0xc820056e10, 0xc82027ab80, 0x7f5e6f64a068, 0xc820022248)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:159 +0x4e\n\u003e created by github.com/braintree/manners.(*GracefulServer).Serve\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:164 +0x14e\n\u003e\n\u003e If it hung, it will be like this:\n\u003e\n\u003e ^\\SIGQUIT: quit\n\u003e PC=0x47853d m=2\n\u003e\n\u003e goroutine 0 [idle]:\n\u003e runtime.usleep(0x2710, 0x0, 0x534b486a3601, 0x7f01, 0x2710004426b7, 0x14587b5e3b9ef151, 0x45d964b800, 0x0, 0x534c6e279b9d, 0x0, ...)\n\u003e     /usr/local/go/src/runtime/sys_linux_amd64.s:95 +0x2d\n\u003e runtime.sysmon()\n\u003e     /usr/local/go/src/runtime/proc.go:3468 +0x9d\n\u003e runtime.mstart1()\n\u003e     /usr/local/go/src/runtime/proc.go:1098 +0xec\n\u003e runtime.mstart()\n\u003e     /usr/local/go/src/runtime/proc.go:1068 +0x72\n\u003e\n\u003e goroutine 1 [IO wait]:\n\u003e net.runtime_pollWait(0x7f468b452fe8, 0x72, 0x0)\n\u003e     /usr/local/go/src/runtime/netpoll.go:160 +0x60\n\u003e net.(*pollDesc).Wait(0xc82027d2c0, 0x72, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/fd_poll_runtime.go:73 +0x3a\n\u003e net.(*pollDesc).WaitRead(0xc82027d2c0, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/fd_poll_runtime.go:78 +0x36\n\u003e net.(*netFD).accept(0xc82027d260, 0x0, 0x7f468b4530d0, 0xc82027abc0)\n\u003e     /usr/local/go/src/net/fd_unix.go:426 +0x27c\n\u003e net.(*TCPListener).AcceptTCP(0xc820022238, 0x1, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/tcpsock_posix.go:254 +0x4d\n\u003e net.(*TCPListener).Accept(0xc820022238, 0x0, 0x0, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/tcpsock_posix.go:264 +0x3d\n\u003e net/http.(*Server).Serve(0xc820059a80, 0x7f468b452068, 0xc820022238, 0x0, 0x0)\n\u003e     /usr/local/go/src/net/http/server.go:2117 +0x129github.com/braintree/manners.(*GracefulServer).Serve(0xc820056e10, 0x7f468b452068, 0xc820022238, 0x0, 0x0)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:222 +0x2fd\n\u003e\n\u003e github.com/braintree/manners.(*GracefulServer).ListenAndServe(0xc820056e10, 0x0, 0x0)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:115 +0x124\n\u003e backend/app/cloud.Start()\n\u003e     /root/go/src/backend/app/cloud/application.go:92 +0xa3d\n\u003e main.main()\n\u003e     /root/go/src/backend/cmd/putong-cloud-service/main.go:10 +0x38\n\u003e\n\u003e goroutine 17 [syscall, locked to thread]:\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_\n\u003e\n\u003e amd64.s:1998 +0x1\n\u003e\n\u003e goroutine 7 [running]:\n\u003e     goroutine running on other thread; stack unavailable\n\u003e created by backend/gateway/cloud/driver.newRetryManager\n\u003e     /root/go/src/backend/gateway/cloud/driver/driver.go:322 +0x1a2\n\u003e\n\u003e goroutine 6 [syscall]:\n\u003e os/signal.signal_recv(0x0)\n\u003e     /usr/local/go/src/runtime/sigqueue.go:116 +0x132\n\u003e os/signal.loop()\n\u003e     /usr/local/go/src/os/signal/signal_unix.go:22 +0x18\n\u003e created by os/signal.init.1\n\u003e     /usr/local/go/src/os/signal/signal_unix.go:28 +0x37\n\u003e\n\u003e goroutine 8 [select, locked to thread]:\n\u003e runtime.gopark(0xdb2ba0, 0xc820020f28, 0xc8d5c0, 0x6, 0x18, 0x2)\n\u003e     /usr/local/go/src/runtime/proc.go:262 +0x163\n\u003e runtime.selectgoImpl(0xc820020f28, 0x0, 0x18)\n\u003e     /usr/local/go/src/runtime/select.go:392 +0xa67\n\u003e runtime.selectgo(0xc820020f28)\n\u003e     /usr/local/go/src/runtime/select.go:215 +0x12\n\u003e runtime.ensureSigM.func1()\n\u003e     /usr/local/go/src/runtime/signal1_unix.go:279 +0x358\n\u003e runtime.goexit()\n\u003e     /usr/local/go/src/runtime/asm_amd64.s:1998 +0x1\n\u003e\n\u003e goroutine 9 [chan receive]:\n\u003e backend/app/cloud.Start.func1(0xc820013500, 0xc820056e10)\n\u003e     /root/go/src/backend/app/cloud/application.go:81 +0x52\n\u003e created by backend/app/cloud.Start\n\u003e     /root/go/src/backend/app/cloud/application.go:84 +0x73b\n\u003e\n\u003e goroutine 10 [chan send]:github.com/braintree/manners.(*GracefulServer).Serve.func1(0xc820056e10, 0xc82027ab40, 0x7f468b452068, 0xc820022238)\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:159 +0x4e\n\u003e created by github.com/braintree/manners.(*GracefulServer).Serve\n\u003e     /root/go/src/backend/xvendor/src/github.com/braintree/manners/server.go:164 +0x14e\n\u003e\n\u003e rax    0xfffffffffffffffc\n\u003e rbx    0x18d\n\u003e rcx    0x47853d\n\u003e rdx    0x0\n\u003e rdi    0x0\n\u003e rsi    0x0\n\u003e rbp    0x534b45919b6b\n\u003e rsp    0x7f4688404d48\n\u003e r8     0x7f4688404d48\n\u003e r9     0x394d78\n\u003e r10    0x0\n\u003e r11    0x246\n\u003e r12    0x0\n\u003e r13    0x7f46884059c0\n\u003e r14    0x7f4688405700\n\u003e r15    0x8\n\u003e rip    0x47853d\n\u003e rflags 0x246\n\u003e cs     0x33\n\u003e fs     0x0\n\u003e gs     0x0\n\u003e\n\u003e â€”\n\u003e You are receiving this because you were mentioned.\n\u003e Reply to this email directly, view it on GitHub\n\u003e \u003chttps://github.com/golang/go/issues/16069#issuecomment-226396351\u003e, or mute\n\u003e the thread\n\u003e \u003chttps://github.com/notifications/unsubscribe/AAAcAw6TexyQd9JZ4la0_rHU5O2NPGluks5qMOiEgaJpZM4I2Iwt\u003e\n\u003e .\n\u003e\n",
	"user": {
		"login": "davecheney",
		"id": 7171,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-06-16T06:16:36Z",
	"updated_at": "2016-06-16T06:16:36Z"
}
