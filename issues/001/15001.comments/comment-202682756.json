{
	"id": 202682756,
	"body": "I've uploaded https://go-review.googlesource.com/#/c/21245 which fixes the compilation failure.  The result now is:\r\n\r\n\t0x0000 00000 (/tmp/repro.go:3)\tTEXT\t\"\".f(SB), $128-16\r\n\t0x0000 00000 (/tmp/repro.go:3)\tMOVQ\t(TLS), CX\r\n\t0x0009 00009 (/tmp/repro.go:3)\tCMPQ\tSP, 16(CX)\r\n\t0x000d 00013 (/tmp/repro.go:3)\tJLS\t115\r\n\t0x000f 00015 (/tmp/repro.go:3)\tSUBQ\t$128, SP\r\n\t0x0016 00022 (/tmp/repro.go:3)\tFUNCDATA\t$0, gclocals·23e8278e2b69a3a75fa59b23c49ed6ad(SB)\r\n\t0x0016 00022 (/tmp/repro.go:3)\tFUNCDATA\t$1, gclocals·33cdeccccebe80329f1fdbee7f5874cb(SB)\r\n\t0x0016 00022 (/tmp/repro.go:4)\tLEAQ\t\"\".b(SP), DI\r\n\t0x001a 00026 (/tmp/repro.go:4)\tXORPS\tX0, X0\r\n\t0x001d 00029 (/tmp/repro.go:4)\tDUFFZERO\t$266\r\n\t0x0022 00034 (/tmp/repro.go:5)\tMOVQ\t\"\".i+136(FP), CX\r\n\t0x002a 00042 (/tmp/repro.go:5)\tCMPQ\tCX, $128\r\n\t0x0031 00049 (/tmp/repro.go:5)\tJHI\t$0, 108\r\n\t0x0033 00051 (/tmp/repro.go:5)\tLEAQ\t-128(CX), AX\r\n\t0x0037 00055 (/tmp/repro.go:5)\tNEGQ\tAX\r\n\t0x003a 00058 (/tmp/repro.go:5)\tCMPQ\tAX, $0\r\n\t0x003e 00062 (/tmp/repro.go:5)\tJEQ\t$0, 104\r\n\t0x0040 00064 (/tmp/repro.go:6)\tCMPQ\tAX, $121\r\n\t0x0044 00068 (/tmp/repro.go:6)\tJLS\t$0, 97\r\n\t0x0046 00070 (/tmp/repro.go:6)\tMOVWLZX\t\"\".b+121(SP)(CX*1), CX\r\n\t0x004b 00075 (/tmp/repro.go:6)\tCMPQ\tAX, $122\r\n\t0x004f 00079 (/tmp/repro.go:6)\tJLS\t$0, 97\r\n\t0x0051 00081 (/tmp/repro.go:6)\tMOVW\tCX, \"\".~r1+144(FP)\r\n\t0x0059 00089 (/tmp/repro.go:6)\tADDQ\t$128, SP\r\n\t0x0060 00096 (/tmp/repro.go:6)\tRET\r\n\t0x0061 00097 (/tmp/repro.go:6)\tPCDATA\t$0, $0\r\n\t0x0061 00097 (/tmp/repro.go:6)\tCALL\truntime.panicindex(SB)\r\n\t0x0066 00102 (/tmp/repro.go:6)\tUNDEF\r\n\t0x0068 00104 (/tmp/repro.go:5)\tMOVQ\t$0, CX\r\n\t0x006a 00106 (/tmp/repro.go:6)\tJMP\t64\r\n\t0x006c 00108 (/tmp/repro.go:5)\tPCDATA\t$0, $0\r\n\t0x006c 00108 (/tmp/repro.go:5)\tCALL\truntime.panicslice(SB)\r\n\t0x0071 00113 (/tmp/repro.go:5)\tUNDEF\r\n\t0x0073 00115 (/tmp/repro.go:5)\tNOP\r\n\t0x0073 00115 (/tmp/repro.go:3)\tCALL\truntime.morestack_noctxt(SB)\r\n\t0x0078 00120 (/tmp/repro.go:3)\tJMP\t0\r\n\r\nwhich translates to roughly:\r\n\r\n    cx = i\r\n    if cx \u003e 128 { panicslice() }\r\n    ax = 128 - cx\r\n    if ax == 0 { cx = 0 }\r\n    if ax \u003c= 121 { panicindex() }\r\n    cx = *(sp + 121 + cx)\r\n    if ax \u003c= 122 { panicindex() }\r\n    return cx\r\n\r\nNotably the load is occurring before we've validated that the slice length is \u003e122.  It's possible this could result in triggering a SIGSEGV instead of a panicindex failure.\r\n\r\nAlso, I can't quite make sense of the `if ax == 0 { cx = 0 }` logic, but that's present even before CL 21005.",
	"user": {
		"login": "mdempsky",
		"id": 38349,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-03-29T03:02:42Z",
	"updated_at": "2016-03-29T03:02:42Z"
}
