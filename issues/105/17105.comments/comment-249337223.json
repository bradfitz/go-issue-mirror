{
	"id": 249337223,
	"body": "I'll work on both those things. I just finally now got it to reproduce by hand in a shell.\r\n\r\nI made the buildlet log the environment it runs the test with:\r\n\r\nIn a browser, watching the hacked-up coordinator:\r\n```\r\n:: Running /workdir/go/bin/go with args [\"/workdir/go/bin/go\" \"tool\" \"dist\" \"test\" \"--no-rebuild\" \"--banner=XXXBANNERXXX:\" \"go_test:runtime\"] and env [\"PATH=/workdir/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" \"GOROOT_BOOTSTRAP=/usr/local/go\" \"WORKDIR=/workdir\" \"GO_BUILDER_NAME=linux-arm\" \"GO_BUILDER_FLAKY_NET=1\" \"GOROOT=/workdir/go\"] in dir /workdir\r\n\r\n--- FAIL: TestCgoExternalThreadPanic (0.01s)\r\n\tcrash_test.go:105: testprogcgo CgoExternalThreadPanic exit status: signal: segmentation fault\r\n\tcrash_cgo_test.go:72: want failure containing \"panic: BOOM\". output:\r\n\t\t\r\n--- FAIL: TestEnsureDropM (0.01s)\r\n\tcrash_test.go:105: testprogcgo EnsureDropM exit status: signal: segmentation fault\r\n\tcrash_cgo_test.go:154: expected \"OK\\n\", got \r\nFAIL\r\nFAIL\truntime\t78.894s\r\n2016/09/24 01:31:09 Failed: exit status 1\r\n:: Running /workdir/go/bin/go with args [\"/workdir/go/bin/go\" \"tool\" \"dist\" \"test\" \"--no-rebuild\" \"--banner=XXXBANNERXXX:\" \"go_test:runtime\"] and env [\"PATH=/workdir/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin\" \"GOROOT_BOOTSTRAP=/usr/local/go\" \"WORKDIR=/workdir\" \"GO_BUILDER_NAME=linux-arm\" \"GO_BUILDER_FLAKY_NET=1\" \"GOROOT=/workdir/go\"] in dir /workdir\r\n```\r\n\r\nAnd then I was able to make it do it by hand:\r\n\r\nIn ssh:\r\n```\r\nroot@buildlet-prep:/workdir# PATH=/workdir/go/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin GOROOT_BOOTSTRAP=/usr/local/go WORKDIR=/workdir GO_BUILDER_NAME=linux-arm GO_BUILDER_FLAKY_NET=1 GOROOT=/workdir/go /workdir/go/bin/go tool dist test --no-rebuild go_test:runtime\r\n\r\n##### Testing packages.\r\n--- FAIL: TestCgoExternalThreadPanic (0.01s)\r\n\tcrash_test.go:105: testprogcgo CgoExternalThreadPanic exit status: signal: segmentation fault\r\n\tcrash_cgo_test.go:72: want failure containing \"panic: BOOM\". output:\r\n\t\t\r\n--- FAIL: TestEnsureDropM (0.01s)\r\n\tcrash_test.go:105: testprogcgo EnsureDropM exit status: signal: segmentation fault\r\n\tcrash_cgo_test.go:154: expected \"OK\\n\", got \r\nFAIL\r\nFAIL\truntime\t65.839s\r\n2016/09/24 01:36:48 Failed: exit status 1\r\n```\r\n\r\nSo now I can actually modify things easily and see what's happening I hope.",
	"user": {
		"login": "bradfitz",
		"id": 2621,
		"type": "User",
		"site_admin": false
	},
	"created_at": "2016-09-24T01:38:30Z",
	"updated_at": "2016-09-24T01:38:30Z"
}
