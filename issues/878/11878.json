{
	"id": 97384824,
	"number": 11878,
	"state": "closed",
	"title": "net: TestDialParallel leaks worker goroutines and inflight sockets",
	"body": "git rev-parse HEAD\r\nfb738b38c0bc1570286405ab57fe6b8cda655714\r\n```\r\ngo test -v -run=TestDialParallel\r\n=== RUN   TestDialParallel\r\n--- PASS: TestDialParallel (1.91s)\r\nPASS\r\nRunning goroutines:\r\nnet.runtime_pollWait(0x582e88, 0x77, 0xc820108570)\r\n        /go/src/runtime/netpoll.go:157 +0x60\r\nnet.(*pollDesc).Wait(0xc820106a00, 0x77, 0x0, 0x0)\r\n        /go/src/net/fd_poll_runtime.go:73 +0x3a\r\nnet.(*pollDesc).WaitWrite(0xc820106a00, 0x0, 0x0)\r\n        /go/src/net/fd_poll_runtime.go:82 +0x36\r\nnet.(*netFD).connect(0xc8201069a0, 0x0, 0x0, 0x582728, 0xc8201043e0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/fd_unix.go:114 +0x1f6\r\nnet.(*netFD).dial(0xc8201069a0, 0x582840, 0x0, 0x582840, 0xc8201030b0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/sock_posix.go:137 +0x351\r\nnet.socket(0x318ec8, 0x3, 0x2, 0x1, 0x0, 0xc820103000, 0x582840, 0x0, 0x582840, 0xc8201030b0, ...)\r\n        /go/src/net/sock_posix.go:89 +0x411\r\nnet.internetSocket(0x318ec8, 0x3, 0x582840, 0x0, 0x582840, 0xc8201030b0, 0x0, 0x0, 0x0, 0x1, ...)\r\n        /go/src/net/ipsock_posix.go:160 +0x141\r\nnet.dialTCP(0x318ec8, 0x3, 0x0, 0xc8201030b0, 0x0, 0x0, 0x0, 0xc81ffff66b, 0x0, 0x0)\r\n        /go/src/net/tcpsock_posix.go:171 +0x11e\r\nnet.slowDialTCP(0x318ec8, 0x3, 0x0, 0xc8201030b0, 0x0, 0xc800000000, 0x0, 0x52e000, 0x0, 0x0)\r\n        /go/src/net/dial_test.go:234 +0x8e\r\nnet.dialSingle(0xc820114100, 0x582590, 0xc8201030b0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:364 +0x3f5\r\nnet.dialSerial.func1(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:336 +0x75\r\nnet.dial(0x318ec8, 0x3, 0x582590, 0xc8201030b0, 0xc82011dde0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\r\n        /go/src/net/fd_unix.go:40 +0x60\r\nnet.dialSerial(0xc820114100, 0xc820104360, 0x2, 0x2, 0xc82010c5a0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:338 +0x760\r\nnet.dialSerialAsync(0xc820114100, 0xc820104360, 0x2, 0x2, 0x0, 0xc82010c5a0, 0xc82010c540)\r\n        /go/src/net/dial.go:299 +0xe5\r\ncreated by net.dialParallel\r\n        /go/src/net/dial.go:257 +0x118\r\nnet.runtime_pollWait(0x583188, 0x77, 0xc820108200)\r\n        /go/src/runtime/netpoll.go:157 +0x60\r\nnet.(*pollDesc).Wait(0xc820106450, 0x77, 0x0, 0x0)\r\n        /go/src/net/fd_poll_runtime.go:73 +0x3a\r\nnet.(*pollDesc).WaitWrite(0xc820106450, 0x0, 0x0)\r\n        /go/src/net/fd_poll_runtime.go:82 +0x36\r\nnet.(*netFD).connect(0xc8201063f0, 0x0, 0x0, 0x582728, 0xc820104180, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/fd_unix.go:114 +0x1f6\r\nnet.(*netFD).dial(0xc8201063f0, 0x582840, 0x0, 0x582840, 0xc820102600, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/sock_posix.go:137 +0x351\r\nnet.socket(0x318ec8, 0x3, 0x2, 0x1, 0x0, 0xc820102600, 0x582840, 0x0, 0x582840, 0xc820102600, ...)\r\n        /go/src/net/sock_posix.go:89 +0x411\r\nnet.internetSocket(0x318ec8, 0x3, 0x582840, 0x0, 0x582840, 0xc820102600, 0x0, 0x0, 0x0, 0x1, ...)\r\n        /go/src/net/ipsock_posix.go:160 +0x141\r\nnet.dialTCP(0x318ec8, 0x3, 0x0, 0xc820102600, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/tcpsock_posix.go:171 +0x11e\r\nnet.slowDialTCP(0x318ec8, 0x3, 0x0, 0xc820102600, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial_test.go:234 +0x8e\r\nnet.dialSingle(0xc820114000, 0x582590, 0xc820102600, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:364 +0x3f5\r\nnet.dialSerial.func1(0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:336 +0x75\r\nnet.dial(0x318ec8, 0x3, 0x582590, 0xc820102600, 0xc82005fde0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\r\n        /go/src/net/fd_unix.go:40 +0x60\r\nnet.dialSerial(0xc820114000, 0xc8201081b0, 0x1, 0x1, 0xc82010c1e0, 0x0, 0x0, 0x0, 0x0)\r\n        /go/src/net/dial.go:338 +0x760\r\nnet.dialSerialAsync(0xc820114000, 0xc8201081b0, 0x1, 0x1, 0x0, 0xc82010c1e0, 0xc82010c180)\r\n        /go/src/net/dial.go:299 +0xe5\r\ncreated by net.dialParallel\r\n        /go/src/net/dial.go:257 +0x118\r\n\r\nInflight sockets:\r\n16: (inet4, stream, default): syscallerr=\u003cnil\u003e, socketerr=\u003cnil\u003e\r\n12: (inet4, stream, default): syscallerr=\u003cnil\u003e, socketerr=\u003cnil\u003e\r\n\r\nSocket statistical information:\r\n(inet4, stream, default): opened=26, connected=5, listened=14, accepted=5, closed=29, openfailed=0,\\\r\n connectfailed=12, listenfailed=0, acceptfailed=14, closefailed=0\r\n(inet6, stream, default): opened=22, connected=6, listened=13, accepted=6, closed=27, openfailed=0,\\\r\n connectfailed=9, listenfailed=0, acceptfailed=15, closefailed=0\r\n\r\nok      net     1.929s\r\n```\r\n\r\n@pmarks-net ",
	"user": {
		"login": "mikioh",
		"id": 92117,
		"type": "User",
		"site_admin": false
	},
	"labels": [
		{
			"name": "FrozenDueToAge"
		}
	],
	"comments": 2,
	"closed_at": "2015-07-28T05:04:47Z",
	"created_at": "2015-07-27T04:30:19Z",
	"updated_at": "2016-08-05T16:11:19Z",
	"milestone": {
		"id": 905105,
		"number": 1,
		"title": "Go1.5"
	}
}
