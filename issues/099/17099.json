{
	"id": 176908333,
	"number": 17099,
	"state": "open",
	"title": "runtime: TestChan failure on s390x",
	"body": "Seen once on the builder so far:  https://build.golang.org/log/4c0ec95e51e895280902515d8fa6c608487d01a3\r\n\r\nPossibly a subtle bug in the new SSA backend.\r\n\r\n```\r\n--- FAIL: TestChan (0.16s)\r\n\tssa_test.go:32: Failed: exit status 2:\r\n\t\tOut: \r\n\t\tStderr: # command-line-arguments\r\n\t\truntime: gp: gp=0xc420000340, goid=1, gp-\u003eatomicstatus=4097\r\n\t\truntime:  g:  g=0xc42004e1a0, goid=0,  g-\u003eatomicstatus=0\r\n\t\tfatal error: stopg: invalid status\r\n\t\t\r\n\t\truntime stack:\r\n\t\truntime.throw(0x206ed6, 0x15)\r\n\t\t\t/data/golang/workdir/go/src/runtime/panic.go:560 +0x9a fp=0xc42005fe10 sp=0xc42005fdf8\r\n\t\truntime.scang(0xc420000340, 0xc420017228)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:811 +0x29e fp=0xc42005fe40 sp=0xc42005fe10\r\n\t\truntime.markroot.func1()\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgcmark.go:245 +0x7a fp=0xc42005fe78 sp=0xc42005fe40\r\n\t\truntime.systemstack(0xc42005fed8)\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:263 +0xce fp=0xc42005fe80 sp=0xc42005fe78\r\n\t\truntime.markroot(0xc420017228, 0x13002d7070)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgcmark.go:250 +0x34a fp=0xc42005fef0 sp=0xc42005fe80\r\n\t\truntime.gcDrain(0xc420017228, 0x0)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgcmark.go:972 +0xea fp=0xc42005ff38 sp=0xc42005fef0\r\n\t\truntime.gcMark(0x69d371484de07)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1585 +0x11a fp=0xc42005ff78 sp=0xc42005ff38\r\n\t\truntime.gcMarkTermination.func1()\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1186 +0x34 fp=0xc42005ff88 sp=0xc42005ff78\r\n\t\truntime.systemstack(0xc420018a00)\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:250 +0x9a fp=0xc42005ff90 sp=0xc42005ff88\r\n\t\truntime.mstart()\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:1079 fp=0xc42005ff90 sp=0xc42005ff90\r\n\t\t\r\n\t\tgoroutine 5 [garbage collection]:\r\n\t\truntime.systemstack_switch()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:204 +0x10 fp=0xc420023d28 sp=0xc420023d20\r\n\t\truntime.gcMarkTermination()\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1194 +0x11c fp=0xc420023f20 sp=0xc420023d28\r\n\t\truntime.gcMarkDone()\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1158 +0x234 fp=0xc420023f40 sp=0xc420023f20\r\n\t\truntime.gcBgMarkWorker(0xc420016000)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1505 +0x316 fp=0xc420023fb0 sp=0xc420023f40\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc420023fb0 sp=0xc420023fb0\r\n\t\tcreated by runtime.gcBgMarkStartWorkers\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1349 +0xb6\r\n\t\t\r\n\t\tgoroutine 1 [runnable]:\r\n\t\tcmd/link/internal/ld.putelfsym(0xc42049a000, 0x0, 0x202154, 0x6, 0x6d, 0x30, 0x0, 0x0, 0x0)\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/ld/symtab.go:79 fp=0xc42005da50 sp=0xc42005da50\r\n\t\tcmd/link/internal/ld.genasmsym(0xc42049a000, 0x20f568)\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/ld/lib.go:1913 +0x25a fp=0xc42005db80 sp=0xc42005da50\r\n\t\tcmd/link/internal/ld.Asmelfsym(0xc42049a000)\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/ld/symtab.go:207 +0xd8 fp=0xc42005dbb8 sp=0xc42005db80\r\n\t\tcmd/link/internal/s390x.asmb(0xc42049a000)\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/s390x/asm.go:566 +0x778 fp=0xc42005dd48 sp=0xc42005dbb8\r\n\t\tcmd/link/internal/ld.Main()\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/ld/main.go:203 +0xb4a fp=0xc42005dec8 sp=0xc42005dd48\r\n\t\tcmd/link/internal/s390x.Main()\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/internal/s390x/obj.go:44 +0x24 fp=0xc42005ded0 sp=0xc42005dec8\r\n\t\tmain.main()\r\n\t\t\t/data/golang/workdir/go/src/cmd/link/main.go:38 +0x3ca fp=0xc42005df48 sp=0xc42005ded0\r\n\t\truntime.main()\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:183 +0x23a fp=0xc42005df98 sp=0xc42005df48\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc42005df98 sp=0xc42005df98\r\n\t\t\r\n\t\tgoroutine 2 [force gc (idle)]:\r\n\t\truntime.gopark(0x20fac0, 0x2d67b0, 0x204e10, 0xf, 0x1400000000000000, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420022750 sp=0xc420022720\r\n\t\truntime.goparkunlock(0x2d67b0, 0x204e10, 0xf, 0x140000c420000340, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:265 +0x5a fp=0xc420022788 sp=0xc420022750\r\n\t\truntime.forcegchelper()\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:224 +0x94 fp=0xc4200227b8 sp=0xc420022788\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc4200227b8 sp=0xc4200227b8\r\n\t\tcreated by runtime.init.3\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:213 +0x30\r\n\t\t\r\n\t\tgoroutine 3 [GC sweep wait]:\r\n\t\truntime.gopark(0x20fac0, 0x2d6980, 0x2043fe, 0xd, 0x14000000000690e0, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420022f40 sp=0xc420022f10\r\n\t\truntime.goparkunlock(0x2d6980, 0x2043fe, 0xd, 0x1400000000000000, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:265 +0x5a fp=0xc420022f78 sp=0xc420022f40\r\n\t\truntime.bgsweep(0xc42004a000)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgcsweep.go:79 +0x124 fp=0xc420022fb0 sp=0xc420022f78\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc420022fb0 sp=0xc420022fb0\r\n\t\tcreated by runtime.gcenable\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:204 +0x5a\r\n\t\t\r\n\t\tgoroutine 4 [finalizer wait]:\r\n\t\truntime.gopark(0x20fac0, 0x303ef0, 0x20493e, 0xe, 0x1400000000000000, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420023708 sp=0xc4200236d8\r\n\t\truntime.goparkunlock(0x303ef0, 0x20493e, 0xe, 0x1400000000000000, 0x1)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:265 +0x5a fp=0xc420023740 sp=0xc420023708\r\n\t\truntime.runfinq()\r\n\t\t\t/data/golang/workdir/go/src/runtime/mfinal.go:158 +0xac fp=0xc4200237b8 sp=0xc420023740\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc4200237b8 sp=0xc4200237b8\r\n\t\tcreated by runtime.createfing\r\n\t\t\t/data/golang/workdir/go/src/runtime/mfinal.go:139 +0x7a\r\n\t\t\r\n\t\tgoroutine 6 [GC worker (idle)]:\r\n\t\truntime.gopark(0x20f968, 0xc420010540, 0x205120, 0x10, 0x1400000000000000, 0x0)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420024740 sp=0xc420024710\r\n\t\truntime.gcBgMarkWorker(0xc420017500)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1428 +0x108 fp=0xc4200247b0 sp=0xc420024740\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc4200247b0 sp=0xc4200247b0\r\n\t\tcreated by runtime.gcBgMarkStartWorkers\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1349 +0xb6\r\n\t\t\r\n\t\tgoroutine 7 [GC worker (idle)]:\r\n\t\truntime.gopark(0x20f968, 0xc420010550, 0x205120, 0x10, 0x1400000000000000, 0x0)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420024f40 sp=0xc420024f10\r\n\t\truntime.gcBgMarkWorker(0xc420018a00)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1428 +0x108 fp=0xc420024fb0 sp=0xc420024f40\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc420024fb0 sp=0xc420024fb0\r\n\t\tcreated by runtime.gcBgMarkStartWorkers\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1349 +0xb6\r\n\t\t\r\n\t\tgoroutine 8 [GC worker (idle)]:\r\n\t\truntime.gopark(0x20f968, 0xc420010560, 0x205120, 0x10, 0x1400000000000000, 0x0)\r\n\t\t\t/data/golang/workdir/go/src/runtime/proc.go:259 +0x15c fp=0xc420025740 sp=0xc420025710\r\n\t\truntime.gcBgMarkWorker(0xc42001a000)\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1428 +0x108 fp=0xc4200257b0 sp=0xc420025740\r\n\t\truntime.goexit()\r\n\t\t\t/data/golang/workdir/go/src/runtime/asm_s390x.s:1022 +0x2 fp=0xc4200257b0 sp=0xc4200257b0\r\n\t\tcreated by runtime.gcBgMarkStartWorkers\r\n\t\t\t/data/golang/workdir/go/src/runtime/mgc.go:1349 +0xb6\r\n\t\t\r\nFAIL\r\n```",
	"user": {
		"login": "mundaym",
		"id": 15000766,
		"type": "User",
		"site_admin": false
	},
	"comments": 2,
	"created_at": "2016-09-14T13:32:09Z",
	"updated_at": "2016-09-14T21:40:28Z",
	"milestone": {
		"id": 1709363,
		"number": 38,
		"title": "Go1.8"
	}
}
